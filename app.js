!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(2)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3).includeInNamespace(__webpack_require__(18)),__webpack_require__(114)},function(module,exports,__webpack_require__){var Neptune,Nvc,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Nvc||Neptune.addNamespace("Nvc",Nvc=function(superClass){function Nvc(){return Nvc.__super__.constructor.apply(this,arguments)}return extend(Nvc,superClass),Nvc}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)},function(module,exports,__webpack_require__){(function(global){var Base,Neptune,NeptuneLib,isFunction,isPlainArray,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__webpack_require__(6),__webpack_require__(7),isFunction=function(f){return"function"==typeof f},isPlainArray=function(o){return o.constructor===Array},NeptuneLib=null,Base=function(){function Base(){}var excludedPropNames;return Base.allNamespaces={},Base.getAllNamespacePaths=function(){return Object.keys(Base.allNamespaces).sort()},Base.toString=function(){return this.namespacePath},Base.inspect=function(){return this.namespacePath},Base._name="Base",Base.namespacePath="Neptune.Base",Base.namespace=null,Base.namespaces={},Base.modules={},Base.getNamespacePath=function(){return this.namespacePath},Base.getNamespaceNames=function(){return Object.keys(this.namespaces).sort()},Base.getModuleNames=function(){return Object.keys(this.modules).sort()},Base.getNeptuneLib=function(){return NeptuneLib||(NeptuneLib=__webpack_require__(8))},Base.getInspectedObjects=function(includeModules){var name,namespace,obj;return null==includeModules&&(includeModules=!0),obj={},obj[""+this.namespacePath]=this.getNeptuneLib().merge(this.version?{version:this.version}:void 0,function(){var ref,results;ref=this.namespaces,results=[];for(name in ref)namespace=ref[name],results.push(namespace.getInspectedObjects(includeModules));return results}.call(this),includeModules&&this.getModuleNames().length>0?{modules:this.getModuleNames().join(", ")}:void 0),obj},Base.addNamespace=function(name,namespace){return this.allNamespaces[namespace.namespacePath]=this.namespaces[name]=this[name]=namespace._init(name,this)},Base.addModules=function(map){var module,name;for(name in map)module=map[name],this._setChildNamespaceProps(name,module),name.match(/^-/)||(this.modules[name]=this[name]=module);return this},Base.includeInNamespace=function(){var arg,args,fromObject,i,j,k,l,len,len1,propName,ref,ref1,v;for(args=1===arguments.length&&isPlainArray(arguments[0])?arguments[0]:arguments,j=0,len=args.length;j<len;j++)if(arg=args[j])if(isPlainArray(arg))for(fromObject=arg[0],i=k=1,ref=arg.length;1<=ref?k<ref:k>ref;i=1<=ref?++k:--k)for(ref1=arg[i].match(/[0-9a-z_]+/gi),l=0,len1=ref1.length;l<len1;l++)propName=ref1[l],this._addToNamespace(propName,fromObject);else for(propName in arg)v=arg[propName],this._addToNamespace(propName,arg);return this},Base._setChildNamespaceProps=function(name,child){if(isFunction(child))return isFunction(child["class"])&&this._setChildNamespaceProps(name,child["class"]),child.namespace=this,child.namespacePath=this.namespacePath+"."+name},Base._init=function(name,namespace1){return this.namespace=namespace1,this._name=name,this.modules={},this.namespaces={},this.namespace._setChildNamespaceProps(name,this),this},excludedPropNames=["__super__"].concat(Object.keys(Base)),Base._addToNamespace=function(propName,addingFrom){var addingFromString,value;if("inspect"===propName&&(value=addingFrom[propName]).length>0)return this[propName]=value;if(!(indexOf.call(excludedPropNames,propName)>=0)&&(value=addingFrom[propName]))return this[propName]?(this[propName]!==value&&(addingFromString=addingFrom.namespacePath||addingFrom.propName||Object.keys(addingFrom).join(", "),console.error(this.namespacePath+" already has key: "+propName+". Adding from: "+addingFromString)),this[propName]):this[propName]=value},Base}(),module.exports=global.Neptune=Neptune=function(superClass){function Neptune(){return Neptune.__super__.constructor.apply(this,arguments)}var _package;return extend(Neptune,superClass),Neptune.Base=Base,Neptune.namespacePath="Neptune",Neptune.namespace=null,Neptune.isNamespace=function(klass){return(null!=klass?klass.prototype:void 0)instanceof Base},Neptune.isNode=__webpack_require__(16),Neptune["package"]=_package=__webpack_require__(17),Neptune.version=_package.version,Neptune}(Base),Base.namespace=Neptune}).call(exports,function(){return this}())},function(module,exports){(function(global){"undefined"!=typeof global&&null!==global?global.self=global:"undefined"!=typeof self&&null!==self&&(self.global=self)}).call(exports,function(){return this}())},function(module,exports){(function(global){null==function(){}.name&&Object.defineProperty(global.Function.prototype,"name",{get:function(){var matches,name;return name=(matches=this.toString().match(/^\s*function\s*([^\s(]+)/))?matches[1]:"",Object.defineProperty(this,"name",{value:name}),name}}),global.Function.prototype.getName=function(){return this._name||this.name||"anonymousFunction"}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){module.exports=__webpack_require__(9)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(10).includeInNamespace(__webpack_require__(11)).addModules({ArrayCompactFlatten:__webpack_require__(12),Merge:__webpack_require__(14),StringCase:__webpack_require__(13),Types:__webpack_require__(15)})},function(module,exports,__webpack_require__){var Neptune,NeptuneLib,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.NeptuneLib||Neptune.addNamespace("NeptuneLib",NeptuneLib=function(superClass){function NeptuneLib(){return NeptuneLib.__super__.constructor.apply(this,arguments)}return extend(NeptuneLib,superClass),NeptuneLib}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[__webpack_require__(12),__webpack_require__(13),__webpack_require__(14)]},function(module,exports){var ArrayCompactFlatten;module.exports=ArrayCompactFlatten=function(){function ArrayCompactFlatten(){}var arraySlice,compact,compactFlattenIfNeeded,deepArrayEach,doFlattenInternal,flatten,isArguments,isArrayOrArguments,keepAll,keepUnlessNullOrUndefined,needsFlatteningOrCompacting;return ArrayCompactFlatten.isArguments=isArguments=function(o){return o.constructor===Object&&"function"==typeof o.callee&&"number"==typeof o.length},ArrayCompactFlatten.isArrayOrArguments=isArrayOrArguments=function(o){return o&&(o.constructor===Array||isArguments(o))},ArrayCompactFlatten.needsFlatteningOrCompacting=needsFlatteningOrCompacting=function(array,keepTester){var a,i,len;for(i=0,len=array.length;i<len;i++)if(a=array[i],isArrayOrArguments(a)||!keepTester(a))return!0;return!1},ArrayCompactFlatten.keepUnlessNullOrUndefined=keepUnlessNullOrUndefined=function(a){return null!==a&&void 0!==a},ArrayCompactFlatten.compact=compact=function(array,keepTester){var a,i,len;for(null==keepTester&&(keepTester=keepUnlessNullOrUndefined),i=0,len=array.length;i<len;i++)if(a=array[i],!keepTester(a))return function(){var j,len1,results;for(results=[],j=0,len1=array.length;j<len1;j++)a=array[j],keepTester(a)&&results.push(a);return results}();return array},ArrayCompactFlatten.flatten=flatten=function(firstArg){return compactFlattenIfNeeded(1===arguments.length?isArrayOrArguments(firstArg)?firstArg:[firstArg]:arguments)},ArrayCompactFlatten.deepArrayEach=deepArrayEach=function(array,f){var el,i,len;for(i=0,len=array.length;i<len;i++)el=array[i],isArrayOrArguments(el)?deepArrayEach(el,f):f(el);return array},ArrayCompactFlatten.compactFlatten=function(array,keepTester){return null==keepTester&&(keepTester=keepUnlessNullOrUndefined),compactFlattenIfNeeded(array,keepTester)},arraySlice=Array.prototype.slice,doFlattenInternal=function(array,keepTester){var output;return output=[],deepArrayEach(array,function(el){if(keepTester(el))return output.push(el)}),output},keepAll=function(){return!0},compactFlattenIfNeeded=function(array,keepTester){return null==keepTester&&(keepTester=keepAll),needsFlatteningOrCompacting(array,keepTester)?doFlattenInternal(array,keepTester):array.constructor!==Array?arraySlice.call(array):array},ArrayCompactFlatten}()},function(module,exports,__webpack_require__){var StringCase,compactFlatten;compactFlatten=__webpack_require__(12).compactFlatten,module.exports=StringCase=function(){function StringCase(){}return StringCase.getCodeWords=function(str){var _words,word,words;return(_words=str.match(/[a-zA-Z][a-zA-Z0-9]*/g))?(words=function(){var i,len,results;for(results=[],i=0,len=_words.length;i<len;i++)word=_words[i],results.push(word.match(/(?:[A-Z]{2,}(?![a-z]))|[A-Z][a-z0-9]*|[a-z0-9]+/g));return results}(),compactFlatten(words)):[]},StringCase.capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1)},StringCase.decapitalize=function(str){return str.charAt(0).toLowerCase()+str.slice(1)},StringCase.getLowerCaseCodeWords=function(str){var i,len,ref,results,word;for(ref=StringCase.getCodeWords(str),results=[],i=0,len=ref.length;i<len;i++)word=ref[i],results.push(word.toLowerCase());return results},StringCase.upperCamelCase=function(str){var word;return function(){var i,len,ref,results;for(ref=this.getLowerCaseCodeWords(str),results=[],i=0,len=ref.length;i<len;i++)word=ref[i],results.push(this.capitalize(word));return results}.call(StringCase).join("")},StringCase.lowerCamelCase=function(str){return StringCase.decapitalize(StringCase.upperCamelCase(str))},StringCase.snakeCase=function(str){return StringCase.getLowerCaseCodeWords(str).join("_")},StringCase.dashCase=function(str){return StringCase.getLowerCaseCodeWords(str).join("-")},StringCase}()},function(module,exports,__webpack_require__){var Merge,compactFlatten,isPlainObject;compactFlatten=__webpack_require__(12).compactFlatten,isPlainObject=__webpack_require__(15).isPlainObject,module.exports=Merge=function(){function Merge(){}var deepMerge,merge,mergeInto,pureMerge;return Merge.merge=merge=function(){return mergeInto({},arguments)},Merge.mergeInto=mergeInto=function(){var i,j,k,ref,result,source,sources,v;if(sources=compactFlatten(arguments),0===sources.length)return null;for(result=sources[0]||{},i=j=1,ref=sources.length;j<ref;i=j+=1){source=sources[i];for(k in source)v=source[k],result[k]=v}return result},Merge.mergeIntoUnless=function(){var i,j,k,ref,result,source,sources,v;if(sources=compactFlatten(arguments),0===sources.length)return null;for(result=sources[0]||{},i=j=1,ref=sources.length;j<ref;i=j+=1){source=sources[i];for(k in source)v=source[k],result.hasOwnProperty(k)||(result[k]=v)}return result},Merge.deepMerge=deepMerge=function(){var k,list,out,v,val;list=compactFlatten(arguments),out=merge(list);for(k in out)v=out[k],isPlainObject(v)&&(out[k]=deepMerge(function(){var j,len,results;for(results=[],j=0,len=list.length;j<len;j++)val=list[j],results.push(val[k]);return results}()));return out},Merge.hasAllProps=function(o1,o2){var k,v;for(k in o1)if(v=o1[k],!o2.hasOwnProperty(k))return!1;return!0},Merge.pureMerge=pureMerge=function(){var j,last,len,source,sources;if(sources=compactFlatten(arguments),0===sources.length)return null;if(1===sources.length)return sources[0];for(last=sources[sources.length-1],j=0,len=sources.length;j<len;j++)if(source=sources[j],source!==last&&!Merge.hasAllProps(source,last))return Merge.merge(sources);return last},Merge.m=pureMerge,Merge}()},function(module,exports){var Types;module.exports=Types=function(){function Types(){}var hasOwnProperties,hasProperties,isArray,isClass,isFunction,isJsonAtomicType,isNumber,isObject,isPlainArray,isPlainObject,isString;return Types.isPromise=function(obj){return isFunction(null!=obj?obj.then:void 0)},Types.isRegExp=function(obj){return obj instanceof RegExp},Types.isNumber=isNumber=function(obj){return"number"==typeof obj},Types.isArray=isArray=self.Uint8ClampedArray?function(obj){return!!obj&&(obj.constructor===Array||obj instanceof Uint8ClampedArray||obj instanceof Int8Array||obj instanceof Uint8Array||obj instanceof Int16Array||obj instanceof Uint16Array||obj instanceof Int32Array||obj instanceof Uint32Array||obj instanceof Float32Array||obj instanceof Float64Array)}:function(obj){return!!obj&&(obj.constructor===Array||obj instanceof Int8Array||obj instanceof Uint8Array||obj instanceof Int16Array||obj instanceof Uint16Array||obj instanceof Int32Array||obj instanceof Uint32Array||obj instanceof Float32Array||obj instanceof Float64Array)},Types.isDate=function(obj){return obj&&obj.constructor===Date},Types.isString=isString=function(obj){return"string"==typeof obj},Types.isFunction=isFunction=function(obj){return"function"==typeof obj},Types.isEmptyObject=function(obj){return 0===Object.keys(obj).length},Types.isBoolean=function(obj){return obj===!0||obj===!1},Types.isClass=isClass=function(obj){return!("function"!=typeof obj||!("object"==typeof obj.__super__||hasOwnProperties(obj)||obj.prototype&&hasProperties(obj.prototype)))},Types.isJsonAtomicType=isJsonAtomicType=function(a){return isString(a)||isNumber(a)||a===!0||a===!1||null===a},Types.isJsonType=function(a){return isJsonAtomicType(a)||isPlainObject(a)||isPlainArray(a)},Types.isObject=isObject=function(obj){return!!obj&&"object"==typeof obj&&!isPlainArray(obj)},Types.isPlainArray=isPlainArray=function(v){return!!v&&v.constructor===Array},Types.isPlainObject=isPlainObject=function(v){return!!v&&v.constructor===Object},Types.hasProperties=hasProperties=function(o){var k;for(k in o)return!0;return!1},Types.hasOwnProperties=hasOwnProperties=function(o){var k;for(k in o)if(o.hasOwnProperty(k))return!0;return!1},Types}()},function(module,exports){(function(global){module.exports=!1;try{module.exports="[object process]"===Object.prototype.toString.call(global.process)}catch(e){}}).call(exports,function(){return this}())},function(module,exports){module.exports={name:"neptune-namespaces",version:"1.5.2",description:"Generate index.coffee and namespace.coffee files from directory structures",scripts:{test:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register -w"},author:"Shane Brinkman-Davis Delamore",license:"MIT",preferGlobal:!0,bin:{"neptune-namespaces":"./neptune-namespaces"},repository:{type:"git",url:"https://github.com/Imikimi-LLC/neptune-namespaces"},main:"index.coffee",dependencies:{"coffee-loader":"^0.7.2","coffee-script":"^1.10.0",colors:"^1.1.2","detect-node":"^2.0.3","fs-promise":"^0.5.0",glob:"^7.1.1",commander:"^2.9.0"},devDependencies:{chai:"^3.5.0",mocha:"^2.5.3"}}},function(module,exports,__webpack_require__){var _package,log;log=__webpack_require__(19).log,module.exports=[log({"package":_package=__webpack_require__(113),version:_package.version})]},function(module,exports,__webpack_require__){(function(global){var ref,ref1;module.exports=(null!=(ref=global.Neptune)&&null!=(ref1=ref.Art)?ref1.Foundation:void 0)||__webpack_require__(20)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){module.exports=__webpack_require__(21).includeInNamespace(__webpack_require__(23)),__webpack_require__(68),__webpack_require__(106),__webpack_require__(75),__webpack_require__(24),__webpack_require__(84)},function(module,exports,__webpack_require__){var Art,Foundation,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(22),module.exports=Art.Foundation||Art.addNamespace("Foundation",Foundation=function(superClass){function Foundation(){return Foundation.__super__.constructor.apply(this,arguments)}return extend(Foundation,superClass),Foundation}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var _package;module.exports=[__webpack_require__(24),__webpack_require__(68),__webpack_require__(75),__webpack_require__(84),{"package":_package=__webpack_require__(105),version:_package.version}]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(25).includeInNamespace(__webpack_require__(26)).addModules({ArrayExtensions:__webpack_require__(32),AsyncExtensions:__webpack_require__(35),CallStack:__webpack_require__(67),Clone:__webpack_require__(65),CommonJs:__webpack_require__(46),Eq:__webpack_require__(36),Function:__webpack_require__(38),Hash:__webpack_require__(37),Log:__webpack_require__(66),Map:__webpack_require__(51),Math:__webpack_require__(33),MinimalBaseObject:__webpack_require__(53),ObjectDiff:__webpack_require__(39),ParseUrl:__webpack_require__(40),Promise:__webpack_require__(27),PromisedFileReader:__webpack_require__(41),Regexp:__webpack_require__(34),Ruby:__webpack_require__(42),ShallowClone:__webpack_require__(43),String:__webpack_require__(44),Time:__webpack_require__(45),Types:__webpack_require__(31),Unique:__webpack_require__(52)}),__webpack_require__(47)},function(module,exports,__webpack_require__){var Foundation,StandardLib,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(21),module.exports=Foundation.StandardLib||Foundation.addNamespace("StandardLib",StandardLib=function(superClass){function StandardLib(){return StandardLib.__super__.constructor.apply(this,arguments)}return extend(StandardLib,superClass),StandardLib}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[[__webpack_require__(27),"testPromise","containsPromises","deepAll"],__webpack_require__(8),__webpack_require__(32),__webpack_require__(35),__webpack_require__(36),__webpack_require__(38),__webpack_require__(39),__webpack_require__(37),__webpack_require__(33),__webpack_require__(40),__webpack_require__(41),__webpack_require__(34),__webpack_require__(42),__webpack_require__(43),__webpack_require__(44),__webpack_require__(45),__webpack_require__(31),__webpack_require__(46),__webpack_require__(47),__webpack_require__(65),__webpack_require__(66),__webpack_require__(67)]},function(module,exports,__webpack_require__){var ArtPromise,Promise,deepEach,deepMap,isFunction,ref;Promise=__webpack_require__(28),ref=__webpack_require__(31),deepMap=ref.deepMap,deepEach=ref.deepEach,isFunction=ref.isFunction,module.exports=ArtPromise=function(){function ArtPromise(_function){this.resolve=this.reject=null,this._nativePromise=null,this._nativePromise=new Promise(function(_this){return function(resolve1,reject1){return _this.resolve=resolve1,_this.reject=reject1,"function"==typeof _function?_function(_this.resolve,_this.reject):void 0}}(this))}var isPromise,noop;return ArtPromise.ES6Promise=Promise,ArtPromise.all=Promise.all,ArtPromise.race=Promise.race,ArtPromise.reject=Promise.reject,ArtPromise.resolve=Promise.resolve,ArtPromise.then=function(f){return Promise.resolve().then(f)},ArtPromise.isPromise=isPromise=function(f){return isFunction(null!=f?f.then:void 0)},ArtPromise.testPromise=function(promise){return promise.then(function(v){return console.log("promise.resolve",v)}),promise["catch"](function(v){return console.log("promise.reject",v)})},ArtPromise.mapAll=function(map){var key,keys;return keys=Object.keys(map),Promise.all(function(){var j,len,results;for(results=[],j=0,len=keys.length;j<len;j++)key=keys[j],results.push(map[key]);return results}()).then(function(values){var i,j,key,len,out;for(out={},i=j=0,len=keys.length;j<len;i=++j)key=keys[i],out[key]=values[i];return out})},ArtPromise.containsPromises=function(plainStructure){var containsPromises;return containsPromises=!1,deepEach(plainStructure,function(v){return containsPromises||(containsPromises=isPromise(v))}),containsPromises},ArtPromise.withCallback=function(startPromiseBodyFunction){return new Promise(function(resolve,reject){var callback;return callback=function(err,data){return err?reject(err):resolve(data)},startPromiseBodyFunction(callback)})},noop=function(a){return a},ArtPromise.deepAll=function(plainStructure,resolvedResultPreprocessor){var promises;return null==resolvedResultPreprocessor&&(resolvedResultPreprocessor=noop),promises=[],deepEach(plainStructure,function(v){if(isPromise(v))return promises.push(v)}),Promise.all(promises).then(function(resolved){var i;return i=0,deepMap(plainStructure,function(v){return isPromise(v)?resolvedResultPreprocessor(resolved[i++]):v})})},ArtPromise.Serializer=function(){function Serializer(){this._lastPromise=ArtPromise.resolve()}return Serializer.prototype.serialize=function(f){return function(_this){return function(){var args;return args=arguments,_this.then(function(){return f.apply(null,args)})}}(this)},Serializer.prototype.then=function(resolved,rejected){return this._lastPromise=this._lastPromise.then(resolved,rejected)},Serializer.prototype["catch"]=function(rejected){return this._lastPromise=this._lastPromise["catch"](rejected)},Serializer.prototype.always=function(f){return this._lastPromise=this._lastPromise["catch"](function(_this){return function(){return null}}(this)).then(f)},Serializer.prototype.allDonePromise=function(){var currentLastPromise;return currentLastPromise=this._lastPromise,currentLastPromise.then(function(_this){return function(lastResult){return currentLastPromise===_this._lastPromise?lastResult:_this.allDonePromise()}}(this))["catch"](function(_this){return function(lastError){if(currentLastPromise===_this._lastPromise)throw lastError;return _this.allDonePromise()}}(this))},Serializer}(),ArtPromise.serialize=function(f){return(new ArtPromise.Serializer).serialize(f)},ArtPromise.prototype.then=function(a,b){return this._nativePromise.then(a,b)},ArtPromise.prototype["catch"]=function(a){return this._nativePromise["catch"](a)},ArtPromise}(),self.Promise||(self.Promise=ArtPromise)},function(module,exports,__webpack_require__){(function(setImmediate){!function(root){function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;return 0===self._state?void self._deferreds.push(deferred):(self._handled=!0,void Promise._immediateFn(function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(1===self._state?resolve:reject)(deferred.promise,self._value);var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)}))}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise)return self._state=3,self._value=newValue,void finale(self);if("function"==typeof then)return void doResolve(bind(then,newValue),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&Promise._immediateFn(function(){self._handled||Promise._unhandledRejectionFn(self._value)});for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn(function(value){done||(done=!0,resolve(self,value))},function(reason){done||(done=!0,reject(self,reason))})}catch(ex){if(done)return;done=!0,reject(self,ex)}}var setTimeoutFunc=setTimeout;Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0===--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise._immediateFn="function"==typeof setImmediate&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)},Promise._unhandledRejectionFn=function(err){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",err)},Promise._setImmediateFn=function(fn){Promise._immediateFn=fn},Promise._setUnhandledRejectionFn=function(fn){Promise._unhandledRejectionFn=fn},"undefined"!=typeof module&&module.exports?module.exports=Promise:root.Promise||(root.Promise=Promise)}(this)}).call(exports,__webpack_require__(29).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=__webpack_require__(30).nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(29).setImmediate,__webpack_require__(29).clearImmediate)},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){
throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){var NeptuneLib,Types,isFunction,isJsonAtomicType,isObject,isPlainArray,isPlainObject,isString,ref;NeptuneLib=__webpack_require__(8),ref=NeptuneLib.Types,isPlainObject=ref.isPlainObject,isString=ref.isString,isFunction=ref.isFunction,isObject=ref.isObject,isPlainArray=ref.isPlainArray,isJsonAtomicType=ref.isJsonAtomicType,module.exports=Types=function(){function Types(){}var cloneObjectUpToKey,deepEach,deepEachAll,deepMap,deepMapArray,deepMapObject,functionName,noopMapper,objectName,toJsonStructure,toPostMessageStructure;return NeptuneLib.mergeInto(Types,NeptuneLib.Types),Types.gt=function(a,b){return isFunction(a.gt)?a.gt(b):a>b},Types.lt=function(a,b){return isFunction(a.lt)?a.lt(b):a<b},Types.gte=function(a,b){return isFunction(a.gte)?a.gte(b):a>=b},Types.lte=function(a,b){return isFunction(a.lte)?a.lte(b):a<=b},Types.present=function(obj,returnIfNotPresent){var present;return null==returnIfNotPresent&&(returnIfNotPresent=!1),present=isFunction(null!=obj?obj.getPresent:void 0)?obj.getPresent():isFunction(null!=obj?obj.present:void 0)?obj.present():isString(obj)?!obj.match(/^\s*$/):void 0!==obj&&null!==obj,present?obj||!0:returnIfNotPresent},Types.functionName=functionName=function(f){var matched;return f.name||(matched=(""+f).match(/function ([a-zA-Z]+)\(/))&&matched[1]||"function"},Types.objectName=objectName=function(obj){var a,name,ref1;return obj?(a="function"==typeof obj.getNamespacePath?obj.getNamespacePath():void 0)?a:(a=obj.classPathName)?a:obj.constructor===Object?"Object":isFunction(obj)?functionName(obj):isString(name=null!=(ref1=obj.constructor)?ref1.name:void 0)&&name.length>0?name:obj instanceof Object?"(anonymous instanceof Object)":"(objectName unknown)":""+obj},Types.isBrowserObject=function(obj){var name;return!!Types.isObject(obj)&&(name=Types.objectName(obj),"HTML"===name.slice(0,4)||"CanvasRenderingContext"===name.slice(0,22))},Types.deepEach=deepEach=function(v,f,key){var j,k,len,subV;if(isPlainArray(v))for(j=0,len=v.length;j<len;j++)subV=v[j],deepEach(subV,f);else if(isPlainObject(v))for(k in v)subV=v[k],deepEach(subV,f,k);else f(v,key);return v},Types.deepEachAll=deepEachAll=function(v,f,key){var j,k,len,subV;if(f(v,key),isPlainArray(v))for(j=0,len=v.length;j<len;j++)subV=v[j],deepEachAll(subV,f);else if(isPlainObject(v))for(k in v)subV=v[k],deepEachAll(subV,f,k);return v},deepMapArray=function(array,mapper,options){var i,j,len,r,res,v;for(res=null,i=j=0,len=array.length;j<len;i=++j)v=array[i],r=deepMap(v,mapper,options),r!==v&&(res||(res=array.slice()),res[i]=r);return res||array},cloneObjectUpToKey=function(obj,k){var k2,res,v;res={};for(k2 in obj){if(v=obj[k2],k2===k)break;res[k2]=v}return res},deepMapObject=function(obj,mapper,options){var k,r,res,v;res=null;for(k in obj)v=obj[k],r=deepMap(v,mapper,options),(r!==v||res)&&(res||(res=cloneObjectUpToKey(obj,k)),res[k]=r);return res||obj},noopMapper=function(v){return v},Types.deepMap=deepMap=function(v,mapper,options){var arrayMapper,objectMapper;return arrayMapper=(null!=options?options.arrays:void 0)||noopMapper,objectMapper=(null!=options?options.objects:void 0)||noopMapper,mapper||(mapper=noopMapper),isPlainArray(v)?deepMapArray(arrayMapper(v),mapper,options):isPlainObject(v)?deepMapObject(objectMapper(v),mapper,options):mapper(v)},Types.toPlainStructure=function(o){return deepMap(o,function(o){return isObject(o)?o.toPlainStructure?o.toPlainStructure():objectName(o):o})},Types.toJsonStructure=toJsonStructure=function(o){return deepMap(o,function(o){return isObject(o)?o.toJsonStructure?o.toJsonStructure():toJsonStructure(o.toPlainStructure?o.toPlainStructure():""+o):isJsonAtomicType(o)?o:""+o})},Types.toPostMessageStructure=toPostMessageStructure=function(o){return deepMap(o,function(o){switch(o.constructor){case ArrayBuffer:case Date:case RegExp:case Blob:case File:case FileList:case ImageData:case Boolean:case String:return o;default:return isObject(o)?o.toPostMessageStructure?o.toPostMessageStructure():o.toPlainStructure?toPostMessageStructure(o.toPlainStructure()):""+o:""+o}})},Types}()},function(module,exports,__webpack_require__){var ArrayExtensions,bound,exactlyOneWordRegex,intRand,isNumber,isString,max,modulo,ref,ref1,ref2,wordsRegex,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};ref=__webpack_require__(33),bound=ref.bound,max=ref.max,intRand=ref.intRand,modulo=ref.modulo,ref1=__webpack_require__(31),isNumber=ref1.isNumber,isString=ref1.isString,ref2=__webpack_require__(34),wordsRegex=ref2.wordsRegex,exactlyOneWordRegex=ref2.exactlyOneWordRegex,module.exports=ArrayExtensions=function(){function ArrayExtensions(){}var _moveArrayElementLargeArray,_moveArrayElementSmallArray,a,arrayWithElementMoved,basicCompareFunction,indexOfOrLength,keepAll,keepIfRubyTrue,leftOfIndex,longestCommonSubsequence,moveArrayElement,randomElement,rightOfIndex,w;return ArrayExtensions.keepAll=keepAll=function(){return!0},ArrayExtensions.keepIfRubyTrue=keepIfRubyTrue=function(a){return void 0!==a&&null!==a&&a!==!1},ArrayExtensions.reverseForEach=function(array,f){var p,v;for(p=array.length-1;p>=0;p+=-1)v=array[p],f(v);return array},ArrayExtensions.arrayToTruthMap=function(array){var a,len1,p,res;for(res={},p=0,len1=array.length;p<len1;p++)a=array[p],res[a]=!0;return res},ArrayExtensions.arrayToFalseMap=function(array){var a,len1,p,res;for(res={},p=0,len1=array.length;p<len1;p++)a=array[p],res[a]=!1;return res},ArrayExtensions.concatInto=function(array,b){return array.push.apply(array,b)},ArrayExtensions.uniqueValues=function(sortedArray,eqF){var i,len1,p,results,v;for(null==eqF&&(eqF=function(a,b){return a===b}),results=[],i=p=0,len1=sortedArray.length;p<len1;i=++p)v=sortedArray[i],0!==i&&eqF(v,sortedArray[i-1])||results.push(v);return results},ArrayExtensions.push=function(array,element){return array?(array.push(element),array):[element]},ArrayExtensions.peek=function(array,offset){return null==offset&&(offset=-1),array?array[array.length+offset]:void 0},basicCompareFunction=function(a,b){return a-b},ArrayExtensions.leftOfIndex=leftOfIndex=function(array,index){return array?array.slice(0,index):array},ArrayExtensions.rightOfIndex=rightOfIndex=function(array,index){return array?(index<0&&(index+=array.length),array.slice(index+1)):array},indexOfOrLength=function(array,value){var i;return 0>(i=array.indexOf(value))?array.length:i},ArrayExtensions.leftOf=function(array,value){return leftOfIndex(array,indexOfOrLength(array,value))},ArrayExtensions.rightOf=function(array,value){return rightOfIndex(array,indexOfOrLength(array,value))},ArrayExtensions.splitArray=function(array,value){var index;return index=indexOfOrLength(array,value),[leftOfIndex(array,index),rightOfIndex(array,index)]},ArrayExtensions.findSortedFirst=function(array,compareFunction){var element,i,p,ref3,returnElement;if(null==compareFunction&&(compareFunction=basicCompareFunction),(null!=array?array.length:void 0)>0){for(returnElement=array[0],i=p=1,ref3=array.length;p<ref3;i=p+=1)0<compareFunction(returnElement,element=array[i])&&(returnElement=element);return returnElement}},ArrayExtensions.first=function(array){return array[0]},ArrayExtensions.second=function(array){return array[1]},ArrayExtensions.third=function(array){return array[2]},ArrayExtensions.forth=function(array){return array[3]},ArrayExtensions.fifth=function(array){return array[4]},ArrayExtensions.last=function(array){return array?array[array.length-1]:void 0},ArrayExtensions.pushIfNotPresent=function(array,item){return!(indexOf.call(array,item)>=0)&&(array.push(item),!0)},ArrayExtensions.randomElement=randomElement=function(array,fromFirstN){return null==fromFirstN&&(fromFirstN=array.length),array[Math.random()*fromFirstN|0]},ArrayExtensions.randomSort=function(array){var a,i,j,len,p,ref3;for(len=array.length,i=p=ref3=len-1;p>=0;i=p+=-1)j=intRand(i),a=array[i],array[i]=array[j],array[j]=a;return array},ArrayExtensions.insert=function(array,index,item){return index<0&&(index=array.length+index+1),array.splice(index,0,item),array},ArrayExtensions.withInserted=function(array,index,item){return ArrayExtensions.insert(array.slice(),index,item)},ArrayExtensions.withSort=function(array,sortFunction){return array=array.slice(),array.sort(sortFunction)},ArrayExtensions.remove=function(array,index,amount){return null==amount&&(amount=1),index<0&&(index=array.length+index+1),array.splice(index,amount),array},ArrayExtensions.removeFirstMatch=function(array,toMatchValue){var index;return index=array.indexOf(toMatchValue),index>=0?ArrayExtensions.remove(array,index):array},ArrayExtensions.arrayWithout=function(array,index,amount){return null==amount&&(amount=1),null==index&&(index=array.length-1),ArrayExtensions.remove(array.slice(),index,amount)},ArrayExtensions.arrayWithoutValue=function(array,value){return ArrayExtensions.remove(array.slice(),array.indexOf(value),1)},ArrayExtensions.arrayWith=function(array,value){return array?(array=array.slice(),array.push(value),array):[value]},ArrayExtensions.truncatedArrayWith=function(array,length,value){return array?(array=array.slice(0,length),array.push(value),array):[value]},ArrayExtensions.poppedArray=function(array){return array.slice(0,array.length-1)},ArrayExtensions.arrayWithOne=function(array,value){return array?(array=array.slice(),indexOf.call(array,value)<0&&array.push(value),array):[value]},ArrayExtensions.slice=function(a,b,c){return arraySlice.call(a,b,c)},ArrayExtensions.shuffleArray=function(a){var i,j,t;for(i=a.length;--i>0;)j=~~(Math.random()*(i+1)),t=a[j],a[j]=a[i],a[i]=t;return a},ArrayExtensions._moveArrayElementLargeArray=_moveArrayElementLargeArray=function(array,from,to){return array.splice(to,0,array.splice(from,1)[0]),array},ArrayExtensions._moveArrayElementSmallArray=_moveArrayElementSmallArray=function(array,from,to){var i,p,q,ref3,ref4,ref5,ref6,tmp;if(from=0|from,to=0|to,tmp=array[from],from<to)for(i=p=ref3=from,ref4=to-1;p<=ref4;i=p+=1)array[i]=array[i+1];else for(i=q=ref5=from,ref6=to+1;q>=ref6;i=q+=-1)array[i]=array[i-1];return array[to]=tmp,array},ArrayExtensions.moveArrayElement=moveArrayElement=function(array,from,to){return from=modulo(0|from,array.length),to=modulo(0|to,array.length),Math.abs(from-to)>300?_moveArrayElementLargeArray(array,from,to):_moveArrayElementSmallArray(array,from,to),array},ArrayExtensions.arrayWithElementMoved=arrayWithElementMoved=function(array,from,to){return from=modulo(0|from,array.length),to=modulo(0|to,array.length),from===to?array:(array=array.slice(),moveArrayElement(array,from,to))},ArrayExtensions.arrayWithElementValueMoved=function(array,value,to){var from;return from=array.indexOf(value),from<0?array:arrayWithElementMoved(array,from,to)},ArrayExtensions.arrayWithElementReplaced=function(array,value,index){return array=array.slice(),array[index]=value,array},ArrayExtensions.stableSort=function(array,compare){var a,b,i,length,notSorted,p,ref3;for(compare||(compare=function(a,b){return a-b}),notSorted=!0,length=array.length;notSorted;)for(notSorted=!1,i=p=1,ref3=length;p<ref3;i=p+=1)compare(a=array[i-1],b=array[i])>0&&(array[i-1]=b,array[i]=a,notSorted=!0);return array},ArrayExtensions.longestCommonSubsequence=longestCommonSubsequence=function(a,b){var c,diag,i,j,latch,lcs,left,m,n,p,q,r,ref3,ref4,ref5,row,s;for(lcs=[],row=[],c=[],m<n&&(s=a,a=b,b=s),m=a.length,n=b.length,j=p=0,ref3=n;p<ref3;j=p+=1)row[j]=0;for(i=q=0,ref4=m;q<ref4;i=q+=1)for(c[i]=row=row.slice(),diag=0,j=r=0,ref5=n-1;r<=ref5;j=r+=1)latch=row[j],a[i]===b[j]?row[j]=diag+1:(left=row[j-1]||0,left>row[j]&&(row[j]=left)),diag=latch;for(i--,j--;i>-1&&j>-1;)switch(c[i][j]){case i&&c[i-1][j]:i--;continue;case j&&c[i][j-1]:j--;break;default:j--,lcs.unshift(a[i]),i--;continue}return lcs},ArrayExtensions.minimumOrderedOverlappingMerge=function(a,b){var ai,bj,c,ck,i,j,k,l,m,n,o,out;for(c=longestCommonSubsequence(a,b),m=a.length,n=b.length,o=c.length,out=new Array(n),i=0,j=0,k=0,l=0;i<m&&j<n&&k<o;)ai=a[i],bj=b[j],ck=c[k],ai===ck&&bj===ck?(i++,j++,k++,out[l++]=ai):ai!==ck?(i++,indexOf.call(b,ai)<0&&(out[l++]=ai)):(j++,out[l++]=bj);for(;i<m;)ai=a[i++],indexOf.call(b,ai)<0&&(out[l++]=ai);for(;j<n;)out[l++]=b[j++];return out},ArrayExtensions.wordsArray=w=function(){var arg,len1,out,p;for(out=[],p=0,len1=arguments.length;p<len1;p++)arg=arguments[p],isString(arg)&&!arg.match(exactlyOneWordRegex)?out=out.concat(arg.match(wordsRegex)):out.push(arg);return out},ArrayExtensions.wordArray=ArrayExtensions.wordsArray,ArrayExtensions.w=ArrayExtensions.wordsArray,ArrayExtensions.a=a=function(){var arg,len1,out,p;for(out=[],p=0,len1=arguments.length;p<len1;p++)arg=arguments[p],out.push(arg);return out},ArrayExtensions}()},function(module,exports,__webpack_require__){var Foundation,Math,Regexp,abs,ceil,float32Precision,float64Precision,floor,inverseFloat64Precision,inverstFlaot32Precision,max,min,numberRegexp,pow,random,ref,round;Foundation=__webpack_require__(25),Regexp=__webpack_require__(34),numberRegexp=Regexp.numberRegexp,float64Precision=1e-10,float32Precision=1e-7,inverseFloat64Precision=1/float64Precision,inverstFlaot32Precision=1/float32Precision,ref=self.Math,abs=ref.abs,min=ref.min,max=ref.max,ceil=ref.ceil,floor=ref.floor,round=ref.round,random=ref.random,pow=ref.pow,module.exports=Math=function(){function Math(){}var bound;return Math.nearInfinity=pow(10,100),Math.nearInfinityResult=pow(10,50),Math.float32Precision=float32Precision,Math.float64Precision=float64Precision,Math.modulo=function(a,b){var r;return r=a%b,r<0?r+b:r},Math.stringToNumberArray=function(string){var a,i,j,len,match,v;for(a=string.split(","),i=j=0,len=a.length;j<len;i=++j)v=a[i],match=v.match(numberRegexp),a[i]=null!=match?match[0]-0:0;return a},Math.minMagnitude=function(a,magnitude){return a<0?min(a,-magnitude):max(a,magnitude)},Math.maxMagnitude=function(a,magnitude){return bound(-magnitude,a,magnitude)},Math.maxChange=function(newValue,oldValue,maxChangeV){return bound(oldValue-maxChangeV,newValue,oldValue+maxChangeV)},Math.bound=bound=function(a,b,c){return isNaN(b)?a:b<a?a:b>c?c:b},Math.absGt=function(a,b){return abs(a)>abs(b)},Math.absLt=function(a,b){return abs(a)<abs(b)},Math.absGte=function(a,b){return abs(a)>=abs(b)},Math.absLte=function(a,b){return abs(a)<=abs(b)},Math.abs=abs,Math.min=min,Math.max=max,Math.round=round,Math.ceil=function(v,m){return null==m&&(m=1),ceil(v/m)*m},Math.floor=function(v,m){return null==m&&(m=1),floor(v/m)*m},Math.round=function(v,m){return null==m&&(m=1),round(v/m)*m},Math.simplifyNum=function(num){return round(num*inverseFloat64Precision)*float64Precision},Math.floatEq=function(n1,n2){return n1===n2||float64Precision>abs(n1-n2)},Math.float32Eq=function(n1,n2){return n1===n2||float32Precision>abs(n1-n2)},Math.floatEq0=function(n){return 0===n||float64Precision>abs(n)},Math.float32Eq0=function(n){return 0===n||float32Precision>abs(n)},Math.floatTrue0=function(n){return 0===n||float64Precision>abs(n)?0:n},Math.float32True0=function(n){return 0===n||float32Precision>abs(n)?0:n},Math.random=random,Math.intRand=function(max){return random()*max|0},Math.iPart=function(v){return v-v%1},Math.fPart=function(v){return v%1},Math.commaize=function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},Math.cyclingSequenceFunction=function(sequence){var sequencePos;return sequencePos=sequence.length,function(){return sequencePos++,sequencePos>=sequence.length&&(sequencePos=0),sequence[sequencePos]}},Math}()},function(module,exports){var Regexp;module.exports=Regexp=function(){function Regexp(){}return Regexp.escapeRegExp=function(string){return string.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Regexp.findUrlProtocolRegexp=/([\w-]+)(:\/\/)/,Regexp.findDomainRegexp=/localhost|[\w]+(?:-[\w]+)*(?:\.[\w]+(?:-[\w]+)*)*(?:\.[a-z]{2,20})/,Regexp.urlQueryParamsRegexp=/(?:[-+=&*._\w]|%[a-f\d]{2})+/i,Regexp.findUrlPathRegexp=/(?:\/~?(?:[-+*._\w]|%[a-f\d]{2})*)*/,Regexp.findUrlPortRegexp=/(\:)(\d+)/,Regexp.findEmailRegexp=RegExp("([_\\w-]+(?:\\.[_\\w]+)*)@("+Regexp.findDomainRegexp.source+")","i"),Regexp.emailRegexp=RegExp("^"+Regexp.findEmailRegexp.source+"$","i"),Regexp.numberRegexp=/([-]?\.[0-9]+)|([-]?[0-9]+(\.[0-9]+)?)/,Regexp.urlProtocolRegexp=RegExp("^"+Regexp.findUrlProtocolRegexp.source+"$","i"),Regexp.domainRegexp=RegExp("^"+Regexp.findDomainRegexp.source+"$","i"),Regexp.urlPathRegexp=RegExp("^"+Regexp.findUrlPathRegexp.source+"$","i"),Regexp.urlQueryRegexp=RegExp("^"+Regexp.urlQueryParamsRegexp.source+"$","i"),Regexp.isoDateRegexp=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Regexp.hex16ColorRegex=/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,Regexp.hex256ColorRegex=/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,Regexp.rgbColorRegex=/rgb *\( *(\d+%?) *, *(\d+%?) *, *(\d+%?) *\)/,Regexp.rgbaColorRegex=/rgba *\( *(\d+%?) *, *(\d+%?) *, *(\d+%?) *, *(\d*\.?\d*)\)/,Regexp.colorRegex=new RegExp("("+Regexp.hex16ColorRegex.source+")|("+Regexp.hex256ColorRegex.source+")|("+Regexp.rgbColorRegex.source+")|("+Regexp.rgbaColorRegex.source+")"),Regexp.wordsRegex=/[^\s]+/g,Regexp.exactlyOneWordRegex=/^[^\s]+$/,Regexp.findUrlRegexp=RegExp("(?:"+Regexp.findUrlProtocolRegexp.source+")("+Regexp.findDomainRegexp.source+")(?:"+Regexp.findUrlPortRegexp.source+")?("+Regexp.findUrlPathRegexp.source+")?(?:(\\?)("+Regexp.urlQueryParamsRegexp.source+")?)?","i"),Regexp.findSourceReferenceUrlRegexp=RegExp("("+Regexp.findUrlProtocolRegexp.source+")("+Regexp.findDomainRegexp.source+")?(?:"+Regexp.findUrlPortRegexp.source+")?("+Regexp.findUrlPathRegexp.source+")?(?:(\\?)("+Regexp.urlQueryParamsRegexp.source+")?)?(?:\\:(\\d+))?(?:\\:(\\d+))?","i"),Regexp.urlRegexp=RegExp("^"+Regexp.findUrlRegexp.source+"$","i"),Regexp}()},function(module,exports,__webpack_require__){var AsyncExtensions,Promise;Promise=__webpack_require__(27),module.exports=AsyncExtensions=function(){function AsyncExtensions(){}var timeout;return AsyncExtensions.timeout=timeout=function(ms,f){return new Promise(function(resolve){return setTimeout(function(){return"function"==typeof f&&f(),resolve()},ms)})},AsyncExtensions.requestAnimationFrame=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||self.msRequestAnimationFrame||function(f){return setTimeout(f,1e3/60)},AsyncExtensions.nextTick=function(f){return Promise.resolve().then(f)},AsyncExtensions.throwErrorOutOfStack=function(e){return timeout(0,function(){throw e})},AsyncExtensions.evalAndThrowErrorsOutOfStack=function(f){var e;try{return f()}catch(error){return e=error,Neptune.Art.Foundation.log.error("evalAndThrowErrorsOutOfStack",e),AsyncExtensions.throwErrorOutOfStack(e)}},AsyncExtensions}()},function(module,exports,__webpack_require__){var Eq,floatTrue0,isNumber,isString,min,objectKeyCount,ref,remove,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};remove=__webpack_require__(32).remove,objectKeyCount=__webpack_require__(37).objectKeyCount,floatTrue0=__webpack_require__(33).floatTrue0,ref=__webpack_require__(31),isString=ref.isString,isNumber=ref.isNumber,min=Math.min,module.exports=Eq=function(){function Eq(){}var plainObjectsDeepDiff,plainObjectsDeepEq;return Eq.eq=function(a,b){return 0===Eq.compare(a,b,!0)},Eq.neq=function(a,b){return 0!==Eq.compare(a,b,!0)},Eq.fastEq=function(a,b){return 0===Eq.compare(a,b,!1)},Eq.fastNeq=function(a,b){return 0!==Eq.compare(a,b,!1)},Eq._compareArray=function(a,b,recursionBlockArray){var aLength,av,bLength,bv,i,j,ref1,val;for(aLength=a.length,bLength=b.length,i=j=0,ref1=Math.min(aLength,bLength);j<ref1;i=j+=1)if(av=a[i],bv=b[i],0!==(val=Eq._compare(av,bv,recursionBlockArray)))return val;return aLength-bLength},Eq._compareObject=function(a,b,recursionBlockArray){var aLength,av,bv,compared,k,val;aLength=0,compared=0;for(k in a)if(av=a[k],aLength++,av=a[k],bv=b[k],(void 0!==bv||b.hasOwnProperty(k))&&(compared++,0!==(val=Eq._compare(av,bv,recursionBlockArray))))return val;return aLength===compared&&compared===objectKeyCount(b)?0:NaN},Eq.compare=function(a,b,recursionBlockEnabled){return Eq._compare(a,b,recursionBlockEnabled&&[])},Eq._compare=function(a,b,recursionBlockArray){var _constructor;if(a===b)return 0;if(null!=a&&null!=b&&a.constructor===(_constructor=b.constructor)){if(isString(a))return a.localeCompare(b);if(isNumber(a))return floatTrue0(a-b);if(recursionBlockArray){if(indexOf.call(recursionBlockArray,a)>=0||indexOf.call(recursionBlockArray,b)>=0)return 0;recursionBlockArray.push(a),recursionBlockArray.push(b)}if(a.compare)return a.compare(b,recursionBlockArray);if(_constructor===Array)return Eq._compareArray(a,b,recursionBlockArray);if(_constructor===Object)return Eq._compareObject(a,b,recursionBlockArray);if(a.eq&&a.eq(b,recursionBlockArray))return 0;recursionBlockArray&&remove(recursionBlockArray,recursionBlockArray.length-2,2)}return NaN},Eq.plainObjectsDeepEqArray=function(a,b){var av,i,j,len1;if(a.length!==b.length)return!1;for(i=j=0,len1=a.length;j<len1;i=++j)if(av=a[i],!Eq.plainObjectsDeepEq(av,b[i]))return!1;return!0},Eq.plainObjectsDeepEqObject=function(a,b){var aLength,av,bv,k;aLength=0;for(k in a)if(av=a[k],aLength++,bv=b[k],void 0===bv&&!b.hasOwnProperty(k)||!Eq.plainObjectsDeepEq(av,bv))return!1;return aLength===objectKeyCount(b)},Eq.plainObjectsDeepEq=plainObjectsDeepEq=function(a,b){var _constructor;return a===b||!(!a||!b||a.constructor!==(_constructor=b.constructor))&&(a.eq?a.eq(b):_constructor===Array?Eq.plainObjectsDeepEqArray(a,b):_constructor===Object&&Eq.plainObjectsDeepEqObject(a,b))},Eq.propsEq=plainObjectsDeepEq,Eq.plainObjectsDeepDiffArray=function(before,after){var diff,i,j,l,len,m,ref1,ref2,ref3,ref4,ref5,res;for(res=null,len=min(before.length,after.length),i=j=0,ref1=len;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j)(diff=plainObjectsDeepDiff(before[i],after[i]))&&(res||(res={}),res[i]=diff);if(len<before.length)for(i=l=ref2=len,ref3=before.length;ref2<=ref3?l<ref3:l>ref3;i=ref2<=ref3?++l:--l)res||(res={}),res[i]={removed:before[i]};if(len<after.length)for(i=m=ref4=len,ref5=after.length;ref4<=ref5?m<ref5:m>ref5;i=ref4<=ref5?++m:--m)res||(res={}),res[i]={added:after[i]};return res},Eq.plainObjectsDeepDiffObject=function(before,after){var afterV,beforeV,diff,k,res;res=null;for(k in before)beforeV=before[k],after.hasOwnProperty(k)?(diff=plainObjectsDeepDiff(beforeV,after[k]))&&(res||(res={}),res[k]=diff):(res||(res={}),res[k]={removed:beforeV});for(k in after)afterV=after[k],before.hasOwnProperty(k)||(res||(res={}),res[k]={added:afterV});return res},Eq.plainObjectsDeepDiff=plainObjectsDeepDiff=function(before,after){var _constructor;return before===after?null:before&&after&&before.constructor===(_constructor=after.constructor)?before.eq?before.eq(after)?null:{before:before,after:after}:_constructor===Array?Eq.plainObjectsDeepDiffArray(before,after):_constructor===Object?Eq.plainObjectsDeepDiffObject(before,after):{before:before,after:after}:{before:before,after:after}},Eq.diff=plainObjectsDeepDiff,Eq.shallowEq=function(a,b){return a===b||a&&b&&a.eq&&a.eq(b)},Eq}()},function(module,exports,__webpack_require__){var Hash,compactFlatten,deepArrayEach,isArrayOrArguments,isFunction,isPlainArray,isPlainObject,mergeInto,ref,ref1,slice=[].slice,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};ref=Neptune.NeptuneLib,compactFlatten=ref.compactFlatten,deepArrayEach=ref.deepArrayEach,isArrayOrArguments=ref.isArrayOrArguments,mergeInto=ref.mergeInto,ref1=__webpack_require__(31),isPlainObject=ref1.isPlainObject,isFunction=ref1.isFunction,isPlainArray=ref1.isPlainArray,module.exports=Hash=function(){function Hash(){}var inject,newObjectFromEach,objectKeyCount,toObjectInternal;return Hash.countKeys=function(o){return Object.keys(o).length},Hash.objectKeyCount=objectKeyCount=function(o){var count,k,v;count=0;for(k in o)v=o[k],count++;return count},Hash.objectLength=objectKeyCount,toObjectInternal=function(list,out){var element,i,key,len;for(key=null,i=0,len=list.length;i<len;i++)element=list[i],key?(out[key]=element,key=null):isPlainObject(element)?mergeInto(out,element):isArrayOrArguments(element)?toObjectInternal(element,out):null!=element&&(key=element);if(key)return out[key]=void 0},Hash.toObject=function(){var out;return console.error("toObject is DEPRICATED. Use toPlainObjects."),out={},toObjectInternal(arguments,out),out},Hash.arrayToMap=function(inputArray,transformFunction){var element,i,key,len,outputMap,ref2,value;for(null==transformFunction&&(transformFunction=function(element){return element}),outputMap={},i=0,len=inputArray.length;i<len;i++)element=inputArray[i],ref2=transformFunction(element),key=ref2[0],value=ref2[1],outputMap[key]=value;return outputMap},Hash.inject=inject=function(input,a,b){var block,i,k,len,log,memo,memoSet,twoInputBlock,v;if(log=Neptune.Art.Foundation.log,block=2===arguments.length?(memoSet=!1,memo=null,a):(memo=a,memoSet=!0,b),twoInputBlock=block.length>=3,isPlainObject(input))for(k in input)v=input[k],memoSet?memo=twoInputBlock?block(memo,k,v):block(memo,v):(memo=v,memoSet=!0);else for(k=i=0,len=input.length;i<len;k=++i)v=input[k],memoSet?memo=twoInputBlock?block(memo,k,v):block(memo,v):(memo=v,memoSet=!0);return memo},Hash.newObjectFromEach=newObjectFromEach=function(input,block){return null==block&&(block=function(map,k,v){return map[k]=v}),inject(input,{},function(){if(isPlainArray(input))switch(block.length){case 0:case 1:return function(memo,k,v){return memo[v]=block(v),memo};case 2:return function(memo,k,v){return memo[v]=block(k,v),memo};case 3:return function(memo,k,v){return block(memo,k,v),memo};default:throw new Error("expecting block-function with 0, 1, 2 or 3 arguments")}else switch(block.length){case 0:case 1:return function(memo,k,v){return memo[k]=block(v),memo};case 2:return function(memo,k,v){return memo[k]=block(k,v),memo};case 3:return function(memo,k,v){return block(memo,k,v),memo};default:throw new Error("expecting block-function with 0, 1, 2 or 3 arguments")}}())},Hash.newMapFromEach=newObjectFromEach,Hash.select=function(obj,a){var i,k,len,prop,properties,result,v;if(!obj)return{};if(result={},isFunction(a))if(1===a.length)for(k in obj)v=obj[k],a(v)&&(result[k]=v);else for(k in obj)v=obj[k],a(k,v)&&(result[k]=v);else for(properties=compactFlatten(Array.prototype.slice.call(arguments,1)),i=0,len=properties.length;i<len;i++)prop=properties[i],(v=obj[prop]||obj.hasOwnProperty(prop))&&(result[prop]=v);return result},Hash.selectAll=function(){var i,len,obj,prop,properties,ref2,result;if(obj=arguments[0],properties=2<=arguments.length?slice.call(arguments,1):[],!obj)return{};for(result={},ref2=compactFlatten(properties),i=0,len=ref2.length;i<len;i++)prop=ref2[i],result[prop]=obj[prop];return result},Hash.objectWithout=function(){var anythingToDo,i,len,obj,prop,properties,result,v;for(obj=arguments[0],properties=2<=arguments.length?slice.call(arguments,1):[],1===properties.length&&"string"!=typeof properties[0]&&(properties=properties[0]),anythingToDo=!1,i=0,len=properties.length;i<len;i++)if(prop=properties[i],obj.hasOwnProperty(prop)){anythingToDo=!0;break}if(anythingToDo){result={};for(prop in obj)v=obj[prop],indexOf.call(properties,prop)<0&&(result[prop]=v);return result}return obj},Hash}()},function(module,exports){var Function;module.exports=Function=function(){function Function(){}return Function.fastBind=function(fn,_this){switch(fn.length){case 0:return function(){return fn.call(_this)};case 1:return function(a){return fn.call(_this,a)};case 2:return function(a,b){return fn.call(_this,a,b)};case 3:return function(a,b,c){return fn.call(_this,a,b,c)};case 4:return function(a,b,c,d){return fn.call(_this,a,b,c,d)};case 5:return function(a,b,c,d,e){return fn.call(_this,a,b,c,d,e)};case 6:return function(a,b,c,d,e,f){return fn.call(_this,a,b,c,d,e,f)};case 7:return function(a,b,c,d,e,f,g){return fn.call(_this,a,b,c,d,e,f,g)};case 8:return function(a,b,c,d,e,f,g,h){return fn.call(_this,a,b,c,d,e,f,g,h)};case 9:return function(a,b,c,d,e,f,g,h,i){return fn.call(_this,a,b,c,d,e,f,g,h,i)};case 10:return function(a,b,c,d,e,f,g,h,i,j){return fn.call(_this,a,b,c,d,e,f,g,h,i,j)};default:return function(){return fn.apply(_this,arguments)}}},Function}()},function(module,exports){var ObjectDiff;module.exports=ObjectDiff=function(){function ObjectDiff(){}var defaultEq;return defaultEq=function(a,b){return a===b},ObjectDiff.objectDiff=function(newObj,oldObj,added,removed,changed,noChange,eq,oldObjKeyCount){var k,newObjKeyCount,newValue,oldObjKeyCountIsAtLeast,oldValue;if(null==eq&&(eq=defaultEq),newObjKeyCount=0,!oldObj){for(k in newObj)newValue=newObj[k],newObjKeyCount++,added(k,newValue);return newObjKeyCount}oldObjKeyCountIsAtLeast=0;for(k in newObj)newValue=newObj[k],newObjKeyCount++,"undefined"!=typeof(oldValue=oldObj[k])||oldObj.hasOwnProperty(k)?(oldObjKeyCountIsAtLeast++,eq(newValue,oldValue)?"function"==typeof noChange&&noChange(k,newValue):changed(k,newValue,oldValue)):added(k,newValue);if(null==oldObjKeyCount||oldObjKeyCountIsAtLeast!==oldObjKeyCount)for(k in oldObj)"undefined"!=typeof newObj[k]||newObj.hasOwnProperty(k)||removed(k,oldObj[k]);return newObjKeyCount},ObjectDiff}()},function(module,exports){var ParseUrl;module.exports=ParseUrl=function(){function ParseUrl(){}return ParseUrl.parseQuery=function(qs){var i,j,key,len,obj,pair,ref,ref1,val;for(null==qs&&(qs=null!=(ref=self.location)?ref.search:void 0),obj={},ref1=qs.replace("?","").split("&"),j=0,len=ref1.length;j<len;j++)pair=ref1[j],i=pair.indexOf("="),key=pair.slice(0,i),val=pair.slice(i+1),key.length>0&&(obj[key]=decodeURIComponent(val));return obj},ParseUrl.parseUrl=function(url){var __,a,anchor,fileName,host,hostWithPort,m,password,path,pathName,port,protocol,query,username;if(m=url.match(/(([A-Za-z]+):(\/\/)?)?(([\-;&=\+\$,\w]+)(:([\-;:&=\+\$,\w]+))?@)?([A-Za-z0-9\.\-]+)(:([0-9]+))?(\/[\+~%\/\.\w\-]*)?(\?([\-\+=&;%@\.\w,]*))?(\#([\.\!\/\\\w]*))?/))return __=m[0],__=m[1],protocol=m[2],__=m[3],__=m[4],username=m[5],__=m[6],password=m[7],host=m[8],__=m[9],port=m[10],pathName=m[11],__=m[12],query=m[13],__=m[14],anchor=m[15],pathName&&(a=pathName.split("/"),fileName=a[a.length-1],path=a.slice(0,a.length-1).join("/")),host=host.toLowerCase(),hostWithPort=host,port&&(hostWithPort+=":"+port),{protocol:protocol,username:username,password:password,hostWithPort:hostWithPort,host:host,port:port,pathName:pathName,path:path,fileName:fileName,query:query&&ParseUrl.parseQuery(query),anchor:anchor}},ParseUrl}()},function(module,exports,__webpack_require__){var Promise,PromisedFileReader;Promise=__webpack_require__(27),module.exports=PromisedFileReader=function(){function PromisedFileReader(){}return PromisedFileReader.readFileAsDataUrl=function(file){return new Promise(function(resolve,reject){var reader;return reader=new FileReader,reader.readAsDataURL(file),reader.onload=function(_this){return function(e){return resolve(e.target.result)}}(this),reader.onerror=function(_this){return function(e){return reject(error)}}(this)})},PromisedFileReader.readFileAsArrayBuffer=function(file){return new Promise(function(resolve,reject){var reader;return reader=new FileReader,reader.readAsArrayBuffer(file),reader.onload=function(_this){return function(e){return resolve(e.target.result)}}(this),reader.onerror=function(_this){return function(e){return reject(error)}}(this)})},PromisedFileReader}()},function(module,exports){var Ruby,hasProp={}.hasOwnProperty;module.exports=Ruby=function(){function Ruby(){}var rubyTrue;return Ruby.rubyTrue=rubyTrue=function(a){return void 0!==a&&null!==a&&a!==!1},Ruby.rubyFalse=function(a){return void 0===a||null===a||a===!1;
},Ruby.rubyOr=function(a,b){var i,len;if(2===arguments.length)return rubyTrue(a)?a:b;for(i=0,len=arguments.length;i<len&&(a=arguments[i],!rubyTrue(a));i++);return a},Ruby.rubyAnd=function(a,b){var i,len;if(2===arguments.length)return rubyTrue(a)?b:a;for(i=0,len=arguments.length;i<len&&(a=arguments[i],rubyTrue(a));i++);return a},Ruby.reopenInstanceProps=function(klass,instanceProps){var k,results,v;results=[];for(k in instanceProps)hasProp.call(instanceProps,k)&&(v=instanceProps[k],results.push(klass.prototype[k]=v));return results},Ruby.reopenClassProps=function(klass,classProps){var k,results,v;results=[];for(k in classProps)hasProp.call(classProps,k)&&(v=classProps[k],results.push(klass[k]=v));return results},Ruby}()},function(module,exports){var ShallowClone;module.exports=ShallowClone=function(){function ShallowClone(){}return ShallowClone.extendClone=function(obj){return obj.constructor===Array?obj.slice():Object.create(obj)},ShallowClone.shallowClone=function(obj){var k,ret,v;if(!obj)return obj;if(obj.constructor===Array)return obj.slice();ret={};for(k in obj)v=obj[k],ret[k]=v;return ret},ShallowClone}()},function(module,exports,__webpack_require__){var FoundationMath,StringExtensions,Types,compactFlatten,escapedDoubleQuoteRegex,floor,intRand,isArray,isNumber,isPlainObject,isString,wordsRegex;FoundationMath=__webpack_require__(33),Types=__webpack_require__(31),wordsRegex=__webpack_require__(34).wordsRegex,intRand=FoundationMath.intRand,isString=Types.isString,isNumber=Types.isNumber,isPlainObject=Types.isPlainObject,isArray=Types.isArray,compactFlatten=Neptune.NeptuneLib.compactFlatten,escapedDoubleQuoteRegex=/[\\]["]/g,floor=Math.floor,module.exports=StringExtensions=function(){function StringExtensions(){}var consistentJsonStringify,escapeDoubleQuoteJavascriptString,escapeJavascriptString,getPadding,pluralize,repeat,standardIndent;return StringExtensions.compactFlattenJoin=function(a,b){var array,joiner;return array=null,joiner=isString(a)?(array=b,a):(array=a,b||""),compactFlatten(array).join(joiner)},StringExtensions.randomString=function(length,chars){var charsLength,i,result;return null==length&&(length=32),null==chars&&(chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),result="",charsLength=chars.length,function(){var j,ref,results;for(results=[],i=j=0,ref=length;j<ref;i=j+=1)results.push(chars[intRand(charsLength)]);return results}().join("")},StringExtensions.pluralize=pluralize=function(a,b,pluralForm){return"number"==typeof a?a+" "+(1===a?b:pluralForm||pluralize(b)):a+"s"},StringExtensions.replaceLast=function(str,find,replaceWith){var index;return index=str.lastIndexOf(find),index>=0?str.substring(0,index)+replaceWith+str.substring(index+find.length):str.toString()},StringExtensions.getPadding=getPadding=function(length,padding){return null==padding&&(padding=" "),Array(length).join(padding)},StringExtensions.pad=function(str,length,padding,alignRight){var exactPadding;return str=String(str),str.length>=length?str:(exactPadding=getPadding(Math.max(length-str.length+1,0),padding),alignRight?exactPadding+str:str+exactPadding)},StringExtensions.escapeDoubleQuoteJavascriptString=escapeDoubleQuoteJavascriptString=function(str){var s;return s=String(str).replace(/[\\"]/g,"\\$&").replace(/[\0\b\f\n\r\t\v\u2028\u2029]/g,function(x){switch(x){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\x0B":return"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}),s='"'+s+'"'},StringExtensions.escapeJavascriptString=escapeJavascriptString=function(str){var s;return s=JSON.stringify(str),s.match(escapedDoubleQuoteRegex)?"'"+s.replace(escapedDoubleQuoteRegex,'"').replace(/'/g,"\\'").slice(1,-1)+"'":s},StringExtensions.allIndexes=function(str,regex){var indexes,lastIndex,result;if(indexes=[],!(regex instanceof RegExp&&regex.global))throw new Error("regex must be a global RegExp");for(regex.lastIndex=0;result=regex.exec(str);)indexes.push(result.index),lastIndex=result;return indexes},StringExtensions.repeat=repeat=" ".repeat?function(str,times){return str.repeat(times)}:function(str,count){var result;if(count===floor(count),result="",count>0&&str.length>0)for(;;){if(1===(1&count)&&(result+=str),count>>>=1,0===count)break;str+=str}return result},StringExtensions.rightAlign=function(str,width){return str.length>=width?str:repeat(" ",width-str.length)+str},StringExtensions.eachMatch=function(str,regex,f){var result;for(regex.lastIndex=0;result=regex.exec(str);)f(result);return null},standardIndent={joiner:", ",openObject:"{",openArray:"[",closeObject:"}",closeArray:"]"},StringExtensions.consistentJsonStringify=consistentJsonStringify=function(object,indent){var closeArray,closeObject,error,indentObject,joiner,k,lastTotalIndent,openArray,openObject,out,totalIndent,v;return out=function(){var ref;if(object===!1||object===!0||null===object||isNumber(object))return""+object;if(isString(object))return escapeJavascriptString(object);if(indentObject=indent?"string"==typeof indent?{joiner:",\n"+indent,openObject:"{\n"+indent,openArray:"[\n"+indent,closeObject:"\n}",closeArray:"\n]",totalIndent:indent,indent:indent}:{totalIndent:totalIndent=indent.indent+(lastTotalIndent=indent.totalIndent),joiner:",\n"+totalIndent,openObject:"{\n"+totalIndent,openArray:"[\n"+totalIndent,closeObject:"\n"+lastTotalIndent+"}",closeArray:"\n"+lastTotalIndent+"]",indent:indent.indent}:void 0,ref=indentObject||standardIndent,joiner=ref.joiner,openObject=ref.openObject,openArray=ref.openArray,closeObject=ref.closeObject,closeArray=ref.closeArray,isPlainObject(object))return openObject+function(){var j,len,ref1,results;for(ref1=Object.keys(object).sort(),results=[],j=0,len=ref1.length;j<len;j++)k=ref1[j],void 0!==object[k]&&results.push(escapeJavascriptString(k)+": "+consistentJsonStringify(object[k],indentObject));return results}().join(joiner)+closeObject;if(isArray(object))return openArray+function(){var j,len,results;for(results=[],j=0,len=object.length;j<len;j++)v=object[j],results.push(consistentJsonStringify(v,indentObject));return results}().join(joiner)+closeArray;throw Neptine.Art.Foundation.log.error(error="invalid object type for Json. Expecting: null, false, true, number, string, plain-object or array",object),new Error(error)}()},StringExtensions.splitRuns=function(str){var ch,chCount,i,j,lastCh,ref,result;if(0===str.length)return[];for(lastCh=str[0],chCount=1,result=[],i=j=1,ref=str.length;j<ref;i=j+=1)ch=str[i],ch===lastCh?chCount++:(result.push([lastCh,chCount]),chCount=1),lastCh=ch;return result.push([lastCh,chCount]),result},StringExtensions.eachRunAsCharCodes=function(str,f){var ch,chCount,i,j,lastCh,ref;for(lastCh=str.charCodeAt(0),chCount=1,i=j=1,ref=str.length;j<ref;i=j+=1)ch=str.charCodeAt(i),ch===lastCh?chCount++:(f(lastCh,chCount),chCount=1),lastCh=ch;return f(lastCh,chCount),null},StringExtensions.humanFriendlyShorten=function(inputString,maxLength){var j,len,minLength,part,string,stringParts;if(!(maxLength>0))throw new error("maxLength must be > 0");if(inputString=inputString.trim(),!(inputString.length>maxLength))return inputString;for(minLength=maxLength/2,stringParts=inputString.split(/\s+/),string="",j=0,len=stringParts.length;j<len;j++)if(part=stringParts[j],0===string.length)string=part;else{if(!(string.length<minLength||string.length+part.length+2<=maxLength))break;string+=" "+part}return string.length>maxLength&&(string=string.slice(0,maxLength-1).trim()),string+""},StringExtensions.stripTrailingWhitespace=function(a){return a.split(/[ ]*\n/).join("\n").split(/[ ]*$/)[0].replace(/\n+$/,"")},StringExtensions}()},function(module,exports,__webpack_require__){var Time,base,commaize,dateSecondMinusPerformanceSecond,initDateSecond,initPerformanceSecond;commaize=__webpack_require__(33).commaize,self.performance||(self.performance={}),(base=self.performance).now||(base.now=self.performance.mozNow||self.performance.msNow||self.performance.oNow||self.performance.webkitNow||function(){return(new Date).getTime()}),initPerformanceSecond=self.performance.now()/1e3,initDateSecond=(new Date).getTime()/1e3,dateSecondMinusPerformanceSecond=initDateSecond-initPerformanceSecond,module.exports=Time=function(){function Time(){}var currentSecond,multiples,timerStack;return multiples=[["mo",2592e3],["d",86400],["h",3600],["m",60],["s",1],["ms",.001],["s",1e-6],["ns",1e-9]],Time.dateSecondToPerformanceSecond=function(dateSecond){return dateSecond-dateSecondMinusPerformanceSecond},Time.performanceSecondToDateSecond=function(performanceSecond){return performanceSecond+dateSecondMinusPerformanceSecond},Time.timeStampToPerformanceSecond=function(htmlEventTimeStamp){return htmlEventTimeStamp/1e3-dateSecondMinusPerformanceSecond},Time.durationString=function(seconds){var i,len,multiplier,name,ref;for(i=0,len=multiples.length;i<len;i++)if(ref=multiples[i],name=ref[0],multiplier=ref[1],seconds>=multiplier)return""+(seconds/multiplier|0)+name;return"0"},Time.dateAgeInSeconds=function(date){return.001*(new Date-date)},Time.dateToSeconds=function(date){return.001*post.getTime()},Time.perTimeString=function(secondsPerRun){var perTime;return perTime=1/secondsPerRun,perTime>100?commaize(0|perTime)+"/s":60*perTime>100?commaize(60*perTime|0)+"/m":commaize(3600*perTime|0)+"/h"},Time.currentMillisecond=function(){return self.performance.now()},Time.currentSecond=currentSecond=function(){return self.performance.now()/1e3},Time.currentDateSecond=function(){return(new Date).getTime()/1e3},Time.time=function(a,b){var f,fResult,start,timeResult;return f=b||a,start=currentSecond(),fResult=f(),timeResult=currentSecond()-start,b?(Neptune.Art.Foundation.log("time: "+a+" took "+Time.durationString(timeResult)),fResult):timeResult},timerStack=[],Time.stackTime=function(f){var start,subTimeTotal,timeResult,tsl;return start=currentSecond(),timerStack.push(0),f(),subTimeTotal=timerStack.pop(),timeResult=currentSecond()-start,(tsl=timerStack.length)>0&&(timerStack[tsl-1]+=timeResult),{count:1,total:timeResult,subTimeTotal:subTimeTotal,remainder:timeResult-subTimeTotal}},Time.logTimeSinceLast=function(a){var time;return time=Time.currentSecond(),console.log(a+" ("+(Time.lastTime?Time.durationString(time-Time.lastTime):void 0)+")"),Time.lastTime=time},Time}()},function(module,exports,__webpack_require__){var CommonJs,isClass,isFunction,ref;ref=__webpack_require__(31),isClass=ref.isClass,isFunction=ref.isFunction,module.exports=CommonJs=function(){function CommonJs(){}var definingModule;return definingModule=null,CommonJs.getModuleBeingDefined=function(){return definingModule},CommonJs.defineModule=function(_module,a){var lastModule,mod,result;return lastModule=definingModule,definingModule=_module,mod=isFunction(a)?isClass(a)?a:a():a,result=_module.exports=(null!=mod&&"function"==typeof mod.createWithPostCreate?mod.createWithPostCreate(mod):void 0)||mod,definingModule=lastModule,result},CommonJs}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(48).includeInNamespace(__webpack_require__(49)).addModules({FormattedInspect:__webpack_require__(54),InspectedObjectLiteral:__webpack_require__(56),Inspector:__webpack_require__(50),Inspector2:__webpack_require__(58),ToInspectedObjects:__webpack_require__(55),ToPlainObjects:__webpack_require__(57)}),__webpack_require__(59)},function(module,exports,__webpack_require__){var Inspect,StandardLib,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(25),module.exports=StandardLib.Inspect||StandardLib.addNamespace("Inspect",Inspect=function(superClass){function Inspect(){return Inspect.__super__.constructor.apply(this,arguments)}return extend(Inspect,superClass),Inspect}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[[__webpack_require__(50),"shallowInspect inspectLean inspect"],__webpack_require__(54),__webpack_require__(55),__webpack_require__(57),__webpack_require__(56)]},function(module,exports,__webpack_require__){(function(global){var Inspector,Map,escapeJavascriptString,isArray,isBrowserObject,isClass,isFunction,isObject,isPlainArray,isPlainObject,isString,objectName,ref,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Map=__webpack_require__(51),escapeJavascriptString=__webpack_require__(44).escapeJavascriptString,ref=__webpack_require__(31),objectName=ref.objectName,isString=ref.isString,isArray=ref.isArray,isFunction=ref.isFunction,isObject=ref.isObject,isClass=ref.isClass,isBrowserObject=ref.isBrowserObject,isPlainObject=ref.isPlainObject,isPlainArray=ref.isPlainArray,module.exports=Inspector=function(){function Inspector(options){null==options&&(options={}),this.inspect=bind(this.inspect,this),this.inspectInternal=bind(this.inspectInternal,this),this.inspectObject=bind(this.inspectObject,this),this.inspectArray=bind(this.inspectArray,this),this.maxLength=options.maxLength||1e3,this.allowCustomInspectors=!options.noCustomInspectors,this.maxDepth=null!=options.maxDepth?options.maxDepth:10,this.outArray=[],this.length=0,this.depth=0,this.inspectingMap=new Map,this.done=!1}var inspect;return Inspector.unquotablePropertyRegex=/^([0-9]+|[_a-zA-Z][_0-9a-zA-Z]*)$/,Inspector.customInspectable=function(obj){return obj.inspect&&!("function"==typeof obj)},Inspector.parentString=function(distance){switch(distance){case 0:return"parent";case 1:return"grandparent";case 2:return"great grandparent";default:return"great^"+(distance-1)+" grandparent"}},Inspector.inspect=inspect=function(obj,options){var inspector;return null==options&&(options={}),this!==global?Neptune.Base.inspect.call(this):(inspector=new Inspector(options),inspector.inspect(obj),inspector.getResult())},Inspector.shallowInspect=function(obj){return null==obj?""+obj:Inspector.customInspectable(obj)?Inspector.inspect(obj):isString(obj)?escapeJavascriptString(obj):isArray(obj)?"<<Array length: "+obj.length+">>":isFunction(obj)&&""===obj.name?"<<function args: "+obj.length+">>":"<<"+typeof obj+": "+(obj.name||obj)+">>"},Inspector.inspectLean=function(object,options){var fullInspect,match;return fullInspect=inspect(object,options),!isFunction(null!=object?object.inspect:void 0)&&(isPlainObject(object)||isPlainArray(object)&&(object.length>1||(null!=options?options.forArgs:void 0)))?(match=fullInspect.match(/^\[(.+)\]$|^\{(.+)\}$/),match?match[1]||match[2]||match[3]:fullInspect):fullInspect},Inspector.prototype.put=function(s){if(!this.done)return this.outArray.push(this.length+s.length>this.maxLength?(this.done=!0,"..."):(this.length+=s.length,s)),s},Inspector.prototype.getResult=function(){return this.outArray.join("")},Inspector.prototype.maxDepthOutput=function(obj){var keys,name;switch(typeof obj){case"string":case"number":case"boolean":case"undefined":return this.inspectInternal(obj);case"function":return this.put(objectName(obj));case"object":return this.put(null===obj?"null":isArray(obj)?"["+obj.length+" elements]":(keys=Object.keys(obj),name=objectName(obj),"Object"===name?"{"+keys.length+" keys}":keys.length>0?"{"+name+" "+keys.length+" keys}":name))}},Inspector.prototype.inspectArray=function(array){var first,i,len,obj;for(this.put("["),first=!0,i=0,len=array.length;i<len;i++)obj=array[i],first||this.put(", "),this.inspect(obj),first=!1;return this.put("]")},Inspector.prototype.inspectObject=function(obj){var attributes,first,i,k,keys,len,name,v;if(attributes=[],keys=Object.keys(obj),name=objectName(obj),isFunction(obj)&&0===keys.length)return this.put(name+"()");if(isBrowserObject(obj))return this.put("{"+name+"}");for(this.put("{"),obj.constructor!==Object&&this.put(name+" "),first=!0,i=0,len=keys.length;i<len;i++)k=keys[i],"__uniqueId"!==k&&(first||this.put(", "),v=obj[k],Inspector.unquotablePropertyRegex.test(k)?this.put(k):this.inspect(k),this.put(": "),this.inspect(v),first=!1);return this.put("}")},Inspector.prototype.inspectInternal=function(obj){return null==obj?this.put(""+obj):isString(obj)?this.put(escapeJavascriptString(obj)):isArray(obj)?this.inspectArray(obj):isClass(obj)?this.put(objectName(obj)):this.allowCustomInspectors&&Inspector.customInspectable(obj)?obj.inspect.length>0?obj.inspect(this):this.put(obj.inspect()):obj instanceof RegExp?this.put(""+obj):isObject(obj)||isFunction(obj)?this.inspectObject(obj):this.put(""+obj)},Inspector.prototype.inspect=function(obj){var objDepth;if(!this.done)return(objDepth=this.inspectingMap.get(obj))?(this.put("<"+Inspector.parentString(this.depth-objDepth)+">"),null):(this.depth>=this.maxDepth?this.maxDepthOutput(obj):(this.depth++,this.inspectingMap.set(obj,this.depth),this.inspectInternal(obj),this.inspectingMap["delete"](obj),this.depth--),null)},Inspector}()}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var Map,MinimalBaseObject,Node,Unique,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Unique=__webpack_require__(52),MinimalBaseObject=__webpack_require__(53),Node=function(){function Node(key,value,prev,next){this.key=key,this.value=value,this.prev=prev||null,this.next=next||null,prev&&(prev.next=this),next&&(next.prev=this)}return Node.prototype.remove=function(){var n,p;if(n=this.next,p=this.prev,p&&(p.next=n,this.prev=null),n)return n.prev=p,this.next=null},Node}(),module.exports=Map=function(superClass){function Map(){this._length=0,this._map={},this._first=this._last=null}return extend(Map,superClass),Map.inverseMap=function(array){var i,k,len,result,v;for(result=new Map,k=i=0,len=array.length;i<len;k=++i)v=array[k],result.set(v,k);return result},Map.getter({length:function(){return this._length},nodes:function(){var n,result;for(result=[],n=this._first;n;)result.push(n),n=n.next;return result},keys:function(){var i,len,node,ref,results;for(ref=this.nodes,results=[],i=0,len=ref.length;i<len;i++)node=ref[i],results.push(node.key);return results},values:function(){var i,len,node,ref,results;for(ref=this.nodes,results=[],i=0,len=ref.length;i<len;i++)node=ref[i],results.push(node.value);return results}}),Map.prototype.get=function(key){var node;return node=this._map[Unique.id(key)],node&&node.value},Map.prototype.set=function(key,value){var id;return id=Unique.id(key),this._map[id]?this._map[id].value=value:(this._length++,this._last=this._map[id]=new Node(key,value,this._last),this._first||(this._first=this._last)),value},Map.prototype._remove=function(key){var id,n;return id=Unique.id(key),(n=this._map[id])?(this._length--,delete this._map[id],this._first===n&&(this._first=n.next),this._last===n&&(this._last=n.prev),n.remove(),n):void 0},Map.prototype.remove=function(key){var n;return(n=this._remove(key))?n.value:void 0},Map.prototype["delete"]=function(key){return!!this._remove(key)},Map.prototype.exists=function(key){return this._map[Unique.id(key)]},Map.prototype.forEach=function(f){var i,len,node,ref;for(ref=this.nodes,i=0,len=ref.length;i<len;i++)node=ref[i],f(node.value);return this},Map.prototype.findFirst=function(testF){var i,len,node,ref;for(ref=this.nodes,i=0,len=ref.length;i<len;i++)if(node=ref[i],testF(node.value))return node.value},Map.prototype.each=function(f){var i,len,node,ref;for(ref=this.nodes,i=0,len=ref.length;i<len;i++)node=ref[i],f(node.key,node.value);return this},Map.prototype.map=function(f){var i,len,node,ref,results;for(ref=this.nodes,results=[],i=0,len=ref.length;i<len;i++)node=ref[i],results.push(f(node.key,node.value));return results},Map.prototype.inspect=function(inspector){var _inspect,first;return Neptune.Art.Foundation.log("inspect map"),inspector?(_inspect=function(o){return"string"==typeof o&&o.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?inspector.put(o):inspector.inspect(o)},inspector.put("{Map "),first=!0,this.map(function(k,v){return first||inspector.put(", "),_inspect(k),inspector.put(": "),inspector.inspect(v),first=!1}),inspector.put("}")):Neptune.Art.Foundation.inspect(this)},Map.prototype.verifyNodes=function(){var inspect,length,node,prev;if(inspect=Neptune.Art.Foundation.inspect,null!=this._first||null!=this._last||0!==this._length){if(0===this._length&&this._first)throw new Error("length == "+this.length+" but @_first is not null");if(0===this._length&&this._last)throw new Error("length == "+this.length+" but @_last is not null");if(!this._first)throw new Error("length == "+this.length+" and @_first is null");if(!this._last)throw new Error("length == "+this.length+" and @_last is null");if(this._first.prev)throw new Error("@_first has prev");if(this._last.next)throw new Error("@_last has next");for(length=0,prev=null,node=this._first;node;){if(length++,node.prev!==prev)throw new Error("node.prev != prev. "+inspect({lenght:length,nodePrev:node.prev,prev:prev},1));prev=node,node=node.next}if(this.length!==length)throw new Error("@length is "+this.length+", but it should be "+length)}},Map}(MinimalBaseObject)},function(module,exports){var Unique,nextId;nextId=1,module.exports=Unique=function(){function Unique(){}var nextUniqueObjectId,objectId;return Unique.nextUniqueObjectId=nextUniqueObjectId=function(){return"object_"+nextId++},Unique.objectId=objectId=function(o){return o.hasOwnProperty("__uniqueId")?o.__uniqueId||(o.__uniqueId=nextUniqueObjectId()):(Object.defineProperty(o,"__uniqueId",{enumerable:!1,value:nextUniqueObjectId()}),o.__uniqueId)},Unique.id=function(key){return"object"==typeof key||"function"==typeof key?key?"function"==typeof key.getUniqueId?key.getUniqueId():objectId(key):"null":"number"==typeof key?""+key:"string"==typeof key?"string_"+key:"boolean"==typeof key?key?"true":"false":void 0===key?"undefined":typeof key+"_"+key},Unique}()},function(module,exports,__webpack_require__){var MinimalBaseObject,capitalize,isFunction,isPlainObject,isString,ref;capitalize=Neptune.NeptuneLib.capitalize,ref=__webpack_require__(31),isFunction=ref.isFunction,isString=ref.isString,isPlainObject=ref.isPlainObject,module.exports=MinimalBaseObject=function(){function MinimalBaseObject(){}var addGetter,addGetters,addProperties,addSetter,addSetters,defProperties,defProperty,propGetterName,propInternalName,propListStringToArray,propSetterName;return MinimalBaseObject.propInternalName=propInternalName=function(prop){return"_"+prop},MinimalBaseObject.getter=function(){return defProperties(this.prototype,arguments,!0,!1)},MinimalBaseObject.setter=function(){return defProperties(this.prototype,arguments,!1,!0)},MinimalBaseObject.addGetter=function(prop,getter){return this._addGetter(this.prototype,prop,getter)},MinimalBaseObject.addSetter=function(prop,setter){return this._addSetter(this.prototype,prop,setter)},MinimalBaseObject.addClassGetter=function(prop,getter){return this._addGetter(this,prop,getter)},MinimalBaseObject.addClassSetter=function(prop,setter){return this._addSetter(this,prop,setter)},MinimalBaseObject.property=function(){return defProperties(this.prototype,arguments,!0,!0)},MinimalBaseObject.classGetter=function(){return defProperties(this,arguments,!0,!1)},MinimalBaseObject.classSetter=function(){return defProperties(this,arguments,!1,!0)},MinimalBaseObject.classProperty=function(){return defProperties(this,arguments,!0,!0)},MinimalBaseObject._propGetterName=propGetterName=function(prop){return"get"+capitalize(prop)},MinimalBaseObject._propSetterName=propSetterName=function(prop){return"set"+capitalize(prop)},MinimalBaseObject._addGetter=addGetter=function(obj,prop,getter){return obj[propGetterName(prop)]=getter,isFunction(getter)||(getter=function(){return getter}),Object.defineProperty(obj,prop,{get:getter,configurable:!0}),prop},MinimalBaseObject._addSetter=addSetter=function(obj,prop,setter){return obj[propSetterName(prop)]=setter,Object.defineProperty(obj,prop,{set:setter,configurable:!0}),prop},MinimalBaseObject._addGetters=addGetters=function(obj,map){var getter,prop;for(prop in map)getter=map[prop],addGetter(obj,prop,getter);return map},MinimalBaseObject._addSetters=addSetters=function(obj,map){var prop,setter;for(prop in map)setter=map[prop],addSetter(obj,prop,setter);return map},MinimalBaseObject._addProperties=addProperties=function(obj,map){var initializer,prop;for(prop in map)initializer=map[prop],defProperty(obj,prop,!0,!0,initializer);return map},MinimalBaseObject._defProperty=defProperty=function(obj,prop,defineGetter,defineSetter,initializer){var propName;if(propName=propInternalName(prop),defineGetter&&addGetter(obj,prop,obj[propGetterName(prop)]=isFunction(initializer)?function(){return null!=this[propName]?this[propName]:this[propName]=initializer()}:null!=initializer?function(){return null!=this[propName]?this[propName]:this[propName]=initializer}:function(){return this[propName]}),defineSetter)return addSetter(obj,prop,function(v){return this[propName]=v})},MinimalBaseObject._defProperties=defProperties=function(obj,props,defineGetter,defineSetter){var i,len,prop,propFromString,propMap,results;for(results=[],i=0,len=props.length;i<len;i++)if(prop=props[i],isPlainObject(propMap=prop))defineGetter&&defineSetter?results.push(addProperties(obj,propMap)):defineGetter?results.push(addGetters(obj,propMap)):results.push(addSetters(obj,propMap));else{if(!isString(prop))throw new Error("invalid value. Expected string or plain-object:",prop);results.push(function(){var j,len1,ref1,results1;for(ref1=propListStringToArray(prop),results1=[],j=0,len1=ref1.length;j<len1;j++)propFromString=ref1[j],results1.push(defProperty(obj,propFromString,defineGetter,defineSetter,null));return results1}())}return results},MinimalBaseObject._propListStringToArray=propListStringToArray=function(propList){return propList.match(/[_a-z][_a-z0-9]*/gi)},MinimalBaseObject}()},function(module,exports,__webpack_require__){var FormattedInspect,alignTabStopsByBlocks,alignTabs,escapeJavascriptString,formatMultilineSubStructure,formatMultilineSubStructureForObject,formattedInspectRecursive,inspect,isFunction,isNumber,isPlainArray,isPlainObject,isString,max,newLineWithNiceNodeInspectIndent,niceNodeInspectIndent,pad,ref,ref1,stripTrailingWhitespace,toInspectedObjects;ref=__webpack_require__(31),isString=ref.isString,isPlainObject=ref.isPlainObject,isPlainArray=ref.isPlainArray,isFunction=ref.isFunction,isNumber=ref.isNumber,max=Math.max,ref1=__webpack_require__(44),pad=ref1.pad,stripTrailingWhitespace=ref1.stripTrailingWhitespace,escapeJavascriptString=ref1.escapeJavascriptString,inspect=__webpack_require__(50).inspect,toInspectedObjects=__webpack_require__(55).toInspectedObjects,niceNodeInspectIndent="  ",newLineWithNiceNodeInspectIndent="\n"+niceNodeInspectIndent,formatMultilineSubStructure=function(m,inspected,implicitRepresentationOk){return inspected.match(/\n/)?inspected.replace(/\n/g,newLineWithNiceNodeInspectIndent):inspected},formatMultilineSubStructureForObject=function(m,inspected,implicitRepresentationOk){return inspected.match(/\n/)?inspected.match(/^- /)?"\n"+inspected+"\n":newLineWithNiceNodeInspectIndent+inspected.replace(/\n/g,newLineWithNiceNodeInspectIndent):inspected},formattedInspectRecursive=function(m,options,implicitRepresentationOk){var _isPlainObject,containsConsecutiveArrays,containsConsecutiveObjects,finalInspectedValues,forceMultilineOutput,i,indentedInspectedArray,index,inspected,inspectedEl,inspectedLength,inspectedValue,inspectedValues,k,key,keyCount,lastWasArray,lastWasObject,maxLineLength,shouldBeOnOwnLine,v,value;return maxLineLength=options.maxLineLength,isPlainObject(m)?(inspectedLength=0,forceMultilineOutput=!1,shouldBeOnOwnLine=!1,keyCount=0,inspectedValues=function(){var results;results=[];for(key in m)value=m[key],keyCount++,inspectedValue=formatMultilineSubStructureForObject(value,formattedInspectRecursive(value,options)),key.match(/^[-._a-zA-Z[_a-zA-Z0-9]*$/)||(key=inspect(key)),inspectedLength+=inspectedValue.length+key.length+2,forceMultilineOutput||(forceMultilineOutput=shouldBeOnOwnLine),shouldBeOnOwnLine=!inspectedValue.match(/^([^,:]|\(.*\)|\{.*\}|\".*\"|\'.*\'|\[.*\])*$/),results.push([key,inspectedValue]);return results}(),0===keyCount?"{}":(index=0,finalInspectedValues=function(){var j,len,ref2,results;for(results=[],j=0,len=inspectedValues.length;j<len;j++)ref2=inspectedValues[j],k=ref2[0],v=ref2[1],results.push(k+":\t"+v);return results}(),finalInspectedValues.join(!forceMultilineOutput&&maxLineLength>=inspectedLength+2*(inspectedValues.length-1)?",\t":"\n"))):isPlainArray(m)?(inspectedLength=0,lastWasObject=!1,lastWasArray=!1,containsConsecutiveObjects=!1,containsConsecutiveArrays=!1,inspectedValues=function(){var j,len,results;for(results=[],j=0,len=m.length;j<len;j++)value=m[j],implicitRepresentationOk=!0,(_isPlainObject=isPlainObject(value))?(containsConsecutiveObjects||(containsConsecutiveObjects=lastWasObject),lastWasObject=!0):lastWasObject=!1,isPlainArray(value)&&(implicitRepresentationOk=!1,containsConsecutiveArrays||(containsConsecutiveArrays=lastWasArray),lastWasArray=!0),inspected=formattedInspectRecursive(value,options,implicitRepresentationOk),inspected=formatMultilineSubStructure(value,inspected,implicitRepresentationOk),inspectedLength+=inspected.length,results.push(inspected);return results}(),!containsConsecutiveArrays&&!containsConsecutiveObjects&&maxLineLength>=inspectedLength+2*(inspectedValues.length-1)?0===inspectedValues.length?"[]":inspectedValues.length<=1?"- "+inspectedValues.join(",\t"):inspectedValues.join(",\t"):(indentedInspectedArray=function(){var j,len,results;for(results=[],i=j=0,len=inspectedValues.length;j<len;i=++j)inspectedEl=inspectedValues[i],results.push("- "+inspectedEl);return results}(),""+indentedInspectedArray.join("\n"))):isString(m)?m.length>10&&m.match(/\n/)&&!m.match(/\ (\n|$)/)?['"""',m.replace(/"""/,'""\\"'),'"""'].join("\n"):escapeJavascriptString(m):inspect(m)},alignTabs=function(maxLineLength,linesString){var alignedLines,el,elements,i,j,l,len,len1,line,lines,maxColumnSizes,maxColumnWidth,numColumnsToPad,r,tabStops,totalPad;for(tabStops=1,lines=linesString.split("\n"),numColumnsToPad=null,maxColumnSizes=[],maxColumnWidth=maxLineLength/2,j=0,len=lines.length;j<len;j++)if(line=lines[j],(elements=line.split("\t")).length>1)for(null==numColumnsToPad?numColumnsToPad=elements.length-1:numColumnsToPad!==elements.length-1&&(numColumnsToPad=1),i=l=0,len1=elements.length;l<len1;i=++l)el=elements[i],i<elements.length-1&&(0===i||el.length<maxColumnWidth)&&(maxColumnSizes.length===i&&maxColumnSizes.push(0),maxColumnSizes[i]=max(maxColumnSizes[i],el.length+1));return alignedLines=function(){var len2,n,results;for(results=[],n=0,len2=lines.length;n<len2;n++)line=lines[n],elements=line.split("\t"),r=function(){var len3,o,results1;if(elements.length>1){for(totalPad=0,results1=[],i=o=0,len3=elements.length;o<len3;i=++o)el=elements[i],totalPad+=maxColumnSizes[i]||0,maxColumnSizes[i]?results1.push(pad(el,maxColumnSizes[i])):results1.push(el+" ");return results1}return elements}(),results.push(r.join(""));return results}(),alignedLines.join("\n")},alignTabStopsByBlocks=function(maxLineLength,linesString){return alignTabs(maxLineLength,linesString)},module.exports=FormattedInspect=function(){function FormattedInspect(){}return FormattedInspect.formattedInspect=function(m,options){return null==options&&(options={}),isNumber(options)&&(options={maxLineLength:options}),null==options.maxLineLength&&(options.maxLineLength=80),stripTrailingWhitespace(alignTabStopsByBlocks(options.maxLineLength,formattedInspectRecursive(toInspectedObjects(m),options)))},FormattedInspect}()},function(module,exports,__webpack_require__){(function(global){var InspectedObjects,deepMap,escapeJavascriptString,inspectedObjectLiteral,isFunction,isPlainArray,isPlainObject,isPromise,isString,ref;
ref=__webpack_require__(31),deepMap=ref.deepMap,isPlainArray=ref.isPlainArray,isPlainObject=ref.isPlainObject,isString=ref.isString,isFunction=ref.isFunction,isPromise=ref.isPromise,escapeJavascriptString=__webpack_require__(44).escapeJavascriptString,inspectedObjectLiteral=__webpack_require__(56).inspectedObjectLiteral,module.exports=InspectedObjects=function(){function InspectedObjects(){}var toInspectedObjects;return InspectedObjects.toInspectedObjects=toInspectedObjects=function(m){var functionString,oldm,out,reducedFunctionString;return null==m?m:(oldm=m,m===global?inspectedObjectLiteral("global"):(out="function"==typeof m.getInspectedObjects?m.getInspectedObjects():void 0)?out:isPromise(m)?inspectedObjectLiteral("Promise"):isPlainObject(m)||isPlainArray(m)?deepMap(m,function(v){return toInspectedObjects(v)}):m instanceof Error?inspectedObjectLiteral(m.stack||m.toString(),!0):isFunction(m)?(functionString=""+m,reducedFunctionString=functionString.replace(/\s+/g," ").replace(/^function (\([^)]*\))/,"$1 ->").replace(/^\(\)\s*/,""),inspectedObjectLiteral(reducedFunctionString.length<80?reducedFunctionString:functionString.slice(0,400))):m)},InspectedObjects}()}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var InspectedObjectLiteral,compare;compare=__webpack_require__(36).compare,module.exports=InspectedObjectLiteral=function(){function InspectedObjectLiteral(literal1,isError1){this.literal=literal1,this.isError=isError1}return InspectedObjectLiteral.inspectedObjectLiteral=function(literal,isError){return new InspectedObjectLiteral(literal,isError)},InspectedObjectLiteral.prototype.getInspectedObjects=function(){return this},InspectedObjectLiteral.prototype.inspect=function(){return this.literal},InspectedObjectLiteral.prototype.compare=function(b){return compare(this.literal,b.literal)},InspectedObjectLiteral}()},function(module,exports,__webpack_require__){var PlainObjects,deepMap,inspectedObjectLiteral,isFunction,isPlainArray,isPlainObject,ref;ref=__webpack_require__(31),deepMap=ref.deepMap,isPlainArray=ref.isPlainArray,isPlainObject=ref.isPlainObject,isFunction=ref.isFunction,inspectedObjectLiteral=__webpack_require__(56).inspectedObjectLiteral,module.exports=PlainObjects=function(){function PlainObjects(){}var toPlainObjects;return PlainObjects.toPlainObjects=toPlainObjects=function(m){var functionString,oldm,out,reducedFunctionString;return null==m?m:(oldm=m,(out="function"==typeof m.getPlainObjects?m.getPlainObjects():void 0)?out:isPlainObject(m)||isPlainArray(m)?deepMap(m,function(v){return toPlainObjects(v)}):isFunction(m)?(functionString=""+m,reducedFunctionString=functionString.replace(/\s+/g," ").replace(/^function (\([^)]*\))/,"$1 ->").replace(/^\(\)\s*/,""),inspectedObjectLiteral(reducedFunctionString.length<80?reducedFunctionString:functionString.slice(0,400))):m)},PlainObjects}()},function(module,exports,__webpack_require__){var Inspected,Inspector2,Map,MinimalBaseObject,escapeJavascriptString,isArray,isBrowserObject,isClass,isDate,isFunction,isHTMLImageElement,isObject,isPlainObject,isRegExp,isString,objectName,parentString,ref,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;MinimalBaseObject=__webpack_require__(53),Map=__webpack_require__(51),Inspected=__webpack_require__(59),escapeJavascriptString=__webpack_require__(44).escapeJavascriptString,ref=__webpack_require__(31),isString=ref.isString,isArray=ref.isArray,isFunction=ref.isFunction,isObject=ref.isObject,isPlainObject=ref.isPlainObject,isClass=ref.isClass,isDate=ref.isDate,isRegExp=ref.isRegExp,objectName=ref.objectName,isBrowserObject=ref.isBrowserObject,isHTMLImageElement=self.HTMLImageElement?function(obj){return obj instanceof HTMLImageElement}:function(){return!1},parentString=function(_this){return function(distance){switch(distance){case 0:return"parent";case 1:return"grandparent";case 2:return"great grandparent";default:return"great^"+(distance-1)+" grandparent"}}}(this),module.exports=Inspector2=function(superClass){function Inspector2(options){null==options&&(options={}),this.inspectObject=bind(this.inspectObject,this),this.inspectWithToImage=bind(this.inspectWithToImage,this),this.inspectHTMLImageElement=bind(this.inspectHTMLImageElement,this),this.inspectArray=bind(this.inspectArray,this),this.withImages=options.withImages,this.maxLength=options.maxLength||1e3,this.allowCustomInspectors=!options.noCustomInspectors,this.maxDepth=null!=options.maxDepth?options.maxDepth:10,this.outArray=[],this.length=0,this.depth=0,this.inspectingMap=new Map}return extend(Inspector2,superClass),Inspector2.prototype.inspectArray=function(array){var a;return new Inspected.Array(function(){var i,len,results;for(results=[],i=0,len=array.length;i<len;i++)a=array[i],results.push(this.inspectInternal(a));return results}.call(this))},Inspector2.prototype.inspectHTMLImageElement=function(obj){var res;return res=new Inspected.Object({},"HTMLImageElement",obj),(res.image=obj).complete||(this.addPendingTask(),obj.onload=function(_this){return function(){return _this.completePendingTask()}}(this)),res},Inspector2.prototype.inspectWithToImage=function(obj){var name,res;return name=objectName(obj),"string"==typeof obj.classPathName&&(name=obj.classPathName),"Object"===name&&(name=null),res=new Inspected.Object({},name,obj),this.addPendingTask(),obj.toImage().then(function(_this){return function(image){return res.image=image,_this.completePendingTask()}}(this)),res},Inspector2.prototype.inspectObject=function(obj,recurse){var attributes,i,k,keys,len,name,res,result;if(null==recurse&&(recurse=!0),attributes=[],keys=Object.keys(obj),name=objectName(obj),isFunction(obj)&&0===keys.length)return new Inspected.Core(name+"()");if("string"==typeof obj.classPathName&&(name=obj.classPathName),"Object"===name&&(name=null),result={},recurse)for(i=0,len=keys.length;i<len;i++)k=keys[i],result[k]=this.inspectInternal(obj[k]);return res=new Inspected.Object(result,name,obj),isFunction(obj.inspect)&&(res.inspected=obj.inspect()),res},Inspector2.prototype.addPendingTask=function(){return this.pendingTasks++},Inspector2.prototype.completePendingTask=function(){if(this.pendingTasks--,0===this.pendingTasks)return this.completionCallBack()},Inspector2.prototype.inspectByType=function(obj){return isFunction(null!=obj?obj.getInspectedObjects:void 0)&&(obj=obj.getInspectedObjects()),null===obj||void 0===obj||obj===!0||obj===!1||"number"==typeof obj?new Inspected.Core(obj):obj===self?new Inspected.Core("self"):isRegExp(obj)?new Inspected.Core(obj.toString()):isString(obj)?new Inspected.String(obj):isArray(obj)?this.inspectArray(obj):isClass(obj)?new Inspected.Core(objectName(obj)):isHTMLImageElement(obj)?this.inspectHTMLImageElement(obj):isDate(obj)?new Inspected.Core(obj.toString()):isBrowserObject(obj)?new Inspected.Core(objectName(obj)):this.withImages&&"function"==typeof obj.toImage&&!isFunction(obj)?this.inspectWithToImage(obj):isPlainObject(obj)||isFunction(obj)?this.inspectObject(obj):isObject(obj)?this.inspectObject(obj,!1):new Inspected.Core(objectName(obj))},Inspector2.prototype.inspectInternal=function(obj){var objDepth,res;return(objDepth=this.inspectingMap.get(obj))?new Inspected.Core("<"+parentString(this.depth-objDepth)+">"):this.depth>=this.maxDepth?new Inspected.Core("<maxDepth reached: "+this.maxDepth+">"):(this.depth++,this.inspectingMap.set(obj,this.depth),res=this.inspectByType(obj),this.inspectingMap["delete"](obj),this.depth--,res)},Inspector2.prototype.inspect=function(obj,callBack){var res;if(this.pendingTasks=0,this.withImages&&"function"!=typeof callBack)throw new Error("callBack required if withImages requested");return this.completionCallBack=function(_this){return function(){return callBack&&callBack(res)}}(this),res=this.inspectInternal(obj),0===this.pendingTasks&&this.completionCallBack(),res},Inspector2}(MinimalBaseObject)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(60).addModules({Array:__webpack_require__(61),Core:__webpack_require__(62),Object:__webpack_require__(63),String:__webpack_require__(64)})},function(module,exports,__webpack_require__){var Inspect,Inspected,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Inspect=__webpack_require__(48),module.exports=Inspect.Inspected||Inspect.addNamespace("Inspected",Inspected=function(superClass){function Inspected(){return Inspected.__super__.constructor.apply(this,arguments)}return extend(Inspected,superClass),Inspected}(Neptune.Base))},function(module,exports,__webpack_require__){var Array,MinimalBaseObject,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;MinimalBaseObject=__webpack_require__(53),module.exports=Array=function(superClass){function Array(inspectedArray){Array.__super__.constructor.apply(this,arguments),this.array=inspectedArray}return extend(Array,superClass),Array.getter({arrayOfStrings:function(){var i,len,ref,results,v;for(ref=this.array,results=[],i=0,len=ref.length;i<len;i++)v=ref[i],results.push(v.toString());return results},children:function(){return this.array.slice()}}),Array.prototype.delimitedString=function(delimiter){return null==delimiter&&(delimiter=", "),this.arrayOfStrings.join(", ")},Array.prototype.toString=function(){return"["+this.delimitedString()+"]"},Array}(MinimalBaseObject)},function(module,exports,__webpack_require__){var Core,MinimalBaseObject,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;MinimalBaseObject=__webpack_require__(53),module.exports=Core=function(superClass){function Core(value){Core.__super__.constructor.apply(this,arguments),this.value=value,value&&"HTMLImageElement"===value.constructor.name&&(this.image=value)}return extend(Core,superClass),Core.getter({children:function(){return null}}),Core.prototype.toString=function(){return""+this.value},Core}(MinimalBaseObject)},function(module,exports,__webpack_require__){var MinimalBaseObject,Object,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;MinimalBaseObject=__webpack_require__(53),module.exports=Object=function(superClass){function Object(properties,instanceOf,originalObject){this.properties=properties,this.instanceOf=instanceOf,this.originalObject=originalObject,Object.__super__.constructor.apply(this,arguments),this.length=this.properties?self.Object.keys(this.properties).length:0}return extend(Object,superClass),Object.getter({arrayOfStrings:function(){var k,ref,results,v;ref=this.properties,results=[];for(k in ref)v=ref[k],results.push(k+": "+v);return results},children:function(){var k,ref,ret,v;ret={},ref=this.properties;for(k in ref)v=ref[k],ret[k]=v;return ret}}),Object.prototype.delimitedString=function(delimiter){return null==delimiter&&(delimiter=", "),this.arrayOfStrings.join(", ")},Object.prototype.toString=function(){return this.inspected?this.inspected:this.instanceOf?"{"+this.instanceOf+" "+this.delimitedString()+"}":"{"+this.delimitedString()+"}"},Object}(MinimalBaseObject)},function(module,exports,__webpack_require__){var MinimalBaseObject,String,escapeJavascriptString,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;MinimalBaseObject=__webpack_require__(53),escapeJavascriptString=__webpack_require__(44).escapeJavascriptString,module.exports=String=function(superClass){function String(clonedString){String.__super__.constructor.apply(this,arguments),this.string=clonedString}return extend(String,superClass),String.prototype.toString=function(){return escapeJavascriptString(this.string)},String}(MinimalBaseObject)},function(module,exports,__webpack_require__){var Clone,Foundation,Map,Unique,byProperties,byStructure,clonedMap,inspect,topObject,uniquePropertyName;Foundation=__webpack_require__(25),Map=__webpack_require__(51),Unique=__webpack_require__(52),inspect=__webpack_require__(47).inspect,uniquePropertyName=Unique.PropertyName,clonedMap=null,byStructure=!1,byProperties=!1,topObject=null,module.exports=Clone=function(){function Clone(){}var clone,cloneArray,cloneByProperties,cloneByStructure,cloneObject,emptyClone;return cloneArray=function(array){var clonedArray,i,index,len,value;for(clonedArray=clonedMap.set(array,array.slice()),index=i=0,len=clonedArray.length;i<len;index=++i)value=clonedArray[index],clonedArray[index]=clone(value);return clonedArray},cloneObject=function(obj){var clonedObject,k,v;if(clonedObject=clonedMap.set(obj,emptyClone(obj)),obj===topObject&&byProperties||!obj.populateClone)for(k in obj)v=obj[k],clonedObject[k]=clone(v);else obj.populateClone(clonedObject);return clonedObject},Clone.emptyClone=emptyClone=function(obj){return obj.constructor===Array?[]:Object.create(Object.getPrototypeOf(obj))},Clone.clone=clone=function(obj,mode){var clonedObject,got;switch(mode){case"byStructure":byStructure=!0;break;case"byProperties":byProperties=!0}if(null===obj||void 0===obj||"object"!=typeof obj)return obj;if(byStructure&&obj.constructor!==Array&&obj.constructor!==Object)return obj;if(clonedMap){if(got=clonedMap.get(obj))return got}else topObject=obj,clonedMap=new Map;return clonedObject=obj.constructor===Array?cloneArray(obj):cloneObject(obj),topObject===obj&&(byStructure=!1,byProperties=!1,topObject=null,clonedMap=null),clonedObject},Clone.cloneByProperties=cloneByProperties=function(obj){return clone(obj,"byProperties")},Clone.cloneByStructure=cloneByStructure=function(obj){return clone(obj,"byStructure")},Clone}()},function(module,exports,__webpack_require__){var Inspect,Log,callStack,isString,peek,slice=[].slice;Inspect=__webpack_require__(48),callStack=__webpack_require__(67).callStack,isString=__webpack_require__(31).isString,peek=__webpack_require__(32).peek,module.exports=Log=function(){function Log(){}var noOptions;return Log.contextString=function(stack,defaultContext){var caller,context;return stack&&(caller=stack[1])?caller.original?caller.original:(context=caller["function"]?caller["class"]?caller["class"]+"::"+caller["function"]+"()":caller["function"]+"()":defaultContext?defaultContext+":":"",caller.sourceFileName?"at "+caller.sourceFileName+("-"+caller.sourceLine+": ")+context:void 0):"at "+(defaultContext||"(unknown context)")},Log.autoSizedIndepect=function(toInspect,maxLength,maxDepth){var depth,inspected;for(null==maxLength&&(maxLength=512),null==maxDepth&&(maxDepth=10),inspected=null,depth=maxDepth;(inspected=Inspect.inspectLean(toInspect,{maxDepth:depth,maxLength:maxLength})).match(/\.\.\.$/);)depth--;return inspected},Log.loggedParamsString=function(params){return"string"==typeof params?params:Log.autoSizedIndepect(params)},Log.hideLogging=function(){return Log.loggingHidden=!0},Log.showLogging=function(){return Log.loggingHidden=!1},Log.rawLog=function(){if(!Log.loggingHidden)return console.log.apply(console,arguments)},Log.rawErrorLog=function(){if(!Log.loggingHidden)return console.error.apply(console,arguments)},noOptions={},Log.logCore=function(m,stack,options){var className,isError,logger;return null==options&&(options=noOptions),className=options.className,isError=options.isError,Log.alternativeLogger&&Log.alternativeLogger.logCore(m,stack,options),logger=isError?Log.rawErrorLog:Log.rawLog,Neptune.isNode?logger(isString(m)?m:Inspect.formattedInspect(m)):logger(m,"\n# Foundation.log called "+Log.contextString(stack,className))},Log.log=function(){var args,m,stack;return args=1<=arguments.length?slice.call(arguments,0):[],m=1===args.length?args[0]:args,stack=callStack(),Log.logCore(m,stack),peek(args)},Log.log.withLabel=function(a,b){var k,obj,ret,v;if(isString(a))return obj={},obj[a]=b,Log.log(obj),b;ret=null;for(k in a)v=a[k],ret=v;return Log.log(obj),ret},Log.log.labeled=Log.log.withLabel,Log.log.error=function(){var args,m,stack;return args=1<=arguments.length?slice.call(arguments,0):[],m=1===args.length?args[0]:args,stack=callStack(),Log.logCore(m,stack,{isError:!0}),peek(args)},Log.logL=function(obj){var k,ret,v;console.warn("DEPRICATED: logL. USE log.labeled"),ret=null;for(k in obj)v=obj[k],ret=v;return Log.log(obj),ret},Log}()},function(module,exports,__webpack_require__){var CallStack,inspect,isString,parseUrl;isString=__webpack_require__(31).isString,parseUrl=__webpack_require__(40).parseUrl,inspect=__webpack_require__(47).inspect,module.exports=CallStack=function(){function CallStack(){}var CallStackLine;return CallStack.errorToString=function(error){return(null!=error?error.error:void 0)||(null!=error?error.message:void 0)||isString(error)&&error||Neptune.Art.Foundation.formattedInspect(error)},CallStack.CallStackLine=CallStackLine=function(){function CallStackLine(line){this.original=line,this["function"]=null,this.source=null,this["class"]=null,this.classPath=null,this.sourceFileName=null,this.sourcePath=null,this.sourceHostWithPort=null,this.sourceLine=0,this.sourceColumn=0,this.parseLineWithFunction(line)||this.parseLineWithoutFunction(line),this.subParseFunction(),this.subParseSource()}return CallStackLine.getter=function(map){var getter,prop,results;results=[];for(prop in map)getter=map[prop],results.push(Object.defineProperty(this.prototype,prop,{get:getter,configurable:!0}));return results},CallStackLine.setter=function(map){var prop,results,setter;results=[];for(prop in map)setter=map[prop],results.push(Object.defineProperty(this.prototype,prop,{set:setter,configurable:!0}));return results},CallStackLine.prototype.toString=function(){return this.original},CallStackLine.getter({fileWithLocation:function(){return this._fileWithLocation||(this._fileWithLocation=this.sourceFileName?this.sourcePath+"/"+this.sourceFileName+":"+this.sourceLine+":"+this.sourceColumn:this.original)}}),CallStackLine.prototype.parseLineWithFunction=function(line){var r;if(r=line.match(/\s*at\s((new\s)?[a-zA-Z0-9_.<>]+)\s\(([^)]*):([0-9]+):([0-9]+)\)/))return this["function"]=r[1],this.source=r[3],this.sourceLine=0|r[4],this.sourceColumn=0|r[5]},CallStackLine.prototype.parseLineWithoutFunction=function(line){var r;if(r=line.match(/\s*at\s([^)]*):([0-9]+):([0-9]+)/))return this.source=r[1],this.sourceLine=0|r[2],this.sourceColumn=0|r[3]},CallStackLine.prototype.subParseSource=function(){var url;if(this.source)return url=parseUrl(this.source),this.sourceFileName=url.fileName,this.sourcePath=url.path,this.sourceHostWithPort=url.hostWithPort},CallStackLine.prototype.subParseFunction=function(){var f;if(this["function"])return f=this["function"].split("."),this["function"]=f[f.length-1],"<anonymous>"===this["function"]&&(this["function"]=void 0),this["class"]=f[f.length-2],this.classPath=f.slice(0,f.length-2)},CallStackLine}(),CallStack.rawCallStack=(new Error).stack?function(ignoreTop){return null==ignoreTop&&(ignoreTop=0),(new Error).stack.split(/\n  */).slice(ignoreTop+2)}:function(ignoreTop){var e;null==ignoreTop&&(ignoreTop=0);try{throw new Error}catch(error1){return e=error1,e.stack.split(/\n  */).slice(ignoreTop+2)}},CallStack.callStack=function(ignoreTop){var i,len,line,ref,results;for(null==ignoreTop&&(ignoreTop=0),ref=CallStack.rawCallStack(ignoreTop+1),results=[],i=0,len=ref.length;i<len;i++)line=ref[i],results.push(new CallStackLine(line));return results},CallStack}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(69).includeInNamespace(__webpack_require__(70)).addModules({BinaryString:__webpack_require__(73),DataUri:__webpack_require__(81),EncodedImage:__webpack_require__(82),File:__webpack_require__(72),Stream:__webpack_require__(80),TypedarraySlicePolyfill:__webpack_require__(71),Utf8:__webpack_require__(74),WriteStream:__webpack_require__(83)})},function(module,exports,__webpack_require__){var Binary,Foundation,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(21),module.exports=Foundation.Binary||Foundation.addNamespace("Binary",Binary=function(superClass){function Binary(){return Binary.__super__.constructor.apply(this,arguments)}return extend(Binary,superClass),Binary}(Neptune.Base))},function(module,exports,__webpack_require__){__webpack_require__(71),module.exports=[__webpack_require__(72),{stream:__webpack_require__(80).stream},[__webpack_require__(73),"binary binaryFromBlob"]]},function(module,exports,__webpack_require__){var base,base1,base10,base11,base2,base3,base4,base5,base6,base7,base8,base9,bound,genericSlice,ref,ref1;bound=__webpack_require__(24).bound,(base=Uint8Array.prototype).slice||(base.slice=genericSlice=function(start,end){var i,j,length,out,outIndex,ref,ref1;for(null==end&&(end=this.length),start<0&&(start+=this.length),end<0&&(end+=this.length),start=bound(0,start,this.length),end=bound(0,end,this.length),out=new Uint8Array(length=end-start),outIndex=0,i=j=ref=start,ref1=end;ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j)out[outIndex++]=this[i];return out}),(base1=Int8Array.prototype).slice||(base1.slice=genericSlice),(base2=Uint8Array.prototype).slice||(base2.slice=genericSlice),(base3=Int16Array.prototype).slice||(base3.slice=genericSlice),(base4=Uint16Array.prototype).slice||(base4.slice=genericSlice),(base5=Int32Array.prototype).slice||(base5.slice=genericSlice),(base6=Uint32Array.prototype).slice||(base6.slice=genericSlice),(base7=Float32Array.prototype).slice||(base7.slice=genericSlice),(base8=Float64Array.prototype).slice||(base8.slice=genericSlice),null!=(ref=self.Uint8ClampedArray)&&((base9=ref.prototype).slice||(base9.slice=genericSlice)),null!=(ref1=self.CanvasPixelArray)&&((base10=ref1.prototype).slice||(base10.slice=genericSlice)),(base11=ArrayBuffer.prototype).slice||(base11.slice=function(start,end){return new Uint8Array(this).slice(start,end).buffer})},function(module,exports,__webpack_require__){var BinaryString,File,Promise,StandardLib;StandardLib=__webpack_require__(24),Promise=StandardLib.Promise,BinaryString=__webpack_require__(73),module.exports=File=function(){function File(){}var readAsArrayBuffer;return File._readWithPromise=function(readFunction){return function(file){return new Promise(function(resolve,reject){var fr;return fr=new FileReader,fr[readFunction](file),fr.onerror=reject,fr.onload=function(_this){return function(event){return resolve(event.target.result)}}(this)})}},File.readAsArrayBuffer=readAsArrayBuffer=File._readWithPromise("readAsArrayBuffer"),File.readAsDataURL=File._readWithPromise("readAsDataURL"),File.readAsBinaryString=function(file){return readAsArrayBuffer(file).then(function(arrayBuffer){return new BinaryString(arrayBuffer)})},File}()},function(module,exports,__webpack_require__){var BaseObject,Binary,BinaryString,ClassSystem,StandardLib,Utf8,compactFlatten,encodings,inspect,isFunction,isPlainArray,isString,log,min,pad,readFileAsArrayBuffer,readFileAsDataUrl,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Binary=__webpack_require__(69),Utf8=__webpack_require__(74),StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),isString=StandardLib.isString,isFunction=StandardLib.isFunction,isPlainArray=StandardLib.isPlainArray,log=StandardLib.log,min=StandardLib.min,inspect=StandardLib.inspect,readFileAsDataUrl=StandardLib.readFileAsDataUrl,readFileAsArrayBuffer=StandardLib.readFileAsArrayBuffer,compactFlatten=StandardLib.compactFlatten,pad=StandardLib.pad,BaseObject=ClassSystem.BaseObject,inspect=ClassSystem.inspect,encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",module.exports=BinaryString=function(superClass){function BinaryString(arg){this.bytes=function(){if(arg instanceof BinaryString)return BinaryString.cloneUint8Array(arg.bytes);if(isFunction(null!=arg?arg.uint8Array:void 0))return arg.uint8Array();if(isPlainArray(arg))return new Uint8Array(arg);if(arg instanceof ArrayBuffer)return new Uint8Array(arg);if(arg instanceof Uint8Array)return arg;if(isString(arg))return Utf8.toBuffer(arg);if(isFunction(arg.toString))return Utf8.toBuffer(arg.toString());throw new Error("invalid Binary string constructor argument: "+inspect(arg))}(),this.length=this.bytes.length}var binary;return extend(BinaryString,superClass),BinaryString.binary=binary=function(arg){return arg instanceof BinaryString?arg:new BinaryString(arg)},BinaryString.binaryFromBlob=function(blob){return readFileAsArrayBuffer(blob).then(function(ab){return binary(ab)})},BinaryString.cloneUint8Array=function(srcU8A){var dstU8A;return dstU8A=new Uint8Array(new ArrayBuffer(src.length)),dstU8A.set(srcU8A),dstU8A},BinaryString.prototype.slice=function(a,b){return new BinaryString(this.bytes.slice(a,b))},BinaryString.fromBase64=function(base64encoding){var byteString,i,j,len,ref,uint8Array;for(byteString=atob(base64encoding),len=byteString.length,uint8Array=new Uint8Array(new ArrayBuffer(len)),i=j=0,ref=len;j<ref;i=j+=1)uint8Array[i]=byteString.charCodeAt(i);return new BinaryString(uint8Array)},BinaryString.prototype.toDataUri=function(){return readFileAsDataUrl(new Blob([this.bytes]))},BinaryString.fromDataUri=function(dataURI){var base64encoding,splitDataURI;return splitDataURI=dataURI.split(","),base64encoding=splitDataURI[1],this.fromBase64(base64encoding)},BinaryString.prototype.toString=function(){return Utf8.toString(this.bytes)},BinaryString.prototype.toArrayBuffer=function(){return this.bytes.buffer},BinaryString.prototype.toBlob=function(){return new Blob([this.bytes])},BinaryString.prototype.eq=function(b){return 0===this.compare(b)},BinaryString.prototype.compare=function(b){var bytesA,bytesB,diff,i,j,ref;for(bytesA=this.bytes,bytesB=b.bytes,i=j=0,ref=min(this.length,b.length);0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)if(0!==(diff=bytesA[i]-bytesB[i]))return diff;return this.length-b.length},BinaryString.prototype.inspect=function(){return this.getInspectedString()},BinaryString.getter({uint8Array:function(){return this.bytes},arrayBuffer:function(){return this.bytes.buffer},blob:function(){return new Blob([this.bytes])},plainArray:function(){var b,j,len1,ref,results;for(ref=this.bytes,results=[],j=0,len1=ref.length;j<len1;j++)b=ref[j],results.push(b);return results},byteLength:function(){return this.length},inspectedString:function(stride,maxBytes){var characters,count,line,offset;return null==stride&&(stride=8),null==maxBytes&&(maxBytes=64),count=0,characters=[],this.length<maxBytes&&(maxBytes=this.length),line=new Array(stride),compactFlatten(["BinaryString length: "+this.length+" bytes",maxBytes<this.length?"First "+maxBytes+" bytes:":void 0,function(){var j,ref,ref1,results;for(results=[],offset=j=0,ref=maxBytes,ref1=stride;ref1>0?j<ref:j>ref;offset=j+=ref1)results.push(this._inspectLine(offset,stride,maxBytes));return results}.call(this)]).join("\n")}}),BinaryString.prototype._inspectLine=function(offset,length,maxBytes){var b,characters,end,hexCharacters,i,y;return end=min(this.length,offset+length),maxBytes>=0&&(end=min(end,maxBytes)),characters=function(){var j,ref,ref1,results;for(results=[],i=j=ref=offset,ref1=end;ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j)b=this.bytes[i],b>=31&&b<=127?results.push(String.fromCharCode(b)):results.push("");return results}.call(this),hexCharacters=function(){var j,ref,ref1,results;for(results=[],i=j=ref=offset,ref1=end;ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j)b=this.bytes[i],y=b.toString(16),y.length<2&&(y="0"+y),results.push(y);return results}.call(this),pad(hexCharacters.join(" "),3*length)+" '"+characters.join("")+"'"},BinaryString.prototype.toBase64=function(){return this.length>16384?this.toBase64ToDataUri():this.toBase64Custom()},BinaryString.prototype.toBase64ToDataUri=function(){return this.toDataUri().then(function(dataUri){return dataUri.split(",")[1]})},BinaryString.prototype.toBase64Custom=function(){var a,b,base64,byteLength,byteRemainder,bytes,c,chunk,d,i,j,mainLength,ref;for(bytes=this.bytes,base64="",byteLength=bytes.byteLength,byteRemainder=byteLength%3,mainLength=byteLength-byteRemainder,i=j=0,ref=mainLength-1;j<=ref;i=j+=3)chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],a=(16515072&chunk)>>18,b=(258048&chunk)>>12,c=(4032&chunk)>>6,d=63&chunk,base64+=encodings[a]+encodings[b]+encodings[c]+encodings[d];return Promise.resolve(function(){switch(byteRemainder){case 0:return base64;case 1:return chunk=bytes[mainLength],a=(252&chunk)>>2,b=(3&chunk)<<4,base64+encodings[a]+encodings[b]+"==";case 2:return chunk=bytes[mainLength]<<8|bytes[mainLength+1],a=(64512&chunk)>>10,b=(1008&chunk)>>4,c=(15&chunk)<<2,base64+encodings[a]+encodings[b]+encodings[c]+"="}}())},BinaryString}(BaseObject)},function(module,exports){var Utf8;module.exports=Utf8=function(){function Utf8(){}return Utf8.toBuffer=function(string){return new Uint8Array(this.toArray(string))},Utf8.toArray=function(string){var char,i,out,uriEncoded;return uriEncoded=encodeURIComponent(string),i=0,out=function(){var results;for(results=[];i<uriEncoded.length;)char=uriEncoded.charCodeAt(i++),37===char?(i+=2,results.push(parseInt(uriEncoded.substr(i-2,2),16))):results.push(char);return results}()},Utf8.toString=function(a){var error,x,y;if(void 0===a)return"<undefined>";if(null===a)return"<null>";try{return a instanceof ArrayBuffer&&(a=new Uint8Array(a)),decodeURIComponent(function(){var j,len,results;for(results=[],j=0,len=a.length;j<len;j++)x=a[j],y=x.toString(16),y.length<2&&(y="0"+y),y="%"+y,results.push(y);return results}().join(""))}catch(error1){return error=error1,console.warn(error.toString(),error),"<"+a.length+" binary bytes>"}},Utf8}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(76).includeInNamespace(__webpack_require__(77)).addModules({BaseObject:__webpack_require__(78),WebpackHotLoader:__webpack_require__(79)})},function(module,exports,__webpack_require__){var ClassSystem,Foundation,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(21),module.exports=Foundation.ClassSystem||Foundation.addNamespace("ClassSystem",ClassSystem=function(superClass){function ClassSystem(){return ClassSystem.__super__.constructor.apply(this,arguments)}return extend(ClassSystem,superClass),ClassSystem}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[[__webpack_require__(78),"mixInto createAllClass createWithPostCreate createHotWithPostCreate"]]},function(module,exports,__webpack_require__){
var BaseObject,Log,MinimalBaseObject,StandardLib,Unique,WebpackHotLoader,callStack,capitalize,clone,concatInto,decapitalize,extendClone,functionName,getModuleBeingDefined,inspectedObjectLiteral,isFunction,isPlainArray,isPlainObject,isString,log,mergeInto,nextUniqueObjectId,objectName,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};StandardLib=__webpack_require__(24),WebpackHotLoader=__webpack_require__(79),capitalize=StandardLib.capitalize,decapitalize=StandardLib.decapitalize,log=StandardLib.log,extendClone=StandardLib.extendClone,clone=StandardLib.clone,isFunction=StandardLib.isFunction,objectName=StandardLib.objectName,isPlainObject=StandardLib.isPlainObject,functionName=StandardLib.functionName,isString=StandardLib.isString,isPlainArray=StandardLib.isPlainArray,Unique=StandardLib.Unique,callStack=StandardLib.callStack,Log=StandardLib.Log,inspectedObjectLiteral=StandardLib.inspectedObjectLiteral,MinimalBaseObject=StandardLib.MinimalBaseObject,getModuleBeingDefined=StandardLib.getModuleBeingDefined,concatInto=StandardLib.concatInto,mergeInto=StandardLib.mergeInto,isString=StandardLib.isString,nextUniqueObjectId=Unique.nextUniqueObjectId,module.exports=BaseObject=function(superClass){function BaseObject(){this.__uniqueId=null}var arrayPropertyExtender,createWithPostCreate,excludedKeys,getOwnProperty,imprintObject,mixInto,objectPropertyExtender,warnedAboutIncludeOnce;return extend(BaseObject,superClass),BaseObject.objectsCreated=0,BaseObject.objectsCreatedByType={},BaseObject.resetStats=function(){return BaseObject.objectsCreated=0,BaseObject.objectsCreatedByType={}},BaseObject._name=null,BaseObject.imprintObject=imprintObject=function(toObject,fromObject,preserveState){var fromValue,k,v;if(null==preserveState&&(preserveState=!1),!preserveState)for(k in toObject)v=toObject[k],fromObject.hasOwnProperty(k)||delete toObject[k];for(k in fromObject)fromValue=fromObject[k],fromObject.hasOwnProperty(k)&&(preserveState&&!isFunction(fromValue)&&!isFunction(toObject[k])&&k.match(/^_/)&&toObject.hasOwnProperty(k)||(toObject[k]=fromValue));return fromObject},BaseObject.imprintFromClass=function(updatedKlass){var _name,namespace,namespacePath,oldConstructor,ref;return updatedKlass!==this&&(ref=this,namespace=ref.namespace,namespacePath=ref.namespacePath,_name=ref._name,oldConstructor=this.prototype.constructor,imprintObject(this,updatedKlass,!0),imprintObject(this.prototype,updatedKlass.prototype,!1),this.prototype.constructor=oldConstructor,this.namespace=namespace,this.namespacePath=namespacePath,this._name=_name),this},BaseObject.createWithPostCreate=createWithPostCreate=function(a,b){var _module,klass;return klass=b?(_module=a,b):a,_module||(_module=getModuleBeingDefined()),(null!=klass?klass.postCreate:void 0)?(null!=_module?_module.hot:void 0)?WebpackHotLoader.runHot(_module,function(moduleState){var classModuleState,hotReloaded,liveClass;return(classModuleState=moduleState[klass.getName()])?(liveClass=classModuleState.liveClass,hotReloaded=!0,classModuleState.hotReloadVersion++,classModuleState.hotUpdatedFromClass=klass,liveClass.namespace._setChildNamespaceProps(liveClass.getName(),klass),klass._name=liveClass._name,liveClass.imprintFromClass(klass),Log.log({"Foundation.BaseObject: class hot-reload":{"class":liveClass.getNamespacePath(),version:classModuleState.hotReloadVersion}})):(hotReloaded=!1,klass._hotClassModuleState=moduleState[klass.getName()]=classModuleState={liveClass:liveClass=klass,hotUpdatedFromClass:null,hotReloadVersion:0}),liveClass.postCreate({hotReloadEnabled:!0,hotReloaded:hotReloaded,classModuleState:classModuleState,module:_module})}):klass.postCreate({hotReloadEnabled:!1,hotReloaded:!1,classModuleState:{},module:_module})||klass:klass},BaseObject.createHotWithPostCreate=function(a,b){return log.error("createHotWithPostCreate is DEPRICATED"),createWithPostCreate(a,b)},BaseObject.postCreate=function(options){return this.getIsAbstractClass()?this.postCreateAbstractClass(options):this.postCreateConcreteClass(options)},BaseObject.postCreateAbstractClass=function(options){return this},BaseObject.postCreateConcreteClass=function(options){return this},excludedKeys=["__super__","namespace","namespacePath"].concat(Object.keys(Neptune.Base)),BaseObject.mixInto=mixInto=function(){var i,intoClass,k,keys,klass,len,v;for(intoClass=arguments[0],klass=arguments[1],keys=3<=arguments.length?slice.call(arguments,2):[],log.error("DEPRICATED: mixInto"),0===keys.length&&(keys=Object.keys(klass)),i=0,len=keys.length;i<len;i++)k=keys[i],indexOf.call(excludedKeys,k)<0&&(v=klass[k],intoClass[k]&&log.error("Foundation.mixInto - mix "+getClassName(klass)+" into "+getClassName(intoClass)+": "+k+" already exists."),intoClass[k]=v);return intoClass},BaseObject.createAllClass=function(){var All,arg,args,i,len,namespace;for(namespace=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[],log.error("DEPRICATED: createAllClass. Use Neptune-Namespace feature: create file in directory that is the same name as the directory."),i=0,len=args.length;i<len;i++)arg=args[i],arg.prototype instanceof BaseObject&&log.error("createAllClass arguments cannot be subclasses of BaseObject: "+getClassName(namespace)+":"+getClassName(arg)),mixInto(namespace,arg);return All=function(superClass1){function All(){return All.__super__.constructor.apply(this,arguments)}return extend(All,superClass1),All}(namespace)},BaseObject.implementsInterface=function(object,methods){var i,len,method;for(i=0,len=methods.length;i<len;i++)if(method=methods[i],"function"!=typeof object[method])return!1;return!0},warnedAboutIncludeOnce=!1,BaseObject.include=function(obj){var key,ref,value;log.error("DEPRICATED: BaseObject.include. Use pattern."),warnedAboutIncludeOnce||(warnedAboutIncludeOnce=!0,console.warn("Mixin pattern:\n\n  To define a mixin:\n\n    MyMixin = (superClass) ->\n      class MyMixin extends superClass\n        ... write your mixin as-if it were part of the normal inheritance hierachy\n\n  To use a mixin:\n\n    class MyClass extends MyMixin MySuperClass\n\n  To use two mixins:\n\n    class MyClass extends MyMixin1 MyMixin2 MySuperClass"));for(key in obj)value=obj[key],"included"!==key&&(this[key]||(this[key]=value));ref=obj.prototype;for(key in ref)value=ref[key],key&&(this.prototype[key]||(this.prototype[key]=value));return"function"==typeof obj.included&&obj.included(this),this},BaseObject.getPrototypePropertyExtendedByInheritance=function(propertyName,defaultStructure,_clone){return null==_clone&&(_clone=extendClone),log.error("DEPRICATED: getPrototypePropertyExtendedByInheritance. use extendableProperty"),getOwnProperty(this.prototype,propertyName,function(object){return _clone(object[propertyName]||defaultStructure)})},BaseObject.getOwnProperty=getOwnProperty=function(object,property,init){return object.hasOwnProperty(property)?object[property]:object[property]=isFunction(init)?init(object):clone(object[property]||init)},BaseObject.objectPropertyExtender=objectPropertyExtender=function(mapOrKey,value){if(isString(mapOrKey))return this[mapOrKey]=value;if(isPlainObject(mapOrKey))return mergeInto(this,mapOrKey);throw new Error("first value argument must be a plain object or string")},BaseObject.arrayPropertyExtender=arrayPropertyExtender=function(arrayOrValue){return isPlainArray(arrayOrValue)?concatInto(this,arrayOrValue):this.push(arrayOrValue)},BaseObject.extendableProperty=function(map,propertyExtender){var defaultValue,prop,results;results=[];for(prop in map){if(defaultValue=map[prop],!isPlainArray(defaultValue)&&!isPlainObject(defaultValue))throw new Error("only plain objects or plain arrays supported for defaultValue");results.push(function(_this){return function(prop,defaultValue){var extenderName,getterName,internalName,propExtender,ucProp;return propExtender=propertyExtender||function(){if(isPlainObject(defaultValue))return objectPropertyExtender;if(isPlainArray(defaultValue))return arrayPropertyExtender;throw new Error("Unsupported property type for extendableProperty: "+inspect(defaultValue)+". Please specify a custom propertyExtender function.")}(),internalName=_this.propInternalName(prop),ucProp=capitalize(prop),getterName="get"+ucProp,extenderName="extend"+ucProp,_this[getterName]=function(){return this.prototype[internalName]||defaultValue},_this.addGetter(prop,function(){return this[internalName]||defaultValue}),_this[extenderName]=function(value){var propValue;return propValue=getOwnProperty(this.prototype,internalName,defaultValue),arguments.length>0&&propExtender.apply(propValue,arguments),propValue},_this.prototype[extenderName]=function(value){var propValue;return propValue=getOwnProperty(this,internalName,defaultValue),arguments.length>0&&propExtender.apply(propValue,arguments),propValue}}}(this)(prop,defaultValue))}return results},BaseObject.getNamespacePath=function(){var ref;return this.namespacePath?(null!=(ref=this.__super__)?ref["class"].namespacePath:void 0)===this.namespacePath?this.namespacePath=this.getName()+" extends "+this.__super__["class"].getNamespacePath():this.namespacePath:this.namespacePath=this.getName()+" extends "+this.__super__["class"].getNamespacePath()},BaseObject.getClassName=function(klass){return null==klass&&(klass=this),("function"==typeof klass.getName?klass.getName():void 0)||klass.name},BaseObject.inspect=function(){return this.getNamespacePath()},BaseObject.prototype.inspect=function(){return"<"+this["class"].namespacePath+">"},BaseObject.getter({inspectObjects:function(){return console.warn("inspectObjects/getInspectObjects is DEPRICATED. Use: inspectedObjects/getInspectedObjects"),this.getInspectedObjects()},inspectedObjects:function(){return inspectedObjectLiteral("<"+this["class"].getNamespacePath()+">")}}),BaseObject.classGetter({inspectedObjects:function(){return inspectedObjectLiteral(this.getNamespacePath())}}),BaseObject.abstractClass=function(){if(this.getIsSingletonClass())throw new Error("abstract classes cannot also be singleton");return this._firstAbstractAncestor=this},BaseObject.classGetter({isAbstractClass:function(){return!(this.prototype instanceof this._firstAbstractAncestor)},abstractPrototype:function(){return this._firstAbstractAncestor.prototype},firstAbstractAncestor:function(){return this._firstAbstractAncestor},isSingletonClass:function(){return!!this.getSingleton}}),BaseObject.getAbstractClass=function(){return this._firstAbstractAncestor},BaseObject.abstractClass(),BaseObject.propertyIsAbstract=function(methodName){return this.getAbstractClass().prototype[methodName]===this.prototype[methodName]},BaseObject.propertyIsConcrete=function(methodName){return this.getAbstractClass().prototype[methodName]!==this.prototype[methodName]},BaseObject.singletonClass=function(){var args,map;if(args=1<=arguments.length?slice.call(arguments,0):[],this.getIsAbstractClass())throw new Error("singleton classes cannot be abstract");return map={singleton:function(){var ref;return(null!=(ref=this._singleton)?ref["class"]:void 0)===this?this._singleton:this._singleton=function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(this,args,function(){})}},map[decapitalize(functionName(this))]=function(){return this.getSingleton()},this.classGetter(map),null},BaseObject.getter({className:function(){return this["class"].getClassName()},"class":function(){return this.constructor},keys:function(){return Object.keys(this)},namespacePath:function(){return this["class"].getNamespacePath()},classPathNameAndId:function(){return this.classPathName+":"+this.objectId},uniqueId:function(){return this.__uniqueId||(this.__uniqueId=nextUniqueObjectId())},objectId:function(){return this.__uniqueId||(this.__uniqueId=nextUniqueObjectId())}}),BaseObject.prototype.implementsInterface=function(methods){return Function.BaseObject.implementsInterface(this,methods)},BaseObject.prototype.tap=function(f){return f(this),this},BaseObject.rawLog=function(){return Log.rawLog.apply(Log,arguments)},BaseObject.log=function(){var a,stack,toLog;return stack=callStack(),toLog=function(){var i,len,results;if(arguments.length>1){for(results=[],i=0,len=arguments.length;i<len;i++)a=arguments[i],results.push(a);return results}return arguments[0]}.apply(this,arguments),Log.logCore(toLog,stack,{className:this.className}),arguments[arguments.length-1]},BaseObject.prototype.log=BaseObject.log,BaseObject.prototype.rawLog=BaseObject.rawLog,BaseObject}(MinimalBaseObject)},function(module,exports){var WebpackHotLoader;module.exports=WebpackHotLoader=function(){function WebpackHotLoader(){}return WebpackHotLoader.runHot=function(_module,modulePostLoadAction){var base,moduleState;return(null!=_module?_module.hot:void 0)?(moduleState=((base=_module.hot).data||(base.data={moduleState:{}})).moduleState,_module.hot.accept(),_module.hot.dispose(function(data){return data.moduleState=moduleState}),modulePostLoadAction(moduleState)):modulePostLoadAction({})},WebpackHotLoader}()},function(module,exports,__webpack_require__){var BaseObject,Binary,ClassSystem,Stream,binary,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ClassSystem=__webpack_require__(75),Binary=__webpack_require__(69),BaseObject=ClassSystem.BaseObject,binary=__webpack_require__(73).binary,module.exports=Stream=function(superClass){function Stream(byteView){this.byteView=byteView,this.pos=0}return extend(Stream,superClass),Stream.stream=function(arg){return arg instanceof Stream?arg:arg instanceof ArrayBuffer?Stream.fromArrayBuffer(arg):new Stream(arg instanceof Uint8Array?arg:binary(arg).bytes)},Stream.fromArrayBuffer=function(arrayBuffer){return new Stream(new Uint8Array(arrayBuffer,0,arrayBuffer.byteLength))},Stream.prototype.readByte=function(){return this.byteView[this.pos++]},Stream.prototype.readAsi=function(){var ret,shift,val;for(ret=0,shift=0,val=128;val>=128;)val=this.readByte(),ret+=val%128<<shift,shift+=7;return ret},Stream.prototype.uint8Array=function(){return this.byteView},Stream.prototype.read=function(length){var begin,end;return begin=this.pos,this.pos+=length,end=this.pos,new Stream(this.byteView.subarray(begin,end))},Stream.prototype.inspect=function(){return"{Stream pos="+this.pos+" byteOffset="+this.byteView.byteOffset+" length="+this.byteView.length+"}"},Stream.prototype.readAsiString=function(){return this.read(this.readAsi())},Stream.prototype.done=function(){return this.pos>=this.byteView.length},Stream.getter({isDone:function(){return this.pos>=this.byteView.length},binaryString:function(){return binary(this.byteView)},inspectedString:function(){return this.binaryString.inspectedString}}),Stream.prototype.toString=function(){return this.binaryString.toString()},Stream}(BaseObject)},function(module,exports,__webpack_require__){var DataUri,Promise,StandardLib,binary,isString,readAsDataURL;StandardLib=__webpack_require__(24),binary=__webpack_require__(73).binary,readAsDataURL=__webpack_require__(72).readAsDataURL,Promise=StandardLib.Promise,isString=StandardLib.isString,module.exports=DataUri=function(){function DataUri(){}var isDataUri;return DataUri.isDataUri=isDataUri=function(dataString){return isString(dataString)&&"data:"===dataString.slice(0,5)},DataUri.toDataUri=function(data){if(!data)throw new Error("data not set");return data instanceof self.File?readAsDataURL(data):isDataUri(data)?Promise.resolve(data):binary(data).toBase64().then(function(base64){return"data:image/png;base64,"+base64})},DataUri}()},function(module,exports,__webpack_require__){var EncodedImage,Promise,StandardLib,readFileAsDataUrl,toDataUri;StandardLib=__webpack_require__(24),toDataUri=__webpack_require__(81).toDataUri,Promise=StandardLib.Promise,readFileAsDataUrl=StandardLib.readFileAsDataUrl,module.exports=EncodedImage=function(){function EncodedImage(){}var get;return EncodedImage.get=get=function(url,options){return Promise.resolve().then(function(){if(options)return Neptune.Art.Foundation.RestClient.getArrayBuffer(url,options).then(function(arrayBuffer){return readFileAsDataUrl(new Blob([arrayBuffer]))}).then(function(_this){return function(dataUri){return url=dataUri}}(this))}).then(function(){return new Promise(function(resolve,reject){var image;return image=new Image,url.match(/^(file|data)\:/i)||(image.crossOrigin="Anonymous"),image.onload=function(){return resolve(image)},image.onerror=reject,image.src=url})})},EncodedImage.loadImage=function(url){return console.warn(this.namespacePath+"#loadImage DEPRICATED. Use #get"),get(url)},EncodedImage.toImage=function(encodedImageData){return toDataUri(encodedImageData).then(function(_this){return function(dataUri){return get(dataUri)}}(this))},EncodedImage}()},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,Promise,StandardLib,WriteStream,binary,bound,bufferSize,log,readFileAsArrayBuffer,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),binary=__webpack_require__(73).binary,Promise=StandardLib.Promise,readFileAsArrayBuffer=StandardLib.readFileAsArrayBuffer,bound=StandardLib.bound,BaseObject=ClassSystem.BaseObject,log=ClassSystem.log,bufferSize=1024,module.exports=WriteStream=function(superClass){function WriteStream(){this._written=[],this._writeBuffer=new Uint8Array(bufferSize),this._pos=0,this._writtenLength=0}return extend(WriteStream,superClass),WriteStream.prototype.writeByte=function(byte){return this._pos===bufferSize&&this._commitHead(),this._writeBuffer[this._pos++]=byte},WriteStream.prototype.writeAsi=function(number){var nextByte,results;if(!(number>=0))throw new Error("expected number >= 0");for(results=[];;){if(nextByte=127&number,number>>=7,!(number>0)){this.writeByte(nextByte);break}results.push(this.writeByte(128|nextByte))}return results},WriteStream.prototype.write=function(string){var binaryString;return binaryString=binary(string),this._pos+binaryString.length<=bufferSize?(this._writeBuffer.set(binaryString.uint8Array,this._pos),this._pos+=binaryString.length):(this._commitHead(),this._writtenLength+=binaryString.length,this._written.push(binaryString.uint8Array))},WriteStream.prototype.writeAsiString=function(string){var binaryString;return binaryString=binary(string),this.writeAsi(binaryString.length),this.write(binaryString)},WriteStream.getter({arrayBufferPromise:function(){return this._compact().then(function(uint8Array){return uint8Array.buffer})},binaryStringPromise:function(){return this.arrayBufferPromise.then(function(ab){return binary(ab)})},length:function(){return this._pos+this._writtenLength}}),WriteStream.prototype._compact=function(){switch(this._commitHead(),this._written.length){case 0:return new Promise(function(resolve){return resolve(new Uint8Array(0))});case 1:return new Promise(function(_this){return function(resolve){return resolve(_this._written[0])}}(this));default:return readFileAsArrayBuffer(new Blob(this._written)).then(function(_this){return function(ab){return _this._written=[new Uint8Array(ab)],_this._written[0]}}(this))}},WriteStream.prototype._commitHead=function(){if(this._pos>0)return this._writtenLength+=this._pos,this._written.push(this._writeBuffer.slice(0,this._pos)),this._pos=0},WriteStream}(BaseObject)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(85).includeInNamespace(__webpack_require__(86)).addModules({Analytics:__webpack_require__(91),AsyncLocalStorage:__webpack_require__(92),BatchLoader:__webpack_require__(95),CommunicationStatus:__webpack_require__(96),Epoch:__webpack_require__(97),GlobalCounts:__webpack_require__(89),InstanceFunctionBindingMixin:__webpack_require__(98),JsonStore:__webpack_require__(99),ObjectTreeFactory:__webpack_require__(90),ProgressAdapter:__webpack_require__(87),RestClient:__webpack_require__(100),SingleObjectTransaction:__webpack_require__(101),Stat:__webpack_require__(102),Transaction:__webpack_require__(103),Validator:__webpack_require__(104),WebWorker:__webpack_require__(88),WorkerRpc:__webpack_require__(94)})},function(module,exports,__webpack_require__){var Foundation,Tools,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(21),module.exports=Foundation.Tools||Foundation.addNamespace("Tools",Tools=function(superClass){function Tools(){return Tools.__super__.constructor.apply(this,arguments)}return extend(Tools,superClass),Tools}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[[__webpack_require__(87),"executePromiseSequence"],__webpack_require__(88),__webpack_require__(89),__webpack_require__(90)]},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,ProgressAdapter,StandardLib,isArray,isFunction,isNumber,log,max,min,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),BaseObject=ClassSystem.BaseObject,isNumber=StandardLib.isNumber,isFunction=StandardLib.isFunction,isArray=StandardLib.isArray,log=StandardLib.log,max=StandardLib.max,min=StandardLib.min,module.exports=ProgressAdapter=function(superClass){function ProgressAdapter(stepWeights,progressCallback1){if(this.stepWeights=stepWeights,this.progressCallback=progressCallback1,!isFunction(this.progressCallback)||!isArray(this.stepWeights)&&!isNumber(this.stepWeights))throw new Error("invalid params");this._currentStep=0,this._generateSteps(),this._currentProgress=0,this._warningCount=0,this.setCurrentProgress(0)}return extend(ProgressAdapter,superClass),ProgressAdapter.getter("steps currentStep currentProgress warningCount",{currentProgressPercent:function(){return(100*this._currentProgress|0)+"%"},currentProgressBase:function(){return this._currentStep<=0?0:this._currentStep>=this._steps.length?1:this._steps[this._currentStep]}}),ProgressAdapter.setter({currentProgress:function(p){return"function"==typeof this.progressCallback?this.progressCallback(min(1,this._currentProgress=max(p,this._currentProgress))):void 0}}),ProgressAdapter.prototype.makeProgress=function(){return this._currentStep++,this._currentStep>this._steps.length&&(this._warningCount++,console.warn("ProgressAdapter: makeProgress/Callback called too many times!",{currentStep:this._currentStep,steps:this._steps,stepWeights:this.stepWeights})),this.setCurrentProgress(this.currentProgressBase)},ProgressAdapter.prototype.makeProgressCallback=function(){var rangeEnd,rangeStart;return this._finishLastProgress(),rangeStart=this.currentProgressBase,this._currentStep++,rangeEnd=this.currentProgressBase,function(_this){return function(progress){return _this.setCurrentProgress(rangeStart+(rangeEnd-rangeStart)*progress)}}(this)},ProgressAdapter.prototype._finishLastProgress=function(){var progress;if(this._currentProgress<(progress=this.currentProgressBase))return this.setCurrentProgress(progress)},ProgressAdapter.prototype._executePromiseSequence=function(sequence,lastResult,index,resolve){return index>=sequence.length?(this._finishLastProgress(),resolve(lastResult)):Promise.resolve(sequence[index](lastResult,this.makeProgressCallback())).then(function(_this){return function(nextResult){return _this._executePromiseSequence(sequence,nextResult,index+1,resolve)}}(this))},ProgressAdapter.prototype.executePromiseSequence=function(sequence){return new Promise(function(_this){return function(resolve){return _this._executePromiseSequence(sequence,null,0,resolve)}}(this))},ProgressAdapter.executePromiseSequence=function(progressCallback,a,b){var pa,sequence,weights;return b?(weights=a,sequence=b):(sequence=a,weights=sequence.length),pa=new ProgressAdapter(weights,progressCallback),pa.executePromiseSequence(sequence)},ProgressAdapter.prototype._generateSteps=function(){var i,j,len,numSteps,ref,s,step,total,w;if(isNumber(numSteps=this.stepWeights))return this._steps=function(){var j,ref,results;for(results=[],i=j=0,ref=numSteps;j<ref;i=j+=1)results.push(i/numSteps);return results}();for(total=0,ref=this.stepWeights,j=0,len=ref.length;j<len;j++)w=ref[j],total+=w;return step=0,this._steps=function(){var k,len1,ref1,results;for(ref1=this.stepWeights,results=[],k=0,len1=ref1.length;k<len1;k++)w=ref1[k],s=step,step+=w/total,results.push(s);return results}.call(this)},ProgressAdapter}(BaseObject)},function(module,exports,__webpack_require__){var StandardLib,WebWorker,log;StandardLib=__webpack_require__(24),log=StandardLib.log,module.exports=WebWorker=function(){function WebWorker(){}var startWorkerFromJsString;return WebWorker.echoWebWorker="self.onmessage=function(e){postMessage('Worker: '+e.data);}",WebWorker.isBrowser=!!(self.window&&self.navigator&&self.document),WebWorker.isWebWorker=!WebWorker.isBrowser&&self.importScripts,WebWorker.startWorkerFromJsString=startWorkerFromJsString=function(workerSource){return new Worker(URL.createObjectURL(new Blob([workerSource],{type:"application/javascript"})))},WebWorker.startWorkerFromFunction=function(workerFunction){return startWorkerFromJsString("("+workerFunction+")();")},WebWorker}()},function(module,exports,__webpack_require__){var GlobalCounts,StandardLib,currentSecond,isPlainObject,log;StandardLib=__webpack_require__(24),isPlainObject=StandardLib.isPlainObject,currentSecond=StandardLib.currentSecond,log=StandardLib.log,module.exports=GlobalCounts=function(){function GlobalCounts(){}var globalTime;return GlobalCounts.globalCounts={},globalTime=null,GlobalCounts.resetGlobalCounts=function(){return globalTime=currentSecond(),GlobalCounts.globalCounts={}},GlobalCounts.globalCount=function(name,amount){var k,last,results,v;if(null==amount&&(amount=1),isPlainObject(amount)){if(last=GlobalCounts.globalCounts[name]){results=[];for(k in amount)v=amount[k],results.push(last[k]+=v);return results}return GlobalCounts.globalCounts[name]=amount}return GlobalCounts.globalCounts[name]=(GlobalCounts.globalCounts[name]||0)+amount},GlobalCounts.countStep=function(){var nextTime;return nextTime=currentSecond(),nextTime-globalTime>.002&&log.error("GlobalCounts gap"),globalTime=nextTime,GlobalCounts.globalCount("step")},GlobalCounts}()},function(module,exports,__webpack_require__){var ObjectTreeFactory,compactFlatten,fastBind,isFunction,mergeIntoBasic,ref,upperCamelCase;ref=__webpack_require__(8),compactFlatten=ref.compactFlatten,upperCamelCase=ref.upperCamelCase,mergeIntoBasic=function(into,source){var k,v;for(k in source)v=source[k],into[k]=v;return into},isFunction=__webpack_require__(31).isFunction,fastBind=__webpack_require__(38).fastBind,module.exports=ObjectTreeFactory=function(){function ObjectTreeFactory(){}var compactFlattenObjectTreeNodeNames,deepArgsProcessing,nodeNameRegexp,preprocessElementBasic;return deepArgsProcessing=function(array,children){var el,i,len;for(i=0,len=array.length;i<len;i++)el=array[i],el&&(el.constructor===Array?deepArgsProcessing(el,children):children.push(el));return null},preprocessElementBasic=function(a){return a},ObjectTreeFactory.createObjectTreeFactory=function(options,nodeFactory){var Factory,abstractClass,bindList,i,inspectedName,k,klass,len,mergePropsInto,preprocessElement,v;if(nodeFactory||(nodeFactory=options,options={}),mergePropsInto=options.mergePropsInto,inspectedName=options.inspectedName,preprocessElement=options.preprocessElement,mergePropsInto||(mergePropsInto=mergeIntoBasic),preprocessElement||(preprocessElement=preprocessElementBasic),Factory=function(){var children,el,i,len,oneProps,props;for(oneProps=null,props=null,children=[],i=0,len=arguments.length;i<len;i++)if(el=arguments[i],el=preprocessElement(el))switch(el.constructor){case Object:oneProps&&(props={},mergePropsInto(props,oneProps),oneProps=null),props?mergePropsInto(props,el):oneProps=el;break;case Array:deepArgsProcessing(el,children);break;default:children.push(el)}return props||(props=oneProps||{}),nodeFactory(props,children)},klass=options["class"])for(Factory["class"]=klass,abstractClass=klass.getAbstractClass(),bindList=compactFlatten([function(){var results;results=[];for(k in klass)v=klass[k],!abstractClass[k]&&isFunction(v)&&results.push(k);return results}(),options.bind]),inspectedName||(inspectedName=klass.getName()+"Factory"),i=0,len=bindList.length;i<len;i++)k=bindList[i],Factory[k]=fastBind(klass[k],klass);return inspectedName&&(Factory._name=inspectedName),Factory.inspect=function(){return"<"+(inspectedName||"ObjectTreeFactory")+">"},Factory},ObjectTreeFactory.createObjectTreeFactories=function(options,list,nodeFactory){var ref1;return nodeFactory||(ref1=[options,list],list=ref1[0],nodeFactory=ref1[1],options={}),1===nodeFactory.length?ObjectTreeFactory._createObjectTreeFactoriesFromFactoryFactories(options,list,nodeFactory):ObjectTreeFactory._createObjectTreeFactoriesFromFactories(options,list,nodeFactory)},ObjectTreeFactory._createObjectTreeFactoriesFromFactories=function(options,list,nodeFactory){var fn,i,len,nodeTypeName,out,ref1,suffix;for(suffix=options.suffix||"",out={},ref1=compactFlattenObjectTreeNodeNames(list),fn=function(nodeTypeName){return options.inspectedName=nodeTypeName,out[upperCamelCase(nodeTypeName)+suffix]=ObjectTreeFactory.createObjectTreeFactory(options,function(props,children){return nodeFactory(nodeTypeName,props,children)})},i=0,len=ref1.length;i<len;i++)nodeTypeName=ref1[i],fn(nodeTypeName);return out},nodeNameRegexp=/[a-z0-9_]+/gi,ObjectTreeFactory._compactFlattenObjectTreeNodeNames=compactFlattenObjectTreeNodeNames=function(list){var i,len,out,ref1,str;if("string"==typeof list)return list.match(nodeNameRegexp);for(out=[],ref1=compactFlatten(list),i=0,len=ref1.length;i<len;i++)str=ref1[i],out=out.concat(str.match(nodeNameRegexp));return out},ObjectTreeFactory._createObjectTreeFactoriesFromFactoryFactories=function(options,list,nodeFactoryFactory){var i,len,name,nodeFactory,nodeTypeName,out,ref1,suffix;for(suffix=options.suffix||"",out={},ref1=compactFlattenObjectTreeNodeNames(list),i=0,len=ref1.length;i<len;i++)nodeTypeName=ref1[i],nodeFactory=nodeFactoryFactory(nodeTypeName),name=upperCamelCase(nodeTypeName)+suffix,options.inspectedName=name,out[name]=ObjectTreeFactory.createObjectTreeFactory(options,nodeFactory);return out},ObjectTreeFactory}()},function(module,exports,__webpack_require__){var Analytics,BaseObject,ClassSystem,StandardLib,inspectLean,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),BaseObject=ClassSystem.BaseObject,inspectLean=StandardLib.inspectLean,Analytics=function(superClass){function Analytics(){return Analytics.__super__.constructor.apply(this,arguments)}return extend(Analytics,superClass),Analytics.defaultCategory="Foundation.Analytics",
Analytics.event=function(options){var action,category,label,noninteraction,value;return null==options&&(options={}),category=options.category||this.defaultCategory,action=options.action,label=options.label,value=options.value,noninteraction=!!options.noninteraction,self._gaq?(self._gaq.push(["_trackEvent",category,action,label,value,noninteraction]),this.rawLog("ANALYTICS-EVENT: "+inspectLean(options))):this.rawLog("(no)ANALYTICS-EVENT: "+inspectLean(options))},Analytics}(BaseObject)},function(module,exports,__webpack_require__){(function(module,global){var Promise,defineModule,isWebWorker,log,objectKeyCount,ref,workerRpc;ref=__webpack_require__(24),defineModule=ref.defineModule,Promise=ref.Promise,log=ref.log,objectKeyCount=ref.objectKeyCount,isWebWorker=__webpack_require__(88).isWebWorker,workerRpc=__webpack_require__(94).workerRpc,defineModule(module,function(){var AsyncLocalStorage,LocalStorageShimForNode,localStorage;return localStorage=global.localStorage,localStorage||(localStorage=LocalStorageShimForNode=function(){function LocalStorageShimForNode(){}return LocalStorageShimForNode.store={},LocalStorageShimForNode.getItem=function(k){return LocalStorageShimForNode.store[k]},LocalStorageShimForNode.setItem=function(k,v){return LocalStorageShimForNode.store[k]=v},LocalStorageShimForNode.removeItem=function(k){return delete LocalStorageShimForNode.store[k]},LocalStorageShimForNode.clear=function(){return LocalStorageShimForNode.store={}},LocalStorageShimForNode.key=function(i){return Object.keys(LocalStorageShimForNode.store)[i]},LocalStorageShimForNode.getLength=function(){return objectKeyCount(LocalStorageShimForNode.store)},LocalStorageShimForNode}()),isWebWorker?workerRpc.bindWithPromises({localStorage:["getItem","setItem","removeItem","clear","key"]}):(workerRpc.register({localStorage:localStorage}),AsyncLocalStorage=function(){function AsyncLocalStorage(){}return AsyncLocalStorage.getItem=function(path){return Promise.then(function(){return localStorage.getItem(path)})},AsyncLocalStorage.setItem=function(path,value){return Promise.then(function(){return localStorage.setItem(path,value)})},AsyncLocalStorage.removeItem=function(path){return Promise.then(function(){return localStorage.removeItem(path)})},AsyncLocalStorage.clear=function(){return Promise.then(function(){return localStorage.clear()})},AsyncLocalStorage.key=function(index){return Promise.then(function(){return localStorage.key(index)})},AsyncLocalStorage.getLength=function(){return Promise.then(function(){return localStorage.length})},AsyncLocalStorage}())})}).call(exports,__webpack_require__(93)(module),function(){return this}())},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,Promise,StandardLib,WebWorker,WorkerRpc,debugPrefix,isFunction,isPlainArray,isString,isWebWorker,log,mergeInto,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),WebWorker=__webpack_require__(88),Promise=StandardLib.Promise,log=StandardLib.log,isPlainArray=StandardLib.isPlainArray,isFunction=StandardLib.isFunction,isString=StandardLib.isString,mergeInto=StandardLib.mergeInto,BaseObject=ClassSystem.BaseObject,isWebWorker=WebWorker.isWebWorker,debugPrefix=isWebWorker?"WorkerRpc(worker)":"WorkerRpc(browser)",module.exports=WorkerRpc=function(superClass){function WorkerRpc(thread,options){isString(thread)&&(log("WorkerRpc starting worker: "+thread),thread=new Worker(thread),log("WorkerRpc starting worker: "+thread+", started?:",thread)),thread||self===self.window||(thread=self),this._reset(),this._bindOnmessage(this._thread=thread),options&&this._applyOptions(options)}var workerRpcChannelIdString;return extend(WorkerRpc,superClass),WorkerRpc.singletonClass(),WorkerRpc.workerRpcChannelIdString=workerRpcChannelIdString="Art.Foundation.WorkerRpcChannel",WorkerRpc.register=function(toRegister){return WorkerRpc.singleton.register(toRegister)},WorkerRpc.bind=function(toBind){return WorkerRpc.singleton._bind(toBind,!1)},WorkerRpc.bindWithPromises=function(toBind){return WorkerRpc.singleton._bind(toBind,!0)},WorkerRpc.prototype.register=function(toRegister){var functionMap,namespaceName;if(toRegister){for(namespaceName in toRegister)functionMap=toRegister[namespaceName],this._registry.hasOwnProperty(namespaceName)?mergeInto(this._registry[namespaceName],functionMap):this._registry[namespaceName]=functionMap;return this._registry}},WorkerRpc.prototype.bind=function(toBind){return this._bind(toBind,!1)},WorkerRpc.prototype.bindWithPromises=function(toBind){return this._bind(toBind,!0)},WorkerRpc.prototype._bind=function(toBind,withPromises){var functionName,functionNames,i,len,namespace,namespaceName,ref;if(!isFunction(null!=(ref=this._thread)?ref.postMessage:void 0))throw new Error("@_thread.postMessage required for remote requests");if(toBind){namespace=null;for(namespaceName in toBind)for(functionNames=toBind[namespaceName],this.hasOwnProperty(namespaceName)||(this[namespaceName]={}),namespace=this[namespaceName],i=0,len=functionNames.length;i<len;i++)functionName=functionNames[i],namespace[functionName]=withPromises?this._newRemoteRequestFunctionWithPromise(namespaceName,functionName):this._newRemoteRequestFunction(namespaceName,functionName);return namespace}},WorkerRpc.prototype._reset=function(){return this._registry={promiseCallback:{success:function(_this){return function(promiseId,result){return WorkerRpc._resolvePromise(promiseId,result)}}(this),error:function(_this){return function(promiseId,error){return WorkerRpc._rejectPromise(promiseId,error)}}(this)}}},WorkerRpc.prototype._applyOptions=function(arg){var bind,bindWithPromises,register;return register=arg.register,bind=arg.bind,bindWithPromises=arg.bindWithPromises,this.register(register),this.bind(bind),this.bindWithPromises(bindWithPromises),this},WorkerRpc.prototype._send=function(namespaceName,functionName,promiseId,args){return this._thread.postMessage([workerRpcChannelIdString,namespaceName,functionName,promiseId,args])},WorkerRpc.prototype._newRemoteRequestFunctionWithPromise=function(namespaceName,functionName){return function(_this){return function(){var args;return args=1<=arguments.length?slice.call(arguments,0):[],WorkerRpc._bindPromise(function(promiseId){return _this._send(namespaceName,functionName,promiseId,args)})}}(this)},WorkerRpc.prototype._newRemoteRequestFunction=function(namespaceName,functionName){return function(_this){return function(){var args;return args=1<=arguments.length?slice.call(arguments,0):[],_this._send(namespaceName,functionName,null,args)}}(this)},WorkerRpc.prototype._bindOnmessage=function(thread){var handler;if(thread)return handler=function(_this){return function(arg){var args,data,functionName,namespaceName,promiseId,testWorkerRpcChannelIdString;if(data=arg.data,isPlainArray(data)&&(testWorkerRpcChannelIdString=data[0],namespaceName=data[1],functionName=data[2],promiseId=data[3],args=data[4],testWorkerRpcChannelIdString===workerRpcChannelIdString))return _this._invokeLocalFunction(namespaceName,functionName,promiseId,args)}}(this),thread.addEventListener?thread.addEventListener("message",handler):thread.onmessage=handler},WorkerRpc.prototype._invokeLocalFunction=function(namespaceName,functionName,promiseId,args){var localFunction,namespace,singleton;if((namespace=this._registry[namespaceName])&&(localFunction=namespace[functionName])||(singleton=WorkerRpc.singleton,this!==singleton&&(namespace=singleton._registry[namespaceName])&&(localFunction=namespace[functionName])),localFunction||console.warn(debugPrefix+"_onmessage: could not find: '"+namespaceName+"."+functionName+"'\n\nnamespaces: "+Object.keys(this._registry).join(", ")+"\nglobal namespaces: "+(singleton===this?"(same)":Object.keys(singleton._registry).join(", "))),localFunction)return WorkerRpc.lastMessageReceivedFrom=this,this._resolveOrRejectRemotePromise(promiseId,localFunction.apply(namespace,args))},WorkerRpc.prototype._resolveOrRejectRemotePromise=function(promiseId,result){if(null!=promiseId)return Promise.resolve(result).then(function(_this){return function(result){return _this._send("promiseCallback","success",null,[promiseId,result],function(error){return _this._send("promiseCallback","error",null,[promiseId,error])})}}(this))},WorkerRpc._promises={},WorkerRpc._nextPromiseId=0,WorkerRpc._bindPromise=function(f){var promise,promiseId;return this._promises[promiseId=this._nextPromiseId++]=promise=new Promise,f(promiseId),promise},WorkerRpc._resolvePromise=function(promiseId,result){var ref;return null!=(ref=this._promises[promiseId])&&ref.resolve(result),delete this._promises[promiseId]},WorkerRpc._rejectPromise=function(promiseId,error){var ref;return null!=(ref=this._promises[promiseId])&&ref.reject(error),delete this._promises[promiseId]},WorkerRpc}(BaseObject)},function(module,exports,__webpack_require__){var BaseObject,BatchLoader,ClassSystem,StandardLib,inspect,log,nextTick,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),BaseObject=ClassSystem.BaseObject,log=StandardLib.log,inspect=StandardLib.inspect,nextTick=StandardLib.nextTick,timeout=StandardLib.timeout,module.exports=BatchLoader=function(superClass){function BatchLoader(loadFunction){this.assets={},this.loadingAssets={},this.loadFunction=loadFunction}return extend(BatchLoader,superClass),BatchLoader.prototype.load=function(sources,onLoad){return"string"==typeof sources&&(sources=[sources]),this.loadAssets(sources,onLoad)},BatchLoader.prototype.addAsset=function(source,asset){var base;if(null==asset)throw new Error("not a valid asset: "+inspect(asset));return delete this.loadingAssets[source],(base=this.assets)[source]||(base[source]=asset),this.notifyListeners()},BatchLoader.getter({blankInfo:function(){return{loadedFromCache:0,loadedAsynchronously:0,alreadyLoadingAsynchronously:0}}}),BatchLoader.prototype.loadAssets=function(sources,onLoad){var info;return info=this.blankInfo,sources.forEach(function(_this){return function(src){return null!=_this.assets[src]?info.loadedFromCache++:_this.loadingAssets[src]?(info.loadedAsynchronously++,info.alreadyLoadingAsynchronously++):(info.loadedAsynchronously++,_this.loadingAssets[src]=!0,_this.loadFunction(src,function(src,asset){return _this.addAsset(src,asset)}))}}(this)),this.addLoaderListener(sources,onLoad,info),nextTick(function(_this){return function(){return _this.notifyListeners()}}(this))},BatchLoader.prototype.addLoaderListener=function(sources,onLoad,info){return this.loadingListeners||(this.loadingListeners=[]),this.loadingListeners.push({sources:sources,onLoad:onLoad,info:info})},BatchLoader.prototype.notifyListeners=function(){var allLoaded,i,j,len,len1,listener,oldloadingListeners,ref,source;if(this.loadingListeners){for(oldloadingListeners=this.loadingListeners,this.loadingListeners=[],i=0,len=oldloadingListeners.length;i<len;i++){for(listener=oldloadingListeners[i],allLoaded=!0,ref=listener.sources,j=0,len1=ref.length;j<len1;j++)source=ref[j],this.assets[source]||(allLoaded=!1);allLoaded?listener.onLoad(this.assets,listener.sources,listener.info):this.loadingListeners.push(listener)}return this.loadingListeners}},BatchLoader}(BaseObject)},function(module,exports){var CommunicationStatus;module.exports=CommunicationStatus=function(){function CommunicationStatus(){}return CommunicationStatus.success="success",CommunicationStatus.pending="pending",CommunicationStatus.missing="missing",CommunicationStatus.failure="failure",CommunicationStatus.validStatus=function(status){return CommunicationStatus[status]===status},CommunicationStatus}()},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,Epoch,Foundation,Promise,StandardLib,evalAndThrowErrorsOutOfStack,inspect,requestAnimationFrame,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Foundation=__webpack_require__(21),StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),BaseObject=ClassSystem.BaseObject,inspect=StandardLib.inspect,Promise=StandardLib.Promise,requestAnimationFrame=StandardLib.requestAnimationFrame,evalAndThrowErrorsOutOfStack=StandardLib.evalAndThrowErrorsOutOfStack,module.exports=Epoch=function(superClass){function Epoch(options){null==options&&(options={}),Epoch.__super__.constructor.apply(this,arguments),this._emptyQueueAfterProcessing=!!options.emptyQueueAfterProcessing,this._queuedItems=[],this._nextReadyQueue=[],this._epochQueued=!1,this._processingEpoch=!1,this._epochCount=0,this._frameSecond=0}return extend(Epoch,superClass),Epoch.getter("processingEpoch epochQueued epochCount emptyQueueAfterProcessing frameSecond",{epochLength:function(){return this._queuedItems.length}}),Epoch.prototype.updateGlobalCounts=function(){return Foundation.globalCount(this["class"].name+"_queuedItems",this._queuedItems.length),Foundation.globalCount(this["class"].name+"_nextReadyQueue",this._nextReadyQueue.length)},Epoch.prototype.onNextReady=function(f,forceNextEpoch,passThroughArgument){return null==forceNextEpoch&&(forceNextEpoch=!0),forceNextEpoch&&!this._processingEpoch&&this.queueNextEpoch(),new Promise(function(_this){return function(resolve){return _this._nextReadyQueue.push(function(){return resolve(f?f(passThroughArgument):passThroughArgument)})}}(this))},Epoch.prototype._ready=function(){var f,i,len,nrq,results;if((nrq=this._nextReadyQueue).length>0){for(this._nextReadyQueue=[],results=[],i=0,len=nrq.length;i<len;i++)f=nrq[i],results.push(evalAndThrowErrorsOutOfStack(function(_this){return function(){return f()}}(this)));return results}},Epoch.prototype.queueItem=function(item){return item&&(this._queuedItems.push(item),this.queueNextEpoch()),item},Epoch.prototype.isItemQueued=function(item){return indexOf.call(this._queuedItems,item)>=0},Epoch.prototype.queueNextEpoch=function(){if(!this._epochQueued)return this._epochQueued=!0,requestAnimationFrame(function(_this){return function(frameTimeMs){return _this._frameSecond=frameTimeMs/1e3,_this._epochQueued=!1,_this.processEpoch()}}(this))},Epoch.prototype.flushEpochNow=function(){return this.processEpoch()},Epoch.prototype.processEpoch=function(){var items;return this._processingEpoch=!0,items=this._queuedItems,this._emptyQueueAfterProcessing?(this.processEpochItemsWithErrorHandling(items),this._queuedItems=[]):(this._queuedItems=[],this.processEpochItemsWithErrorHandling(items)),this._processingEpoch=!1,this._epochCount++,this._ready()},Epoch.prototype.processEpochItemsWithErrorHandling=function(items){return evalAndThrowErrorsOutOfStack(function(_this){return function(){return _this.processEpochItems(items)}}(this))},Epoch.prototype.processEpochItems=function(items){var i,item,len,results;for(results=[],i=0,len=items.length;i<len;i++)item=items[i],results.push(item());return results},Epoch}(BaseObject)},function(module,exports,__webpack_require__){(function(module){var defineModule,fastBind,isFunction,log,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};ref=__webpack_require__(24),defineModule=ref.defineModule,isFunction=ref.isFunction,fastBind=ref.fastBind,log=ref.log,defineModule(module,function(){return function(superClass){var InstanceFunctionBindingMixin;return InstanceFunctionBindingMixin=function(superClass1){function InstanceFunctionBindingMixin(){return InstanceFunctionBindingMixin.__super__.constructor.apply(this,arguments)}return extend(InstanceFunctionBindingMixin,superClass1),InstanceFunctionBindingMixin.getFunctionsToBindList=function(){return this.hasOwnProperty("_functionsToBindList")?this._functionsToBindList:this._functionsToBindList=this.getFunctionsToBindList()},InstanceFunctionBindingMixin.getFunctionsToBindList=function(){var k,ref1,results,v;ref1=this.prototype,results=[];for(k in ref1)v=ref1[k],"constructor"!==k&&isFunction(v)&&this.propertyIsConcrete(k)&&(!this.nonBindingFunctions||indexOf.call(this.nonBindingFunctions,k)<0)&&results.push(k);return results},InstanceFunctionBindingMixin.prototype.getBoundFunctionList=function(){return this._boundFunctionList},InstanceFunctionBindingMixin.prototype.bindFunctionsToInstance=function(){var functionsToBindList,i,j,k,len,len1,prototype,ref1;if(functionsToBindList=this["class"].getFunctionsToBindList(),this._boundFunctionList)for(ref1=this._boundFunctionList,i=0,len=ref1.length;i<len;i++)k=ref1[i],indexOf.call(functionsToBindList,k)<0&&delete this[k];for(prototype=this["class"].prototype,j=0,len1=functionsToBindList.length;j<len1;j++)k=functionsToBindList[j],this[k]=fastBind(prototype[k],this);return this._boundFunctionList=functionsToBindList},InstanceFunctionBindingMixin}(superClass)}})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var AsyncLocalStorage,BaseObject,ClassSystem,JsonStore,Promise,isNumber,log,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(24),log=ref.log,Promise=ref.Promise,isNumber=ref.isNumber,ClassSystem=__webpack_require__(75),AsyncLocalStorage=__webpack_require__(92),BaseObject=ClassSystem.BaseObject,module.exports=JsonStore=function(superClass){function JsonStore(store){null==store&&(store=AsyncLocalStorage),this.store=store}return extend(JsonStore,superClass),JsonStore.prototype.setItem=function(k,v){return Promise.then(function(_this){return function(){return _this.store.setItem(k,JSON.stringify(v))}}(this))},JsonStore.prototype.getItem=function(k){return Promise.resolve(this.store.getItem(k)).then(function(_this){return function(v){return JSON.parse(v)}}(this))},JsonStore.prototype.removeItem=function(k){return Promise.then(function(_this){return function(){return _this.store.removeItem(k)}}(this))},JsonStore.prototype.clear=function(){return Promise.then(function(_this){return function(){return _this.store.clear()}}(this))},JsonStore.prototype.key=function(i){return Promise.then(function(_this){return function(){return _this.store.key(i)}}(this))},JsonStore.prototype.getLength=function(){return Promise.then(function(_this){return function(){return isNumber(_this.store.length)?_this.store.length:_this.store.getLength()}}(this))},JsonStore}(BaseObject)},function(module,exports,__webpack_require__){var Promise,RestClient,StandardLib,isNumber,log,merge,present,timeout;StandardLib=__webpack_require__(24),present=StandardLib.present,Promise=StandardLib.Promise,merge=StandardLib.merge,isNumber=StandardLib.isNumber,timeout=StandardLib.timeout,log=StandardLib.log,module.exports=RestClient=function(){function RestClient(){}return RestClient.legalVerbs={get:"GET",GET:"GET",put:"PUT",PUT:"PUT",post:"POST",POST:"POST","delete":"DELETE",DELETE:"DELETE"},RestClient.get=function(url,options){return RestClient.restRequest(merge(options,{verb:"GET",url:url}))},RestClient.put=function(url,data,options){return RestClient.restRequest(merge(options,{verb:"PUT",url:url,data:data}))},RestClient.post=function(url,data,options){return RestClient.restRequest(merge(options,{verb:"POST",url:url,data:data}))},RestClient["delete"]=function(url,options){return RestClient.restRequest(merge(options,{verb:"DELETE",url:url}))},RestClient.getArrayBuffer=function(url,options){return this.get(url,merge(options,{responseType:"arraybuffer"}))},RestClient.getJson=function(url,options){return RestClient.restJsonRequest(merge(options,{verb:"get",url:url}))},RestClient.deleteJson=function(url,options){return RestClient.restJsonRequest(merge(options,{verb:"delete",url:url}))},RestClient.putJson=function(url,data,options){return RestClient.restJsonRequest(merge(options,{verb:"put",url:url,data:data}))},RestClient.postJson=function(url,data,options){return RestClient.restJsonRequest(merge(options,{verb:"post",url:url,data:data}))},RestClient.restRequest=function(options){var data,formData,headers,k,method,onProgress,responseType,showProgressAfter,specifiedVerb,url,v,verb;if(verb=options.verb,method=options.method,url=options.url,data=options.data,headers=options.headers,onProgress=options.onProgress,responseType=options.responseType,formData=options.formData,showProgressAfter=options.showProgressAfter,isNumber(showProgressAfter)||(showProgressAfter=100),verb||(verb=method),!(verb=RestClient.legalVerbs[specifiedVerb=verb]))throw new Error("invalid verb: "+specifiedVerb);if(formData){if(data)throw new Error("can't specify both 'data' and 'formData'");data=new FormData;for(k in formData)v=formData[k],data.append(k,v)}else data=(null!=data&&"function"==typeof data.toArrayBuffer?data.toArrayBuffer():void 0)||data;return new Promise(function(resolve,reject){var getResponse,initialProgressCalled,lastProgressEvent,progressCallbackInternal,request,requestResolved,rescuedGetResponse,restRequestStatus;if(restRequestStatus={request:request=new XMLHttpRequest,progress:0,options:options},rescuedGetResponse=function(){try{return getResponse()}catch(error1){return request.response}},getResponse=function(){var response;return response=request.response,response&&"json"===responseType?response=JSON.parse(response):response},request.open(verb,url,!0),present(responseType)&&"json"!==responseType&&(request.responseType=responseType),headers)for(k in headers)v=headers[k],request.setRequestHeader(k,v);return requestResolved=!1,request.addEventListener("error",function(event){return requestResolved=!0,reject(merge(restRequestStatus,{event:event,response:rescuedGetResponse(),error:"XMLHttpRequest triggered 'error' event"}))}),request.addEventListener("load",function(event){var error,status;if(requestResolved=!0,status=request.status,2!==(status/100|0))return reject(merge(restRequestStatus,{event:event,status:status,response:rescuedGetResponse(),error:"response status was "+status}));try{return resolve(getResponse())}catch(error1){return error=error1,reject(merge(restRequestStatus,{event:event,status:status,response:rescuedGetResponse(),error:error}))}}),onProgress&&(initialProgressCalled=showProgressAfter<=0,lastProgressEvent=null,timeout(showProgressAfter,function(){return initialProgressCalled=!0,progressCallbackInternal(lastProgressEvent||{})}),progressCallbackInternal=function(event){var loaded,ref,total;if(ref=lastProgressEvent=event,total=ref.total,loaded=ref.loaded,initialProgressCalled&&!requestResolved)return"function"==typeof onProgress?onProgress(restRequestStatus=merge(restRequestStatus,{event:event,progress:total>0?loaded/total:0})):void 0},"GET"===verb?request.addEventListener("progress",progressCallbackInternal):request.upload.addEventListener("progress",progressCallbackInternal)),request.send(data)})},RestClient.restJsonRequest=function(options){return this.restRequest(merge(options,{responseType:"json",headers:merge({Accept:"application/json"},null!=options?options.headers:void 0),data:(null!=options?options.data:void 0)&&JSON.stringify(options.data)}))},RestClient}()},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,Map,SingleObjectTransaction,StandardLib,cloneByStructure,eq,inspect,removeFirstMatch,rubyTrue,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),Map=StandardLib.Map,cloneByStructure=StandardLib.cloneByStructure,removeFirstMatch=StandardLib.removeFirstMatch,eq=StandardLib.eq,inspect=StandardLib.inspect,rubyTrue=StandardLib.rubyTrue,BaseObject=ClassSystem.BaseObject,module.exports=SingleObjectTransaction=function(superClass){function SingleObjectTransaction(a){var options;if(SingleObjectTransaction.__super__.constructor.apply(this,arguments),this.object=function(){if(a.constructor===Array){if(2!==a.length)throw new Error("new SingleObjectTransaction: expected length-2 array like: [obj, optionsMap]");return this.options=a[1],a[0]}return this.options={},a}.call(this),null==this.object)throw new Error("object must not be null or undefined");this.props=[],this.from={},options=this.options,options.properties&&this.addProperties(options.properties),options.property&&this.addProp(options.property),options.from&&this.addFromValues(options.from),options.to&&this.addToValues(options.to)}var setValues;return extend(SingleObjectTransaction,superClass),SingleObjectTransaction.prototype.toString=function(){return inspect(this.object,0)+" from:"+inspect(this.from,1)+" to:"+inspect(this.to,1)},SingleObjectTransaction.prototype.inspect=function(inspector){var i,k,len,ref,results;if(!inspector)return ClassSystem.Inspect.inspect(this);for(inspector.put(this.object.classPathName+":"),ref=this.props,results=[],i=0,len=ref.length;i<len;i++)k=ref[i],inspector.put("\n    "+k+": "),rubyTrue(this.from&&this.from[k])&&inspector.inspect(this.from[k],1),inspector.put(" ... "),rubyTrue(this.to&&this.to[k])?results.push(inspector.inspect(this.to[k],1)):results.push(void 0);return results},SingleObjectTransaction.getter({properties:function(){return this.props},hasToValues:function(){return!!this.to},valuesChanged:function(){var fromValue,k,ref,toValue;ref=this.from;for(k in ref)if(fromValue=ref[k],toValue=this.to[k],!eq(fromValue,toValue))return!0;return!1}}),SingleObjectTransaction.prototype.addFromValues=function(from){var base,k,v;for(k in from)v=from[k],this.addProp(k),this.from[k]=v;return"function"==typeof(base=this.object).preprocessProperties?base.preprocessProperties(this.from):void 0},SingleObjectTransaction.prototype.addToValues=function(to){var base,k,v;this.to||(this.to={});for(k in to)v=to[k],this.addProp(k),this.to[k]=v;return"function"==typeof(base=this.object).preprocessProperties?base.preprocessProperties(this.to):void 0},SingleObjectTransaction.prototype.addProperties=function(props){var i,len,prop,results,results1,v;if(props.constructor===Array){for(results=[],i=0,len=props.length;i<len;i++)prop=props[i],results.push(this.addProp(prop));return results}results1=[];for(prop in props)v=props[prop],results1.push(this.addProp(prop));return results1},SingleObjectTransaction.prototype.addProp=function(propName){if(indexOf.call(this.props,propName)<0)return this.props.push(propName)},SingleObjectTransaction.prototype.deleteProp=function(propName){return removeFirstMatch(this.props,propName),delete this.from[propName],delete this.to[propName]},SingleObjectTransaction.prototype.saveValues=function(saveTo){var getterName,i,len,metaProperties,prop,ref,ref1,value;for(this.clearOptimizations(),metaProperties=this.object.metaProperties,ref=this.props,i=0,len=ref.length;i<len;i++)prop=ref[i],saveTo.hasOwnProperty(prop)||(value=saveTo[prop]=cloneByStructure((getterName=null!=metaProperties&&null!=(ref1=metaProperties[prop])?ref1.getterName:void 0)?this.object[getterName]():this.object[prop]));return null},SingleObjectTransaction.prototype.saveFromValues=function(){return this.saveValues(this.from||(this.from={}))},SingleObjectTransaction.prototype.saveToValues=function(){return this.saveValues(this.to||(this.to={}))},SingleObjectTransaction._setValues=setValues=function(o,values,f){var metaProperties,prop,ref,setterName,v;metaProperties=o.metaProperties;for(prop in values)v=values[prop],f&&(v=f(prop,v)),(setterName=null!=metaProperties&&null!=(ref=metaProperties[prop])?ref.setterName:void 0)?o[setterName](v):o[prop]=v;return null},SingleObjectTransaction.prototype.rollBack=function(){return setValues(this.object,this.from)},SingleObjectTransaction.prototype.rollForward=function(){return setValues(this.object,this.to)},SingleObjectTransaction.prototype.clearOptimizations=function(){return this.numberDeltas=this.interpolateToObjects=null},SingleObjectTransaction.prototype.optimizeInterpolation=function(){var field,from,ref,results,to;this.numberDeltas={},this.interpolateToObjects={},this.nonInterpolatingFields={to:{},from:{}},ref=this.from,results=[];for(field in ref)from=ref[field],to=this.to[field],"number"==typeof from?results.push(this.numberDeltas[field]=to-from):"function"==typeof(null!=from?from.interpolate:void 0)?results.push(this.interpolateToObjects[field]=to):(this.nonInterpolatingFields.from[field]=from,results.push(this.nonInterpolatingFields.to[field]=to));return results},SingleObjectTransaction.prototype.interpolateNumberFields=function(p){return setValues(this.object,this.numberDeltas,function(_this){return function(field,delta){return _this.from[field]+delta*p}}(this))},SingleObjectTransaction.prototype.interpolateObjectFields=function(p){var e;try{return setValues(this.object,this.interpolateToObjects,function(_this){return function(field,toObject){return _this.from[field].interpolate(toObject,p)}}(this))}catch(error){throw e=error,this.log("Art.Foundation.Transaction#interpolateObjectFields(p="+p+"): error "+e+" deltas: "+inspect(this.interpolateToObjects)+" from:   "+inspect(this.from)+" to:     "+inspect(this.to)),e}},SingleObjectTransaction.prototype.setNonInterpolatingFields=function(p){return setValues(this.object,this.nonInterpolatingFields[p>=1?"to":"from"])},SingleObjectTransaction.prototype.interpolate=function(p){return this.numberDeltas||this.optimizeInterpolation(),this.interpolateNumberFields(p),this.interpolateObjectFields(p),this.setNonInterpolatingFields(p)},SingleObjectTransaction.getter({noChanges:function(){return 0===this.props.length}}),SingleObjectTransaction.prototype.optimizeProperties=function(){var i,len,prop,ref,results;for(this.clearOptimizations(),ref=this.props,results=[],i=0,len=ref.length;i<len;i++)prop=ref[i],this.from.hasOwnProperty(prop)&&this.to.hasOwnProperty(prop)&&!eq(this.from[prop],this.to[prop])?results.push(void 0):results.push(this.deleteProp(prop));return results},SingleObjectTransaction}(BaseObject)},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,StandardLib,Stat,inspect,max,min,round,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),BaseObject=ClassSystem.BaseObject,min=StandardLib.min,max=StandardLib.max,round=StandardLib.round,inspect=StandardLib.inspect,module.exports=Stat=function(superClass){function Stat(){
this.reset()}return extend(Stat,superClass),Stat.prototype.reset=function(){return this.values=[],this.sum=0,this.max=this.min=null},Stat.getter({length:function(){return this.values.length},average:function(){return this.sum/this.values.length},median:function(){return this.values.slice().sort()[this.length/2|0]}}),Stat.prototype.percential=function(zeroToOneHundred){var i,sorted;return i=(this.length-1)*zeroToOneHundred/100|0,sorted=this.values.slice().sort(function(v1,v2){return v2-v1}),sorted[i]},Stat.prototype.histogram=function(divisions,min,max){var bin,delta,hist,j,k,len,mul,ref,ref1,v;for(null==min&&(min=this.min),null==max&&(max=this.max),delta=max-min,mul=divisions/delta,hist={},v=j=0,ref=divisions;j<ref;v=j+=1)hist[min+v/mul]=0;for(ref1=this.values,k=0,len=ref1.length;k<len;k++)v=ref1[k],bin=(v-min)*mul|0,bin<0&&(bin=0),bin>=divisions&&(bin=divisions-1),hist[min+bin/mul]++;return hist},Stat.prototype.toString=function(){return inspect({length:this.length,average:this.average,median:this.median,min:this.min,max:this.max})},Stat.prototype.toInfoMap=function(){return{length:this.length,average:this.average,median:this.median,min:this.min,max:this.max,p90:this.percential(90),p95:this.percential(95),p99:this.percential(99)}},Stat.prototype.toIntInfoMap=function(){return{length:this.length,average:round(this.average),median:round(this.median),min:round(this.min),max:round(this.max),p90:round(this.percential(90)),p95:round(this.percential(95)),p99:round(this.percential(99))}},Stat.prototype.toIntString=function(){return inspect(this.toIntInfoMap())},Stat.prototype.add=function(v){return this.values.push(v),this.sum+=v,1===this.values.length?this.max=this.min=v:(this.max=max(this.max,v),this.min=min(this.min,v))},Stat}(BaseObject)},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,Map,SingleObjectTransaction,StandardLib,Transaction,cloneByStructure,eq,inspect,rubyTrue,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),SingleObjectTransaction=__webpack_require__(101),rubyTrue=StandardLib.rubyTrue,eq=StandardLib.eq,inspect=StandardLib.inspect,Map=StandardLib.Map,cloneByStructure=StandardLib.cloneByStructure,BaseObject=ClassSystem.BaseObject,module.exports=Transaction=function(superClass){function Transaction(objects,options){null==options&&(options={}),Transaction.__super__.constructor.apply(this,arguments),this._objects=new Map,objects.constructor===Array?this.addObjects(objects):this.addObject(objects),options.properties&&this.addProperties(options.properties),options.property&&this.addProperties([options.property]),options.from&&this.addFromValues(options.from),options.to&&this.addToValues(options.to),this.saveFromValues()}return extend(Transaction,superClass),Transaction.SingleObjectTransaction=SingleObjectTransaction,Transaction.prototype.inspect=function(inspector){return inspector?(inspector.put(this.classPathName+":"),this.inspectParts(inspector)):ClassSystem.Inspect.inspect(this)},Transaction.prototype.inspectParts=function(inspector){return this._objects.each(function(_this){return function(k,v){return inspector.put("\n  "),inspector.inspect(v)}}(this))},Transaction.getter({objects:function(){return this._objects.keys}}),Transaction.prototype.properties=function(obj){return this._objects.get(obj).properties},Transaction.prototype.from=function(obj){return this._objects.get(obj).from},Transaction.prototype.to=function(obj){return this._objects.get(obj).to},Transaction.prototype.rollBack=function(){return this._objects.forEach(function(_this){return function(oi){return oi.rollBack()}}(this))},Transaction.prototype.rollForward=function(){return this._objects.forEach(function(_this){return function(oi){return oi.rollForward()}}(this))},Transaction.prototype.interpolate=function(p){return this._objects.forEach(function(_this){return function(oi){return oi.interpolate(p)}}(this))},Transaction.prototype.optimize=function(){return this.optimizeProperties(),this.optimizeObjects()},Transaction.getter({hasToValues:function(){var result;return result=!1,this._objects.forEach(function(_this){return function(oi){if(oi.hasToValues)return result=!0}}(this)),result},valuesChanged:function(){var result;return result=!1,this._objects.forEach(function(_this){return function(object){if(object.valuesChanged)return result=!0}}(this)),result}}),Transaction.prototype.toString=function(){return this.className+"\n  "+this._objects.map(function(obj,single){return single.toString()}).join("  \n")},Transaction.prototype.addFromValues=function(from){return this._objects.forEach(function(_this){return function(oi){return oi.addFromValues(from)}}(this))},Transaction.prototype.addToValues=function(to){return this._objects.forEach(function(_this){return function(oi){return oi.addToValues(to)}}(this))},Transaction.prototype.addProperties=function(properties){return this._objects.forEach(function(_this){return function(oi){return oi.addProperties(properties)}}(this))},Transaction.prototype.addObject=function(obj){var oi;return oi=new SingleObjectTransaction(obj),this._objects.set(oi.object,oi)},Transaction.prototype.addObjects=function(objects){var i,len,obj,results;for(results=[],i=0,len=objects.length;i<len;i++)obj=objects[i],results.push(this.addObject(obj));return results},Transaction.prototype.saveFromValues=function(){return this._objects.forEach(function(_this){return function(oi){return oi.saveFromValues()}}(this))},Transaction.prototype.saveToValues=function(){return this._objects.forEach(function(_this){return function(oi){return oi.saveToValues()}}(this))},Transaction.prototype.optimizeProperties=function(){return this._objects.forEach(function(_this){return function(oi){return oi.optimizeProperties()}}(this))},Transaction.prototype.optimizeObjects=function(){var objs;return objs=this._objects,this._objects=new Map,objs.forEach(function(_this){return function(oi){if(!oi.noChanges)return _this._objects.set(oi.object,oi)}}(this))},Transaction}(BaseObject)},function(module,exports,__webpack_require__){var BaseObject,Promise,StandardLib,Validator,emailRegexp,formattedInspect,isBoolean,isHexColor,isId,isNumber,isPlainArray,isPlainObject,isString,log,merge,mergeIntoUnless,present,select,shallowClone,validStatus,w,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),merge=StandardLib.merge,log=StandardLib.log,BaseObject=StandardLib.BaseObject,shallowClone=StandardLib.shallowClone,isNumber=StandardLib.isNumber,isString=StandardLib.isString,isPlainObject=StandardLib.isPlainObject,isPlainArray=StandardLib.isPlainArray,Promise=StandardLib.Promise,isBoolean=StandardLib.isBoolean,formattedInspect=StandardLib.formattedInspect,present=StandardLib.present,select=StandardLib.select,emailRegexp=StandardLib.emailRegexp,mergeIntoUnless=StandardLib.mergeIntoUnless,w=StandardLib.w,validStatus=__webpack_require__(96).validStatus,BaseObject=__webpack_require__(75).BaseObject,isId=function(v){return isString(v)&&v.match(/^[-_a-z0-9]+$/i)},isHexColor=function(v){return isString(v)&&v.match(/^#([a-f0-9]{3})|([a-f0-9]{6})/i)},module.exports=Validator=function(superClass){function Validator(fieldDeclarationMap,options){this._fieldProps={},this._requiredFieldsMap={},this.addFields(fieldDeclarationMap),options&&(this.exclusive=options.exclusive,this.context=options.context)}var arrayDataType,booleanDataType,dataTypes,fieldTypes,k,normalizeDepricatedProps,normalizeFieldProps,normalizeFieldTypeProp,normalizeInstanceOfProp,normalizePlainObjectProps,numberDataType,objectDataType,preCreate,preCreateSync,stringDataType,v;extend(Validator,superClass),Validator.dataTypes=dataTypes={"boolean":{validate:function(a){return isBoolean(a)}},number:{validate:function(a){return isNumber(a)}},string:{validate:function(a){return isString(a)}},object:{validate:function(a){return isPlainObject(a)}},array:{validate:function(a){return isPlainArray(a)}}},booleanDataType="boolean",numberDataType="number",stringDataType="string",objectDataType="object",arrayDataType="array",Validator.fieldTypes=fieldTypes={"boolean":{dataType:booleanDataType},number:{dataType:numberDataType},string:{},object:{dataType:objectDataType},array:{dataType:arrayDataType},count:{dataType:numberDataType},id:{required:!0,validate:function(v){return isId(v)}},date:{validate:function(v){return isString(v)||v instanceof Date},preprocess:function(v){return isString(v)?new Date(v):v}},timestamp:{dataType:numberDataType,validate:function(v){return isNumber(v)||v instanceof Date},preprocess:function(v){return v instanceof Date?v-0:v}},color:{validate:function(v){return isHexColor(v)}},email:{validate:function(v){return isString(v)&&v.trim().match(emailRegexp)},preprocess:function(v){return v.trim().toLowerCase()}},url:{validate:function(v){return isString(v)&&v.match(urlRegexp)},preprocess:function(v){return normalizeUrl(v)}},communicationStatus:{validate:function(v){return validStatus(v)}},trimmedString:{validate:function(v){return isString(v)},preprocess:function(v){return v.trim()}}};for(k in fieldTypes)v=fieldTypes[k],v.dataType||(v.dataType=stringDataType),v.validate||(v.validate=dataTypes[v.dataType].validate);return normalizeInstanceOfProp=function(ft){var _instanceof,validate;return(_instanceof=ft["instanceof"])?(validate=ft.validate,merge(ft,{validate:function(v){return v instanceof _instanceof&&(!validate||validate(v))}})):ft},normalizePlainObjectProps=function(ft){var out,subObject;out=null;for(k in ft)v=ft[k],isPlainObject(subObject=v)&&(out||(out=shallowClone(ft)),out[k]=!0,mergeIntoUnless(out,normalizePlainObjectProps(subObject)));return out||ft},normalizeDepricatedProps=function(ft){if(ft.requiredPresent)throw new Error("DEPRICATED: requiredPresent. Use: present: true");if(isString(ft.required))throw new Error("DEPRICATED: required can no longer specifiy the field-type. Use: required: fieldType: myFieldTypeString OR 'required myFieldTypeString'");if(isString(ft.present))throw new Error("DEPRICATED: present can no longer specifiy the field-type. Use: present: fieldType: myFieldTypeString OR 'present myFieldTypeString'");return ft},normalizeFieldTypeProp=function(ft){return ft.fieldType?merge(normalizeFieldProps(ft.fieldType),ft):ft},Validator.normalizeFieldProps=normalizeFieldProps=function(ft){var array,processed,string,strings,subFt;return ft=function(){var i,len,ref;if(isPlainObject(ft))return normalizeFieldTypeProp(normalizeInstanceOfProp(normalizeDepricatedProps(normalizePlainObjectProps(ft))));if(isPlainArray(array=ft))return processed=function(){var i,len,results;for(results=[],i=0,len=array.length;i<len;i++)ft=array[i],results.push(normalizeFieldProps(ft));return results}(),merge.apply(null,processed);if(isString(strings=ft)){for(ft={},ref=w(strings),i=0,len=ref.length;i<len;i++)string=ref[i],(subFt=fieldTypes[string])?mergeIntoUnless(ft,subFt):ft[string]=!0;return ft}throw new Error("fieldType must be a string or plainObject: "+formattedInspect(ft))}(),merge(fieldTypes[ft.fieldType],ft)},Validator.property("exclusive"),Validator.prototype.addFields=function(fieldDeclarationMap){var field,fieldOptions;for(field in fieldDeclarationMap)fieldOptions=fieldDeclarationMap[field],fieldOptions=this._addField(field,fieldOptions),fieldOptions.required&&(this._requiredFieldsMap[field]=void 0);return null},Validator.prototype.preCreate=preCreate=function(fields,options){return Promise.resolve(fields).then(function(_this){return function(fields){return _this.preCreateSync(fields,options)}}(this))},Validator.prototype.validate=preCreate,Validator.prototype.preUpdate=function(fields,options){return Promise.resolve(fields).then(function(_this){return function(fields){return _this.preUpdateSync(fields,options)}}(this))},Validator.prototype.preCreateSync=preCreateSync=function(fields,options){var info,presentFieldsValid,requiredFieldsPresent,status;if(requiredFieldsPresent=this.requiredFieldsPresent(fields),presentFieldsValid=this.presentFieldsValid(fields),requiredFieldsPresent&&presentFieldsValid)return this.preprocessFields(fields);throw status=presentFieldsValid?"missing":requiredFieldsPresent?"invalid":"invalid and missing",info={validationFailure:((null!=options?options.context:void 0)||this.context||"Validator")+": create: field(s) are "+status},presentFieldsValid||(info.invalidFields=this.invalidFields(fields)),requiredFieldsPresent||(info.missingFields=this.missingFields(fields)),info},Validator.prototype.validateSync=preCreateSync,Validator.prototype.preUpdateSync=function(fields,options){if(this.presentFieldsValid(fields))return this.preprocessFields(fields);throw{validationFailure:((null!=options?options.context:void 0)||this.context||"Validator")+": update: field(s) are invalid",invalidFields:this.invalidFields(fields)}},Validator.prototype.presentFieldValid=function(fields,fieldName){var fieldProps,validate,value;return(fieldProps=this._fieldProps[fieldName])?(validate=fieldProps.validate,!validate||null==(value=fields[fieldName])||null===value||void 0===value||validate(value)):!this.exclusive},Validator.prototype.requiredFieldPresent=function(fields,fieldName){var fieldProps;return!(fieldProps=this._fieldProps[fieldName])||(!fieldProps.required||null!=fields[fieldName])&&!(fieldProps.present&&!present(fields[fieldName]))},Validator.prototype.presentFieldsValid=function(fields){var __,fieldName;for(fieldName in fields)if(__=fields[fieldName],!this.presentFieldValid(fields,fieldName))return!1;return!0},Validator.prototype.requiredFieldsPresent=function(fields){var __,fieldName,ref;ref=this._fieldProps;for(fieldName in ref)if(__=ref[fieldName],!this.requiredFieldPresent(fields,fieldName))return!1;return!0},Validator.prototype.preprocessFields=function(fields){var fieldName,oldV,preprocess,processedFields,ref,value;processedFields=null,ref=this._fieldProps;for(fieldName in ref)preprocess=ref[fieldName].preprocess,preprocess&&null!=(value=fields[fieldName])&&(v=preprocess(oldV=fields[fieldName]))!==oldV&&(processedFields||(processedFields=shallowClone(fields)),processedFields[fieldName]=v);return processedFields||fields},Validator.prototype.invalidFields=function(fields){return select(fields,function(_this){return function(key,value){return!_this.presentFieldValid(fields,key)}}(this))},Validator.prototype.missingFields=function(fields){return fields=merge(this._requiredFieldsMap,fields),select(fields,function(_this){return function(key,value){return!_this.requiredFieldPresent(fields,key)}}(this))},Validator.prototype._addField=function(field,options){return this._fieldProps[field]=normalizeFieldProps(options)},Validator}(BaseObject)},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{atob:"^2.0.3",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1",commander:"^2.9.0","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.5.0","promise-polyfill":"^6.0.2","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},description:"Foundation classes for the Art framework. Javascript extensions.",license:"ISC",name:"art-foundation",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.20.1"}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(107).includeInNamespace(__webpack_require__(108)).addModules({Cookie:__webpack_require__(109),DomElementFactories:__webpack_require__(110),Dom:__webpack_require__(111),File:__webpack_require__(112)})},function(module,exports,__webpack_require__){var Browser,Foundation,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(21),module.exports=Foundation.Browser||Foundation.addNamespace("Browser",Browser=function(superClass){function Browser(){return Browser.__super__.constructor.apply(this,arguments)}return extend(Browser,superClass),Browser}(Neptune.Base))},function(module,exports){var Browser;module.exports=Browser=function(){function Browser(){}var browserIsMobile,isMobileBrowserRegExp1,isMobileBrowserRegExp2;return isMobileBrowserRegExp1=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,isMobileBrowserRegExp2=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|agent wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|agent|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)agent|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[agent-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(agent|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-agent|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,browserIsMobile=null,Browser.isMobileBrowser=function(){var agent,check;return null!=browserIsMobile?browserIsMobile:(check=!1,agent=navigator.userAgent||navigator.vendor||window.opera,browserIsMobile=!(!isMobileBrowserRegExp1.test(agent)&&!isMobileBrowserRegExp2.test(agent.substr(0,4))))},Browser}()},function(module,exports,__webpack_require__){var BaseObject,ClassSystem,Cookie,StandardLib,getCookie,isPlainArray,isPlainObject,isString,log,setCookie,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StandardLib=__webpack_require__(24),ClassSystem=__webpack_require__(75),log=StandardLib.log,isString=StandardLib.isString,isPlainArray=StandardLib.isPlainArray,isPlainObject=StandardLib.isPlainObject,BaseObject=ClassSystem.BaseObject,setCookie=function(cookieName,cookieValue,arg){var cookieString,d,expires,path;if(expires=arg.expires,path=arg.path,!isString(cookieValue)){if(!isPlainArray(cookieValue)&&!isPlainObject(cookieValue))throw new Error("cookieValue must be a string, array or object");cookieValue=JSON.stringify(cookieValue)}return cookieString=cookieName+"="+cookieValue,expires&&(d=new Date,d.setTime(d.getTime()+24*expires*60*60*1e3),cookieString+="; expires="+d.toUTCString()),path&&(cookieString+="; path="+path),document.cookie=cookieString},getCookie=function(cookieName){var c,ca,i,len,name,value;for(name=cookieName+"=",ca=document.cookie.split(";"),i=0,len=ca.length;i<len;i++){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(name))return value=c.substring(name.length,c.length),value.match(/^[{[]/)&&(value=JSON.parse(value)),value}return""},module.exports=Cookie=function(superClass){function Cookie(){return Cookie.__super__.constructor.apply(this,arguments)}return extend(Cookie,superClass),Cookie.set=function(name,value,options){return setCookie(name,value,options)},Cookie.get=function(name){return getCookie(name)},Cookie.remove=function(name,options){return setCookie(name,{path:options.path,expires:-1})},Cookie}(BaseObject)},function(module,exports,__webpack_require__){var DomElementFactories,supportLibs,slice=[].slice;supportLibs=[Neptune.NeptuneLib,__webpack_require__(39),__webpack_require__(90)],module.exports=DomElementFactories=function(){function DomElementFactories(){}var isPlainObject,isString,j,k,len,mergeInto,ref,supportLib,v;for(DomElementFactories.version="1.1.1",DomElementFactories.src="https://github.com/Imikimi-LLC/art-foundation",j=0,len=supportLibs.length;j<len;j++){supportLib=supportLibs[j];for(k in supportLib)v=supportLib[k],DomElementFactories[k]=v}DomElementFactories.isString=isString=function(obj){return"string"==typeof obj},DomElementFactories.isPlainObject=isPlainObject=function(obj){return obj.constructor===Object},DomElementFactories.mergeInto=mergeInto=function(into,source){null==into&&(into={});for(k in source)v=source[k],into[k]=v;return into},DomElementFactories.setDomElementProp=function(element,prop,value,oldValue){var clearStyle,setStyle,style;switch(prop){case"class":return element.className=value||"";case"id":return element.id=value||"";case"innerHTML":return element.innerHTML=value||"";case"on":if(!isPlainObject(value))throw new Error("object expected for 'on' property");return setStyle=function(eventType,newEventListener){return element.addEventListener(eventType,newEventListener)},clearStyle=function(eventType,oldEventListener){return element.removeEventListner(eventType,oldEventListener)},DomElementFactories.objectDiff(value,oldValue,setStyle,clearStyle,setStyle);case"style":if(!isPlainObject(value))throw new Error("object expected for 'style' property");return style=element.style,setStyle=function(k,v){return style[k]=v},clearStyle=function(k){return style[k]=""},DomElementFactories.objectDiff(value,oldValue,setStyle,clearStyle,setStyle);default:return element.setAttribute(prop,value)}},DomElementFactories.setDomElementProps=function(element,props){var results;results=[];for(k in props)v=props[k],results.push(this.setDomElementProp(element,k,v));return results},DomElementFactories.setDomElementChildren=function(element,children){var child,i,l,len1,message,ref,ref1,ref2,results,text;for(results=[],l=0,len1=children.length;l<len1;l++)if(child=children[l],isString(child))results.push(function(){var len2,m,ref,results1;for(ref=child.split("\n"),results1=[],i=m=0,len2=ref.length;m<len2;i=++m)text=ref[i],i>0&&element.appendChild(document.createElement("br")),results1.push(element.appendChild(document.createTextNode(text)));return results1}());else{if(!(child instanceof Node))throw message="DomElementFactory:"+nodeName+": Child is not a string or instance of Node. Child: "+child,("undefined"!=typeof Neptune&&null!==Neptune&&null!=(ref=Neptune.Art)&&null!=(ref1=ref.Foundation)&&null!=(ref2=ref1.log)&&"function"==typeof ref2.error?ref2.error(message,child):void 0)||console.log(message,child),new Error(message);results.push(element.appendChild(child))}return results},DomElementFactories.createDomElementFactories=function(){var list;return list=1<=arguments.length?slice.call(arguments,0):[],DomElementFactories.createObjectTreeFactories({mergePropsInto:function(into,source){var results;results=[];for(k in source)v=source[k],results.push(into[k]="style"===k?mergeInto(into[k],v):v);return results}},list,function(nodeName,props,children){var element;return element=document.createElement(nodeName),DomElementFactories.setDomElementProps(element,props),DomElementFactories.setDomElementChildren(element,children),element})},DomElementFactories.allDomElementNames="A Abbr Acronym Address Applet Area Article Aside Audio B Base BaseFont Bdi Bdo Big BlockQuote Body Br Button Canvas Caption Center Cite Code Col ColGroup DataList Dd Del Details Dfn Dialog Dir Div Dl Dt Em Embed FieldSet FigCaption Figure Font Footer Form Frame FrameSet H1 H2 H3 H4 H5 H6 Head Header Hr Html I IFrame Img Input Ins Kbd KeyGen Label Legend Li Link Main Map Mark Menu MenuItem Meta Meter Nav NoFrames NoScript Object Ol OptGroup Option Output P Param Pre Progress Q Rp Rt Ruby S Samp Script Section Select Small Source Span Strike Strong Style Sub Summary Sup Table TBody Td TextArea TFoot Th THead Time Title Tr Track Tt U Ul Var Video Wbr",ref=DomElementFactories.createDomElementFactories(DomElementFactories.allDomElementNames);for(k in ref)v=ref[k],DomElementFactories[k]=v;return DomElementFactories}()},function(module,exports,__webpack_require__){var Dom,DomElementFactories,isString;DomElementFactories=__webpack_require__(110),isString=__webpack_require__(24).isString,module.exports=Dom=function(){function Dom(){}return Dom.createElementFromHtml=function(html){var div;return div=document.createElement("div"),div.innerHTML=html,div.firstChild},Dom.createDomElementFactories=DomElementFactories.createDomElementFactories,Dom.getDevicePixelRatio=function(){return null!=self.devicePixelRatio&&self.devicePixelRatio||1},Dom.zIndex=function(target,setZIndex){var element,value;if(target instanceof HTMLElement||(target=document.getElementById(target)),void 0!==setZIndex)return target.style.zIndex=setZIndex;for(element=target;element&&element!==document;){switch(element.style.position){case"absolute":case"relative":case"fixed":if(value=parseInt(element.style.zIndex),value<0||value>0)return value}element=element.parentElement}return 0},Dom.domElementOffset=function(element){var body,box,clientLeft,clientTop,documentElement,left,scrollLeft,scrollTop,top;return box=element.getBoundingClientRect(),body=document.body,documentElement=document.documentElement,scrollTop=window.pageYOffset||documentElement.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||documentElement.scrollLeft||body.scrollLeft,clientTop=documentElement.clientTop||body.clientTop||0,clientLeft=documentElement.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft,{top:Math.round(top),left:Math.round(left)}},Dom}()},function(module,exports,__webpack_require__){var File,Promise,StandardLib,createElementFromHtml;StandardLib=__webpack_require__(24),createElementFromHtml=__webpack_require__(111).createElementFromHtml,Promise=StandardLib.Promise,module.exports=File=function(){function File(){}return File.request=function(options){return null==options&&(options={}),new Promise(function(resolve,reject){var accept,body,fileInput,multiple,onChange,ref;return accept=options.accept,multiple=options.multiple,onChange=options.onChange,null!=(ref=this.hiddenDivForFileInput)&&ref.parentNode.removeChild(this.hiddenDivForFileInput),this.hiddenDivForFileInput=createElementFromHtml("<div style='height: 0px;width: 0px; overflow:hidden; position:absolute;'/>"),body=document.body,fileInput=createElementFromHtml("<input type='file' "+(accept?"accept="+accept:void 0)+" "+(multiple?"multiple=true":void 0)+"/>"),this.hiddenDivForFileInput.appendChild(fileInput),body.appendChild(this.hiddenDivForFileInput),fileInput.onchange=function(e){var file,fileList,fileSizes,fileTypes;return fileList=function(){var i,len,ref1,results;for(ref1=fileInput.files,results=[],i=0,len=ref1.length;i<len;i++)file=ref1[i],results.push(file);return results}(),fileTypes=function(){var i,len,results;for(results=[],i=0,len=fileList.length;i<len;i++)file=fileList[i],results.push(file.type);return results}(),fileSizes=function(){var i,len,results;for(results=[],i=0,len=fileList.length;i<len;i++)file=fileList[i],results.push(file.size);return results}(),fileList.length>0&&fileList[0]?(onChange&&onChange(fileList),resolve(fileList)):reject("no files returned")},fileInput.click()})},File}()},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-suite":"git://github.com/imikimi/art-suite.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.5.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"nvc_app",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.2.6"}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(115).addModules({Main:__webpack_require__(116)}),__webpack_require__(351),__webpack_require__(355),__webpack_require__(348),__webpack_require__(117)},function(module,exports,__webpack_require__){var App,Nvc,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Nvc=__webpack_require__(3),module.exports=Nvc.App||Nvc.addNamespace("App",App=function(superClass){function App(){return App.__super__.constructor.apply(this,arguments)}return extend(App,superClass),App}(Neptune.Base))},function(module,exports,__webpack_require__){var App,AppNamespace,FullScreenApp,log,ref;AppNamespace=__webpack_require__(115),__webpack_require__(117),__webpack_require__(348),App=__webpack_require__(351).App,ref=__webpack_require__(120),FullScreenApp=ref.FullScreenApp,log=ref.log,FullScreenApp.init({title:"Needs",meta:{"apple-mobile-web-app-status-bar-style":"default"},manifest:"assets/needs.manifest",link:{"apple-touch-icon":{href:"assets/needs256.png"},"apple-touch-startup-image":{href:"assets/loading320x480.png"}}}).then(function(){return App().instantiateAsTopComponent()})["catch"](function(e){return log.error("Failed to init NVC app",e)})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(118).addModules({StyleProps:__webpack_require__(119)})},function(module,exports,__webpack_require__){var App,Styles,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;App=__webpack_require__(115),module.exports=App.Styles||App.addNamespace("Styles",Styles=function(superClass){function Styles(){return Styles.__super__.constructor.apply(this,arguments)}return extend(Styles,superClass),Styles}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var HotStyleProps,StyleProps,defineModule,ref,rgbColor,extend=function(child,parent){function ctor(){this.constructor=child;
}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(120),defineModule=ref.defineModule,rgbColor=ref.rgbColor,HotStyleProps=ref.HotStyleProps,defineModule(module,StyleProps=function(superClass){function StyleProps(){return StyleProps.__super__.constructor.apply(this,arguments)}var a;return extend(StyleProps,superClass),StyleProps.primaryColor=a=rgbColor("#8ebdf6"),StyleProps.leafColor=a,StyleProps.textStyle={color:"#000a",fontFamily:"sans-serif",fontSize:18},StyleProps}(HotStyleProps))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(121)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(122).includeInNamespace(__webpack_require__(124))},function(module,exports,__webpack_require__){var Art,Suite,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(123),module.exports=Art.Suite||Art.addNamespace("Suite",Suite=function(superClass){function Suite(){return Suite.__super__.constructor.apply(this,arguments)}return extend(Suite,superClass),Suite}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var ArtEry,ArtEryFlux,Atomic,Canvas,Engine,Flux,Foundation,React,merge;merge=(Foundation=__webpack_require__(19)).merge,module.exports=[merge(Foundation,Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),Engine=__webpack_require__(152),React=__webpack_require__(281),Flux=__webpack_require__(302),ArtEry=__webpack_require__(329),ArtEryFlux=__webpack_require__(343),{Foundation:Foundation,Atomic:Atomic,Canvas:Canvas,Engine:Engine,React:React,Flux:Flux,ArtEry:ArtEry,Ery:ArtEry})]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(126)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(127).includeInNamespace(__webpack_require__(129)).addModules({Base:__webpack_require__(131),Color:__webpack_require__(130),Matrix:__webpack_require__(134),Perimeter:__webpack_require__(135),Point:__webpack_require__(132),Rectangle:__webpack_require__(133)})},function(module,exports,__webpack_require__){var Art,Atomic,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(128),module.exports=Art.Atomic||Art.addNamespace("Atomic",Atomic=function(superClass){function Atomic(){return Atomic.__super__.constructor.apply(this,arguments)}return extend(Atomic,superClass),Atomic}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var Color,Matrix,Perimeter,Point,Rectangle,_package;Color=__webpack_require__(130),Point=__webpack_require__(132),Rectangle=__webpack_require__(133),Matrix=__webpack_require__(134),Perimeter=__webpack_require__(135),module.exports=[[Color,"newColor","color","hslColor","rgbColor","colorNames","colorNamesMap"],[Point,"point","point0","point1","isPoint","pointWithAspectRatioAndArea"],[Rectangle,"rect","nothing","everything"],[Matrix,"matrix","identityMatrix"],[Perimeter,"perimeter","perimeter0"],{"package":_package=__webpack_require__(136),version:_package.version}]},function(module,exports,__webpack_require__){var AtomicBase,Color,Foundation,abs,bound,colorFloatEq,float32Eq,float32Eq0,hex16ColorRegex,hex256ColorRegex,inspect,isString,log,max,min,modulo,pad,parseRGBColorComponent,rgbColorRegex,rgbaColorRegex,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),AtomicBase=__webpack_require__(131),inspect=Foundation.inspect,bound=Foundation.bound,modulo=Foundation.modulo,pad=Foundation.pad,min=Foundation.min,max=Foundation.max,abs=Foundation.abs,float32Eq=Foundation.float32Eq,isString=Foundation.isString,log=Foundation.log,hex16ColorRegex=Foundation.hex16ColorRegex,hex256ColorRegex=Foundation.hex256ColorRegex,rgbColorRegex=Foundation.rgbColorRegex,rgbaColorRegex=Foundation.rgbaColorRegex,float32Eq0=Foundation.float32Eq0,colorFloatEq=float32Eq,parseRGBColorComponent=function(str){var percentIndex;return(percentIndex=str.indexOf("%"))!==-1?.01*(0|str.slice(0,percentIndex)):1*(0|str)/255},module.exports=Color=function(superClass){function Color(){return Color.__super__.constructor.apply(this,arguments)}var colorNames,colorNamesMap,hexString,hslColor,k,parseCache,rgbColor,v,withSat,zeroString;extend(Color,superClass),Color.defineAtomicClass({fieldNames:"r g b a",constructorFunctionName:"rgbColor"}),Color.colorNames=colorNames=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],Color.colorNamesMap=colorNamesMap={transparent:"rgba(0,0,0,0)",aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgrey:"#a9a9a9",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategrey:"#2f4f4f",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgrey:"#696969",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategrey:"#778899",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategrey:"#708090",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Color.parseCache=parseCache={},Color.rgbColor=rgbColor=function(a,b,c,d){var clr;return null==b&&a instanceof Color?a:isString(a)&&(clr=colorNamesMap[a]||parseCache[a])?clr:new Color(a,b,c,d)},Color.newColor=rgbColor,Color.color=function(a,b,c,d){return log.error("Atomic.color DEPRICATED. Use rgbColor."),rgbColor(a,b,c,d)},Color.hslColor=hslColor=function(h,s,l,a){var f,p,phase,q,t;if(null==a&&(a=1),h instanceof Color)return h;switch(h=modulo(h,1),phase=6*h|0,f=6*h-phase,p=l*(1-s),q=l*(1-f*s),t=l*(1-(1-f)*s),h=colorFloatEq(h,1)?1:h%1,phase%6){case 0:return new Color(l,t,p,a,h,s,l);case 1:return new Color(q,l,p,a,h,s,l);case 2:return new Color(p,l,t,a,h,s,l);case 3:return new Color(p,q,l,a,h,s,l);case 4:return new Color(t,p,l,a,h,s,l);case 5:return new Color(l,p,q,a,h,s,l)}},Color.parse=function(string,existing){if(null==existing&&(existing=null),existing)throw new Error("existing feature is no longer supported");return new Artomic.Color(string)},Color.prototype._initFromObject=function(obj){return this.r=obj.r,this.g=obj.g,this.b=obj.b,this.a=obj.a,obj},Color.prototype._initFromString=function(string){var a,b,clr,elements,g,lcString,match,r,x;return this.initProperties(),parseCache[string]=this,(match=string.match(hex16ColorRegex))?(x=match[0],r=match[1],g=match[2],b=match[3],a=match[4],a||(this._htmlColorString=string),a||(a="f"),this.r=parseInt(r,16)/15,this.g=parseInt(g,16)/15,this.b=parseInt(b,16)/15,this.a=parseInt(a,16)/15):(match=string.match(hex256ColorRegex))?(x=match[0],r=match[1],g=match[2],b=match[3],a=match[4],a||(this._htmlColorString=string),a||(a="ff"),this.r=parseInt(r,16)/255,this.g=parseInt(g,16)/255,this.b=parseInt(b,16)/255,this.a=parseInt(a,16)/255):(elements=string.match(rgbColorRegex))?(this._htmlColorString=string,this.a=1,this.r=parseRGBColorComponent(elements[1]),this.g=parseRGBColorComponent(elements[2]),this.b=parseRGBColorComponent(elements[3])):(elements=string.match(rgbaColorRegex))?(this._htmlColorString=string,this.r=parseRGBColorComponent(elements[1]),this.g=parseRGBColorComponent(elements[2]),this.b=parseRGBColorComponent(elements[3]),this.a=elements[4]-0):/^[a-z]+$/i.test(lcString=string.toLowerCase())?(clr=colorNamesMap[lcString])?(this._htmlColorString=clr._htmlColorString,this.r=clr.r,this.g=clr.g,this.b=clr.b,this.a=clr.a):this.log({parseError:this.parseError="WARNING: Color.parse failure. Unknown rgbColor name: "+inspect(string)}):this.log({parseError:this.parseError="WARNING: Color.parse failure for "+inspect(string)})},Color.prototype.initProperties=function(){return this.r=this.g=this.b=0,this.a=1,this._hue=this._saturation=this._lightness=null,this.parseError=null,this._htmlColorString=null},Color.prototype._init=function(a,b,c,d,h,s,l){return this.initProperties(),null!=h&&(this._hue=h-0),null!=s&&(this._saturation=s-0),null!=l&&(this._lightness=l-0),null==a?(this.r=this.g=this.b=0,this.a=1):null==b?(a>1&&(a/=255),this.r=this.g=this.b=a-0,this.a=1):null!=c?(this.r=a-0,this.g=b-0,this.b=c-0,this.a=null!=d?d-0:1):void 0},Color.prototype.interpolate=function(toColor,p){var a,b,g,oneMinusP,r,ref;return ref=this,r=ref.r,g=ref.g,b=ref.b,a=ref.a,toColor=rgbColor(toColor),float32Eq0(a)&&(r=toColor.r,g=toColor.g,b=toColor.b),float32Eq0(toColor.a)&&(toColor=this.withAlpha(0)),oneMinusP=1-p,new Color(toColor.r*p+r*oneMinusP,toColor.g*p+g*oneMinusP,toColor.b*p+b*oneMinusP,toColor.a*p+a*oneMinusP)},Color.prototype.blend=function(color,amount){var a,b,g,r,ref;switch(color=rgbColor(color),ref=this,r=ref.r,g=ref.g,b=ref.b,a=ref.a,!1){case null==amount:return new Color((color.r-r)*amount+r,(color.g-g)*amount+g,(color.b-b)*amount+b,(color.a-a)*amount+a);case!colorFloatEq(color.a,1):return color;case!colorFloatEq(color.a,0):return this;default:return amount=color.a,new Color((color.r-r)*amount+r,(color.g-g)*amount+g,(color.b-b)*amount+b,(1-a)*amount+a)}},Color.prototype.withAlpha=function(a){return new Color(this.r,this.g,this.b,a)},Color.prototype.withLightness=function(v){return hslColor(this.h,this.s,v,this.a)},Color.prototype.withHue=function(v){return hslColor(v,this.s,this.l,this.a)},Color.prototype.withSat=withSat=function(v){return hslColor(this.h,v,this.l,this.a)},Color.prototype.withSaturation=withSat,Color.prototype.withChannel=function(c,v){switch(c){case"r":case"red":return new Color(v,this.g,this.b,this.a);case"g":case"green":return new Color(this.r,v,this.b,this.a);case"b":case"blue":return new Color(this.r,this.g,v,this.a);case"h":case"hue":return hslColor(v,this.s,this.l,this.a);case"s":case"sat":case"saturation":return hslColor(this.h,v,this.l,this.a);case"l":case"lightness":return this.withLightness(v);case"a":case"alpha":return this.withAlpha(v);default:throw new Error("invalid channel: "+inspect(c))}},Color.prototype.withChannels=function(c){var a,b,g,h,l,r,s;return c.h||c.s||c.l?(h=null!=c.h?c.h:this.h,s=null!=c.s?c.s:this.s,l=null!=c.l?c.l:this.l,a=null!=c.a?c.a:this.a,hslColor(h,s,l,a)):(r=null!=c.r?c.r:this.r,g=null!=c.g?c.g:this.g,b=null!=c.b?c.b:this.b,a=null!=c.a?c.a:this.a,new Color(r,g,b,a))},zeroString="0",hexString=function(number,length){return null==length&&(length=2),pad(number.toString(16),length,zeroString,!0)},Color.getter({arrayRGB:function(){return[this.r,this.g,this.b]},rgbSum:function(){return this.r+this.g+this.b},rgbSquaredSum:function(){return this.r*this.r+this.g*this.g+this.b*this.b},clamped:function(){return new Color(bound(0,this.r,1),bound(0,this.g,1),bound(0,this.b,1),bound(0,this.a,1))},r256:function(){return bound(0,Math.round(255*this.r),255)},g256:function(){return bound(0,Math.round(255*this.g),255)},b256:function(){return bound(0,Math.round(255*this.b),255)},a256:function(){return bound(0,Math.round(255*this.a),255)},r16:function(){return bound(0,Math.round(15*this.r),15)},g16:function(){return bound(0,Math.round(15*this.g),15)},b16:function(){return bound(0,Math.round(15*this.b),15)},a16:function(){return bound(0,Math.round(15*this.a),15)},h256:function(){return bound(0,Math.round(255*this.h),255)},s256:function(){return bound(0,Math.round(255*this.s),255)},b256:function(){return bound(0,Math.round(255*this.b),255)},rClamped:function(){return bound(0,this.r,1)},gClamped:function(){return bound(0,this.g,1)},bClamped:function(){return bound(0,this.b,1)},aClamped:function(){return bound(0,this.a,1)},premultiplied:function(){return new Color(this.r*this.a,this.g*this.a,this.b*this.a,this.a)},demultiplied:function(){return new Color(this.r/this.a,this.g/this.a,this.b/this.a,this.a)},cssString:function(){return"rgba("+[this.r256,this.g256,this.b256,this.aClamped].join(", ")+")"},rgbaString:function(){return"rgbColor("+[this.r256,this.g256,this.b256,this.a256].join("/255, ")+"/255)"},hexString:function(){return"#"+hexString(this.r256)+hexString(this.g256)+hexString(this.b256)},hex16String:function(){return"#"+hexString(this.r16,1)+hexString(this.g16,1)+hexString(this.b16,1)},hslHexString:function(){return"#"+hexString(this.h256)+hexString(this.s256)+hexString(this.b256)},rgbaHexString:function(){return"#"+this.getRawRgbaHexString()},rawRgbaHexString:function(){return hexString(this.r256)+hexString(this.g256)+hexString(this.b256)+hexString(this.a256)}}),Color.prototype.inspect=function(){var a;return a=colorFloatEq(1,this.a)?this.hexString:this.rgbaHexString,"rgbColor('"+a+"')"},Color.prototype.toString=function(){return this._htmlColorString||(this._htmlColorString=colorFloatEq(1,this.a)?this.getHexString():this.getCssString())},Color.getter({plainObjects:function(){return this.a<1?this.rgbaHexString:this.hexString},inspectedObjects:function(){return colorFloatEq(1,this.a)?this.hexString:this.rgbaHexString}}),Color.getter({h:function(){return null!=this._hue?this._hue:this._hue=this.rgbToHsl()&&this._hue},s:function(){return null!=this._saturation?this._saturation:this._saturation=this.rgbToHsl()&&this._saturation},l:function(){return null!=this._lightness?this._lightness:this._lightness=this.rgbToHsl()&&this._lightness},inverseL:function(){return 1-this.l},inverseS:function(){return 1-this.s},inverseH:function(){return 1-this.h},hue:function(){return null!=this._hue?this._hue:this._hue=this.rgbToHsl()&&this._hue},sat:function(){return null!=this._saturation?this._saturation:this._saturation=this.rgbToHsl()&&this._saturation},lit:function(){return null!=this._lightness?this._lightness:this._lightness=this.rgbToHsl()&&this._lightness},saturation:function(){return null!=this._saturation?this._saturation:this._saturation=this.rgbToHsl()&&this._saturation},lightness:function(){return null!=this._lightness?this._lightness:this._lightness=this.rgbToHsl()&&this._lightness},perceptualLightness:function(){return.2126*this.r+.7152*this.g+.0722*this.b},satLightness:function(){return(2-this._saturation)*this._lightness*.5}}),Color.perceptualWeights={r:.2126,g:.7152,b:.0722},Color.prototype.rgbToHsl=function(){var b,delta,g,maxRGB,minRGB,r,sixth;return r=this.r,g=this.g,b=this.b,maxRGB=max(r,g,b),minRGB=min(r,g,b),delta=maxRGB-minRGB,sixth=1/6,this._lightness=maxRGB,maxRGB===minRGB?(this._hue=0,this._saturation=0,!0):(maxRGB===r?g>=b?this._hue=sixth*((g-b)/delta):this._hue=sixth*((g-b)/delta)+1:maxRGB===g?this._hue=sixth*((b-r)/delta)+1/3:this._hue=sixth*((r-g)/delta)+2/3,this._saturation=1-minRGB/maxRGB,!0)};for(k in colorNamesMap)v=colorNamesMap[k],colorNamesMap[k]=rgbColor(v);return Color}(AtomicBase)},function(module,exports,__webpack_require__){var Base,BaseObject,floatEq,inspect,inspectedObjectLiteral,isFunction,isNumber,isPlainArray,isPlainObject,isString,log,lowerCamelCase,ref,stringToNumberArray,upperCamelCase,wordsArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),inspect=ref.inspect,log=ref.log,isNumber=ref.isNumber,isPlainObject=ref.isPlainObject,isPlainArray=ref.isPlainArray,isString=ref.isString,isFunction=ref.isFunction,stringToNumberArray=ref.stringToNumberArray,BaseObject=ref.BaseObject,lowerCamelCase=ref.lowerCamelCase,upperCamelCase=ref.upperCamelCase,inspectedObjectLiteral=ref.inspectedObjectLiteral,floatEq=ref.floatEq,wordsArray=ref.wordsArray,inspect=ref.inspect,module.exports=Base=function(superClass){function Base(a,b,c,d,e,f,g){Base.__super__.constructor.apply(this,arguments),isPlainArray(a)?this._init.apply(this,a):isString(a)?this._initFromString(a):isPlainObject(a)?this._initFromObject(a):null==a||isNumber(a)||a instanceof Base||!isFunction(a.toString)?this._init(a,b,c,d,e,f,g):this._initFromString(a.toString())}var letterFieldNames,reservedWords;return extend(Base,superClass),Base.prototype._initFromString=function(string){return this._init.apply(this,stringToNumberArray(string))},Base.prototype.compare=function(b){return this.eq(b)?0:this.lte(b)?-1:this.gte(b)?1:NaN},Base.getConstructorFunctionName=function(){return this.constructorFunctionName||(this.constructorFunctionName=lowerCamelCase(this.getName()))},Base.getter({plainObjects:function(){return this.toObject()},inspectedObjects:function(){return inspectedObjectLiteral(this["class"].getConstructorFunctionName()+("("+this.toArray().join(", ")+")"))}}),Base.prototype.toPlainStructure=function(){return this.getPlainObjects()},Base.prototype.toPlainEvalString=function(){return inspect(this.getPlainObjects())},Base.prototype.inspect=function(){return this["class"].getConstructorFunctionName()+"("+this.toArray().join(", ")+")"},Base.prototype.toJson=function(){return this.toString()},Base.prototype.toString=function(precision){var a;return precision?"["+function(){var j,len,ref1,results;for(ref1=this.toArray(),results=[],j=0,len=ref1.length;j<len;j++)a=ref1[j],results.push(a.toPrecision(precision));return results}.call(this).join(", ")+"]":"["+this.toArray().join(", ")+"]"},Base.prototype.neq=function(b){return!this.eq(b)},Base.prototype.between=function(a,b){return this.gte(a)&&this.lte(b)},Base.prototype.floatEq=floatEq,Base.prototype.isNumber=isNumber,Base.defineAtomicClass=function(arg){return this.fieldNames=arg.fieldNames,this.constructorFunctionName=arg.constructorFunctionName,isString(this.fieldNames)&&(this.fieldNames=wordsArray(this.fieldNames)),this.getConstructorFunctionName(),this._defineCore(this.fieldNames),this._defineComparisonOperators(this.fieldNames),this._defineMathOperators(this.fieldNames)},reservedWords={"with":!0},Base._definePrototypeMethodViaEval=function(name,paramsList,body){var nameInEval;return nameInEval=reservedWords[name]?"":name,this.prototype[name]=eval(body="(\nfunction "+nameInEval+"("+paramsList+") {\n"+body+"\n}\n)")},letterFieldNames=wordsArray("a b c d e f"),Base._defineComparisonOperators=function(fieldNames){var comparisonOperators,f,functionName,i,operator,params,paramsList,results;params=letterFieldNames.slice(0,fieldNames.length),paramsList=params.join(", "),this._definePrototypeMethodViaEval("eq",paramsList,"if (this === a) return true;\nif (this.isNumber(a)) {\n  return\n  "+function(){var j,len,results;for(results=[],i=j=0,len=fieldNames.length;j<len;i=++j)f=fieldNames[i],results.push("this.floatEq(this."+f+", "+params[i]+")");return results}().join(" &&\n  ")+";\n} else {\n  return a &&\n  "+function(){var j,len,results;for(results=[],j=0,len=fieldNames.length;j<len;j++)f=fieldNames[j],results.push("this.floatEq(this."+f+", a."+f+")");return results}().join(" &&\n  ")+";\n}"),comparisonOperators={lt:"<",gt:">",lte:"<=",gte:">="},results=[];for(functionName in comparisonOperators)operator=comparisonOperators[functionName],results.push(this._definePrototypeMethodViaEval(functionName,paramsList,"if (this.isNumber(a)) {\n  return\n  "+function(){var j,len,results1;for(results1=[],i=j=0,len=fieldNames.length;j<len;i=++j)f=fieldNames[i],results1.push("this."+f+" "+operator+" "+params[i]);return results1}().join(" &&\n  ")+";\n} else {\n  return a &&\n  "+function(){var j,len,results1;for(results1=[],j=0,len=fieldNames.length;j<len;j++)f=fieldNames[j],results1.push("this."+f+" "+operator+" a."+f);return results1}().join(" &&\n  ")+";\n}"));return results},Base._defineMathOperators=function(fieldNames){var f,functionName,i,mathOperators,operator,params,results;mathOperators={add:"+",sub:"-",mul:"*",div:"/"},params=letterFieldNames.slice(0,fieldNames.length),results=[];for(functionName in mathOperators)operator=mathOperators[functionName],results.push(this._definePrototypeMethodViaEval(functionName,params.join(", "),"if (this.isNumber(b)) {\n  return this._into(\n  null,\n  "+function(){var j,len,results1;for(results1=[],i=j=0,len=fieldNames.length;j<len;i=++j)f=fieldNames[i],results1.push("this."+f+" "+operator+" "+params[i]);return results1}().join(",\n  ")+"\n  );\n} else if (this.isNumber(a)) {\n  return this._into(\n  b,\n  "+function(){var j,len,results1;for(results1=[],j=0,len=fieldNames.length;j<len;j++)f=fieldNames[j],results1.push("this."+f+" "+operator+" a");return results1}().join(",\n  ")+"\n  );\n} else {\n  return this._into(\n  b,\n  "+function(){var j,len,results1;for(results1=[],j=0,len=fieldNames.length;j<len;j++)f=fieldNames[j],results1.push("this."+f+" "+operator+" a."+f);return results1}().join(",\n  ")+"\n  );\n}"));return results},Base._defineCore=function(fields){var f,field,fieldList,j,len;for(fieldList=fields.join(", "),this._definePrototypeMethodViaEval("_into","into, "+fieldList,"if (into === true)\n  into = this;\nelse\n  into = into || new this.class;\nreturn into._setAll("+fieldList+");"),this._definePrototypeMethodViaEval("_setAll",fieldList,function(){var j,len,results;for(results=[],j=0,len=fields.length;j<len;j++)f=fields[j],results.push("this."+f+" = "+f);return results}().join(";\n")+";\nreturn this;"),this._definePrototypeMethodViaEval("with",fieldList,"if (this.eq("+fieldList+"))\n  return this;\nelse\n  return new this.class("+fieldList+");"),j=0,len=fields.length;j<len;j++)field=fields[j],this._definePrototypeMethodViaEval("with"+upperCamelCase(field),field,"return this.with(\n  "+function(){var k,len1,results;for(results=[],k=0,len1=fields.length;k<len1;k++)f=fields[k],results.push(f===field?f:"this."+f);return results}().join(",\n  ")+"\n);");return this._definePrototypeMethodViaEval("interpolate","b, p, into","var oneMinusP = 1 - p;\nreturn this._into(\ninto,\n"+function(){var k,len1,results;for(results=[],k=0,len1=fields.length;k<len1;k++)f=fields[k],results.push("b."+f+" * p + this."+f+" * oneMinusP");return results}().join(",\n")+"\n);"),this._definePrototypeMethodViaEval("toArray","","return ["+function(){var k,len1,results;for(results=[],k=0,len1=fields.length;k<len1;k++)f=fields[k],results.push("this."+f);return results}().join(", ")+"];"),this._definePrototypeMethodViaEval("toObject","","return {"+function(){var k,len1,results;for(results=[],k=0,len1=fields.length;k<len1;k++)f=fields[k],results.push(f+": this."+f);return results}().join(", ")+"};")},Base}(BaseObject)},function(module,exports,__webpack_require__){var AtomicBase,Foundation,PI,Point,abs,atan,bound,ceil,floatEq,floor,inspect,inspectedObjectLiteral,isArray,isFunction,isNumber,isString,log,max,min,nearInfinity,round,sqrt,stringToNumberArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),AtomicBase=__webpack_require__(131),inspect=Foundation.inspect,bound=Foundation.bound,floatEq=Foundation.floatEq,log=Foundation.log,isNumber=Foundation.isNumber,isArray=Foundation.isArray,isString=Foundation.isString,isFunction=Foundation.isFunction,stringToNumberArray=Foundation.stringToNumberArray,nearInfinity=Foundation.nearInfinity,inspectedObjectLiteral=Foundation.inspectedObjectLiteral,abs=Math.abs,sqrt=Math.sqrt,atan=Math.atan,PI=Math.PI,floor=Math.floor,ceil=Math.ceil,round=Math.round,min=Math.min,max=Math.max,module.exports=Point=function(superClass){function Point(){return Point.__super__.constructor.apply(this,arguments)}var bottomLeft,centerCenter,centerLeft,k,namedPoints,point,point0,point1,pointWithAspectRatioAndArea,ref,topCenter,topRight,v;extend(Point,superClass),Point.defineAtomicClass({fieldNames:"x y"}),Point.isPoint=function(v){return v instanceof Point},pointWithAspectRatioAndArea=function(arg){var area,aspectRatio,sqrtArea;return aspectRatio=arg.aspectRatio,area=arg.area,sqrtArea=Math.sqrt(area/aspectRatio),point(sqrtArea*aspectRatio,sqrtArea)},Point.point=point=function(a,b){var p,x,y;return a instanceof Point?a:isString(a)&&(p=namedPoints[a])?p:(null!=a?a.aspectRatio:void 0)&&a.area>=0?pointWithAspectRatioAndArea(a):(x=a||0,y=null!=b?b:a,point0.eq(x,y)?point0:point1.eq(x,y)?point1:new Point(a,b))},Point.parse=function(string,existing){if(existing)throw new Error("existing feature is no longer supported");return new Point(string)},Point.prototype._init=function(x,y){return x||(x=0),null==y&&(y=x),this.x=x-0,this.y=y-0},Point.prototype._initFromObject=function(o){return this.x=o.x||0,this.y=o.y||0},Point.getter({top:function(){return 0},left:function(){return 0},right:function(){return this.x},bottom:function(){return this.y},centerX:function(){return.5*this.x},centerY:function(){return.5*this.y},tl:function(){return point0},tc:function(){return this.mul(.5,0)},tr:function(){return this.mul(1,0)},lc:function(){return this.mul(0,.5)},cc:function(){return this.mul(.5,.5)},rc:function(){return this.mul(1,.5)},bl:function(){return this.mul(0,1)},bc:function(){return this.mul(.5,1)},br:function(){return this},ccNeg:function(){return this.mul(-.5)},topLeft:function(){return point0},topCenter:function(){return this.mul(.5,0)},topRight:function(){return this.mul(1,0)},centerLeft:function(){return this.mul(0,.5)},centerCenter:function(){return this.mul(.5,.5)},centerRight:function(){return this.mul(1,.5)},bottomLeft:function(){return this.mul(0,1)},bottomCenter:function(){return this.mul(.5,1)},bottomRight:function(){return this},w:function(){return this.x},width:function(){return this.x},h:function(){return this.y},height:function(){return this.y},neg:function(){return new Point((-this.x),(-this.y))},inv:function(){return new Point(1/this.x,1/this.y)},vector:function(){return[this.x,this.y]},magnitudeSquared:function(){return this.x*this.x+this.y*this.y},magnitude:function(){return sqrt(this.x*this.x+this.y*this.y)},aspectRatio:function(){return this.x/this.y},absoluteAspectRatio:function(){return abs(this.x/this.y)},swapped:function(){return point(this.y,this.x)},rounded:function(){return this.round()},floored:function(){return this.floor()},ceiled:function(){return this.ceil()},area:function(){return this.x*this.y},sum:function(){return this.x+this.y},size:function(){return this},location:function(){return point0},abs:function(){return this["with"](abs(this.x),abs(this.y))},unitVector:function(){var m;return m=1/this.magnitude,
new Point(this.x*m,this.y*m)},perpendicularVector:function(){return new Point(this.y,(-this.x))},unitPerpendicularVector:function(){var m;return m=1/this.magnitude,new Point(this.y*m,-this.x*m)},angle:function(){return 0===this.x?PI*(this.y>0?.5:1.5):this.x>0?atan(this.y/this.x):atan(this.y/this.x)+PI},isInteger:function(){return floatEq(this.x,0|this.x)&&floatEq(this.y,0|this.y)}}),Point.prototype.distance=function(p2){return sqrt(this.distanceSquared(p2))},Point.prototype.distanceSquared=function(p2){var x,y;return x=this.x-p2.x,y=this.y-p2.y,x*x+y*y},Point.prototype.withArea=function(newArea){var area;if(area=this.area,!(area>0&&newArea>=0))throw new Error("area must be > 0");return this.mul(Math.sqrt(newArea/area))},Point.prototype.vectorLength=2,Point.prototype.toIndex=function(lineStride){return~~this.y*lineStride+~~this.x},Point.prototype.contains=function(p){return p.x>=0&&p.y>=0&&p.x<this.x&p.y<this.y},Point.prototype.nearestInsidePoint=function(p){return this["with"](bound(0,p.x,this.x),bound(0,p.y,this.y))},Point.prototype.appendToVector=function(vector){var l;return l=vector.length,vector[l+1]=this.y,vector[l]=this.x},Point.prototype.dot=function(p){return this.x*p.x+this.y*p.y},Point.prototype.cross=function(p){return this.x*p.y-this.y*p.x},Point.prototype.floor=function(){return this["with"](floor(this.x),floor(this.y))},Point.prototype.ceil=function(){return this["with"](ceil(this.x),ceil(this.y))},Point.prototype.union=function(b){return b instanceof Point?this.max(b):b.union(this)},Point.prototype.intersection=function(b){return b instanceof Point?this.min(b):b.intersection(this)},Point.prototype.min=function(b){return null==b&&(b=null),b?this["with"](min(this.x,b.x),min(this.y,b.y)):min(this.x,this.y)},Point.prototype.max=function(b){return null==b&&(b=null),b?this["with"](max(this.x,b.x),max(this.y,b.y)):max(this.x,this.y)},Point.prototype.average=function(b){return null==b&&(b=null),b?this["with"]((this.x+b.x)/2,(this.y+b.y)/2):(this.x+this.y)/2},Point.prototype.bound=function(a,b){return this["with"](bound(a.x,this.x,b.x),bound(a.y,this.y,b.y))},Point.prototype.round=function(m){return null==m&&(m=1),this["with"](round(this.x/m)*m,round(this.y/m)*m)},Point.prototype.roundOut=function(){return this.ceil()},Point.prototype.fitInto=function(into){var xr,yr;return xr=into.x/this.x,yr=into.y/this.y,this.mul(min(xr,yr))},Point.prototype.fill=function(into){var xr,yr;return xr=into.x/this.x,yr=into.y/this.y,this.mul(max(xr,yr))},Point.prototype.withSameAreaAs=function(p){return this.mul(Math.sqrt(p.area/this.area))},point0=Object.freeze(new Point(0)),point1=Object.freeze(new Point(1)),topRight=Object.freeze(new Point(1,0)),topCenter=Object.freeze(new Point(.5,0)),centerLeft=Object.freeze(new Point(0,.5)),centerCenter=Object.freeze(new Point(.5)),bottomLeft=Object.freeze(new Point(0,1)),Point.namedPoints=namedPoints={point0:point0,point1:point1,topLeft:point0,topCenter:topCenter,topRight:topRight,centerLeft:centerLeft,centerCenter:centerCenter,centerRight:Object.freeze(new Point(1,.5)),bottomLeft:bottomLeft,bottomCenter:Object.freeze(new Point(.5,1)),bottomRight:point1,pointNearInfinity:Object.freeze(new Point(nearInfinity)),left:point0,center:topCenter,right:topRight,top:point0,bottom:bottomLeft},ref=Point.namedPoints;for(k in ref)v=ref[k],Point[k]=v;return Point}(AtomicBase)},function(module,exports,__webpack_require__){var Atomic,AtomicBase,Foundation,Point,Rectangle,bound,ceil,floatEq,floor,isArray,isFunction,isNumber,isString,log,max,min,point,round,stringToNumberArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(127),AtomicBase=__webpack_require__(131),Point=__webpack_require__(132),max=Foundation.max,min=Foundation.min,bound=Foundation.bound,round=Foundation.round,floatEq=Foundation.floatEq,floor=Foundation.floor,ceil=Foundation.ceil,round=Foundation.round,log=Foundation.log,isNumber=Foundation.isNumber,isArray=Foundation.isArray,isString=Foundation.isString,isFunction=Foundation.isFunction,stringToNumberArray=Foundation.stringToNumberArray,point=Point.point,module.exports=Rectangle=function(superClass){function Rectangle(){return Rectangle.__super__.constructor.apply(this,arguments)}var rect;return extend(Rectangle,superClass),Rectangle.defineAtomicClass({fieldNames:"x y w h",constructorFunctionName:"rect"}),Rectangle.rect=rect=function(a,b,c,d){return a instanceof Rectangle?a:new Rectangle(a,b,c,d)},Rectangle.prototype._init=function(a,b,c,d){return this.x=this.y=this.w=this.h=0,null!=d?(this.x=a-0,this.y=b-0,this.w=c-0,this.h=d-0):null!=b?b instanceof Point?(this.x=a.x,this.y=a.y,this.w=b.w,this.h=b.h):(this.w=a-0,this.h=b-0):a instanceof Point?(this.w=a.w,this.h=a.h):null!=a?this.w=this.h=a-0:void 0},Rectangle.getter({clone:function(){return new Rectangle(this.x,this.y,this.w,this.h)},location:function(){return new Point(this.x,this.y)},locationMatrix:function(){return Atomic.Matrix.translateXY(this.x,this.y)},size:function(){return new Point(this.w,this.h)},width:function(){return this.w},height:function(){return this.h},rounded:function(){return this["with"](round(this.x),round(this.y),round(this.w),round(this.h))},tl:function(){return new Point(this.x,this.y)},tc:function(){return new Point(this.hCenter,this.y)},tr:function(){return new Point(this.right,this.y)},lc:function(){return new Point(this.x,this.vCenter)},cc:function(){return new Point(this.hCenter,this.vCenter)},rc:function(){return new Point(this.right,this.vCenter)},bl:function(){return new Point(this.x,this.bottom)},bc:function(){return new Point(this.hCenter,this.bottom)},br:function(){return new Point(this.right,this.bottom)},topLeft:function(){return new Point(this.x,this.y)},topCenter:function(){return new Point(this.hCenter,this.y)},topRight:function(){return new Point(this.right,this.y)},centerLeft:function(){return new Point(this.x,this.vCenter)},centerCenter:function(){return new Point(this.hCenter,this.vCenter)},centerRight:function(){return new Point(this.right,this.vCenter)},bottomLeft:function(){return new Point(this.x,this.bottom)},bottomCenter:function(){return new Point(this.hCenter,this.bottom)},bottomRight:function(){return new Point(this.right,this.bottom)},locationIsZero:function(){return floatEq(this.x,0)&&floatEq(this.y,0)},top:function(){return this.y},left:function(){return this.x},right:function(){return this.x+this.w},bottom:function(){return this.y+this.h},hCenter:function(){return this.x+.5*this.w},vCenter:function(){return this.y+.5*this.h},infinite:function(){return Infinity===this.w||Infinity===this.h},normalized:function(){var h,w,x,y;return w=this.w,h=this.h,w>=0&&h>=0?this:(x=this.x,y=this.y,w<0&&(x+=w,w=-w),h<0&&(y+=h,h=-h),this["with"](x,y,w,h))},area:function(){return this.w*this.h},corners:function(){var bottom,left,right,top;return left=this.left,top=this.top,right=this.right,bottom=this.bottom,[new Point(left,top),new Point(right,top),new Point(right,bottom),new Point(left,bottom)]}}),Rectangle.prototype.withXY=function(x,y){return floatEq(x,this.x)&&floatEq(y,this.y)?this:new Rectangle(x,y,this.w,this.h)},Rectangle.prototype.withWH=function(w,h){return floatEq(w,this.w)&&floatEq(h,this.h)?this:new Rectangle(this.x,this.y,w,h)},Rectangle.prototype.withLocation=function(v){return this.withXY(v.x,v.y)},Rectangle.prototype.withSize=function(v){return this.withWH(v.x,v.y)},Rectangle.prototype.movedBy=function(d){return this.withXY(this.x+d.x,this.y+d.y)},Rectangle.prototype.nearestInsidePoint=function(p){return new Point(bound(this.left,p.x,this.right),bound(this.top,p.y,this.bottom))},Rectangle.prototype.largestInsideRect=function(ofSize){var h,scaler,w;return scaler=min(this.w/ofSize.w,this.h/ofSize.h),w=ofSize.w*scale,h=ofSize.h*scale,new Rectangle((this.w-w)/2,(this.h-h)/2,w,h)},Rectangle.prototype.overlaps=function(val){if(null==val)return!1;if(val instanceof Point)return this.contains(val);if(val instanceof Rectangle)return val.getRight()>this.getLeft()&&val.getBottom()>this.getTop()&&val.getLeft()<this.getRight()&&val.getTop()<this.getBottom();throw new Error("Invalid arguments for 'overlaps'. Expecting Point or Rectangle. Got: "+val+".")},Rectangle.prototype.contains=function(val){if(null==val)return!1;if(val instanceof Point)return val.x>=this.x&&val.y>=this.y&&val.x<this.right&&val.y<this.bottom;if(val instanceof Rectangle)return val.x>=this.x&&val.y>=this.y&&val.right<=this.right&&val.bottom<=this.bottom;throw new Error("Invalid arguments for 'contains'. Expecting Point or Rectangle. Got: "+val+".")},Rectangle.prototype.round=function(m){var h,w,x,y;return null==m&&(m=1),x=round(this.x,m),y=round(this.y,m),w=round(this.x+this.w,m)-x,h=round(this.y+this.h,m)-y,this["with"](x,y,w,h)},Rectangle.prototype.roundOut=function(m,k){var h,w,x,y;return null==m&&(m=1),null==k&&(k=0),x=floor(this.x+k,m),y=floor(this.y+k,m),w=ceil(this.x+this.w-k,m)-x,h=ceil(this.y+this.h-k,m)-y,this["with"](x,y,w,h)},Rectangle.prototype.roundIn=function(m,k){var h,w,x,y;return null==m&&(m=1),null==k&&(k=0),x=ceil(this.x-k,m),y=ceil(this.y-k,m),w=floor(this.x+this.w+k,m)-x,h=floor(this.y+this.h+k,m)-y,this["with"](x,y,w,h)},Rectangle.prototype.union=function(b){var h,w,x,y;return null==b?this:this.getArea()<=0?b:(x=min(this.x,b.left),y=min(this.y,b.top),w=max(this.getRight(),b.getRight())-x,h=max(this.getBottom(),b.getBottom())-y,this["with"](x,y,w,h))},Rectangle.prototype.unionInto=function(into){var area,h,intoArea,w,x,y;return area=this.getArea(),intoArea=into.getArea(),area<=0||Infinity===intoArea?into:(intoArea<=0||Infinity===area?(into.x=this.x,into.y=this.y,into.w=this.w,into.h=this.h):(x=into.x,y=into.y,w=into.w,h=into.h,into.x=min(x,this.x),into.y=min(y,this.y),into.w=max(x+w,this.x+this.w)-into.x,into.h=max(y+h,this.y+this.h)-into.y),into)},Rectangle.prototype.intersectInto=function(into){var area,h,intoArea,w,x,y;return area=this.getArea(),intoArea=into.getArea(),intoArea<=0||Infinity===area?into:area<=0||Infinity===intoArea?(into.x=this.x,into.y=this.y,into.w=this.w,into.h=this.h):(x=into.x,y=into.y,w=into.w,h=into.h,into.x=max(x,this.x),into.y=max(y,this.y),into.w=max(0,min(x+w,this.x+this.w)-into.x),into.h=max(0,min(y+h,this.y+this.h)-into.y),into)},Rectangle.prototype.intersection=function(b){var h,w,x,y;return null==b?this:Infinity===b.getArea()||b.contains(this)?this:Infinity===this.getArea()||this.contains(b)?b:(x=max(this.x,b.left),y=max(this.y,b.top),w=min(this.getRight(),b.getRight())-x,h=min(this.getBottom(),b.getBottom())-y,w<=0||h<=0?Rectangle.nothing:this["with"](x,y,w,h))},Rectangle.prototype.grow=function(a,b){var gx,gy;return a instanceof Point?(gx=a.x,gy=a.y):(gx=a,gy=null!=b?b:a),this["with"](this.x-gx,this.y-gy,this.w+2*gx,this.h+2*gy)},Rectangle.nothing=Object.freeze(new Rectangle(0,0,0,0)),Rectangle.everything=Object.freeze(new Rectangle(0,0,Infinity,Infinity)),Rectangle}(AtomicBase)},function(module,exports,__webpack_require__){var AtomicBase,Foundation,Matrix,Point,Rectangle,compact,float32Eq,inspect,isNumber,log,point,rect,simplifyNum,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),AtomicBase=__webpack_require__(131),Point=__webpack_require__(132),Rectangle=__webpack_require__(133),point=Point.point,rect=Rectangle.rect,inspect=Foundation.inspect,simplifyNum=Foundation.simplifyNum,float32Eq=Foundation.float32Eq,compact=Foundation.compact,log=Foundation.log,isNumber=Foundation.isNumber,module.exports=Matrix=function(superClass){function Matrix(){return Matrix.__super__.constructor.apply(this,arguments)}var cleanInspect,identityMatrix,intermediatResultMatrix,matrix,transform1D;return extend(Matrix,superClass),Matrix.defineAtomicClass({fieldNames:"sx sy shx shy tx ty"}),Matrix.matrix=matrix=function(a,b,c,d,e,f){return a instanceof Matrix?a:null===a||void 0===a?identityMatrix:new Matrix(a,b,c,d,e,f)},Matrix._cleanInspect=cleanInspect=function(pointName,s){var out,r;return out=pointName?(r=new RegExp("([0-9])"+pointName,"g"),s.replace(r,"$1 * "+pointName).replace(/-1 \* /g,"-").replace(/\ \+ -/g," - ").replace(/0\./g,".")):s.replace(/-1([A-Za-z]+)/g,"-$1").replace(/\ \+ -/g," - ").replace(/0\./g,".")},Matrix.translate=function(a,b){var x,y;if(isNumber(b))throw new Error("Matrix.translate no longer accepts two numbers. Use translateXY");return isNumber(a)?x=y=a:(x=a.x,y=a.y),Matrix.translateXY(x,y)},Matrix.translateXY=function(x,y){return 0===x&&0===y?identityMatrix:new Matrix(1,1,0,0,x,y)},Matrix.scale=function(a,b){var x,y;if(isNumber(b))throw new Error("Matrix.scale no longer accepts two numbers. Use translateXY");return isNumber(a)?x=y=a:(x=a.x,y=a.y),Matrix.scaleXY(x,y)},Matrix.scaleXY=function(sx,sy){return 1===sx&&1===sy?identityMatrix:new Matrix(sx,sy,0,0,0,0)},Matrix.rotate=function(radians){var cr,sr;return cr=Math.cos(radians),sr=Math.sin(radians),1===cr&&0===sr?identityMatrix:new Matrix(cr,cr,(-sr),sr,0,0)},Matrix.prototype.initDefaults=function(){return this.sx=this.sy=1,this.shy=this.shx=0,this.tx=this.ty=0,this._exactScale=this._exactScaler=null,this},Matrix.prototype._init=function(a,b,c,d,e,f){if(this.initDefaults(),null!=a)return a instanceof Point?this._initFromPoint(a):a instanceof Matrix?this._initFromMatrix(a):(this.sx=a-0,null!=b&&(this.sy=b-0),null!=c&&(this.shx=c-0),null!=d&&(this.shy=d-0),null!=e&&(this.tx=e-0),null!=f?this.ty=f-0:void 0)},Matrix.prototype.getScale=function(){return this.getS()},Matrix.getter({t:function(){return point(this.tx,this.ty)},s:function(){return point(this.sx,this.sy)},sh:function(){return point(this.shx,this.shy)},xsv:function(){return point(this.sx,this.shx)},ysv:function(){return point(this.sy,this.shy)},exactScale:function(){return this._exactScale||(this._exactScale=point(this.xsv.magnitude,this.ysv.magnitude))},exactScaler:function(){return this._exactScaler||(this._exactScaler=this.exactScale.average())},inv:function(){return this.invert()},locationX:function(){return this.tx},locationY:function(){return this.ty},scaleX:function(){return this.sx},scaleY:function(){return this.sy},location:function(){return point(this.tx,this.ty)},withRoundedTranslation:function(){return this.translationIsIntegral?this:new Matrix(this.sx,this.sy,this.shx,this.shy,Math.round(this.tx),Math.round(this.ty))},angle:function(){var p1,p2;return p1=this.transform(Point.point0),p2=this.transform(new Point(0,1)),p2.sub(p1).angle-.5*Math.PI},float32Array:function(){return this.fillFloat32Array(new Float32Array(9))},isIdentity:function(){return float32Eq(this.sx,1)&&float32Eq(this.sy,1)&&float32Eq(this.shx,0)&&float32Eq(this.shy,0)&&float32Eq(this.tx,0)&&float32Eq(this.ty,0)},isTranslateOnly:function(){return float32Eq(this.sx,1)&&float32Eq(this.sy,1)&&float32Eq(this.shx,0)&&float32Eq(this.shy,0)},translationIsIntegral:function(){return float32Eq(this.tx,Math.round(this.tx))&&float32Eq(this.ty,Math.round(this.ty))},isIntegerTranslateOnly:function(){return this.isTranslateOnly&&float32Eq(this.tx,0|this.tx)&&float32Eq(this.ty,0|this.ty)},isTranslateAndScaleOnly:function(){return float32Eq(this.shx,0)&&float32Eq(this.shy,0)},isTranslateAndPositiveScaleOnly:function(){return this.sx>0&&this.sy>0&&float32Eq(this.shx,0)&&float32Eq(this.shy,0)}}),Matrix.prototype.fillFloat32Array=function(a){return a[0]=this.sx,a[1]=this.shx,a[2]=this.tx,a[3]=this.shy,a[4]=this.sy,a[5]=this.ty,a},Matrix.prototype.simplify=function(){return new Matrix(simplifyNum(this.sx),simplifyNum(this.sy),simplifyNum(this.shx),simplifyNum(this.shy),simplifyNum(this.tx),simplifyNum(this.ty))},Matrix.prototype.withAngle=function(a){return this.rotate(a-this.angle)},Matrix.prototype.withScale=function(a,b){var x,y;return isNumber(a)?(x=a,y=null!=b?b:x):(x=a.x,y=a.y),this.scale(x/this.sx,y/this.sy)},Matrix.prototype.withLocation=function(a,b){var x,y;return isNumber(a)?(x=a,y=null!=b?b:x):(x=a.x,y=a.y),x===this.tx&&y===this.ty?this:new Matrix(this.sx,this.sy,this.shx,this.shy,x,y)},Matrix.prototype.withLocationXY=function(x,y){return x===this.tx&&y===this.ty?this:new Matrix(this.sx,this.sy,this.shx,this.shy,x,y)},Matrix.prototype.translate=function(amount,into){var x,y;if(isNumber(amount)?x=y=amount:(x=amount.x,y=amount.y),isNumber(into))throw new Error("Illegal second input: number ("+into+"). Use translateXY.");return this.translateXY(x,y,into)},Matrix.prototype.translateXY=function(x,y,into){return this._into(into,this.sx,this.sy,this.shx,this.shy,this.tx+x,this.ty+y)},Matrix.prototype.rotate=function(radians,into){var cr,sr;return cr=Math.cos(radians),sr=Math.sin(radians),this._into(into,this.sx*cr-this.shy*sr,this.shx*sr+this.sy*cr,this.shx*cr-this.sy*sr,this.sx*sr+this.shy*cr,this.tx*cr-this.ty*sr,this.tx*sr+this.ty*cr)},Matrix.prototype.scale=function(a,into){var x,y;if(isNumber(into))throw new Error("Matrix.scale no longer accepts two numbers. Use translateXY");return isNumber(a)?x=y=a:(x=a.x,y=a.y),this.scaleXY(x,y,into)},Matrix.prototype.scaleXY=function(x,y,into){return this._into(into,this.sx*x,this.sy*y,this.shx*x,this.shy*y,this.tx*x,this.ty*y)},Matrix.getter({determinantReciprocal:function(){return 1/(this.sx*this.sy-this.shy*this.shx)}}),Matrix.prototype.invert=function(into){var d;return d=this.getDeterminantReciprocal(),this._into(into,d*this.sy,d*this.sx,d*-this.shx,d*-this.shy,d*(-this.tx*this.sy+this.ty*this.shx),d*(this.tx*this.shy-this.ty*this.sx))},Matrix.prototype.mul=function(m,into){return isNumber(m)?this._into(into,this.sx*m,this.sy*m,this.shx*m,this.shy*m,this.tx*m,this.ty*m):this._into(into,this.sx*m.sx+this.shy*m.shx,this.shx*m.shy+this.sy*m.sy,this.shx*m.sx+this.sy*m.shx,this.sx*m.shy+this.shy*m.sy,this.tx*m.sx+this.ty*m.shx+m.tx,this.tx*m.shy+this.ty*m.sy+m.ty)},Matrix.prototype.div=function(m,into){var multipler;return multipler=isNumber(m)?1/m:m.invert(intermediatResultMatrix),this.mul(multipler,into)},Matrix.prototype.inspectX=function(pointName,nullForZeroString){var pn;return pn=pointName,pointName=pointName?pointName+".":"",this.sx||this.shx||this.tx?cleanInspect(pn,compact([1===this.sx?pointName+"x":this.sx?""+this.sx+pointName+"x":void 0,1===this.shx?pointName+"y":this.shx?""+this.shx+pointName+"y":void 0,this.tx?""+this.tx:void 0]).join(" + ")):nullForZeroString?void 0:"0"},Matrix.prototype.inspectY=function(pointName,nullForZeroString){var pn;return pn=pointName,pointName=pointName?pointName+".":"",this.sy||this.shy||this.ty?cleanInspect(pn,compact([1===this.sy?pointName+"y":this.sy?""+this.sy+pointName+"y":void 0,1===this.shy?pointName+"x":this.shy?""+this.shy+pointName+"x":void 0,this.ty?""+this.ty:void 0]).join(" + ")):nullForZeroString?void 0:"0"},Matrix.prototype.inspectBoth=function(pointName){return"("+this.inspectX(pointName)+", "+this.inspectY(pointName)+")"},Matrix.transform1D=transform1D=function(x,y,sx,shx,tx){return x*sx+y*shx+tx},Matrix.prototype.transform=function(a,b){var x,y;return isNumber(a)?(x=a,y=null!=b?b:x):(x=a.x,y=a.y),new Point(transform1D(x,y,this.sx,this.shx,this.tx),transform1D(y,x,this.sy,this.shy,this.ty))},Matrix.prototype.transformX=function(x,y){return transform1D(x,y,this.sx,this.shx,this.tx)},Matrix.prototype.transformY=function(x,y){return transform1D(y,x,this.sy,this.shy,this.ty)},Matrix.prototype.inverseTransform=function(a,b){var d,shx,shy,sx,sy,tx,ty,x,y;return isNumber(a)?(x=a,y=null!=b?b:x):(x=a.x,y=a.y),d=this.getDeterminantReciprocal(),sx=d*this.sy,sy=d*this.sx,shx=d*-this.shx,shy=d*-this.shy,tx=d*(-this.tx*this.sy+this.ty*this.shx),ty=d*(this.tx*this.shy-this.ty*this.sx),new Point(transform1D(x,y,sx,shx,tx),transform1D(y,x,sy,shy,ty))},Matrix.prototype.transformVector=function(a,b){var dx,dy;switch(null!=a&&a.constructor){case!1:dx=dy=0;break;case Point:dx=a.x,dy=a.y;break;default:dx=a,dy=b}return new Point(dx*this.sx+dy*this.shx,dy*this.sy+dx*this.shy)},Matrix.prototype.transformDifference=function(v1,v2){var dx,dy;return dx=v1.x-v2.x,dy=v1.y-v2.y,new Point(dx*this.sx+dy*this.shx,dy*this.sy+dx*this.shy)},Matrix.prototype.transformBoundingRect=function(r){var bottom,h,left,right,top,w,x,x1,x2,x3,x4,y,y1,y2,y3,y4;return r=rect(r),r.infinite?r:(0===this.shx&&0===this.shy?(x=r.x*this.sx+this.tx,y=r.y*this.sy+this.ty,w=r.w*this.sx,h=r.h*this.sy,w<0&&(x+=w,w=-w),h<0&&(y+=h,h=-h)):(top=r.x,left=r.y,right=r.x+r.w,bottom=r.y+r.h,x1=left*this.sx+top*this.shx+this.tx,y1=top*this.sy+left*this.shy+this.ty,x2=right*this.sx+top*this.shx+this.tx,y2=top*this.sy+right*this.shy+this.ty,x3=right*this.sx+bottom*this.shx+this.tx,y3=bottom*this.sy+right*this.shy+this.ty,x4=left*this.sx+bottom*this.shx+this.tx,y4=bottom*this.sy+left*this.shy+this.ty,x=Math.min(x1,x2,x3,x4),w=Math.max(x1,x2,x3,x4)-x,y=Math.min(y1,y2,y3,y4),h=Math.max(y1,y2,y3,y4)-y),new Rectangle(x,y,w,h))},Matrix.identityMatrix=identityMatrix=new Matrix,Matrix.matrix0=new Matrix(0,0,0,0,0,0),intermediatResultMatrix=new Matrix,Matrix.prototype._initFromMatrix=function(m){return this.sx=m.sx,this.sy=m.sy,this.shx=m.shx,this.shy=m.shy,this.tx=m.tx,this.ty=m.ty,this},Matrix.prototype._initFromPoint=function(p){return this.tx=p.x,this.ty=p.y,this},Matrix}(AtomicBase)},function(module,exports,__webpack_require__){var AtomicBase,Foundation,Perimeter,Point,floatEq,inspect,isPlainObject,isString,log,point,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),AtomicBase=__webpack_require__(131),Point=__webpack_require__(132),log=Foundation.log,inspect=Foundation.inspect,floatEq=Foundation.floatEq,isPlainObject=Foundation.isPlainObject,isString=Foundation.isString,point=Point.point,module.exports=Perimeter=function(superClass){function Perimeter(){return Perimeter.__super__.constructor.apply(this,arguments)}var k,namedPerimeters,perimeter,perimeter0,ref,v;extend(Perimeter,superClass),Perimeter.defineAtomicClass({fieldNames:"left right top bottom"}),Perimeter.perimeter=perimeter=function(a,b,c,d){var p;return a instanceof Perimeter?a:isString(a)&&(p=namedPerimeters[a])?p:null==b&&floatEq(a,0)||!a?perimeter0:new Perimeter(a,b,c,d)},Perimeter.prototype._initFields=function(){return this.left=this.right=this.top=this.bottom=0},Perimeter.prototype._initFromObject=function(obj){return this._initFields(),this.left=(obj.left||0)+(obj.l||0)+(obj.h||0)+(obj.horizontal||0),this.right=(obj.right||0)+(obj.r||0)+(obj.h||0)+(obj.horizontal||0),this.top=(obj.top||0)+(obj.t||0)+(obj.v||0)+(obj.vertical||0),this.bottom=(obj.bottom||0)+(obj.b||0)+(obj.v||0)+(obj.vertical||0)},Perimeter.prototype._init=function(a,b,c,d){var argLength;switch(this._initFields(),argLength=null!=a?null!=b?null!=c?null!=d?4:3:2:1:0){case 0:return this.left=this.right=this.top=this.bottom=0;case 1:return this.left=this.right=this.top=this.bottom=a;case 2:return this.left=this.right=a,this.top=this.bottom=b;case 4:return this.left=a,this.right=b,this.top=c,this.bottom=d;default:throw new Error("invalid number of arguments: "+inspect(arguments))}},Perimeter.getter({width:function(){return this.left+this.right},height:function(){return this.top+this.bottom},w:function(){return this.left+this.right},h:function(){return this.top+this.bottom}}),Perimeter.prototype.subtractedFromSize=function(size){var h,w;return w=this.getWidth(),h=this.getHeight(),floatEq(w,0)&&floatEq(h,0)?size:point(size.x-w,size.y-h)},Perimeter.prototype.addedToSize=function(size){var h,w;return w=this.getWidth(),h=this.getHeight(),floatEq(w,0)&&floatEq(h,0)?size:point(size.x+w,size.y+h)},Perimeter.namedPerimeters=namedPerimeters={perimeter0:perimeter0=Object.freeze(new Perimeter(0))},ref=Perimeter.namedPerimeters;for(k in ref)v=ref[k],Perimeter[k]=v;return Perimeter}(AtomicBase)},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-foundation":"git://github.com/imikimi/art-foundation.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.5.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},description:"atomic data-types such as Color, Point, Rectangle and Matrix",license:"ISC",name:"art-atomic",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"0.5.0"}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(138)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(139).includeInNamespace(__webpack_require__(141)).addModules({BitmapBase:__webpack_require__(143),Bitmap:__webpack_require__(144),GoogleFontLoader:__webpack_require__(148),GradientFillStyle:__webpack_require__(145),OriginalStackBlur:__webpack_require__(150),Paths:__webpack_require__(146),StackBlurOriginal:__webpack_require__(151),StackBlur:__webpack_require__(147)})},function(module,exports,__webpack_require__){var Art,Canvas,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(140),module.exports=Art.Canvas||Art.addNamespace("Canvas",Canvas=function(superClass){function Canvas(){return Canvas.__super__.constructor.apply(this,arguments)}return extend(Canvas,superClass),Canvas}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var _package;module.exports=[{"package":_package=__webpack_require__(142),version:_package.version}]},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-atomic":"git://github.com/imikimi/art-atomic.git","art-foundation":"git://github.com/imikimi/art-foundation.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.5.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webfontloader:"^1.6.26",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"art-canvas",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.3.4"}},function(module,exports,__webpack_require__){var Atomic,BaseObject,Binary,BinaryString,BitmapBase,Color,Foundation,Matrix,Point,Rectangle,alphaChannelOffset,floor,inspect,isNumber,isString,log,matrix,nextTick,pixelStep,point,pureMerge,rect,rgbColor,round,toChannelNumberMap,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,rgbColor=Atomic.rgbColor,Color=Atomic.Color,inspect=Foundation.inspect,nextTick=Foundation.nextTick,BaseObject=Foundation.BaseObject,Binary=Foundation.Binary,pureMerge=Foundation.pureMerge,isString=Foundation.isString,isNumber=Foundation.isNumber,log=Foundation.log,round=Math.round,floor=Math.floor,BinaryString=Binary.BinaryString,toChannelNumberMap={0:0,1:1,2:2,3:3,r:0,g:1,b:2,a:3,red:0,green:1,blue:2,alpha:3},alphaChannelOffset=3,pixelStep=4,module.exports=BitmapBase=function(superClass){function BitmapBase(a,b){BitmapBase.__super__.constructor.apply(this,arguments),this._htmlImageElement=null,this._canvas=null,this._clippingArea=null,this._context=null,this._size=null,this._lastTransform=null,this._imageSmoothing=!1,this.pixelSnap=BitmapBase.pixelSnapDefault,this._pixelsPerPoint=1,BitmapBase.bitmapsCreated++,b&&(a=point(a,b)),a instanceof BitmapBase?this.populateClone(this):a instanceof HTMLCanvasElement?this.initFromCanvas(a):a instanceof HTMLImageElement?this.initFromImage(a):this.initNewCanvas(point(a,b))}var calculateBottom,calculateLeft,calculateRight,calculateTop;return extend(BitmapBase,superClass),BitmapBase.bitmapsCreated=0,BitmapBase.prototype.compositeModeSupported=function(mode){return this.supportedCompositeModes.indexOf(mode)>=0},BitmapBase.pixelSnapDefault=!0,BitmapBase.prototype.defaultColor=rgbColor("black"),BitmapBase.prototype.defaultColorString="black",BitmapBase.getter({inspectedObjects:function(){return this},canvas:function(){if(!this._canvas){if(!this._htmlImageElement)throw new Error("can't get @canvas");this.initNewCanvas(this.size),this.drawBitmap(null,this._htmlImageElement)}return this._canvas},bitmapClass:function(){return this["class"]},clippingArea:function(){return this._clippingArea||(this._clippingArea=rect(this.getSize()))},aspectRatio:function(){return this.getSize().getAspectRatio()}}),BitmapBase.prototype.shouldPixelSnap=function(where){return this.pixelSnap&&(!where||where instanceof Point||where.isTranslateAndPositiveScaleOnly)},BitmapBase.prototype.pixelSnapWhere=function(where){return where instanceof Point?where.rounded:where?where.withRoundedTranslation:void 0},BitmapBase.prototype.pixelSnapRectangle=function(where,r){var bottom,h,isx,isy,right,sx,sy,tx,ty,w,x,y;return right=(x=r.x)+(w=r.w),bottom=(y=r.y)+(h=r.h),isx=isy=sx=sy=1,tx=ty=0,where instanceof Point?(tx=where.x,ty=where.y):where&&(tx=where.tx,ty=where.ty,sx=where.sx,isx=1/sx,sy=where.sy,isy=1/sy),x=(Math.round(x*sx+tx)-tx)*isx,y=(Math.round(y*sy+ty)-ty)*isy,w=(Math.round(right*sx+tx)-tx)*isx-x,h=(Math.round(bottom*sy+ty)-ty)*isy-y,rect(x,y,w,h)},BitmapBase.prototype.pixelSnapAndTransformRectangle=function(where,r){var bottom,left,right,top;return r||console.error("no r"),left=r.left,right=r.right,top=r.top,bottom=r.bottom,where instanceof Point?(left+=where.x,right+=where.x,top+=where.y,bottom+=where.y):where&&(left=where.transformX(left,top),top=where.transformY(left,top),right=where.transformX(right,bottom),bottom=where.transformY(right,bottom)),left=Math.round(left),top=Math.round(top),right=Math.round(right),bottom=Math.round(bottom),rect(left,top,right-left,bottom-top)},BitmapBase.prototype.clone=function(){var b;return b=this.newBitmap(this.size),b.drawBitmap(null,this),b},BitmapBase.prototype.crop=function(area){return area||(area=this.getAutoCropRectangle()),area=rect(area).intersection(rect(this.size)),this.newBitmap(area.size).drawBitmap(Matrix.translateXY(-area.x,-area.y),this);
},BitmapBase.prototype.initFromCanvas=function(canvas){return this._canvas=canvas,this._size=point(this._canvas.width,this._canvas.height),this.initContext()},BitmapBase.prototype.initFromImage=function(image){return this._size=point(image.width,image.height),this.initNewCanvas(this.size),this.drawBitmap(point(),image)},BitmapBase.prototype.initNewCanvas=function(size){if(!this._context){if(!size.gt(point()))throw new Error("invalid size="+size+" for Art.Canvas.Bitmap");return this._size=size.floor(),this._canvas=document.createElement("canvas"),this._canvas.width=this.size.x,this._canvas.height=this.size.y,this.initContext()}},BitmapBase.prototype.populateClone=function(result){return result.initNewCanvas(this.size),result.drawBitmap(null,this),result._pixelsPerPoint=this._pixelsPerPoint},BitmapBase.getter({pixelsPerPoint:function(){return this._pixelsPerPoint},pointsPerPixel:function(){return 1/this._pixelsPerPoint},pointSize:function(){return this.size.div(this.pixelsPerPoint)},byteSize:function(){return this.size.area*this.getBytesPerPixel()},bytesPerPixel:function(){return 4}}),BitmapBase.setter({pixelsPerPoint:function(v){return this._pixelsPerPoint=v},pointsPerPixel:function(v){return this._pixelsPerPoint=1/v}}),BitmapBase.property({size:point(100,100)}),BitmapBase.property({imageSmoothing:!1}),BitmapBase.prototype.toMemoryBitmap=function(){return this},BitmapBase.prototype.toMemoryDrawableBitmap=function(){return this},BitmapBase.prototype.getImageData=function(a,b,c,d){var area;return area=null===a||void 0===a?rect(this.size):rect(a,b,c,d),this.toMemoryBitmap().context.getImageData(area.x,area.y,area.w,area.h)},BitmapBase.prototype.putImageData=function(imageData,location,sourceArea){return null==location&&(location=point()),null==sourceArea&&(sourceArea=rect(this.size)),location=location.sub(sourceArea.location),this._context.putImageData(imageData,location.x,location.y,sourceArea.x,sourceArea.y,sourceArea.w,sourceArea.h),this},BitmapBase.prototype.getImageDataArray=function(channel){var data,end,i,j,len,results,results1,v;if(null==channel&&(channel=null),data=this.getImageData().data,null!=(channel=toChannelNumberMap[channel])){for(i=channel,end=data.length,results=[];i<end;)i+=4,results.push(data[i-4]);return results}for(results1=[],j=0,len=data.length;j<len;j++)v=data[j],results1.push(v);return results1},BitmapBase.prototype.toPngUri=function(){return nextTick().then(function(_this){return function(){return _this.toMemoryBitmap().canvas.toDataURL()}}(this))},BitmapBase.prototype.toJpgUri=function(quality){return null==quality&&(quality=.95),nextTick().then(function(_this){return function(){return _this.toMemoryBitmap().canvas.toDataURL("image/jpeg",quality)}}(this))},BitmapBase.prototype.toPng=function(){return this.toPngUri().then(function(dataURI){return BinaryString.fromDataUri(dataURI)})},BitmapBase.prototype.toJpg=function(quality){return this.toJpgUri(quality).then(function(dataURI){return BinaryString.fromDataUri(dataURI)})},BitmapBase.prototype.toImage=function(){return nextTick().then(function(_this){return function(){var url;return _this._htmlImageElement?_this._htmlImageElement:(url=_this.toMemoryBitmap().canvas.toDataURL(),Binary.EncodedImage.toImage(url).then(function(image){var h,ref,w;return ref=_this.pointSize,w=ref.w,h=ref.h,image.width=w,image.height=h,image}))}}(this))},BitmapBase.prototype.hFlipped=function(){var result;return result=this.newBitmap(this.size),result.drawBitmap(Matrix.translateXY(-this.size.x/2,0).scaleXY(-1,1).translateXY(this.size.x/2,0),this),result},BitmapBase.prototype.vFlipped=function(){var result;return result=this.newBitmap(this.size),result.drawBitmap(Matrix.translateXY(0,-this.size.y/2).scaleXY(1,-1).translateXY(0,this.size.y/2),this),result},BitmapBase.prototype.drawBorder=function(where,r,options){var c,m,p,w;return m=matrix(where),r=rect(r),c=options.color||"#777",w=options.width||1,p=options.padding||0,r=r.grow(p),this.drawRectangle(m,rect(r.x,r.y,r.w,w),c),this.drawRectangle(m,rect(r.x,r.bottom-w,r.w,w),c),this.drawRectangle(m,rect(r.x,r.y+w,w,r.h-2*w),c),this.drawRectangle(m,rect(r.right-w,r.y+w,w,r.h-2*w),c)},BitmapBase.prototype.drawStretchedBorderBitmap=function(drawMatrix,targetArea,bitmap,sourceCenterArea,options){var bitmapSize,borderRatio,borderReductionRatio,borderScale,botomCenter,bottomCenter,bottomLeft,bottomRight,centerCenter,centerLeft,centerRight,centertCenter,hide,horizontalBorderHeight,horizontalBorderWidth,m,show,sourceBottomHeight,sourceBottomScale,sourceCenterAreaBottom,sourceCenterAreaHeight,sourceCenterAreaLeft,sourceCenterAreaRight,sourceCenterAreaTop,sourceCenterAreaWidth,sourceCenterHeightScale,sourceCenterWidthScale,sourceLeftScale,sourceLeftWidth,sourceRightScale,sourceRightWidth,sourceTopHeight,sourceTopScale,targetAreaBottom,targetAreaHeight,targetAreaLeft,targetAreaRight,targetAreaTop,targetAreaWidth,targetBottomHeight,targetCenterAreaBottom,targetCenterAreaHeight,targetCenterAreaLeft,targetCenterAreaRight,targetCenterAreaTop,targetCenterAreaWidth,targetLeftWidth,targetRightWidth,targetTopHeight,topCenter,topLeft,topRight,totalBorderHeight,totalBorderWidth;if(null==options&&(options={}),hide=options.hide,show=options.show,bitmapSize=bitmap.size,borderScale=options.borderScale,isNumber(borderScale)||(borderScale=1),sourceCenterAreaLeft=sourceCenterArea.left,sourceCenterAreaTop=sourceCenterArea.top,sourceCenterAreaRight=sourceCenterArea.right,sourceCenterAreaBottom=sourceCenterArea.bottom,sourceCenterAreaWidth=sourceCenterAreaRight-sourceCenterAreaLeft,sourceCenterAreaHeight=sourceCenterAreaBottom-sourceCenterAreaTop,targetAreaLeft=round(drawMatrix.transformX(targetArea.left,0)),targetAreaTop=round(drawMatrix.transformY(0,targetArea.top)),targetAreaRight=round(drawMatrix.transformX(targetArea.right,0)),targetAreaBottom=round(drawMatrix.transformY(0,targetArea.bottom)),targetAreaWidth=targetAreaRight-targetAreaLeft,targetAreaHeight=targetAreaBottom-targetAreaTop,sourceLeftWidth=sourceCenterAreaLeft,sourceTopHeight=sourceCenterAreaTop,sourceRightWidth=bitmapSize.w-sourceCenterAreaRight,sourceBottomHeight=bitmapSize.h-sourceCenterAreaBottom,targetCenterAreaLeft=round(drawMatrix.transformX(targetArea.left+sourceLeftWidth*borderScale,0)),targetCenterAreaTop=round(drawMatrix.transformY(0,targetArea.top+sourceTopHeight*borderScale)),targetCenterAreaRight=round(drawMatrix.transformX(targetArea.right-sourceRightWidth*borderScale,0)),targetCenterAreaBottom=round(drawMatrix.transformY(0,targetArea.bottom-sourceBottomHeight*borderScale)),targetCenterAreaWidth=targetCenterAreaRight-targetCenterAreaLeft,targetCenterAreaHeight=targetCenterAreaBottom-targetCenterAreaTop,targetCenterAreaWidth<0&&(horizontalBorderWidth=targetAreaWidth-targetCenterAreaWidth,borderReductionRatio=targetAreaWidth/horizontalBorderWidth,borderRatio=sourceLeftWidth/(totalBorderWidth=sourceLeftWidth+sourceRightWidth),sourceLeftWidth=round(sourceLeftWidth*borderReductionRatio),sourceRightWidth=round(sourceRightWidth*borderReductionRatio),sourceCenterAreaRight=bitmap.size.x-sourceRightWidth,targetCenterAreaLeft=targetCenterAreaRight=targetAreaLeft+round(targetAreaWidth*borderRatio),targetCenterAreaWidth=0),targetCenterAreaHeight<0&&(horizontalBorderHeight=targetAreaHeight-targetCenterAreaHeight,borderReductionRatio=targetAreaHeight/horizontalBorderHeight,borderRatio=sourceTopHeight/(totalBorderHeight=sourceTopHeight+sourceBottomHeight),sourceTopHeight=round(sourceTopHeight*borderReductionRatio),sourceBottomHeight=round(sourceBottomHeight*borderReductionRatio),sourceCenterAreaBottom=bitmap.size.x-sourceBottomHeight,targetCenterAreaTop=targetCenterAreaBottom=targetAreaTop+round(targetAreaHeight*borderRatio),targetCenterAreaHeight=0),targetLeftWidth=targetCenterAreaLeft-targetAreaLeft,targetTopHeight=targetCenterAreaTop-targetAreaTop,targetRightWidth=targetAreaRight-targetCenterAreaRight,targetBottomHeight=targetAreaBottom-targetCenterAreaBottom,sourceLeftScale=targetLeftWidth/sourceLeftWidth,sourceTopScale=targetTopHeight/sourceTopHeight,sourceRightScale=targetRightWidth/sourceRightWidth,sourceBottomScale=targetBottomHeight/sourceBottomHeight,sourceCenterWidthScale=targetCenterAreaWidth/sourceCenterAreaWidth,sourceCenterHeightScale=targetCenterAreaHeight/sourceCenterAreaHeight,show&&(topLeft=!show.topLeft,topRight=!show.topRight,topCenter=!show.topCenter,centerLeft=!show.centerLeft,centerRight=!show.centerRight,centerCenter=!show.centerCenter,bottomLeft=!show.bottomLeft,bottomRight=!show.bottomRight,bottomCenter=!show.bottomCenter),hide&&(topLeft=hide.topLeft,topCenter=hide.topCenter,topRight=hide.topRight,centerLeft=hide.centerLeft,centerCenter=hide.centerCenter,centerRight=hide.centerRight,bottomLeft=hide.bottomLeft,botomCenter=hide.botomCenter,bottomRight=hide.bottomRight,hide.top&&(topLeft=topCenter=topRight=!0),hide.bottom&&(bottomLeft=bottomCenter=bottomRight=!0),hide.left&&(topLeft=centerLeft=bottomLeft=!0),hide.left&&(topRight=centerRight=bottomRight=!0),hide.centerRow&&(centerLeft=centerCenter=centerRight=!0),hide.centerColumn&&(topCenter=centertCenter=bottomRight=!0)),topLeft||(m=Matrix.scaleXY(sourceLeftScale,sourceTopScale).translateXY(targetAreaLeft,targetAreaTop),options.sourceArea=rect(0,0,sourceLeftWidth,sourceTopHeight),this.drawBitmap(m,bitmap,options)),topRight||(m=Matrix.scaleXY(sourceRightScale,sourceTopScale).translateXY(targetCenterAreaRight,targetAreaTop),options.sourceArea=rect(sourceCenterAreaRight,0,sourceRightWidth,sourceTopHeight),this.drawBitmap(m,bitmap,options)),bottomLeft||(m=Matrix.scaleXY(sourceLeftScale,sourceBottomScale).translateXY(targetAreaLeft,targetCenterAreaBottom),options.sourceArea=rect(0,sourceCenterAreaBottom,sourceLeftWidth,sourceBottomHeight),this.drawBitmap(m,bitmap,options)),bottomRight||(m=Matrix.scaleXY(sourceRightScale,sourceBottomScale).translateXY(targetCenterAreaRight,targetCenterAreaBottom),options.sourceArea=rect(sourceCenterAreaRight,sourceCenterAreaBottom,sourceRightWidth,sourceBottomHeight),this.drawBitmap(m,bitmap,options)),targetCenterAreaHeight>0&&(centerLeft||(m=Matrix.scaleXY(sourceLeftScale,sourceCenterHeightScale).translateXY(targetAreaLeft,targetCenterAreaTop),options.sourceArea=rect(0,sourceTopHeight,sourceLeftWidth,sourceCenterAreaHeight),this.drawBitmap(m,bitmap,options)),centerCenter||targetCenterAreaWidth<=0||(m=Matrix.scaleXY(sourceCenterWidthScale,sourceCenterHeightScale).translateXY(targetCenterAreaLeft,targetCenterAreaTop),options.sourceArea=rect(sourceCenterAreaLeft,sourceCenterAreaTop,sourceCenterAreaWidth,sourceCenterAreaHeight),this.drawBitmap(m,bitmap,options)),centerRight||(m=Matrix.scaleXY(sourceRightScale,sourceCenterHeightScale).translateXY(targetCenterAreaRight,targetCenterAreaTop),options.sourceArea=rect(sourceCenterAreaRight,sourceTopHeight,sourceRightWidth,sourceCenterAreaHeight),this.drawBitmap(m,bitmap,options))),sourceCenterAreaWidth>0&&(bottomCenter||(m=Matrix.scaleXY(sourceCenterWidthScale,sourceBottomScale).translateXY(targetCenterAreaLeft,targetCenterAreaBottom),options.sourceArea=rect(sourceLeftWidth,sourceCenterAreaBottom,sourceCenterAreaWidth,sourceBottomHeight),this.drawBitmap(m,bitmap,options)),!topCenter))return m=Matrix.scaleXY(sourceCenterWidthScale,sourceTopScale).translateXY(targetCenterAreaLeft,targetAreaTop),options.sourceArea=rect(sourceCenterAreaLeft,0,sourceCenterAreaWidth,sourceTopHeight),this.drawBitmap(m,bitmap,options)},calculateTop=function(data,size,threshold){var lineStep,pos;for(lineStep=size.x*pixelStep,pos=alphaChannelOffset;pos<data.length&&data[pos]<=threshold;)pos+=pixelStep;return floor(pos/lineStep)},calculateBottom=function(data,size,threshold,top){var lineStep,pos,stopPos;for(lineStep=size.x*pixelStep,pos=data.length+alphaChannelOffset-pixelStep,stopPos=top*lineStep;pos>stopPos&&data[pos]<=threshold;)pos-=pixelStep;return floor(pos/lineStep)},calculateLeft=function(data,size,threshold,top,bottom){var bottomOffset,length,lineStep,pos,posX,stop,topOffset;for(lineStep=size.x*pixelStep,length=data.length,topOffset=top*lineStep,bottomOffset=bottom*lineStep,posX=alphaChannelOffset;posX<lineStep;){for(pos=posX+topOffset,stop=posX+bottomOffset;pos<stop;){if(data[pos]>threshold)return floor(posX/pixelStep);pos+=lineStep}posX+=pixelStep}},calculateRight=function(data,size,threshold,top,bottom,left){var bottomOffset,length,lineStep,outterStop,pos,posX,stop,topOffset;for(lineStep=size.x*pixelStep,length=data.length,topOffset=top*lineStep,bottomOffset=bottom*lineStep,posX=lineStep-pixelStep+alphaChannelOffset,outterStop=left*pixelStep;posX>outterStop;){for(pos=posX+topOffset,stop=posX+bottomOffset;pos<stop;){if(data[pos]>threshold)return floor(posX/pixelStep);pos+=lineStep}posX-=pixelStep}},BitmapBase.prototype.getAutoCropRectangle=function(threshold){var bottom,context,data,left,ref,right,size,top;return null==threshold&&(threshold=0),ref=this,size=ref.size,context=ref.context,data=context.getImageData(0,0,size.x,size.y).data,top=calculateTop(data,size,threshold),top===size.y?rect():(bottom=calculateBottom(data,size,threshold,top),left=calculateLeft(data,size,threshold,top,bottom),right=calculateRight(data,size,threshold,top,bottom,left),rect(left,top,right-left+1,bottom-top+1))},BitmapBase}(BaseObject)},function(module,exports,__webpack_require__){var Atomic,Binary,Bitmap,BitmapBase,Color,EncodedImage,Foundation,GradientFillStyle,IdentityMatrix,Matrix,Paths,Point,Promise,Rectangle,StackBlur,canvasBlenders,currentSecond,emptyOptions,eq,floatEq0,inspect,isFunction,isNumber,isPlainObject,log,matrix,max,min,point,point0,rect,rgbColor,round,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),GradientFillStyle=__webpack_require__(145),BitmapBase=__webpack_require__(143),Paths=__webpack_require__(146),StackBlur=__webpack_require__(147),inspect=Foundation.inspect,log=Foundation.log,min=Foundation.min,max=Foundation.max,Binary=Foundation.Binary,isFunction=Foundation.isFunction,isPlainObject=Foundation.isPlainObject,eq=Foundation.eq,currentSecond=Foundation.currentSecond,round=Foundation.round,isNumber=Foundation.isNumber,floatEq0=Foundation.floatEq0,Promise=Foundation.Promise,isPlainObject=Foundation.isPlainObject,EncodedImage=Binary.EncodedImage,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,rgbColor=Atomic.rgbColor,Color=Atomic.Color,IdentityMatrix=Atomic.IdentityMatrix,point0=Atomic.point0,emptyOptions={},canvasBlenders={add:"lighter",normal:"source-over",target_alphamask:"source-in",alphamask:"destination-in",destover:"destination-over",sourcein:"source-atop",inverse_alphamask:"destination-out",alphaMask:"destination-in",targetAlphaMask:"source-in",inverseAlphaMask:"destination-out",destOver:"destination-over",sourceIn:"source-atop",replace:"copy"},module.exports=Bitmap=function(superClass){function Bitmap(){return Bitmap.__super__.constructor.apply(this,arguments)}var k,v;return extend(Bitmap,superClass),Bitmap.supportedCompositeModes=function(){var results;results=[];for(k in canvasBlenders)v=canvasBlenders[k],results.push(k);return results}(),Bitmap.getter({supportedCompositeModes:function(){return Bitmap.supportedCompositeModes}}),Bitmap.artToCanvasCompositeModeMap=canvasBlenders,Bitmap.prototype.initContext=function(){var ref;return this._context=null!=(ref=this._canvas)?ref.getContext("2d"):void 0},Bitmap.getter({context:function(){return!this._context&&this._htmlImageElement&&(this.initNewCanvas(this.size),this.drawBitmap(point(),this._htmlImageElement),this._htmlImageElement=null),this._context},context2D:function(){return this.getContext()},htmlImageElement:function(){return this._htmlImageElement},htmlElement:function(){return this._htmlImageElement||this._canvas}}),Bitmap.get=function(url,options){return EncodedImage.get(url,options).then(function(image){var _,bitmap,match,resolution;return bitmap=new Bitmap(image),(match=url.match(/@([2-9])x\.[a-zA-Z]+$/))&&(_=match[0],resolution=match[1],bitmap.pixelsPerPoint=0|resolution),bitmap})},Bitmap.requestImage=function(){return Foundation.Browser.File.request({accept:"image/*"}).then(function(_this){return function(arg){var file;return file=arg[0],EncodedImage.toImage(file).then(function(image){return{bitmap:new Bitmap(image),file:file}})}}(this))},Bitmap.prototype.initFromImage=function(image){return this._size=point(image.width,image.height),this._htmlImageElement=image},Bitmap.setter({imageSmoothing:function(bool){return this._context.imageSmoothingEnabled=this._context.mozImageSmoothingEnabled=this._context.webkitImageSmoothingEnabled=this._context.msImageSmoothingEnabled=this._imageSmoothing=!!bool}}),Bitmap.bitmapClass=Bitmap,Bitmap.newBitmap=function(size){return new Bitmap.bitmapClass(size)},Bitmap.prototype.newBitmap=function(size){return new this.bitmapClass(size||this.size).tap(function(_this){return function(b){return b.pixelsPerPoint=_this.pixelsPerPoint}}(this))},Bitmap.prototype.setClippingArea=function(area,drawMatrix){return this._setTransform(drawMatrix),isFunction(area)?(this._context.beginPath(),area(this._context),this._context.clip()):(area=this.pixelSnapRectangle(drawMatrix,area),this._clippingArea=area.intersection(this._clippingArea),this._context.beginPath(),this._context.rect(area.x,area.y,area.w,area.h),this._context.clip())},Bitmap.prototype.clippedTo=function(area,f,drawMatrix){var previousClippingArea;this._context.save(),previousClippingArea=this._clippingArea;try{return this.setClippingArea(area,drawMatrix),f()}finally{this._context.restore(),this._clippingArea=previousClippingArea}},Bitmap.prototype.clear=function(a,b,c,d){var clr;return clr=null!=a?rgbColor(a,b,c,d):rgbColor(0,0,0,0),this._clearTransform(),1!==clr.a&&this._context.clearRect(0,0,this.size.x,this.size.y),clr.eq(rgbColor(0,0,0,0))||(this._context.globalCompositeOperation="source-over",this._setFillStyle(clr),this._context.fillRect(0,0,this.size.x,this.size.y)),this},Bitmap.prototype.strokeRectangle=function(where,rectangle,options){var grow,lineWidth,lineWidthMod2,r;return null==options&&(options=emptyOptions),r=rect(rectangle),this.shouldPixelSnap(where)&&(lineWidth=options.lineWidth||1,r=this.pixelSnapRectangle(where,r),lineWidthMod2=lineWidth%2,grow=lineWidthMod2<1?-lineWidthMod2/2:lineWidthMod2/2-1,floatEq0(grow)||(r=r.grow(grow))),options.radius?this.strokeShape(where,options,function(_this){return function(){return Paths.roundedRectangle(_this._context,r,min(options.radius,r.w/2,r.h/2))}}(this)):this._setupDraw(where,options,!0)&&(this._context.strokeRect(r.x,r.y,r.w,r.h),this._cleanupDraw(options)),this},Bitmap.prototype.strokeShape=function(where,options,pathFunction){return this._setupDraw(where,options,!0)&&(this._context.beginPath(),pathFunction(this._context),this._context.stroke(),this._cleanupDraw(options)),this},Bitmap.prototype.drawBorder=function(where,rectangle,options){var a,a1,g,p,w;return this._setupDraw(where,options,!0)&&(p=options.padding||0,w=options.width||1,a1=rect(rectangle),g=p-w/2,a=a1.grow(g),this._context.beginPath(),Paths.rectangle(this._context,a),this._context.stroke(),this._cleanupDraw(options)),this},Bitmap.prototype.drawLine=function(where,fromPoint,toPoint,options){return null==options&&(options=emptyOptions),this._setupDraw(where,options,!0)&&(this._context.beginPath(),Paths.line(this._context,fromPoint,toPoint),this._context.stroke(),this._cleanupDraw(options)),this},Bitmap.prototype.drawRectangle=function(where,rectangle,options){var _context,fillRule,r,radius;return null==options&&(options=emptyOptions),r=rect(rectangle),radius=options.radius,fillRule=options.fillRule,this.shouldPixelSnap(where)&&(r=this.pixelSnapRectangle(where,r)),_context=this._context,this._setupDraw(where,options)&&(radius>0||isPlainObject(radius)?(_context.beginPath(),Paths.roundedRectangle(_context,r,radius),_context.fill(fillRule||"nonzero")):_context.fillRect(r.x,r.y,r.w,r.h),this._cleanupDraw(options)),this},Bitmap.prototype.fillShape=function(where,options,pathFunction){var _context;return _context=this._context,this._setupDraw(where,options)&&(_context.beginPath(),pathFunction(_context),_context.fill(options.fillRule||"nonzero"),this._cleanupDraw(options)),this},Bitmap.prototype.drawBitmap=function(where,bitmap,options){var aboutToDrawTime,drawed,endTime,h,inputBitmap,inputBitmapSize,origSourceArea,ref,ref1,sh,sourceArea,startTime,sw,sx,sy,w,x,y;return null==options&&(options=emptyOptions),startTime=currentSecond(),sourceArea=options.sourceArea,inputBitmap=bitmap,bitmap.toMemoryDrawableBitmap&&(bitmap=bitmap.toMemoryDrawableBitmap()),bitmap=bitmap._canvas||bitmap._htmlImageElement||bitmap,inputBitmapSize=inputBitmap.size||point(inputBitmap.width,inputBitmap.height),drawed="",this.shouldPixelSnap(where)?(ref=this.pixelSnapAndTransformRectangle(where,(null!=sourceArea?sourceArea.size:void 0)||inputBitmapSize),x=ref.x,y=ref.y,w=ref.w,h=ref.h,sourceArea?(sx=round(sourceArea.x),sy=round(sourceArea.y),sw=round(sourceArea.w),sh=round(sourceArea.h)):(sx=sy=0,sw=inputBitmapSize.x,sh=inputBitmapSize.y),this._setupDraw(null,options)&&(drawed="pixelSnap - "+inspect([sx,sy,sw,sh]),aboutToDrawTime=currentSecond(),this._context.drawImage(bitmap,sx,sy,sw,sh,x,y,w,h),this._cleanupDraw(options))):this._setupDraw(where,options)&&(aboutToDrawTime=currentSecond(),(origSourceArea=sourceArea)?(drawed="sourceArea",ref1=sourceArea.intersection(rect(inputBitmap.size)),x=ref1.x,y=ref1.y,w=ref1.w,h=ref1.h,this._context.drawImage(bitmap,x,y,w,h,0,0,w,h)):(drawed="other",this._context.drawImage(bitmap,0,0)),this._cleanupDraw(options)),endTime=currentSecond(),endTime-startTime>.1&&log({Canvas_Bitmap_drawBitmap:{slowDraw:(1e3*(endTime-startTime)|0)+"ms",time2:(1e3*(endTime-aboutToDrawTime)|0)+"ms",where:where,options:options,drawed:drawed,bitmapSize:[bitmap._size,bitmap.width,bitmap.height]}}),this},Bitmap.prototype.drawText=function(where,text,options){return null==options&&(options=emptyOptions),this._setupDraw(where,options)&&(this._context.font=(options.size||16)+"px "+(options.family||"Arial")+", Arial",this._context.textAlign=options.align||"start",this._context.textBaseline=options.baseline||"alphabetic",this._context.fillText(text,0,0),this._cleanupDraw(options)),this},Bitmap.prototype.blur=function(radius,toClone){return(toClone?this.clone():this).tap(function(_this){return function(target){return StackBlur.blur(_this,radius,target)}}(this))},Bitmap.prototype.blurAlpha=function(radius,options){return null==options&&(options=emptyOptions),(options.clone?this.clone():this).tap(function(_this){return function(target){var func;return func=options.inverted?"blurInvertedAlpha":"blurAlpha",StackBlur[func](_this,radius,target)}}(this))},Bitmap.prototype._clearTransform=function(){return this._lastTransform=IdentityMatrix,this._context.setTransform(1,0,0,1,0,0)},Bitmap.prototype._setTransform=function(m){return m?(this._lastTransform=m,m instanceof Point?this._context.setTransform(1,0,0,1,m.x,m.y):this._context.setTransform(m.sx,m.shy,m.shx,m.sy,m.tx,m.ty)):this._clearTransform()},Bitmap.prototype._setStrokeStyle=function(strokeStyle){return this._context.strokeStyle=strokeStyle.toCanvasStyle?strokeStyle.toCanvasStyle(this._context):strokeStyle.toString()},Bitmap.prototype._setFillStyle=function(fillStyle){return this._context.fillStyle=fillStyle.toCanvasStyle?fillStyle.toCanvasStyle(this._context):fillStyle.toString()},Bitmap.prototype._getFillStyleFromOptions=function(options){var fromPoint,gradientRadius1,toPoint;return options.colors?(fromPoint=options.from||point0,gradientRadius1=options.gradientRadius1||options.gradientRadius,toPoint=options.to||(null!=gradientRadius1?fromPoint:this.size),new GradientFillStyle(fromPoint,toPoint,options.colors,gradientRadius1,options.gradientRadius2)):options.fillStyle||options.color||this.defaultColorString},Bitmap.prototype._setStrokeStyleFromOptions=function(options){var lineCap,lineDash,lineJoin,lineWidth,miterLimit;return this._setStrokeStyle(this._getFillStyleFromOptions(options)),lineWidth=options.lineWidth,lineCap=options.lineCap,lineJoin=options.lineJoin,miterLimit=options.miterLimit,lineDash=options.lineDash,this._context.setLineDash(lineDash||[]),this._context.lineWidth=lineWidth||1,this._context.lineCap=lineCap||"butt",this._context.lineJoin=lineJoin||"miter",this._context.miterLimit=miterLimit||10},Bitmap.prototype._setFillStyleFromOptions=function(options){return this._setFillStyle(this._getFillStyleFromOptions(options))},Bitmap.prototype._setupDraw=function(where,options,stroke){var _context,blur,compositeMode,offset,offsetX,offsetY,opacity,shadow,shadowColor;return compositeMode=options.compositeMode,shadow=options.shadow,opacity=options.opacity,stroke||(stroke=options.stroke),isNumber(opacity)||(opacity=1),!(opacity<1/256)&&(_context=this._context,stroke?this._setStrokeStyleFromOptions(options):this._setFillStyleFromOptions(options),compositeMode&&"normal"!==compositeMode&&(_context.globalCompositeOperation=canvasBlenders[compositeMode]||canvasBlenders.normal),opacity<1&&(_context.globalAlpha=opacity),shadow&&(blur=shadow.blur,offsetX=shadow.offsetX,offsetY=shadow.offsetY,offset=shadow.offset,shadowColor=shadow.color,_context.shadowColor=rgbColor(shadowColor||"black"),blur&&(_context.shadowBlur=blur),offsetX||(offsetX=0),offsetY||(offsetY=0),where instanceof Matrix?(_context.shadowOffsetX=Matrix.transform1D(offsetX,offsetY,where.sx,where.shx,0),_context.shadowOffsetY=Matrix.transform1D(offsetY,offsetX,where.sy,where.shy,0)):(_context.shadowOffsetX=offsetX,_context.shadowOffsetY=offsetY)),this._setTransform(where),!0)},Bitmap.prototype._cleanupDraw=function(options){var _context,compositeMode,opacity,shadow;if(compositeMode=options.compositeMode,shadow=options.shadow,opacity=options.opacity,isNumber(opacity)||(opacity=1),_context=this._context,compositeMode&&"normal"!==compositeMode&&(_context.globalCompositeOperation=canvasBlenders.normal),opacity<1&&(_context.globalAlpha=1),shadow)return _context.shadowColor="transparent",_context.shadowBlur=0,_context.shadowOffsetX=0,_context.shadowOffsetY=0},Bitmap}(BitmapBase)},function(module,exports,__webpack_require__){var Atomic,Foundation,GradientFillStyle,arrayWith,clone,flatten,floatEq,inspect,isNumber,isPlainArray,isPlainObject,isString,log,min,peek,point,point1,rgbColor,shallowClone,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),point=Atomic.point,rgbColor=Atomic.rgbColor,point1=Atomic.point1,inspect=Foundation.inspect,shallowClone=Foundation.shallowClone,flatten=Foundation.flatten,isPlainObject=Foundation.isPlainObject,log=Foundation.log,isNumber=Foundation.isNumber,isString=Foundation.isString,isPlainArray=Foundation.isPlainArray,clone=Foundation.clone,min=Foundation.min,floatEq=Foundation.floatEq,peek=Foundation.peek,arrayWith=Foundation.arrayWith,module.exports=GradientFillStyle=function(superClass){function GradientFillStyle(from,to,colors,radius11,radius21){this.from=from,this.to=to,this.radius1=radius11,this.radius2=radius21,this.setColors(this.inputColors=colors)}return extend(GradientFillStyle,superClass),GradientFillStyle.colorsToObjectsAndStringColors=function(colors){var clr,j,len,results;for(results=[],j=0,len=colors.length;j<len;j++)clr=colors[j],isPlainObject(clr)?results.push({n:clr.n,c:String(rgbColor(clr.c))}):results.push({c:String(rgbColor(clr))});return results},GradientFillStyle.colorsFromObjects=function(colors){var c,clr,j,k,len,n,ret;for(ret=[],j=0,len=colors.length;j<len;j++)if(clr=colors[j],isPlainObject(clr))if(isNumber(clr.r))ret.push(rgbColor(clr));else if(isNumber(clr.n))ret.push(clr);else for(k in clr)c=clr[k],n=k-0,ret.push({n:n,c:c});else ret.push(clr);return ret},GradientFillStyle.interpolateColorPositionRange=function(outColors,colors,start,end,firstN,lastN){var i,j,nDelta,ref,ref1,results,steps;for(steps=end-start+1,nDelta=(lastN-firstN)/steps,results=[],i=j=ref=start,ref1=end;ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j)results.push(outColors.push({c:colors[i].c,n:(i-start+1)*nDelta}));return results},GradientFillStyle.needToInterpolateColors=function(colors){var clr,j,len,ret;for(ret=!1,j=0,len=colors.length;j<len;j++)if(clr=colors[j],null==clr.n){ret=!0;break}return ret},GradientFillStyle.interpolateColorPositions=function(colors){var clr,firstColor,i,interpolateCount,j,lastColor,len,n,outColors,startN;if(!GradientFillStyle.needToInterpolateColors(colors))return colors;for(firstColor=colors[0],lastColor=colors[colors.length-1],null==firstColor.n&&(firstColor={c:firstColor.c,n:0}),null==lastColor.n&&(lastColor={c:lastColor.c,n:1}),outColors=[firstColor],startN=firstColor.n,interpolateCount=0,i=j=0,len=colors.length;j<len;i=++j)clr=colors[i],i>0&&(i===colors.length-1&&(clr=lastColor),n=clr.n,null!=n?(interpolateCount>0&&(GradientFillStyle.interpolateColorPositionRange(outColors,colors,i-interpolateCount,i,startN,n),interpolateCount=0),startN=n):interpolateCount++);return outColors.push(lastColor),outColors},GradientFillStyle.sortColorsByN=function(colors){return colors.sort(function(a,b){return a.n-b.n})},GradientFillStyle.normalizeColors=function(colors){return colors=this.colorsFromObjects(colors),colors=this.colorsToObjectsAndStringColors(colors),colors=this.interpolateColorPositions(colors),colors=this.sortColorsByN(colors)},GradientFillStyle.prototype.inspect2=function(){return"gradient(from:"+this.from+", to:"+this.to+", colors:"+inspect(this.inputColors)+")"},GradientFillStyle.clone=function(){return new GradientFillStyle(this.from,this.to,shallowClone(this.colors),this.radius1,this.radius2)},GradientFillStyle.getter({colors:function(){return this._colors},premultipliedColorPositions:function(){var a,j,len,ref,results;for(ref=this._colors,results=[],j=0,len=ref.length;j<len;j++)a=ref[j],results.push({n:a.n,c:rgbColor(a.c).premultiplied});return results}}),GradientFillStyle.setter({colors:function(colors){var k,v;return this._colors=isPlainArray(colors)?GradientFillStyle.normalizeColors(colors):isPlainObject(colors)?(colors=function(){var results;results=[];for(k in colors)v=colors[k],results.push({n:1*k,c:isString(v)?v:String(rgbColor(v))});return results}(),colors=GradientFillStyle.sortColorsByN(colors),GradientFillStyle.interpolateColorPositions(colors)):[{n:0,c:rgbColor("black"),n:1,c:rgbColor("white")}]}}),GradientFillStyle.prototype.getColorAt=function(atN){var c,i,j,lastC,lastN,len,n,range,ref,ref1;for(lastN=null,lastC=null,ref=this.colors,i=j=0,len=ref.length;j<len;i=++j){if(ref1=ref[i],c=ref1.c,n=ref1.n,atN<=n)return lastC?(range=n-lastN,rgbColor(lastC).interpolate(c,(atN-lastN)/range)):c;lastC=c,lastN=n}return null},GradientFillStyle.prototype.toCanvasStyle=function(context){var clr,e,gradient,j,len,radius1,radius2,ref,ref1;for(context.context&&(context=context.context),gradient=null!=this.radius1?(null!=this.radius2?(ref=this,radius1=ref.radius1,radius2=ref.radius2,ref):(radius1=0,radius2=this.radius1),context.createRadialGradient(this.from.x,this.from.y,radius1,this.to.x,this.to.y,radius2)):context.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),ref1=this._colors,j=0,len=ref1.length;j<len;j++){clr=ref1[j];try{gradient.addColorStop(clr.n,clr.c.toString())}catch(error){e=error,gradient.addColorStop(clr.n,"black")}}return gradient},GradientFillStyle}(Foundation.BaseObject)},function(module,exports,__webpack_require__){var Foundation,Paths,bound,float32Eq0,floatEq,isNumber,isPlainObject,log,max,min;Foundation=__webpack_require__(19),log=Foundation.log,floatEq=Foundation.floatEq,
min=Foundation.min,max=Foundation.max,isNumber=Foundation.isNumber,isPlainObject=Foundation.isPlainObject,float32Eq0=Foundation.float32Eq0,bound=Foundation.bound,module.exports=Paths=function(){function Paths(){}var rectangle,roundedRectangle;return Paths.rectangle=rectangle=function(context,r){var bottom,left,right,top;return left=r.left,right=r.right,top=r.top,bottom=r.bottom,context.moveTo(left,top),context.lineTo(right,top),context.lineTo(right,bottom),context.lineTo(left,bottom),context.closePath()},Paths.line=function(context,fromPoint,toPoint){return context.moveTo(fromPoint.x,fromPoint.y),context.lineTo(toPoint.x,toPoint.y)},Paths.roundedRectangle=roundedRectangle=function(context,r,radius){var bl,bottom,br,h,hCenter,halfW,left,maxRadius,right,tl,top,tr,vCenter,w;return radius?(isPlainObject(radius)?(tl=radius.tl,tr=radius.tr,bl=radius.bl,br=radius.br):tl=tr=bl=br=radius,float32Eq0(tl)&&float32Eq0(tr)&&float32Eq0(bl)&&float32Eq0(br)?rectangle(context,r):(w=r.w,h=r.h,w=max(0,w),h=max(0,h),floatEq(w,h)&&isNumber(radius)&&radius>=(halfW=w/2)?(hCenter=r.hCenter,vCenter=r.vCenter,void context.arc(hCenter,vCenter,halfW,0,2*Math.PI,!0)):(maxRadius=min(w/2,h/2),bl=bound(0,bl,maxRadius),br=bound(0,br,maxRadius),tl=bound(0,tl,maxRadius),tr=bound(0,tr,maxRadius),left=r.left,right=r.right,top=r.top,bottom=r.bottom,context.moveTo(left,top+tl),context.arcTo(left,top,left+tl,top,tl),context.lineTo(right-tr,top),context.arcTo(right,top,right,top+tr,tr),context.lineTo(right,bottom-br),context.arcTo(right,bottom,right-br,bottom,br),context.lineTo(left+bl,bottom),context.arcTo(left,bottom,left,bottom-bl,bl),context.closePath()))):rectangle(context,r)},Paths.curriedRoundedRectangle=function(r,radius){return function(context){return roundedRectangle(context,r,radius)}},Paths}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(139),__webpack_require__(125),__webpack_require__(19),__webpack_require__(143)],__WEBPACK_AMD_DEFINE_RESULT__=function(Canvas,Atomic,Foundation){var BlurStack,color,inspect,matrix,nextTick,point,rect;return point=Atomic.point,matrix=Atomic.matrix,rect=Atomic.rect,color=Atomic.color,inspect=Foundation.Inspect.inspect,nextTick=Foundation.nextTick,BlurStack=function(){function BlurStack(){this.r=this.g=this.b=this.a=0,this.next=null}return BlurStack}(),Canvas.StackBlur=function(superClass){function StackBlur(){return StackBlur.__super__.constructor.apply(this,arguments)}return extend(StackBlur,superClass),StackBlur.blur=function(bitmap,radius){return(new Canvas.StackBlur).blur(bitmap,radius)},StackBlur.blurRGB=function(bitmap,radius){return(new Canvas.StackBlur).blurRGB(bitmap,radius)},StackBlur.blurAlpha=function(bitmap,radius){return(new Canvas.StackBlur).blurAlpha(bitmap,radius)},StackBlur.blurInvertedAlpha=function(bitmap,radius){return(new Canvas.StackBlur).blurInvertedAlpha(bitmap,radius)},StackBlur.prototype.blur=function(bitmap,radius,targetBitmap){var imageData,pixels;return targetBitmap||(targetBitmap=bitmap),imageData=bitmap.getImageData(),pixels=imageData.data,radius=radius+.5|0,radius>0&&this.stackBlurCanvasRGBA(pixels,bitmap.size.w,bitmap.size.h,radius),targetBitmap.putImageData(imageData)},StackBlur.prototype.blurRGB=function(bitmap,radius,targetBitmap){var imageData,pixels;return targetBitmap||(targetBitmap=bitmap),imageData=bitmap.getImageData(),pixels=imageData.data,radius=radius+.5|0,radius>0&&this.stackBlurCanvasRGB(pixels,bitmap.size.w,bitmap.size.h,radius),targetBitmap.putImageData(imageData)},StackBlur.prototype.blurAlpha=function(bitmap,radius,targetBitmap){var imageData,pixels;return targetBitmap||(targetBitmap=bitmap),imageData=bitmap.getImageData(),pixels=imageData.data,radius=radius+.5|0,radius>0&&this.stackBlurCanvasAlpha(pixels,bitmap.size.w,bitmap.size.h,radius),targetBitmap.putImageData(imageData)},StackBlur.prototype.blurInvertedAlpha=function(bitmap,radius,targetBitmap){var imageData,pixels;return targetBitmap||(targetBitmap=bitmap),imageData=bitmap.getImageData(),pixels=imageData.data,radius=radius+.5|0,this.invertAlpha(pixels,bitmap.size.area),radius>0&&this.stackBlurCanvasAlpha(pixels,bitmap.size.w,bitmap.size.h,radius),targetBitmap.putImageData(imageData)},StackBlur.prototype.invertAlpha=function(pixels,numPixels){var end,end8,i,results;for(i=0,end=4*numPixels-4,end8=end-end%8;i<=end;)pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4,pixels[i+3]=255-pixels[i+3],i+=4;for(results=[];i<=end;)pixels[i+3]=255-pixels[i+3],results.push(i+=4);return results},StackBlur.prototype.createStack=function(radius){var i,j,ref,stack;for(this.stackStart=new BlurStack,stack=this.stackStart,i=j=1,ref=2*radius;j<=ref;i=j+=1)stack=stack.next=new BlurStack,i===radius+1&&(this.stackEnd=stack);return stack.next=this.stackStart},StackBlur.prototype.rgbaPass=function(radius,pixels,outterStep,outterEnd,innerStep,innerEndDelta){var a_in_sum,a_out_sum,a_sum,b_in_sum,b_out_sum,b_sum,firstPixelSumWeight,g_in_sum,g_out_sum,g_sum,i,innerEnd,innerPos,innerRadiusEnd,j,oneOverStackWeight,outterPos,pa,pb,pg,pr,r_in_sum,r_out_sum,r_sum,radiusPlus1,rbs,readPos,readPosOffset,ref,results,stackEnd,stackIn,stackOut,stackStart,stackWeight,weight;for(radiusPlus1=radius+1,stackWeight=radiusPlus1*radiusPlus1,oneOverStackWeight=1/stackWeight,firstPixelSumWeight=(stackWeight+radiusPlus1)/2,stackStart=this.stackStart,stackEnd=this.stackEnd,outterPos=0,results=[];outterPos<=outterEnd;){for(r_in_sum=g_in_sum=b_in_sum=a_in_sum=0,pr=pixels[outterPos],pg=pixels[outterPos+1],pb=pixels[outterPos+2],pa=pixels[outterPos+3],pa<255&&(weight=pa/255,pr*=weight,pg*=weight,pb*=weight),r_out_sum=radiusPlus1*pr,g_out_sum=radiusPlus1*pg,b_out_sum=radiusPlus1*pb,a_out_sum=radiusPlus1*pa,r_sum=firstPixelSumWeight*pr,g_sum=firstPixelSumWeight*pg,b_sum=firstPixelSumWeight*pb,a_sum=firstPixelSumWeight*pa,stackIn=stackStart,i=j=0,ref=radius;j<=ref;i=j+=1)stackIn.r=pr,stackIn.g=pg,stackIn.b=pb,stackIn.a=pa,stackIn=stackIn.next;for(innerEnd=outterPos+innerEndDelta,rbs=radius,innerRadiusEnd=outterPos+radius*innerStep,innerPos=outterPos+innerStep;innerPos<=innerRadiusEnd;)readPos=innerPos,innerPos>innerEnd&&(readPos=innerEnd),pr=pixels[readPos],pg=pixels[readPos+1],pb=pixels[readPos+2],pa=pixels[readPos+3],pa<255&&(weight=pa/255,pr*=weight,pg*=weight,pb*=weight),r_in_sum+=stackIn.r=pr,g_in_sum+=stackIn.g=pg,b_in_sum+=stackIn.b=pb,a_in_sum+=stackIn.a=pa,r_sum+=pr*rbs,g_sum+=pg*rbs,b_sum+=pb*rbs,a_sum+=pa*rbs,rbs--,stackIn=stackIn.next,innerPos+=innerStep;for(stackOut=stackEnd,readPosOffset=radiusPlus1*innerStep,innerPos=outterPos;innerPos<=innerEnd;)pixels[innerPos+3]=pa=a_sum*oneOverStackWeight,0!==pa?(pa=255*oneOverStackWeight/pa,pixels[innerPos]=r_sum*pa,pixels[innerPos+1]=g_sum*pa,pixels[innerPos+2]=b_sum*pa):pixels[innerPos]=pixels[innerPos+1]=pixels[innerPos+2]=0,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,a_sum-=a_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,a_out_sum-=stackIn.a,readPos=innerPos+readPosOffset,readPos>innerEnd&&(readPos=innerEnd),pr=pixels[readPos],pg=pixels[readPos+1],pb=pixels[readPos+2],pa=pixels[readPos+3],pa<255&&(weight=pa/255,pr*=weight,pg*=weight,pb*=weight),r_in_sum+=stackIn.r=pr,g_in_sum+=stackIn.g=pg,b_in_sum+=stackIn.b=pb,a_in_sum+=stackIn.a=pa,r_sum+=r_in_sum,g_sum+=g_in_sum,b_sum+=b_in_sum,a_sum+=a_in_sum,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,a_out_sum+=pa=stackOut.a,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,a_in_sum-=pa,stackIn=stackIn.next,stackOut=stackOut.next,innerPos+=innerStep;results.push(outterPos+=outterStep)}return results},StackBlur.prototype.rgbPass=function(radius,pixels,outterStep,outterEnd,innerStep,innerEndDelta){var b_in_sum,b_out_sum,b_sum,firstPixelSumWeight,g_in_sum,g_out_sum,g_sum,i,innerEnd,innerPos,innerRadiusEnd,j,oneOverStackWeight,outterPos,pb,pg,pr,r_in_sum,r_out_sum,r_sum,radiusPlus1,rbs,readPos,readPosOffset,ref,results,stackEnd,stackIn,stackOut,stackStart,stackWeight;for(radiusPlus1=radius+1,stackWeight=radiusPlus1*radiusPlus1,oneOverStackWeight=1/stackWeight,firstPixelSumWeight=(stackWeight+radiusPlus1)/2,stackStart=this.stackStart,stackEnd=this.stackEnd,outterPos=0,results=[];outterPos<=outterEnd;){for(r_in_sum=g_in_sum=b_in_sum=0,pr=pixels[outterPos],pg=pixels[outterPos+1],pb=pixels[outterPos+2],r_out_sum=radiusPlus1*pr,g_out_sum=radiusPlus1*pg,b_out_sum=radiusPlus1*pb,r_sum=firstPixelSumWeight*pr,g_sum=firstPixelSumWeight*pg,b_sum=firstPixelSumWeight*pb,stackIn=stackStart,i=j=0,ref=radius;j<=ref;i=j+=1)stackIn.r=pr,stackIn.g=pg,stackIn.b=pb,stackIn=stackIn.next;for(innerEnd=outterPos+innerEndDelta,rbs=radius,innerRadiusEnd=outterPos+radius*innerStep,innerPos=outterPos+innerStep;innerPos<=innerRadiusEnd;)readPos=innerPos,innerPos>innerEnd&&(readPos=innerEnd),pr=pixels[readPos],pg=pixels[readPos+1],pb=pixels[readPos+2],r_in_sum+=stackIn.r=pr,g_in_sum+=stackIn.g=pg,b_in_sum+=stackIn.b=pb,r_sum+=pr*rbs,g_sum+=pg*rbs,b_sum+=pb*rbs,rbs--,stackIn=stackIn.next,innerPos+=innerStep;for(stackOut=stackEnd,readPosOffset=radiusPlus1*innerStep,innerPos=outterPos;innerPos<=innerEnd;)pixels[innerPos]=r_sum*oneOverStackWeight,pixels[innerPos+1]=g_sum*oneOverStackWeight,pixels[innerPos+2]=b_sum*oneOverStackWeight,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,readPos=innerPos+readPosOffset,readPos>innerEnd&&(readPos=innerEnd),pr=pixels[readPos],pg=pixels[readPos+1],pb=pixels[readPos+2],r_in_sum+=stackIn.r=pr,g_in_sum+=stackIn.g=pg,b_in_sum+=stackIn.b=pb,r_sum+=r_in_sum,g_sum+=g_in_sum,b_sum+=b_in_sum,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,stackIn=stackIn.next,stackOut=stackOut.next,innerPos+=innerStep;results.push(outterPos+=outterStep)}return results},StackBlur.prototype.alphaPass=function(radius,pixels,outterStep,outterEnd,innerStep,innerEndDelta){var a_in_sum,a_out_sum,a_sum,firstPixelSumWeight,i,innerEnd,innerPos,innerRadiusEnd,j,oneOverStackWeight,outterPos,pa,radiusPlus1,rbs,readPos,readPosOffset,ref,results,stackEnd,stackIn,stackOut,stackStart,stackWeight;for(radiusPlus1=radius+1,stackWeight=radiusPlus1*radiusPlus1,oneOverStackWeight=1/stackWeight,firstPixelSumWeight=(stackWeight+radiusPlus1)/2,stackStart=this.stackStart,stackEnd=this.stackEnd,outterPos=3,outterEnd+=3,results=[];outterPos<=outterEnd;){for(a_in_sum=0,pa=pixels[outterPos],a_out_sum=radiusPlus1*pa,a_sum=firstPixelSumWeight*pa,stackIn=stackStart,i=j=0,ref=radius;j<=ref;i=j+=1)stackIn.a=pa,stackIn=stackIn.next;for(innerEnd=outterPos+innerEndDelta,rbs=radius,innerRadiusEnd=outterPos+radius*innerStep,innerPos=outterPos+innerStep;innerPos<=innerRadiusEnd;)readPos=innerPos,innerPos>innerEnd&&(readPos=innerEnd),pa=pixels[readPos],a_in_sum+=stackIn.a=pa,a_sum+=pa*rbs,rbs--,stackIn=stackIn.next,innerPos+=innerStep;for(stackOut=stackEnd,readPosOffset=radiusPlus1*innerStep,innerPos=outterPos;innerPos<=innerEnd;)pixels[innerPos]=a_sum*oneOverStackWeight,a_sum-=a_out_sum,a_out_sum-=stackIn.a,readPos=innerPos+readPosOffset,readPos>innerEnd&&(readPos=innerEnd),a_in_sum+=stackIn.a=pixels[readPos],a_sum+=a_in_sum,a_out_sum+=pa=stackOut.a,a_in_sum-=pa,stackIn=stackIn.next,stackOut=stackOut.next,innerPos+=innerStep;results.push(outterPos+=outterStep)}return results},StackBlur.prototype.stackBlurCanvasRGBA=function(pixels,width,height,radius){if(!(radius<=0))return this.createStack(radius),this.rgbaPass(radius,pixels,4,4*(width-1),4*width,(height-1)*width*4),this.rgbaPass(radius,pixels,4*width,(height-1)*width*4,4,4*(width-1))},StackBlur.prototype.stackBlurCanvasAlpha=function(pixels,width,height,radius){if(!(radius<=0))return this.createStack(radius),this.alphaPass(radius,pixels,4,4*(width-1),4*width,(height-1)*width*4),this.alphaPass(radius,pixels,4*width,(height-1)*width*4,4,4*(width-1))},StackBlur.prototype.stackBlurCanvasRGB=function(pixels,width,height,radius){if(!(radius<=0))return this.createStack(radius),this.rgbPass(radius,pixels,4,4*(width-1),4*width,(height-1)*width*4),this.rgbPass(radius,pixels,4*width,(height-1)*width*4,4,4*(width-1))},StackBlur}(Foundation.BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var BatchLoader,Foundation,GoogleFontLoader,WebFont,inspect,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),WebFont=__webpack_require__(149),inspect=Foundation.inspect,log=Foundation.log,BatchLoader=Foundation.BatchLoader,module.exports=GoogleFontLoader=function(superClass){function GoogleFontLoader(options){null==options&&(options={}),this.defaultWeight={UnifrakturCook:700},GoogleFontLoader.__super__.constructor.call(this,function(_this){return function(src){return _this.webFontLoadWithWaiting([src])}}(this))}return extend(GoogleFontLoader,superClass),GoogleFontLoader.singletonClass(),GoogleFontLoader.prototype.googleFamilies=function(fontFamilies){var font,i,len,results,weight;for(results=[],i=0,len=fontFamilies.length;i<len;i++)font=fontFamilies[i],weight=this.defaultWeight[font]||"",results.push(font.split(" ").join("+")+":"+weight+":latin,latin-ext");return results},GoogleFontLoader.prototype.webFontLoad=function(fontFamilies,done){return WebFont.load({google:{families:this.googleFamilies(fontFamilies)},fontactive:function(_this){return function(font){return _this.addAsset(font,font)}}(this),fontinactive:function(_this){return function(font){return _this.addAsset(font,"FAILED TO LOAD")}}(this),inactive:done,active:done})},GoogleFontLoader.prototype.webFontLoadWithWaiting=function(fontFamilies){var font,i,len,wfw;{if(!window.WebFontConfig)return this.webFontLoad(fontFamilies,function(_this){return function(){var waitingList;if(waitingList=window.WebFontWaiting&&Object.keys(window.WebFontWaiting),window.WebFontWaiting=null,window.WebFontConfig=null,waitingList)return _this.webFontLoad(waitingList)}}(this));for(wfw=window.WebFontWaiting||(window.WebFontWaiting={}),i=0,len=fontFamilies.length;i<len;i++)font=fontFamilies[i],wfw[font]=!0}},GoogleFontLoader}(BatchLoader)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){return p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba,p.apply(null,arguments)}function ca(a,b){this.a=a,this.m=b||a,this.c=this.m.document}function t(a,b,c,d){if(b=a.c.createElement(b),c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));return d&&b.appendChild(a.c.createTextNode(d)),b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0],a||(a=document.documentElement),a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}function w(a,b,c){b=b||[],c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}for(b=[],e=0;e<d.length;e+=1){for(f=!1,g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}function z(a){if("string"==typeof a.f)return a.f;var b=a.m.location.protocol;return"about:"==b&&(b=a.a.location.protocol),"https:"==b?"https:":"http:"}function ea(a){return a.m.location.hostname||a.a.location.hostname}function A(a,b,c){function d(){k&&e&&f&&(k(g),k=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,k=c||null;da?(b.onload=function(){e=!0,d()},b.onerror=function(){e=!0,g=Error("Stylesheet failed to load"),d()}):setTimeout(function(){e=!0,d()},0),u(a,"head",b)}function B(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;return f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))},e.appendChild(f),setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5e3),f}return null}function C(){this.a=0,this.c=null}function D(a){return a.a++,function(){a.a--,E(a)}}function F(a,b){a.c=b,E(a)}function E(a){0==a.a&&a.c&&(a.c(),a.c=null)}function G(a){this.a=a||"-"}function H(a,b){this.c=a,this.f=4,this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return I(a)+" "+(a.f+"00")+" 300px "+J(a.c)}function J(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function K(a){return a.a+a.f}function I(a){var b="normal";return"o"===a.a?b="oblique":"i"===a.a&&(b="italic"),b}function ga(a){var b=4,c="n",d=null;return a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10)))),c+b}function ha(a,b){this.c=a,this.f=a.m.document.documentElement,this.h=b,this.a=new G("-"),this.j=!1!==b.events,this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]),L(a,"loading")}function M(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive")),w(a.f,c,d)}L(a,"inactive")}function L(a,b,c){a.j&&a.h[b]&&(c?a.h[b](c.c,K(c)):a.h[b]())}function ja(){this.c={}}function ka(a,b,c){var e,d=[];for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d}function N(a,b){this.c=a,this.f=b,this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function O(a){u(a.c,"body",a.a)}function P(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+J(a.c)+";"+("font-style:"+I(a)+";font-weight:"+(a.f+"00")+";")}function Q(a,b,c,d,e,f){this.g=a,this.j=b,this.a=d,this.c=c,this.f=e||3e3,this.h=f||void 0}function R(a,b,c,d,e,f,g){this.v=a,this.B=b,this.c=c,this.a=d,this.s=g||"BESbswy",this.f={},this.w=e||3e3,this.u=f||null,this.o=this.j=this.h=this.g=null,this.g=new N(this.c,this.s),this.h=new N(this.c,this.s),this.j=new N(this.c,this.s),this.o=new N(this.c,this.s),a=new H(this.a.c+",serif",K(this.a)),a=P(a),this.g.a.style.cssText=a,a=new H(this.a.c+",sans-serif",K(this.a)),a=P(a),this.h.a.style.cssText=a,a=new H("serif",K(this.a)),a=P(a),this.j.a.style.cssText=a,a=new H("sans-serif",K(this.a)),a=P(a),this.o.a.style.cssText=a,O(this.g),O(this.h),O(this.j),O(this.o)}function U(){if(null===T){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);T=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return T}function ma(a,b,c){for(var d in S)if(S.hasOwnProperty(d)&&b===a.f[S[d]]&&c===a.f[S[d]])return!0;return!1}function la(a){var d,b=a.g.a.offsetWidth,c=a.h.a.offsetWidth;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=U()&&ma(a,b,c)),d?q()-a.A>=a.w?U()&&ma(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):na(a):V(a,a.v)}function na(a){setTimeout(p(function(){la(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a),v(this.h.a),v(this.j.a),v(this.o.a),b(this.a)},a),0)}function W(a,b,c){this.c=a,this.a=b,this.f=0,this.o=this.j=!1,this.s=c}function oa(a){0==--a.f&&a.j&&(a.o?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),L(a,"active")):M(a.a))}function pa(a){this.j=a,this.a=new ja,this.h=0,this.f=this.g=!0}function ra(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,k=d||null||{};if(0===c.length&&f)M(b.a);else{b.f+=c.length,f&&(b.j=f);var h,m=[];for(h=0;h<c.length;h++){var l=c[h],n=k[l.c],r=b.a,x=l;r.g&&w(r.f,[r.a.c("wf",x.c,K(x).toString(),"loading")]),L(r,"fontloading",x),r=null,null===X&&(X=!!window.FontFace&&(!(x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(x[1],10))),r=X?new Q(p(b.g,b),p(b.h,b),b.c,l,b.s,n):new R(p(b.g,b),p(b.h,b),b.c,l,b.s,a,n),m.push(r)}for(h=0;h<m.length;h++)m[h].start()}},0)}function qa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);for(a.h=d.length,b=0,c=d.length;b<c;b++)d[b].load(function(b,d,c){ra(a,f,b,d,c)})}function sa(a,b){this.c=a,this.a=b}function ta(a,b,c){var d=z(a.c);return a=(a.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),d+"//"+a+"/"+b+".js"+(c?"?v="+c:"")}function ua(a,b){this.c=a,this.a=b}function va(a,b,c){a?this.c=a:this.c=b+wa,this.a=[],this.f=[],this.g=c||""}function xa(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":"),a.a.push(e.join(f))}}function ya(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));return b=a.c+"?family="+c.join("%7C"),0<a.f.length&&(b+="&subset="+a.f.join(",")),0<a.g.length&&(b+="&text="+encodeURIComponent(a.g)),b}function za(a){this.f=a,this.a=[],this.c={}}function Ea(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g,k=d[1];if(g=[],k)for(var k=k.split(","),h=k.length,m=0;m<h;m++){var l;if(l=k[m],l.match(/^[\w-]+$/)){var n=Da.exec(l.toLowerCase());if(null==n)l="";else{if(l=n[2],l=null==l||""==l?"n":Ca[l],n=n[1],null==n||""==n)n="4";else var r=Ba[n],n=r?r:isNaN(n)?"4":n.substr(0,1);l=[l,n].join("")}}else l="";l&&g.push(l)}0<g.length&&(f=g),3==d.length&&(d=d[2],g=[],d=d?d.split(","):g,0<d.length&&(d=Aa[d[0]])&&(a.c[e]=d))}for(a.c[e]||(d=Aa[e])&&(a.c[e]=d),d=0;d<f.length;d+=1)a.a.push(new H(e,f[d]))}}function Fa(a,b){this.c=a,this.a=b}function Ha(a,b){this.c=a,this.a=b}function Ia(a,b){this.c=a,this.f=b,this.a=[]}var q=Date.now||function(){return+new Date},da=!!window.FontFace;G.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)},Q.prototype.start=function(){var a=this.c.m.document,b=this,c=q(),d=new Promise(function(d,e){function k(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(k,25)},function(){e()})}k()}),e=new Promise(function(a,d){setTimeout(d,b.f)});Promise.race([e,d]).then(function(){b.g(b.a)},function(){b.j(b.a)})};var S={D:"serif",C:"sans-serif"},T=null;R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=q(),la(this)};var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,K(a).toString(),"active")],[b.a.c("wf",a.c,K(a).toString(),"loading"),b.a.c("wf",a.c,K(a).toString(),"inactive")]),L(b,"fontactive",a),this.o=!0,oa(this)},W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,K(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,K(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,K(a).toString(),"inactive")),w(b.f,d,e)}L(b,"fontinactive",a),oa(this)},pa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j),this.g=!1!==a.events,this.f=!1!==a.classes,qa(this,new ha(this.c,a),a)},sa.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var h,c=f["__mti_fntLst"+d](),e=[];if(c)for(var m=0;m<c.length;m++){var l=c[m].fontfamily;void 0!=c[m].fontStyle&&void 0!=c[m].fontWeight?(h=c[m].fontStyle+c[m].fontWeight,e.push(new H(l,h))):e.push(new H(l))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.m;B(this.c,ta(c,d,e),function(e){e?a([]):(f["__MonotypeConfiguration__"+d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])},ua.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new C;for(b=0,c=d.length;b<c;b++)A(this.c,d[b],D(g));var k=[];for(b=0,c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),m=0;m<h.length;m+=1)k.push(new H(d[0],h[m]));else k.push(new H(d[0]));F(g,function(){a(k,f)})};var wa="//fonts.googleapis.com/css",Aa={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},Ba={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Ca={i:"i",italic:"i",n:"n",normal:"n"},Da=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,Ga={Arimo:!0,Cousine:!0,Tinos:!0};Fa.prototype.load=function(a){var b=new C,c=this.c,d=new va(this.a.api,z(c),this.a.text),e=this.a.families;xa(d,e);var f=new za(e);Ea(f),A(c,ya(d),D(b)),F(b,function(){a(f.a,f.c,Ga)})},Ha.prototype.load=function(a){var b=this.a.id,c=this.c.m;b?B(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],k=b[f+1],h=0;h<k.length;h++)e.push(new H(g,k[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(m){}a(e)}},2e3):a([])},Ia.prototype.load=function(a){var b=this.f.id,c=this.c.m,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,k=c.fonts.length;g<k;++g){var h=c.fonts[g];d.a.push(new H(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},B(this.c,z(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new pa(window);Y.a.c.custom=function(a,b){return new ua(b,a)},Y.a.c.fontdeck=function(a,b){return new Ia(b,a)},Y.a.c.monotype=function(a,b){return new sa(b,a)},Y.a.c.typekit=function(a,b){return new Ha(b,a)},Y.a.c.google=function(a,b){return new Fa(b,a)};var Z={load:p(Y.load,Y)};__WEBPACK_AMD_DEFINE_RESULT__=function(){return Z}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){function stackBlurCanvasRGBA(imageData,top_x,top_y,width,height,radius){var x,y,i,p,yp,yi,yw,r_sum,g_sum,b_sum,a_sum,r_out_sum,g_out_sum,b_out_sum,a_out_sum,r_in_sum,g_in_sum,b_in_sum,a_in_sum,pr,pg,pb,pa,rbs,pixels=imageData.data,div=radius+radius+1,widthMinus1=width-1,heightMinus1=height-1,radiusPlus1=radius+1,sumFactor=radiusPlus1*(radiusPlus1+1)/2,stackStart=new BlurStack,stack=stackStart;for(i=1;i<div;i++)if(stack=stack.next=new BlurStack,i==radiusPlus1)var stackEnd=stack;stack.next=stackStart;var stackIn=null,stackOut=null;yw=yi=0;var mul_sum=mul_table[radius],shg_sum=shg_table[radius];for(y=0;y<height;y++){for(r_in_sum=g_in_sum=b_in_sum=a_in_sum=r_sum=g_sum=b_sum=a_sum=0,r_out_sum=radiusPlus1*(pr=pixels[yi]),g_out_sum=radiusPlus1*(pg=pixels[yi+1]),b_out_sum=radiusPlus1*(pb=pixels[yi+2]),a_out_sum=radiusPlus1*(pa=pixels[yi+3]),r_sum+=sumFactor*pr,g_sum+=sumFactor*pg,b_sum+=sumFactor*pb,a_sum+=sumFactor*pa,stack=stackStart,i=0;i<radiusPlus1;i++)stack.r=pr,stack.g=pg,stack.b=pb,stack.a=pa,stack=stack.next;for(i=1;i<radiusPlus1;i++)p=yi+((widthMinus1<i?widthMinus1:i)<<2),r_sum+=(stack.r=pr=pixels[p])*(rbs=radiusPlus1-i),g_sum+=(stack.g=pg=pixels[p+1])*rbs,b_sum+=(stack.b=pb=pixels[p+2])*rbs,a_sum+=(stack.a=pa=pixels[p+3])*rbs,r_in_sum+=pr,g_in_sum+=pg,b_in_sum+=pb,a_in_sum+=pa,stack=stack.next;for(stackIn=stackStart,stackOut=stackEnd,x=0;x<width;x++)pixels[yi+3]=pa=a_sum*mul_sum>>shg_sum,0!=pa?(pa=255/pa,pixels[yi]=(r_sum*mul_sum>>shg_sum)*pa,pixels[yi+1]=(g_sum*mul_sum>>shg_sum)*pa,pixels[yi+2]=(b_sum*mul_sum>>shg_sum)*pa):pixels[yi]=pixels[yi+1]=pixels[yi+2]=0,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,a_sum-=a_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,a_out_sum-=stackIn.a,p=yw+((p=x+radius+1)<widthMinus1?p:widthMinus1)<<2,r_in_sum+=stackIn.r=pixels[p],g_in_sum+=stackIn.g=pixels[p+1],b_in_sum+=stackIn.b=pixels[p+2],a_in_sum+=stackIn.a=pixels[p+3],r_sum+=r_in_sum,g_sum+=g_in_sum,b_sum+=b_in_sum,a_sum+=a_in_sum,stackIn=stackIn.next,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,a_out_sum+=pa=stackOut.a,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,a_in_sum-=pa,stackOut=stackOut.next,yi+=4;yw+=width}for(x=0;x<width;x++){for(g_in_sum=b_in_sum=a_in_sum=r_in_sum=g_sum=b_sum=a_sum=r_sum=0,yi=x<<2,r_out_sum=radiusPlus1*(pr=pixels[yi]),g_out_sum=radiusPlus1*(pg=pixels[yi+1]),b_out_sum=radiusPlus1*(pb=pixels[yi+2]),a_out_sum=radiusPlus1*(pa=pixels[yi+3]),r_sum+=sumFactor*pr,g_sum+=sumFactor*pg,b_sum+=sumFactor*pb,a_sum+=sumFactor*pa,stack=stackStart,i=0;i<radiusPlus1;i++)stack.r=pr,stack.g=pg,stack.b=pb,stack.a=pa,stack=stack.next;for(yp=width,i=1;i<=radius;i++)yi=yp+x<<2,r_sum+=(stack.r=pr=pixels[yi])*(rbs=radiusPlus1-i),g_sum+=(stack.g=pg=pixels[yi+1])*rbs,b_sum+=(stack.b=pb=pixels[yi+2])*rbs,a_sum+=(stack.a=pa=pixels[yi+3])*rbs,r_in_sum+=pr,g_in_sum+=pg,b_in_sum+=pb,a_in_sum+=pa,stack=stack.next,i<heightMinus1&&(yp+=width);for(yi=x,stackIn=stackStart,stackOut=stackEnd,y=0;y<height;y++)p=yi<<2,pixels[p+3]=pa=a_sum*mul_sum>>shg_sum,pa>0?(pa=255/pa,pixels[p]=(r_sum*mul_sum>>shg_sum)*pa,pixels[p+1]=(g_sum*mul_sum>>shg_sum)*pa,pixels[p+2]=(b_sum*mul_sum>>shg_sum)*pa):pixels[p]=pixels[p+1]=pixels[p+2]=0,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,a_sum-=a_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,a_out_sum-=stackIn.a,p=x+((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width<<2,r_sum+=r_in_sum+=stackIn.r=pixels[p],g_sum+=g_in_sum+=stackIn.g=pixels[p+1],b_sum+=b_in_sum+=stackIn.b=pixels[p+2],a_sum+=a_in_sum+=stackIn.a=pixels[p+3],stackIn=stackIn.next,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,a_out_sum+=pa=stackOut.a,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,a_in_sum-=pa,stackOut=stackOut.next,yi+=width}}function stackBlurCanvasRGB(imageData,top_x,top_y,width,height,radius){var x,y,i,p,yp,yi,yw,r_sum,g_sum,b_sum,r_out_sum,g_out_sum,b_out_sum,r_in_sum,g_in_sum,b_in_sum,pr,pg,pb,rbs,pixels=imageData.data,div=radius+radius+1,widthMinus1=width-1,heightMinus1=height-1,radiusPlus1=radius+1,sumFactor=radiusPlus1*(radiusPlus1+1)/2,stackStart=new BlurStack,stack=stackStart;for(i=1;i<div;i++)if(stack=stack.next=new BlurStack,i==radiusPlus1)var stackEnd=stack;stack.next=stackStart;var stackIn=null,stackOut=null;yw=yi=0;var mul_sum=mul_table[radius],shg_sum=shg_table[radius];for(y=0;y<height;y++){for(r_in_sum=g_in_sum=b_in_sum=r_sum=g_sum=b_sum=0,r_out_sum=radiusPlus1*(pr=pixels[yi]),g_out_sum=radiusPlus1*(pg=pixels[yi+1]),
b_out_sum=radiusPlus1*(pb=pixels[yi+2]),r_sum+=sumFactor*pr,g_sum+=sumFactor*pg,b_sum+=sumFactor*pb,stack=stackStart,i=0;i<radiusPlus1;i++)stack.r=pr,stack.g=pg,stack.b=pb,stack=stack.next;for(i=1;i<radiusPlus1;i++)p=yi+((widthMinus1<i?widthMinus1:i)<<2),r_sum+=(stack.r=pr=pixels[p])*(rbs=radiusPlus1-i),g_sum+=(stack.g=pg=pixels[p+1])*rbs,b_sum+=(stack.b=pb=pixels[p+2])*rbs,r_in_sum+=pr,g_in_sum+=pg,b_in_sum+=pb,stack=stack.next;for(stackIn=stackStart,stackOut=stackEnd,x=0;x<width;x++)pixels[yi]=r_sum*mul_sum>>shg_sum,pixels[yi+1]=g_sum*mul_sum>>shg_sum,pixels[yi+2]=b_sum*mul_sum>>shg_sum,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,p=yw+((p=x+radius+1)<widthMinus1?p:widthMinus1)<<2,r_in_sum+=stackIn.r=pixels[p],g_in_sum+=stackIn.g=pixels[p+1],b_in_sum+=stackIn.b=pixels[p+2],r_sum+=r_in_sum,g_sum+=g_in_sum,b_sum+=b_in_sum,stackIn=stackIn.next,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,stackOut=stackOut.next,yi+=4;yw+=width}for(x=0;x<width;x++){for(g_in_sum=b_in_sum=r_in_sum=g_sum=b_sum=r_sum=0,yi=x<<2,r_out_sum=radiusPlus1*(pr=pixels[yi]),g_out_sum=radiusPlus1*(pg=pixels[yi+1]),b_out_sum=radiusPlus1*(pb=pixels[yi+2]),r_sum+=sumFactor*pr,g_sum+=sumFactor*pg,b_sum+=sumFactor*pb,stack=stackStart,i=0;i<radiusPlus1;i++)stack.r=pr,stack.g=pg,stack.b=pb,stack=stack.next;for(yp=width,i=1;i<=radius;i++)yi=yp+x<<2,r_sum+=(stack.r=pr=pixels[yi])*(rbs=radiusPlus1-i),g_sum+=(stack.g=pg=pixels[yi+1])*rbs,b_sum+=(stack.b=pb=pixels[yi+2])*rbs,r_in_sum+=pr,g_in_sum+=pg,b_in_sum+=pb,stack=stack.next,i<heightMinus1&&(yp+=width);for(yi=x,stackIn=stackStart,stackOut=stackEnd,y=0;y<height;y++)p=yi<<2,pixels[p]=r_sum*mul_sum>>shg_sum,pixels[p+1]=g_sum*mul_sum>>shg_sum,pixels[p+2]=b_sum*mul_sum>>shg_sum,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,p=x+((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width<<2,r_sum+=r_in_sum+=stackIn.r=pixels[p],g_sum+=g_in_sum+=stackIn.g=pixels[p+1],b_sum+=b_in_sum+=stackIn.b=pixels[p+2],stackIn=stackIn.next,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,stackOut=stackOut.next,yi+=width}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return{stackBlurCanvasRGBA:stackBlurCanvasRGBA,stackBlurCanvasRGB:stackBlurCanvasRGB}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125),__webpack_require__(139),__webpack_require__(150),__webpack_require__(143)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic,Canvas,OrigStackBlur){var BlurStack,color,inspect,matrix,mulTable,nextTick,point,rect,shgTable;return point=Atomic.point,matrix=Atomic.matrix,rect=Atomic.rect,color=Atomic.color,inspect=Foundation.Inspect.inspect,nextTick=Foundation.nextTick,mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],BlurStack=function(){function BlurStack(){this.r=this.g=this.b=this.a=0,this.next=null}return BlurStack}(),Canvas.StackBlurOriginal=function(superClass){function StackBlurOriginal(){return StackBlurOriginal.__super__.constructor.apply(this,arguments)}return extend(StackBlurOriginal,superClass),StackBlurOriginal.blur=function(bitmap,radius){return(new Canvas.StackBlurOriginal).blur(bitmap,radius)},StackBlurOriginal.blurRGB=function(bitmap,radius){return(new Canvas.StackBlurOriginal).blurRGB(bitmap,radius)},StackBlurOriginal.prototype.blur=function(bitmap,radius){var imageData,pixels;return imageData=bitmap.getImageData(),pixels=imageData.data,OrigStackBlur.stackBlurCanvasRGBA(imageData,0,0,bitmap.size.w,bitmap.size.h,radius),bitmap.putImageData(imageData)},StackBlurOriginal.prototype.blurRGB=function(bitmap,radius){var imageData,pixels;return imageData=bitmap.getImageData(),pixels=imageData.data,OrigStackBlur.stackBlurCanvasRGB(imageData,0,0,bitmap.size.w,bitmap.size.h,radius),bitmap.putImageData(imageData)},StackBlurOriginal.prototype.stackBlurCanvasRGBA=function(pixels,top_x,top_y,width,height,radius){var a_in_sum,a_out_sum,a_sum,b_in_sum,b_out_sum,b_sum,div,g_in_sum,g_out_sum,g_sum,heightMinus1,i,j,k,l,m,mul_sum,n,o,p,pa,pb,pg,pr,q,r,r_in_sum,r_out_sum,r_sum,radiusPlus1,rbs,ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,ref8,results,s,shg_sum,stack,stackEnd,stackIn,stackOut,stackStart,sumFactor,w4,widthMinus1,x,y,yi,yp,yw;for(div=radius+radius+1,w4=width<<2,widthMinus1=width-1,heightMinus1=height-1,radiusPlus1=radius+1,sumFactor=radiusPlus1*(radiusPlus1+1)/2,stackStart=new BlurStack,stack=stackStart,i=j=1,ref=div-1;j<=ref;i=j+=1)stack=stack.next=new BlurStack,i===radiusPlus1&&(stackEnd=stack);for(stack.next=stackStart,yw=yi=0,mul_sum=mulTable[radius],shg_sum=shgTable[radius],y=k=0,ref1=heightMinus1;k<=ref1;y=k+=1){for(r_in_sum=g_in_sum=b_in_sum=a_in_sum=r_sum=g_sum=b_sum=a_sum=0,r_out_sum=radiusPlus1*(pr=pixels[yi]),g_out_sum=radiusPlus1*(pg=pixels[yi+1]),b_out_sum=radiusPlus1*(pb=pixels[yi+2]),a_out_sum=radiusPlus1*(pa=pixels[yi+3]),r_sum+=sumFactor*pr,g_sum+=sumFactor*pg,b_sum+=sumFactor*pb,a_sum+=sumFactor*pa,stack=stackStart,i=l=0,ref2=radius;l<=ref2;i=l+=1)stack.r=pr,stack.g=pg,stack.b=pb,stack.a=pa,stack=stack.next;for(i=m=1,ref3=radius;m<=ref3;i=m+=1)p=yi+((widthMinus1<i?widthMinus1:i)<<2),r_sum+=(stack.r=pr=pixels[p])*(rbs=radiusPlus1-i),g_sum+=(stack.g=pg=pixels[p+1])*rbs,b_sum+=(stack.b=pb=pixels[p+2])*rbs,a_sum+=(stack.a=pa=pixels[p+3])*rbs,r_in_sum+=pr,g_in_sum+=pg,b_in_sum+=pb,a_in_sum+=pa,stack=stack.next;for(stackIn=stackStart,stackOut=stackEnd,x=n=0,ref4=widthMinus1;n<=ref4;x=n+=1)pixels[yi+3]=pa=a_sum*mul_sum>>shg_sum,0!==pa?(pa=255/pa,pixels[yi]=(r_sum*mul_sum>>shg_sum)*pa,pixels[yi+1]=(g_sum*mul_sum>>shg_sum)*pa,pixels[yi+2]=(b_sum*mul_sum>>shg_sum)*pa):pixels[yi]=pixels[yi+1]=pixels[yi+2]=0,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,a_sum-=a_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,a_out_sum-=stackIn.a,p=yw+((p=x+radius+1)<widthMinus1?p:widthMinus1)<<2,r_in_sum+=stackIn.r=pixels[p],g_in_sum+=stackIn.g=pixels[p+1],b_in_sum+=stackIn.b=pixels[p+2],a_in_sum+=stackIn.a=pixels[p+3],r_sum+=r_in_sum,g_sum+=g_in_sum,b_sum+=b_in_sum,a_sum+=a_in_sum,stackIn=stackIn.next,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,a_out_sum+=pa=stackOut.a,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,a_in_sum-=pa,stackOut=stackOut.next,yi+=4;yw+=width}for(results=[],x=o=0,ref5=widthMinus1;o<=ref5;x=o+=1){for(g_in_sum=b_in_sum=a_in_sum=r_in_sum=g_sum=b_sum=a_sum=r_sum=0,yi=x<<2,r_out_sum=radiusPlus1*(pr=pixels[yi]),g_out_sum=radiusPlus1*(pg=pixels[yi+1]),b_out_sum=radiusPlus1*(pb=pixels[yi+2]),a_out_sum=radiusPlus1*(pa=pixels[yi+3]),r_sum+=sumFactor*pr,g_sum+=sumFactor*pg,b_sum+=sumFactor*pb,a_sum+=sumFactor*pa,stack=stackStart,i=q=0,ref6=radius;q<=ref6;i=q+=1)stack.r=pr,stack.g=pg,stack.b=pb,stack.a=pa,stack=stack.next;for(yp=width,i=r=1,ref7=radius;r<=ref7;i=r+=1)yi=yp+x<<2,r_sum+=(stack.r=pr=pixels[yi])*(rbs=radiusPlus1-i),g_sum+=(stack.g=pg=pixels[yi+1])*rbs,b_sum+=(stack.b=pb=pixels[yi+2])*rbs,a_sum+=(stack.a=pa=pixels[yi+3])*rbs,r_in_sum+=pr,g_in_sum+=pg,b_in_sum+=pb,a_in_sum+=pa,stack=stack.next,i<heightMinus1&&(yp+=width);for(yi=x,stackIn=stackStart,stackOut=stackEnd,y=s=0,ref8=heightMinus1;s<=ref8;y=s+=1)p=yi<<2,pixels[p+3]=pa=a_sum*mul_sum>>shg_sum,pa>0?(pa=255/pa,pixels[p]=(r_sum*mul_sum>>shg_sum)*pa,pixels[p+1]=(g_sum*mul_sum>>shg_sum)*pa,pixels[p+2]=(b_sum*mul_sum>>shg_sum)*pa):pixels[p]=pixels[p+1]=pixels[p+2]=0,r_sum-=r_out_sum,g_sum-=g_out_sum,b_sum-=b_out_sum,a_sum-=a_out_sum,r_out_sum-=stackIn.r,g_out_sum-=stackIn.g,b_out_sum-=stackIn.b,a_out_sum-=stackIn.a,p=x+((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width<<2,r_sum+=r_in_sum+=stackIn.r=pixels[p],g_sum+=g_in_sum+=stackIn.g=pixels[p+1],b_sum+=b_in_sum+=stackIn.b=pixels[p+2],a_sum+=a_in_sum+=stackIn.a=pixels[p+3],stackIn=stackIn.next,r_out_sum+=pr=stackOut.r,g_out_sum+=pg=stackOut.g,b_out_sum+=pb=stackOut.b,a_out_sum+=pa=stackOut.a,r_in_sum-=pr,g_in_sum-=pg,b_in_sum-=pb,a_in_sum-=pa,stackOut=stackOut.next,yi+=width;results.push(1)}return results},StackBlurOriginal}(Foundation.BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(153)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(154).includeInNamespace(__webpack_require__(156)).addModules({FullScreenApp:__webpack_require__(250)}),__webpack_require__(205),__webpack_require__(157),__webpack_require__(266),__webpack_require__(212),__webpack_require__(163),__webpack_require__(269),__webpack_require__(245),__webpack_require__(187)},function(module,exports,__webpack_require__){var Art,Engine,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(155),module.exports=Art.Engine||Art.addNamespace("Engine",Engine=function(superClass){function Engine(){return Engine.__super__.constructor.apply(this,arguments)}return extend(Engine,superClass),Engine}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var _package;module.exports=[__webpack_require__(157),__webpack_require__(212),__webpack_require__(205),__webpack_require__(245),{"package":_package=__webpack_require__(249),version:_package.version}]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(158).includeInNamespace(__webpack_require__(159)).addModules({CanvasElement:__webpack_require__(161),DrawCacheManager:__webpack_require__(203),DrawEpoch:__webpack_require__(202),ElementBase:__webpack_require__(192),ElementFactory:__webpack_require__(160),Element:__webpack_require__(184),EngineStat:__webpack_require__(210),EpochedObject:__webpack_require__(200),EventedEpochedObject:__webpack_require__(193),GlobalEpochCycle:__webpack_require__(201),IdleEpoch:__webpack_require__(204),StateEpoch:__webpack_require__(194)}),__webpack_require__(211)},function(module,exports,__webpack_require__){var Core,Engine,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.Core||Engine.addNamespace("Core",Core=function(superClass){function Core(){return Core.__super__.constructor.apply(this,arguments)}return extend(Core,superClass),Core}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports={newElement:__webpack_require__(160).newElement}},function(module,exports,__webpack_require__){var BaseObject,ElementFactory,Foundation,inspect,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),BaseObject=Foundation.BaseObject,timeout=Foundation.timeout,inspect=Foundation.inspect,module.exports=ElementFactory=function(superClass){function ElementFactory(){ElementFactory.__super__.constructor.apply(this,arguments),this._elementClassesByName={}}return extend(ElementFactory,superClass),ElementFactory.singletonClass(),ElementFactory.newElement=function(elementClassName,props,children){return ElementFactory.singleton.newElement(elementClassName,props,children)},ElementFactory.prototype.register=function(klass){var name;return name=klass.name,this._elementClassesByName[name]?timeout(100,function(_this){return function(){return console.warn("ElementFactory: element with class-name "+name+" already exists. ClassPaths: Existing: "+_this._elementClassesByName[name].namespacePath+", Adding: "+klass.namespacePath)}}(this)):this._elementClassesByName[name]=klass},ElementFactory.prototype.classForElement=function(elementClassName){return this._elementClassesByName[elementClassName]},ElementFactory.prototype.newElement=function(elementClassName,props,children){var klass;if(klass=this._elementClassesByName[elementClassName],!klass)throw new Error("ElementFactor: class not found for "+inspect(elementClassName)+" (props: "+inspect(props)+")");return new this._elementClassesByName[elementClassName](props,children)},ElementFactory}(BaseObject)},function(module,exports,__webpack_require__){var ArtEngineEvents,Atomic,Browser,Canvas,CanvasElement,DrawEpoch,Element,EngineStat,Foundation,GlobalEpochCycle,HtmlCanvas,KeyEvent,Matrix,Point,PointerEvent,PointerEventManager,Rectangle,createWithPostCreate,currentSecond,domElementOffset,drawEpoch,durationString,first,getDevicePixelRatio,globalEpochCycle,inspect,isMobileBrowser,isPlainObject,log,matrix,merge,nextTick,objectDiff,point,rect,ref,select,timeStampToPerformanceSecond,timeout,wordsArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__webpack_require__(162),Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),ArtEngineEvents=__webpack_require__(163),Element=__webpack_require__(184),GlobalEpochCycle=__webpack_require__(201),DrawEpoch=__webpack_require__(202),EngineStat=__webpack_require__(210),log=Foundation.log,inspect=Foundation.inspect,nextTick=Foundation.nextTick,currentSecond=Foundation.currentSecond,timeout=Foundation.timeout,durationString=Foundation.durationString,timeStampToPerformanceSecond=Foundation.timeStampToPerformanceSecond,first=Foundation.first,Browser=Foundation.Browser,createWithPostCreate=Foundation.createWithPostCreate,wordsArray=Foundation.wordsArray,select=Foundation.select,merge=Foundation.merge,objectDiff=Foundation.objectDiff,isPlainObject=Foundation.isPlainObject,isMobileBrowser=Browser.isMobileBrowser,HtmlCanvas=Browser.DomElementFactories.Canvas,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,ref=Browser.Dom,getDevicePixelRatio=ref.getDevicePixelRatio,domElementOffset=ref.domElementOffset,PointerEventManager=ArtEngineEvents.PointerEventManager,PointerEvent=ArtEngineEvents.PointerEvent,KeyEvent=ArtEngineEvents.KeyEvent,globalEpochCycle=GlobalEpochCycle.globalEpochCycle,drawEpoch=DrawEpoch.drawEpoch,module.exports=createWithPostCreate(CanvasElement=function(superClass){function CanvasElement(options){null==options&&(options={}),CanvasElement.__super__.constructor.apply(this,arguments),this.canvasElement=this,this._focusedElement=null,this._wasFocusedElement=null,this._devicePixelsPerPoint=1,this._domEventListeners=[],this._drawEpochPreprocessing=[],this._drawEpochQueued=!1,options.disableRetina||(this.retinaSupport=!0),this._attach(this._getOrCreateCanvasElement(options)),this.engineStat=new EngineStat,this.pointerEventManager=new PointerEventManager({canvasElement:this}),self.canvasElement||(self.canvasElement=this)}return extend(CanvasElement,superClass),CanvasElement.classGetter({devicePixelsPerPoint:function(){return getDevicePixelRatio()}}),CanvasElement.prototype._updateRegistryFromPendingState=function(){return null},CanvasElement.prototype._getOrCreateCanvasElement=function(arg){var canvas,canvasId,noHtmlCanvasElement,parentHtmlElement;if(canvas=arg.canvas,canvasId=arg.canvasId,parentHtmlElement=arg.parentHtmlElement,noHtmlCanvasElement=arg.noHtmlCanvasElement,!noHtmlCanvasElement)return canvas||document.getElementById(canvasId)||this._createCanvasElement(parentHtmlElement)},CanvasElement.prototype._createCanvasElement=function(parentHtmlElement){return parentHtmlElement||(parentHtmlElement=document.getElementById("artDomConsoleArea")||document.body),parentHtmlElement.appendChild(this._createdHtmlCanvasElement=HtmlCanvas({style:merge(this.pendingStyle,{position:"absolute",outline:"none",top:"0",left:"0"}),id:"artCanvas"}))},CanvasElement.concreteProperty({style:{"default":{},validate:function(v){return isPlainObject(v)},postSetter:function(newValue,oldValue,rawNewValue){var remove,update;return update=function(_this){return function(key,newValue){return _this._canvas.style[key]=newValue}}(this),remove=function(_this){return function(key){return _this._canvas.style[key]=null}}(this),this._canvas&&objectDiff(newValue,oldValue,update,remove,update)}}}),CanvasElement.virtualProperty({parentSizeForChildren:function(pending){return this.getParentSize(pending)},parentSize:function(pending){var ref1,ref2;return this._canvas?point((null!=(ref1=this._canvas.parentElement)?ref1.clientWidth:void 0)||100,(null!=(ref2=this._canvas.parentElement)?ref2.clientHeight:void 0)||100):point(100)}}),CanvasElement.prototype._domListener=function(target,type,listener){return target.addEventListener(type,listener),this._domEventListeners.push({target:target,type:type,listener:listener})},CanvasElement.prototype.detach=function(){var ref1;return globalEpochCycle.detachCanvasElement(this),this._createdHtmlCanvasElement&&(log("CanvasElement#detach: removing createdHtmlCanvasElement..."),null!=(ref1=this._createdHtmlCanvasElement.parentElement)&&ref1.removeChild(this._createdHtmlCanvasElement),this._createdHtmlCanvasElement=null,this._canvas=null,log("CanvasElement#detach: removed createdHtmlCanvasElement.")),this._unregister(),this._detachDomEventListeners()},CanvasElement.prototype._detachDomEventListeners=function(){var i,len,listener,ref1;if(this._eventListenersAttached){for(this._eventListenersAttached=!1,this._detachResizeListener(),ref1=this._domEventListeners,i=0,len=ref1.length;i<len;i++)listener=ref1[i],listener.target.removeEventListener(listener.type,listener.listener);return this._domEventListeners=[]}},CanvasElement.prototype.isFocused=function(el){return(!this._canvas||document.hasFocus()&&document.activeElement===this._canvas)&&this.pointerEventManager.isFocused(el)},CanvasElement.prototype._blur=function(){return this._focusedElement=null},CanvasElement.prototype.focusCanvas=function(){var ref1;return null!=(ref1=this._canvas)?ref1.focus():void 0},CanvasElement.prototype.blur=function(){var ref1;return null!=(ref1=this._canvas)&&ref1.blur(),this._blur()},CanvasElement.prototype.focusElement=function(el){if(el&&el!==this._focusedElement)return this._focusedElement=this._wasFocusedElement=el,this.pointerEventManager.focus(null,el)},CanvasElement.prototype._restoreFocus=function(){return(this._wasFocusedElement||this)._focus()},CanvasElement.prototype.enableFileDrop=function(){return window.FileReader?(this._domListener(window,"dragover",function(_this){return function(e){return _this.routeFileDropEvent(e,"dragOver")}}(this)),this._domListener(window,"dragenter",function(_this){return function(e){return _this.routeFileDropEvent(e,"dragEnter")}}(this)),this._domListener(window,"dragleave",function(_this){return function(e){return _this.routeFileDropEvent(e,"dragLeave")}}(this)),this._domListener(window,"drop",function(_this){return function(e){return _this.routeFileDropEvent(e,"drop")}}(this)),this.log(this.className+"#enableFileDrop enabled"),!0):(this.log(this.className+"#enableFileDrop failed - browser not supported"),!1)},CanvasElement.prototype.routeFileDropEvent=function(e,type){return"Files"!==e.dataTransfer.types[0]||(e.preventDefault(),this.pointerEventManager.fileDropEvent(type,{locations:[this._domEventLocation(e)],files:e.dataTransfer.files}),!1)},CanvasElement.prototype._needsRedrawing=function(descendant){return CanvasElement.__super__._needsRedrawing.apply(this,arguments),this.queueDrawEpoch()},CanvasElement.prototype._releaseAllCacheBitmaps=function(){},CanvasElement.prototype.queueDrawEpoch=function(){if(!this._drawEpochQueued)return this._drawEpochQueued=!0,drawEpoch.queueItem(function(_this){return function(){return _this.processEpoch()}}(this))},CanvasElement.prototype.queueDrawEpochPreprocessor=function(f){return this._drawEpochPreprocessing.push(f),this.queueDrawEpoch()},CanvasElement.prototype.processEpoch=function(){var f,i,len,pp;if(this._drawEpochQueued=!1,this._drawEpochPreprocessing.length>0)for(pp=this._drawEpochPreprocessing,this._drawEpochPreprocessing=[],i=0,len=pp.length;i<len;i++)(f=pp[i])();return this.draw()},CanvasElement.setter({cssCursor:function(cursor){var ref1;if(cursor!==this._cssCursor)return null!=(ref1=this._canvas)&&(ref1.style.cursor=cursor),this._cssCursor=cursor}}),CanvasElement.getter({htmlCanvasElement:function(){return this._canvas},numActivePointers:function(){return this.pointerEventManager.getNumActivePointers()},cacheable:function(){return!1},canvasElement:function(){return this},cssCursor:function(){return this._cssCursor},windowScrollOffset:function(){return point(window.scrollX,window.scrollY)},canvasInnerSize:function(){return point(this._fullPageWidth?window.innerWidth:this._canvas.clientWidth,this._fullPageHeight?window.innerHeight:this._canvas.clientHeight)}}),CanvasElement.prototype._attach=function(canvas){if(globalEpochCycle.attachCanvasElement(this),this.onNextReady(function(_this){return function(){return _this._register()}}(this)),this._canvas=canvas,this._retinaSetup(),canvas)return this._updateCanvasGeometry(),this._attachDomEventListeners()},CanvasElement.prototype._retinaSetup=function(){return this._devicePixelsPerPoint=this.retinaSupport?getDevicePixelRatio():1},CanvasElement.prototype._sizeChanged=function(newSize,oldSize){return CanvasElement.__super__._sizeChanged.apply(this,arguments),this._pointSize=newSize,this._canvas.style.width=newSize.x+"px",this._canvas.style.height=newSize.y+"px",this._pixelSize=this._pointSize.mul(this._devicePixelsPerPoint),this._canvas.setAttribute("width",this._pixelSize.x),this._canvas.setAttribute("height",this._pixelSize.y),this._updateCanvasToDocumentMatricies(),this._bitmapFactory=this.canvasBitmap=new Canvas.Bitmap(this._canvas),this.queueDrawEpoch()},CanvasElement.prototype._setElementToParentMatrixFromLayoutXY=function(x,y){var e2p,ref1,ref2;if(!this._locationLayoutDisabled)return e2p=this._getElementToParentMatrixForXY(!0,x,y,1),null!=(ref1=this._canvas)&&(ref1.style.left=e2p.locationX+"px"),null!=(ref2=this._canvas)&&(ref2.style.top=e2p.locationY+"px"),e2p=this._getElementToParentMatrixForXY(!0,x,y).withLocation(0),this._pendingState._elementToParentMatrix.eq(e2p)?void 0:(this._pendingState._elementToParentMatrix=e2p,this._elementChanged())},CanvasElement.prototype._updateCanvasGeometry=function(){return this._updateCanvasToDocumentMatricies(),this._layoutPropertyChanged(),this._elementChanged()},CanvasElement.prototype._updateCanvasToDocumentMatricies=function(){var documentOffset,left,ref1,top;if(ref1=domElementOffset(this._canvas),left=ref1.left,top=ref1.top,documentOffset=point(left,top),!documentOffset.eq(this._canvasDocumentOffset))return this._canvasDocumentOffset=documentOffset,this._elementToDocumentMatrix=Matrix.scale(1/this._devicePixelsPerPoint).translateXY(left,top),this._documentToElementMatrix=Matrix.translateXY(-left,-top).scale(this._devicePixelsPerPoint),this._parentToElementMatrix=null,this.scale=this._devicePixelsPerPoint,this.queueEvent("documentMatriciesChanged")},CanvasElement.prototype._domEventLocation=function(domEvent){var windowScrollOffset,x,y;return windowScrollOffset=this.getWindowScrollOffset(),x=(domEvent.clientX+windowScrollOffset.x-this._canvasDocumentOffset.x)*this._devicePixelsPerPoint,y=(domEvent.clientY+windowScrollOffset.y-this._canvasDocumentOffset.y)*this._devicePixelsPerPoint,new Point(x,y)},CanvasElement.prototype._detachResizeListener=function(){return this._canvas.parentElement&&removeResizeListener(this._canvas.parentElement,this._resizeListener)},CanvasElement.prototype._attachResizeListener=function(){return this._domListener(window,"resize",function(_this){return function(domEvent){return _this._updateCanvasToDocumentMatricies()}}(this)),this._canvas.parentElement&&addResizeListener(this._canvas.parentElement,this._resizeListener=function(_this){return function(){return _this._updateCanvasGeometry(),globalEpochCycle.processEpoch()}}(this))},CanvasElement.prototype._attachBlurFocusListeners=function(){return this._domListener(this._canvas,"blur",function(_this){return function(domEvent){return _this._blur()}}(this)),this._domListener(this._canvas,"focus",function(_this){return function(domEvent){return _this._restoreFocus()}}(this))},CanvasElement.prototype._attachPointerMoveListeners=function(){return this._domListener(this._canvas,"mousemove",function(_this){return function(domEvent){if(0===_this.numActivePointers)return _this.mouseMove(_this._domEventLocation(domEvent,timeStampToPerformanceSecond(domEvent.timeStamp)))}}(this)),this._domListener(window,"mousemove",function(_this){return function(domEvent){if(_this.numActivePointers>0)return _this.mouseMove(_this._domEventLocation(domEvent),timeStampToPerformanceSecond(domEvent.timeStamp))}}(this))},CanvasElement.getter({numActivePointers:function(){return this.pointerEventManager.numActivePointers},activePointers:function(){return this.pointerEventManager.activePointers}}),CanvasElement.prototype.mouseDown=function(location,timeStampInPerformanceSeconds){return this.pointerEventManager.mouseMove(location,timeStampInPerformanceSeconds),this.pointerEventManager.mouseDown(location,timeStampInPerformanceSeconds)},CanvasElement.prototype.mouseMove=function(location,timeStampInPerformanceSeconds){return this.pointerEventManager.mouseMove(location,timeStampInPerformanceSeconds)},CanvasElement.prototype.mouseUp=function(location,timeStampInPerformanceSeconds){return this.pointerEventManager.mouseMove(location,timeStampInPerformanceSeconds),this.pointerEventManager.mouseUp(timeStampInPerformanceSeconds)},CanvasElement.prototype.mouseWheel=function(location,timeStampInPerformanceSeconds,props){return this.pointerEventManager.mouseWheel(location,timeStampInPerformanceSeconds,props)},CanvasElement.prototype.touchDown=function(id,location,timeStampInPerformanceSeconds){return this.pointerEventManager.pointerDown(id,location,timeStampInPerformanceSeconds)},CanvasElement.prototype.touchMove=function(id,location,timeStampInPerformanceSeconds){return this.pointerEventManager.pointerMove(id,location,timeStampInPerformanceSeconds)},CanvasElement.prototype.touchUp=function(id,location,timeStampInPerformanceSeconds){return this.pointerEventManager.pointerMove(id,location,timeStampInPerformanceSeconds),this.pointerEventManager.pointerUp(id,timeStampInPerformanceSeconds)},CanvasElement.prototype.touchCancel=function(id,timeStampInPerformanceSeconds){return this.pointerEventManager.pointerCancel(id,timeStampInPerformanceSeconds)},CanvasElement.prototype._focus=function(){return this._canvas.focus(),this.focusElement(this._focusedElement=this._wasFocusedElement)},CanvasElement.prototype.capturePointerEvents=function(element){return this.pointerEventManager.capturePointerEvents(element)},CanvasElement.prototype.pointerEventsCapturedBy=function(element){
return this.pointerEventManager.pointerEventsCapturedBy(element)},CanvasElement.prototype._attachPointerButtonListeners=function(){return this._domListener(this._canvas,"mouseover",function(_this){return function(domEvent){return _this._updateCanvasToDocumentMatricies()}}(this)),this._domListener(this._canvas,"mousedown",function(_this){return function(domEvent){if(_this._updateCanvasToDocumentMatricies(),_this._restoreFocus(),0===domEvent.button)return domEvent.preventDefault(),_this.mouseDown(_this._domEventLocation(domEvent),timeStampToPerformanceSecond(domEvent.timeStamp))}}(this)),this._domListener(window,"mouseup",function(_this){return function(domEvent){if(0===domEvent.button&&_this.activePointers.mousePointer)return domEvent.preventDefault(),_this.mouseUp(_this._domEventLocation(domEvent),timeStampToPerformanceSecond(domEvent.timeStamp))}}(this))},CanvasElement.prototype._attachPointerWheelListeners=function(){return this._domListener(this._canvas,"wheel",function(_this){return function(domEvent){return domEvent.preventDefault(),_this.mouseWheel(_this._domEventLocation(domEvent),timeStampToPerformanceSecond(domEvent.timeStamp),merge({deltaMode:function(){switch(domEvent.deltaMode){case 0:return"pixel";case 1:return"line";case 2:return"page"}}()},select(domEvent,"deltaX","deltaY","deltaZ")))}}(this))},CanvasElement.prototype._attachPointerTouchListeners=function(){return this._domListener(this._canvas,"touchstart",function(_this){return function(e){var changedTouch,i,len,ref1,results;for(_this._updateCanvasToDocumentMatricies(),e.preventDefault(),_this._restoreFocus(),ref1=e.changedTouches,results=[],i=0,len=ref1.length;i<len;i++)changedTouch=ref1[i],results.push(_this.touchDown(changedTouch.identifier,_this._domEventLocation(changedTouch),timeStampToPerformanceSecond(e.timeStamp)));return results}}(this)),this._domListener(this._canvas,"touchmove",function(_this){return function(e){var changedTouch,i,len,ref1,results;for(e.preventDefault(),ref1=e.changedTouches,results=[],i=0,len=ref1.length;i<len;i++)changedTouch=ref1[i],results.push(_this.pointerEventManager.pointerMove(changedTouch.identifier,_this._domEventLocation(changedTouch),timeStampToPerformanceSecond(e.timeStamp)));return results}}(this)),this._domListener(this._canvas,"touchend",function(_this){return function(e){var changedTouch,i,len,ref1,results;for(e.preventDefault(),ref1=e.changedTouches,results=[],i=0,len=ref1.length;i<len;i++)changedTouch=ref1[i],results.push(_this.touchUp(changedTouch.identifier,_this._domEventLocation(changedTouch),timeStampToPerformanceSecond(e.timeStamp)));return results}}(this)),this._domListener(this._canvas,"touchcancel",function(_this){return function(e){var changedTouch,i,len,ref1,results;for(e.preventDefault(),ref1=e.changedTouches,results=[],i=0,len=ref1.length;i<len;i++)changedTouch=ref1[i],results.push(_this.touchCancel(changedTouch.identifier,timeStampToPerformanceSecond(e.timeStamp)));return results}}(this))},CanvasElement.prototype.queueKeyEvents=function(type,keyboardEvent){return this.pointerEventManager.queueKeyEvents(type,keyboardEvent)},CanvasElement.prototype.keyDownEvent=function(keyboardEvent){return this.queueKeyEvents("keyDown",keyboardEvent),this.queueKeyEvents("keyPress",keyboardEvent)},CanvasElement.prototype.keyUpEvent=function(keyboardEvent){return this.queueKeyEvents("keyUp",keyboardEvent)},CanvasElement.prototype._attachKeypressListeners=function(){return this._domListener(this._canvas,"keydown",function(_this){return function(keyboardEvent){if(_this.keyDownEvent(keyboardEvent),"Backspace"===keyboardEvent.key)return keyboardEvent.preventDefault()}}(this)),this._domListener(this._canvas,"keyup",function(_this){return function(keyboardEvent){return _this.keyUpEvent(keyboardEvent)}}(this))},CanvasElement.prototype._enableHtmlFocusOnCanvas=function(){if(!isMobileBrowser())return this._canvas.tabIndex="-1",this._canvas.contentEditable=!0},CanvasElement.prototype._attachDomEventListeners=function(){if(!this._eventListenersAttached)return this._eventListenersAttached=!0,this._enableHtmlFocusOnCanvas(),this._attachBlurFocusListeners(),this._attachPointerMoveListeners(),this._attachPointerTouchListeners(),this._attachPointerButtonListeners(),this._attachPointerWheelListeners(),this._attachResizeListener(),this._attachKeypressListeners()},CanvasElement.prototype.draw=function(){var frameEndTime,frameStartTime;return Element.resetStats(),frameStartTime=currentSecond(),this.firstFrameTime||(this.firstFrameTime=frameStartTime),this.lastFrameTime&&(this.engineStat.add("fps",1/(frameStartTime-this.lastFrameTime)),this.engineStat.add("frameTimeMS",1e3*(frameStartTime-this.lastFrameTime))),this.lastFrameTime=frameStartTime,this.canvasBitmap&&CanvasElement.__super__.draw.call(this,this.canvasBitmap,this.elementToParentMatrix),frameEndTime=currentSecond(),this.engineStat.add("drawTimeMS",1e3*(frameEndTime-frameStartTime)|0)},CanvasElement.prototype._showDrawStats=function(){var numSamples;return numSamples=this.engineStat.length("drawTimeMS"),timeout(1e3,function(_this){return function(){var totalDrawDuration;if(numSamples===_this.engineStat.length("drawTimeMS"))return totalDrawDuration=frameEndTime-_this.firstFrameTime,_this.engineStat.log(),_this.engineStat.reset(),_this.log({cache:{count:Element._activeCacheCount,size:(Element._activeCacheByteSize/1048576).toFixed(1)+"mb"}}),_this.firstFrameTime=null,_this.frameCount=0,_this.lastFrameTime=null}}(this))},CanvasElement}(Element))},function(module,exports){!function(){function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth,contract.scrollTop=contract.scrollHeight,expandChild.style.width=expand.offsetWidth+1+"px",expandChild.style.height=expand.offsetHeight+1+"px",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight}function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height}function scrollListener(e){var element=this;resetTriggers(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){checkTriggers(element)&&(element.__resizeLast__.width=element.offsetWidth,element.__resizeLast__.height=element.offsetHeight,element.__resizeListeners__.forEach(function(fn){fn.call(element,e)}))})}function createStyles(){if(!stylesCreated){var css=(animationKeyframes?animationKeyframes:"")+".resize-triggers { "+(animationStyle?animationStyle:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),stylesCreated=!0}}var attachEvent=document.attachEvent,stylesCreated=!1;if(!attachEvent){var requestFrame=function(){var raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return window.setTimeout(fn,20)};return function(fn){return raf(fn)}}(),cancelFrame=function(){var cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(id){return cancel(id)}}(),animation=!1,animationstring="animation",keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),pfx="",elm=document.createElement("fakeelement");if(void 0!==elm.style.animationName&&(animation=!0),animation===!1)for(var i=0;i<domPrefixes.length;i++)if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){pfx=domPrefixes[i],animationstring=pfx+"Animation",keyframeprefix="-"+pfx.toLowerCase()+"-",animationstartevent=startEvents[i],animation=!0;break}var animationName="resizeanim",animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ",animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}window.addResizeListener=function(element,fn){attachEvent?element.attachEvent("onresize",fn):(element.__resizeTriggers__||("static"==getComputedStyle(element).position&&(element.style.position="relative"),createStyles(),element.__resizeLast__={},element.__resizeListeners__=[],(element.__resizeTriggers__=document.createElement("div")).className="resize-triggers",element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',element.appendChild(element.__resizeTriggers__),resetTriggers(element),element.addEventListener("scroll",scrollListener,!0),animationstartevent&&element.__resizeTriggers__.addEventListener(animationstartevent,function(e){e.animationName==animationName&&resetTriggers(element)})),element.__resizeListeners__.push(fn))},window.removeResizeListener=function(element,fn){attachEvent?element.detachEvent("onresize",fn):(element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1),element.__resizeListeners__.length||(element.removeEventListener("scroll",scrollListener),element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)))}}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(164).addModules({GestureRecognizer:__webpack_require__(165),KeyEvent:__webpack_require__(167),PointerEventManager:__webpack_require__(182),PointerEvent:__webpack_require__(183),Pointer:__webpack_require__(166)})},function(module,exports,__webpack_require__){var Engine,Events,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.Events||Engine.addNamespace("Events",Events=function(superClass){function Events(){return Events.__super__.constructor.apply(this,arguments)}return extend(Events,superClass),Events}(Neptune.Base))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125),__webpack_require__(166)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic,Pointer){var BaseObject,GestureRecognizer,abs,clone,first,inspect,isFunction,isPlainObject,matrix,objectWithout,peek,point,pointerDeadZone,pointerDeadZoneSquared,rect,select;return inspect=Foundation.inspect,clone=Foundation.clone,peek=Foundation.peek,first=Foundation.first,BaseObject=Foundation.BaseObject,isPlainObject=Foundation.isPlainObject,clone=Foundation.clone,abs=Foundation.abs,isFunction=Foundation.isFunction,select=Foundation.select,objectWithout=Foundation.objectWithout,point=Atomic.point,rect=Atomic.rect,matrix=Atomic.matrix,pointerDeadZone=Pointer.pointerDeadZone,pointerDeadZoneSquared=pointerDeadZone*pointerDeadZone,GestureRecognizer=function(superClass){function GestureRecognizer(gestureRecognizers){this._nonGestureHandlers=select(gestureRecognizers,pointerHandlers),this._gestureRecognizers=objectWithout(gestureRecognizers,pointerHandlers),this._activeGesture=null,this._lastActiveGesture=null,this._startEvent=null,GestureRecognizer.__super__.constructor.apply(this,arguments),this.setupDefaultRecognizers(),this._startEvent=null}var pointerHandlers;return extend(GestureRecognizer,superClass),GestureRecognizer.createGestureRecognizer=function(o){var gr;return gr=new GestureRecognizer(o),gr.getPointerHandlers()},pointerHandlers=["pointerDown","pointerUp","pointerMove","pointerCancel"],GestureRecognizer.prototype.setupDefaultRecognizers=function(){var k,ref,results,v;ref=this._gestureRecognizers,results=[];for(k in ref)switch(v=ref[k],k){case"horizontal":results.push(v.recognize||(v.recognize=function(e){var d;return d=e.delta,abs(d.y)<abs(d.x)}));break;case"vertical":results.push(v.recognize||(v.recognize=function(e){var d;return d=e.delta,abs(d.y)>abs(d.x)}));break;default:if(!isFunction(v.recognize))throw new Error("'recognize' function required for recognizer '"+k+"'");results.push(void 0)}return results},GestureRecognizer.getter({pointerHandlers:function(){return{pointerDown:function(_this){return function(e){var base,ref;if("function"==typeof(base=_this._nonGestureHandlers).pointerDown&&base.pointerDown(e),_this._startEvent=e.newEvent?e.newEvent():clone(e),null!=(ref=_this._lastActiveGesture)&&"function"==typeof ref.resume?ref.resume(e):void 0)return _this._resumeGesture(e)}}(this),pointerMove:function(_this){return function(e){var ag,base,base1;return(ag=_this._activeGesture)?"function"==typeof ag.move?ag.move(e):void 0:_this._startEvent&&!e.pointer.stayedWithinDeadzone?(_this._startGesture(e),"function"==typeof(base=_this._nonGestureHandlers).pointerCancel?base.pointerCancel(e):void 0):"function"==typeof(base1=_this._nonGestureHandlers).pointerMove?base1.pointerMove(e):void 0}}(this),pointerUp:function(_this){return function(e){var base,base1;return _this._activeGesture?("function"==typeof(base=_this._activeGesture).end&&base.end(e),_this._activeGesture=null):"function"==typeof(base1=_this._nonGestureHandlers).pointerUp?base1.pointerUp(e):void 0}}(this),pointerCancel:function(_this){return function(e){var base,base1;return _this._activeGesture?("function"==typeof(base=_this._activeGesture).cancel&&base.cancel(e),_this._activeGesture=null):"function"==typeof(base1=_this._nonGestureHandlers).pointerCancel&&base1.pointerCancel(e),_this._startEvent=null}}(this)}}}),GestureRecognizer.prototype._resumeGesture=function(e){var base,ref;return null!=(ref=e.target)&&"function"==typeof ref.capturePointerEvents&&ref.capturePointerEvents(),this._activeGesture=this._lastActiveGesture,"function"==typeof(base=this._activeGesture).begin?base.begin(this._startEvent):void 0},GestureRecognizer.prototype._startGesture=function(e){var base,base1,k,ref,ref1,v;ref=this._gestureRecognizers;for(k in ref)if(v=ref[k],v.recognize(e)){this._lastActiveGesture=this._activeGesture=v;break}return this._activeGesture?(null!=(ref1=e.target)&&"function"==typeof ref1.capturePointerEvents&&ref1.capturePointerEvents(),"function"==typeof(base=this._activeGesture).begin&&base.begin(this._startEvent),"function"==typeof(base1=this._activeGesture).move?base1.move(e):void 0):this._startEvent=null},GestureRecognizer}(BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic){var BaseObject,Pointer,clone,first,inspect,matrix,peek,point,rect;return inspect=Foundation.inspect,clone=Foundation.clone,peek=Foundation.peek,first=Foundation.first,BaseObject=Foundation.BaseObject,point=Atomic.point,rect=Atomic.rect,matrix=Atomic.matrix,Pointer=function(superClass){function Pointer(id,location,lastLocation,firstLocation,stayedWithinDeadzone){null==stayedWithinDeadzone&&(stayedWithinDeadzone=!0),this.id=id,this.location=location,this.lastLocation=lastLocation||location,this.firstLocation=firstLocation||location,this.stayedWithinDeadzone=stayedWithinDeadzone}var emptyObject,pointerDeadZone,pointerDeadZoneSquared;return extend(Pointer,superClass),Pointer.pointerDeadZone=pointerDeadZone=10,Pointer.pointerDeadZoneSquared=pointerDeadZoneSquared=pointerDeadZone*pointerDeadZone,emptyObject={},Pointer.prototype.newPointer=function(options){return null==options&&(options=emptyObject),new Pointer(options.id||this.id,options.location||this.location,options.lastLocation||this.lastLocation,options.firstLocation||this.firstLocation,options.stayedWithinDeadzone||this.stayedWithinDeadzone)},Pointer.prototype.moved=function(newLocation){var stayedWithinDeadzone;return stayedWithinDeadzone=this.stayedWithinDeadzone&&newLocation.distanceSquared(this.firstLocation)<=pointerDeadZoneSquared,new Pointer(this.id,newLocation,this.location,this.firstLocation,stayedWithinDeadzone)},Pointer.prototype.locationIn=function(element){return element?element.absToElementMatrix.transform(this.location):this.location},Pointer.prototype.lastLocationIn=function(element){return element?element.absToElementMatrix.transform(this.lastLocation):this.lastLocation},Pointer.prototype.firstLocationIn=function(element){return element?element.absToElementMatrix.transform(this.firstLocation):this.firstLocation},Pointer.prototype.deltaIn=function(element){return element?element.absToElementMatrix.transformDifference(this.location,this.lastLocation):this.location.sub(this.lastLocation)},Pointer.prototype.totalDeltaIn=function(element){return element?element.absToElementMatrix.transformDifference(this.location,this.firstLocation):this.location.sub(this.firstLocation)},Pointer}(BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var Events,Foundation,KeyEvent,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Events=__webpack_require__(168),__webpack_require__(181).polyfill(),log=Foundation.log,module.exports=KeyEvent=function(superClass){function KeyEvent(type,_keyboardEvent){this._keyboardEvent=_keyboardEvent,KeyEvent.__super__.constructor.call(this,type,{key:this._keyboardEvent.key,altKey:this._keyboardEvent.altKey,ctrlKey:this._keyboardEvent.ctrlKey,shiftKey:this._keyboardEvent.shiftKey,metaKey:this._keyboardEvent.metaKey})}return extend(KeyEvent,superClass),KeyEvent}(Events.Event)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(169)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(170).includeInNamespace(__webpack_require__(172)).addModules({Event:__webpack_require__(174),EventedBaseMixin:__webpack_require__(175),EventedMixin:__webpack_require__(177),EventedObject:__webpack_require__(179),EventedObjectBase:__webpack_require__(180),EventEpoch:__webpack_require__(176),EventManager:__webpack_require__(178)})},function(module,exports,__webpack_require__){var Art,Events,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(171),module.exports=Art.Events||Art.addNamespace("Events",Events=function(superClass){function Events(){return Events.__super__.constructor.apply(this,arguments)}return extend(Events,superClass),Events}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var _package;module.exports=[{"package":_package=__webpack_require__(173),version:_package.version}]},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-foundation":"git://github.com/imikimi/art-foundation.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.4.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"art-events",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.1.1"}},function(module,exports,__webpack_require__){var BaseObject,Event,Foundation,currentSecond,emptyProps,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),currentSecond=Foundation.currentSecond,BaseObject=Foundation.BaseObject,emptyProps={},module.exports=Event=function(superClass){function Event(type,props,timeStamp){this.type=type,this.props=null!=props?props:emptyProps,this.timeStamp=null!=timeStamp?timeStamp:currentSecond()}return extend(Event,superClass),Event}(BaseObject)},function(module,exports,__webpack_require__){(function(module){var Event,EventEpoch,Foundation,defineModule,eventEpoch,inspect,isFunction,isPlainObject,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),EventEpoch=__webpack_require__(176),Event=__webpack_require__(174),defineModule=Foundation.defineModule,isFunction=Foundation.isFunction,log=Foundation.log,isPlainObject=Foundation.isPlainObject,inspect=Foundation.inspect,eventEpoch=EventEpoch.eventEpoch,defineModule(module,function(){return function(superClass){var EventedBaseMixin;return EventedBaseMixin=function(superClass1){function EventedBaseMixin(){return EventedBaseMixin.__super__.constructor.apply(this,arguments)}var typeFromEventOrType;return extend(EventedBaseMixin,superClass1),EventedBaseMixin.typeFromEventOrType=typeFromEventOrType=function(eventOrType){return eventOrType&&(eventOrType.type||eventOrType)},EventedBaseMixin.prototype.handleEvent=function(eventOrType,eventPropertiesOrCreator){var e,event,eventType;if(eventType=typeFromEventOrType(eventOrType),!eventType||!this._hasEventHandler(eventType))return!1;if(event=eventOrType instanceof Event?eventOrType:isFunction(eventPropertiesOrCreator)?isPlainObject(e=eventPropertiesOrCreator())?new Event(eventType,e):e:new Event(eventType,eventPropertiesOrCreator),!event)return!1;event.target=this;try{this._sendToEventHandler(event)}catch(error1){e=error1,this._handleErrorInHandler(event,"unknown",e)}return event.target=null,!0},EventedBaseMixin.prototype.queueEvent=function(eventOrType,eventPropertiesOrCreator){var eventType;return eventType=typeFromEventOrType(eventOrType),!(!eventType||!this._hasEventHandler(eventType))&&(eventEpoch.queue(function(_this){return function(){return _this.handleEvent(eventOrType,eventPropertiesOrCreator)}}(this)),!0)},EventedBaseMixin.prototype._hasEventHandler=function(eventType){throw new Error("must implement")},EventedBaseMixin.prototype._sendToEventHandler=function(event){throw new Error("must implement")},EventedBaseMixin.prototype._handleErrorInHandler=function(event,handler,error){return console.log("EventedObjectBase: exception in handler. Error:",error),console.log("Event: "+inspect(event,1)),console.log("Handler:",handler),console.log("Stack:",error.stack),Foundation.throwErrorOutOfStack(error)},EventedBaseMixin}(superClass)}})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Epoch,EventEpoch,Foundation,defineModule,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),defineModule=Foundation.defineModule,log=Foundation.log,Epoch=Foundation.Epoch,defineModule(module,EventEpoch=function(superClass){function EventEpoch(){return EventEpoch.__super__.constructor.apply(this,arguments)}return extend(EventEpoch,superClass),EventEpoch.singletonClass(),EventEpoch.prototype.queue=function(event){return this.queueItem(event)},EventEpoch.prototype.logEvent=function(name,id){},EventEpoch}(Epoch))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Event,EventEpoch,EventManager,EventedBaseMixin,Foundation,defineModule,eventEpoch,isFunction,isPlainObject,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),EventManager=__webpack_require__(178),EventEpoch=__webpack_require__(176),Event=__webpack_require__(174),EventedBaseMixin=__webpack_require__(175),defineModule=Foundation.defineModule,isFunction=Foundation.isFunction,log=Foundation.log,isPlainObject=Foundation.isPlainObject,eventEpoch=EventEpoch.eventEpoch,defineModule(module,function(){return function(superClass){var EventedMixin;return EventedMixin=function(superClass1){function EventedMixin(){return EventedMixin.__super__.constructor.apply(this,arguments)}return extend(EventedMixin,superClass1),EventedMixin.prototype.initEventHandling=function(){return this.eventManager=null},EventedMixin.prototype._sendToEventHandler=function(event){return this.eventManager.handleEvent(event)},EventedMixin.prototype._hasEventHandler=function(eventType){var ref;return null!=(ref=this.eventManager)?ref.hasHandler(eventType):void 0},EventedMixin.prototype.clearEventHandlers=function(){return this.eventManager=null},EventedMixin.prototype.removeListeners=function(handlerMap){var ref;return null!=(ref=this.eventManager)?ref.removeListeners(handlerMap):void 0},EventedMixin.prototype.preprocessEventHandlers=function(handlerMap){return handlerMap},EventedMixin.prototype.on=function(handlerMap){return(this.eventManager||(this.eventManager=new EventManager(this))).on(handlerMap),this.preprocessEventHandlers(handlerMap)},EventedMixin.prototype.onNext=function(handlerMap){return(this.eventManager||(this.eventManager=new EventManager(this))).onNext(handlerMap)},EventedMixin}(EventedBaseMixin(superClass))}})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Event,EventManager,Foundation,arrayWith,clone,defineModule,inspect,isFunction,nextTick,rawErrorLog,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Event=__webpack_require__(174),defineModule=Foundation.defineModule,nextTick=Foundation.nextTick,isFunction=Foundation.isFunction,inspect=Foundation.inspect,clone=Foundation.clone,arrayWith=Foundation.arrayWith,rawErrorLog=Foundation.Log.rawErrorLog,defineModule(module,EventManager=function(superClass){function EventManager(parent){this.parent=parent,this.eventHandlers={}}return extend(EventManager,superClass),EventManager.prototype.hasHandler=function(type){var handlers;return!!((handlers=this.eventHandlers[type])&&handlers.length>0)},EventManager.prototype.on=function(handlerMap){var action,results,type;results=[];for(type in handlerMap)if(action=handlerMap[type]){if(!isFunction(action))throw new Error("EventManager: action is not a function for "+inspect(type)+" event handler. (action: "+inspect(action)+", parent: "+inspect(this.parent)+")");results.push(this.eventHandlers[type]=arrayWith(this.eventHandlers[type],{action:action,oneTime:!1}))}return results},EventManager.prototype.removeListeners=function(handlerMap){var action,beforeCount,count,handler,handlers,type;count=0;for(type in handlerMap)action=handlerMap[type],(handlers=this.eventHandlers[type])&&(beforeCount=handlers.length,this.eventHandlers[type]=function(){var i,len,results;for(results=[],i=0,len=handlers.length;i<len;i++)handler=handlers[i],handler.action!==action&&results.push(handler);return results}(),count=beforeCount-this.eventHandlers[type].length);return count},EventManager.prototype.onNext=function(handlerMap){var action,base,results,type;results=[];for(type in handlerMap)action=handlerMap[type],null==(base=this.eventHandlers)[type]&&(base[type]=[]),results.push(this.eventHandlers[type].push({action:action,oneTime:!0}));return results},EventManager.prototype.countOneTimeHandlersFor=function(eventType){var count,handler,handlers,i,len;if(count=0,handlers=this.eventHandlers[eventType])for(i=0,len=handlers.length;i<len;i++)handler=handlers[i],handler.oneTime&&count++;return count},EventManager.prototype.handleEvent=function(event){return"string"==typeof event&&(event=new Event(event)),this.sendToHandlers(event.type,event)},EventManager.prototype.handleEvents=function(events){var event,i,len,results;for(results=[],i=0,len=events.length;i<len;i++)event=events[i],results.push(this.handleEvent(event));return results},EventManager.prototype.sendToHandlers=function(eventType,event){var action,error,firedOneTimeHandler,handler,handlers,i,len;if(handlers=this.eventHandlers[eventType],handlers&&handlers.length>0){for(firedOneTimeHandler=!1,i=0,len=handlers.length;i<len;i++){handler=handlers[i];try{handler.oneTime&&(handler.remove=firedOneTimeHandler=!0),action=handler.action,action(event)}catch(error1){error=error1,this.handleErrorInHandler(handler,event,error)}}return firedOneTimeHandler?this.eventHandlers[event.type]=function(){var j,len1,ref,results;for(ref=this.eventHandlers[eventType],results=[],j=0,len1=ref.length;j<len1;j++)handler=ref[j],handler.remove||results.push(handler);return results}.call(this):void 0}},EventManager.prototype.handleErrorInHandler=function(handler,event,error){return"eventException"===event.type?(rawErrorLog("exception in eventException handler.\nEvent:"+inspect(event,1)+".\n\nError:\n"+error.stack),Foundation.throwErrorOutOfStack(error)):this.eventHandlers.eventException?this.handleEvent(new Event("eventException",{event:clone(event),exception:error,handler:handler})):(rawErrorLog("exception in handler AND no eventException handler. Error:"),rawErrorLog(error),rawErrorLog("Event: "+inspect(event,1)),
rawErrorLog("Stack:\n"+error.stack),Foundation.throwErrorOutOfStack(error))},EventManager}(Foundation.BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Event,EventEpoch,EventManager,EventedObject,EventedObjectBase,Foundation,defineModule,eventEpoch,isFunction,isPlainObject,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),EventManager=__webpack_require__(178),EventEpoch=__webpack_require__(176),Event=__webpack_require__(174),EventedObjectBase=__webpack_require__(180),defineModule=Foundation.defineModule,isFunction=Foundation.isFunction,log=Foundation.log,isPlainObject=Foundation.isPlainObject,eventEpoch=EventEpoch.eventEpoch,defineModule(module,EventedObject=function(superClass){function EventedObject(){return EventedObject.__super__.constructor.apply(this,arguments)}return extend(EventedObject,superClass),EventedObject.prototype.initEventHandling=function(){return this.eventManager=null},EventedObject.prototype._sendToEventHandler=function(event){return this.eventManager.handleEvent(event)},EventedObject.prototype._hasEventHandler=function(eventType){var ref;return null!=(ref=this.eventManager)?ref.hasHandler(eventType):void 0},EventedObject.prototype.clearEventHandlers=function(){return this.eventManager=null},EventedObject.prototype.removeListeners=function(handlerMap){var ref;return null!=(ref=this.eventManager)?ref.removeListeners(handlerMap):void 0},EventedObject.prototype.preprocessEventHandlers=function(handlerMap){return handlerMap},EventedObject.prototype.on=function(handlerMap){return(this.eventManager||(this.eventManager=new EventManager(this))).on(handlerMap),this.preprocessEventHandlers(handlerMap)},EventedObject.prototype.onNext=function(handlerMap){return(this.eventManager||(this.eventManager=new EventManager(this))).onNext(handlerMap)},EventedObject}(EventedObjectBase))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Event,EventEpoch,EventedObjectBase,Foundation,defineModule,eventEpoch,inspect,isFunction,isPlainObject,log;Foundation=__webpack_require__(19),EventEpoch=__webpack_require__(176),Event=__webpack_require__(174),defineModule=Foundation.defineModule,isFunction=Foundation.isFunction,log=Foundation.log,isPlainObject=Foundation.isPlainObject,inspect=Foundation.inspect,eventEpoch=EventEpoch.eventEpoch,defineModule(module,EventedObjectBase=function(){function EventedObjectBase(){}var typeFromEventOrType;return EventedObjectBase.typeFromEventOrType=typeFromEventOrType=function(eventOrType){return eventOrType&&(eventOrType.type||eventOrType)},EventedObjectBase.prototype.handleEvent=function(eventOrType,eventPropertiesOrCreator){var e,event,eventType;if(eventType=typeFromEventOrType(eventOrType),!eventType||!this._hasEventHandler(eventType))return!1;if(event=eventOrType instanceof Event?eventOrType:isFunction(eventPropertiesOrCreator)?isPlainObject(e=eventPropertiesOrCreator())?new Event(eventType,e):e:new Event(eventType,eventPropertiesOrCreator),!event)return!1;event.target=this;try{this._sendToEventHandler(event)}catch(error1){e=error1,this._handleErrorInHandler(event,"unknown",e)}return event.target=null,!0},EventedObjectBase.prototype.queueEvent=function(eventOrType,eventPropertiesOrCreator){var eventType;return eventType=typeFromEventOrType(eventOrType),!(!eventType||!this._hasEventHandler(eventType))&&(eventEpoch.queue(function(_this){return function(){return _this.handleEvent(eventOrType,eventPropertiesOrCreator)}}(this)),!0)},EventedObjectBase.prototype._hasEventHandler=function(eventType){throw new Error("must implement")},EventedObjectBase.prototype._sendToEventHandler=function(event){throw new Error("must implement")},EventedObjectBase.prototype._handleErrorInHandler=function(event,handler,error){return console.log("EventedObjectBase: exception in handler. Error:",error),console.log("Event: "+inspect(event,1)),console.log("Handler:",handler),console.log("Stack:",error.stack),Foundation.throwErrorOutOfStack(error)},EventedObjectBase}())}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(){function polyfill(){if(!("KeyboardEvent"in window)||"key"in KeyboardEvent.prototype)return!1;var proto={get:function(x){var key=keyboardeventKeyPolyfill.keys[this.which||this.keyCode];return Array.isArray(key)&&(key=key[+this.shiftKey]),key}};return Object.defineProperty(KeyboardEvent.prototype,"key",proto),proto}var i,keyboardeventKeyPolyfill={polyfill:polyfill,keys:{3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"}};for(i=1;i<25;i++)keyboardeventKeyPolyfill.keys[111+i]="F"+i;var letter="";for(i=65;i<91;i++)letter=String.fromCharCode(i),keyboardeventKeyPolyfill.keys[i]=[letter.toLowerCase(),letter.toUpperCase()];__WEBPACK_AMD_DEFINE_FACTORY__=keyboardeventKeyPolyfill,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()},function(module,exports,__webpack_require__){var Atomic,EventEpoch,Events,Foundation,KeyEvent,Pointer,PointerEvent,PointerEventManager,arrayWithoutValue,clone,eq,eventEpoch,first,inspect,isObject,log,matrix,max,min,peek,point,rect,shallowClone,stableSort,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),Events=__webpack_require__(168),Pointer=__webpack_require__(166),PointerEvent=__webpack_require__(183),KeyEvent=__webpack_require__(167),EventEpoch=Events.EventEpoch,eventEpoch=EventEpoch.eventEpoch,point=Atomic.point,rect=Atomic.rect,matrix=Atomic.matrix,inspect=Foundation.inspect,clone=Foundation.clone,shallowClone=Foundation.shallowClone,peek=Foundation.peek,first=Foundation.first,min=Foundation.min,max=Foundation.max,eq=Foundation.eq,arrayWithoutValue=Foundation.arrayWithoutValue,stableSort=Foundation.stableSort,log=Foundation.log,isObject=Foundation.isObject,module.exports=PointerEventManager=function(superClass){function PointerEventManager(options){null==options&&(options={}),PointerEventManager.__super__.constructor.apply(this,arguments),this.canvasElement=options.canvasElement,this.mouse=new Pointer("mouse",point(-1)),this.activePointers={},this._numActivePointers=0,this.capturingElement=null,this.currentMousePath=[],this._currentFocusedPath=[this.canvasElement]}var elementToRootPath,prioritySortElements,rootToElementPath,updatePath;return extend(PointerEventManager,superClass),PointerEventManager.getter({currentFocusedPath:function(){return this._currentFocusedPath},numActivePointers:function(){return this._numActivePointers},hasMouseCursor:function(){return!0},currentMousePathClassNames:function(){var el,j,len,ref,results;for(ref=this.currentMousePath,results=[],j=0,len=ref.length;j<len;j++)el=ref[j],results.push(el.classPathName);return results}}),PointerEventManager.setter({currentFocusedPath:function(){throw new Error("can't set currentFocusedPath directly")}}),PointerEventManager.prototype.capturePointerEvents=function(element){var elementsToCancel,name,pointer,ref;elementsToCancel=arrayWithoutValue(this.currentFocusedPath,element),ref=this.activePointers;for(name in ref)pointer=ref[name],this.queuePointerEventForElements(elementsToCancel,"pointerCancel",pointer);return this.capturingElement=element},PointerEventManager.prototype.pointerEventsCapturedBy=function(element){return element===this.capturingElement},PointerEventManager.prototype.pointerElementPath=function(pointer){var element,newPath,root;if(root=this.canvasElement,!root.pointInside(pointer.location))return[];for(element=root,newPath=[];element;)newPath.push(element),element=element.childUnderPoint(pointer.locationIn(element));return newPath},PointerEventManager.prototype.queueEventForElements=function(elements,type,newEventFunction){var element,j,len,results;for(results=[],j=0,len=elements.length;j<len;j++)element=elements[j],results.push(element.queueEvent(type,newEventFunction));return results},PointerEventManager.prototype.queuePointerEventForElement=function(element,type,pointer,timeStampInPerformanceSeconds,props){return element.queueEvent(type,function(_this){return function(){if(!_this.capturingElement||"pointerCancel"===type||element===_this.capturingElement)return new PointerEvent(type,pointer,timeStampInPerformanceSeconds,props)}}(this))},PointerEventManager.prioritySortElements=prioritySortElements=function(elements){return stableSort(elements,function(a,b){return b._pointerEventPriority-a._pointerEventPriority})},PointerEventManager.sortElementsBaseOnRelationshipPriority=function(elementPriorities){var add,orderList,recurse;return orderList=[],add=function(index){return orderList.push(index)},recurse=function(startIndexInclusive,endIndexExclusive){var addLast,firstBeforeAncestorsIndex,firstBeforeDescendentsIndex,i,j,k,l,priority,ref,ref1,ref2,ref3,ref4,ref5,results;if(!(endIndexExclusive<=startIndexInclusive)){if(startIndexInclusive+1===endIndexExclusive)return add(startIndexInclusive);for(firstBeforeDescendentsIndex=endIndexExclusive,firstBeforeAncestorsIndex=endIndexExclusive,i=j=ref=endIndexExclusive-1,ref1=startIndexInclusive;j>=ref1;i=j+=-1)switch(priority=elementPriorities[i]){case"beforeDescendents":firstBeforeDescendentsIndex=i;break;case"beforeAncestors":i>startIndexInclusive&&(firstBeforeAncestorsIndex=i)}if(firstBeforeDescendentsIndex<=firstBeforeAncestorsIndex){for(addLast=!1,i=k=ref2=startIndexInclusive,ref3=firstBeforeDescendentsIndex;k<ref3;i=k+=1)"afterChildren"===elementPriorities[i]?addLast=!0:add(i);if(firstBeforeDescendentsIndex<endIndexExclusive&&add(firstBeforeDescendentsIndex),recurse(firstBeforeDescendentsIndex+1,endIndexExclusive),addLast){for(results=[],i=l=ref4=firstBeforeDescendentsIndex-1,ref5=startIndexInclusive;l>=ref5;i=l+=-1)"afterChildren"===elementPriorities[i]?results.push(add(i)):results.push(void 0);return results}}else if(firstBeforeAncestorsIndex<endIndexExclusive)return recurse(firstBeforeAncestorsIndex,endIndexExclusive),recurse(startIndexInclusive,firstBeforeAncestorsIndex)}},recurse(0,elementPriorities.length),orderList},PointerEventManager.prototype.queuePointerEventForElements=function(elements,type,pointer,timeStampInPerformanceSeconds,props){var element,j,len,results;for(elements=prioritySortElements(elements.slice()),results=[],j=0,len=elements.length;j<len;j++)element=elements[j],results.push(this.queuePointerEventForElement(element,type,pointer,timeStampInPerformanceSeconds,props));return results},PointerEventManager.prototype.queuePointerEvents=function(type,pointer,timeStampInPerformanceSeconds){return this.forEachReceivingElement(function(_this){return function(e){return _this.queuePointerEventForElement(e,type,pointer,timeStampInPerformanceSeconds)}}(this))},PointerEventManager.prototype.forEachReceivingElement=function(f){var e,j,len,ref,results;if(e=this.capturingElement)return f(e);for(ref=prioritySortElements(this.currentFocusedPath),results=[],j=0,len=ref.length;j<len;j++)e=ref[j],results.push(f(e));return results},PointerEventManager.prototype.queueMouseEvents=function(type,pointer,timeStampInPerformanceSeconds,props){return this.queuePointerEventForElements(this.currentMousePath,type,pointer,timeStampInPerformanceSeconds,props)},PointerEventManager.prototype.queueKeyEvents=function(artEngineEventType,keyboardEvent){var allowBrowserDefault,element,elements,elementsToSendEventTo,i,j,k,lastBeforeParent,len,len1,newEventFunction,order,results,willConsumeEvent;for(elementsToSendEventTo=elements=this.updateFocusedPath(),lastBeforeParent=null,i=j=0,len=elements.length;j<len;i=++j)if(element=elements[i],order=willConsumeEvent=element.getWillConsumeKeyboardEvent()(artEngineEventType,keyboardEvent))switch(isObject(willConsumeEvent)&&(order=willConsumeEvent.order,allowBrowserDefault=willConsumeEvent.allowBrowserDefault),allowBrowserDefault||keyboardEvent.preventDefault(),order){case"beforeAncestors":lastBeforeParent=element;break;case"beforeDescendents":if(!lastBeforeParent){elementsToSendEventTo=elements.slice(0,i+1);break}}if(newEventFunction=function(){return new KeyEvent(artEngineEventType,keyboardEvent)},lastBeforeParent)return lastBeforeParent.queueEvent(artEngineEventType,newEventFunction);for(results=[],k=0,len1=elementsToSendEventTo.length;k<len1;k++)element=elementsToSendEventTo[k],results.push(element.queueEvent(artEngineEventType,newEventFunction));return results},PointerEventManager.elementToRootPath=elementToRootPath=function(element){var path;for(path=[];element;)path.push(element),element=element.parent;return path},PointerEventManager.rootToElementPath=rootToElementPath=function(element){return elementToRootPath(element).reverse()},PointerEventManager.updatePath=updatePath=function(oldPath,newPath,removedElementsAction,addedElementsAction,onAnyChange){var i,j,maxLen,minLen,ref;for(minLen=min(oldPath.length,newPath.length),maxLen=max(oldPath.length,newPath.length),i=j=0,ref=minLen;j<ref;i=j+=1)if(oldPath[i]!==newPath[i])return removedElementsAction(oldPath.slice(i)),addedElementsAction(newPath.slice(i)),onAnyChange&&onAnyChange(newPath),newPath;return minLen===maxLen?oldPath:(minLen<oldPath.length&&removedElementsAction(oldPath.slice(minLen)),minLen<newPath.length&&addedElementsAction(newPath.slice(minLen)),onAnyChange&&minLen!==maxLen&&onAnyChange(newPath),newPath)},PointerEventManager.prototype.updateCursor=function(path){var c,cursor,el,j,len;for(cursor="default",j=0,len=path.length;j<len;j++)el=path[j],(c=el.cursor)&&(cursor=c);return this.canvasElement.cssCursor=cursor},PointerEventManager.prototype.queueOutEvents=function(pointer,elements){return this.queuePointerEventForElements(elements,"mouseOut",pointer)},PointerEventManager.prototype.queueInEvents=function(pointer,elements){return this.queuePointerEventForElements(elements,"mouseIn",pointer)},PointerEventManager.prototype.queueBlurEvents=function(pointer,elements){return this.queuePointerEventForElements(elements,"blur",pointer)},PointerEventManager.prototype.queueFocusEvents=function(pointer,elements){return this.queuePointerEventForElements(elements,"focus",pointer)},PointerEventManager.prototype.isFocused=function(element){return this.currentFocusedPath.indexOf(element)>=0},PointerEventManager.getter({validatedFocusPath:function(){var element,i,lastElement,path;return lastElement=this.canvasElement.parent,path=function(){var j,len,ref,results;for(ref=this.currentFocusedPath,results=[],i=j=0,len=ref.length;j<len&&(element=ref[i],element.canvasElement===this.canvasElement&&element.parent===lastElement);i=++j)results.push(lastElement=element);return results}.call(this),path[0]!==this.canvasElement?[this.canvasElement]:path}}),PointerEventManager.prototype.updateFocusedPath=function(pointer,element){var el,newPath;if(pointer||(pointer=this.activePointers[0]),newPath=rootToElementPath(element||peek(this.currentFocusedPath)),newPath[0]!==this.canvasElement&&(newPath=this.validatedFocusPath),this._currentFocusedPath=updatePath(this.currentFocusedPath,newPath,function(_this){return function(oldElements){return _this.queueBlurEvents(pointer,oldElements)}}(this),function(_this){return function(newElements){return _this.queueFocusEvents(pointer,newElements)}}(this)),this.currentFocusedPath[0]!==this.canvasElement)throw log(function(){var j,len,ref,results;for(ref=this.currentFocusedPath,results=[],j=0,len=ref.length;j<len;j++)el=ref[j],results.push(el.inspectedName);return results}.call(this)),new Error("root element should be canvas (internal error - it should be impossible for this to happen)");return this.currentFocusedPath},PointerEventManager.prototype.focus=function(pointer,element){return this.updateFocusedPath(pointer,element)},PointerEventManager.prototype.updateMousePath=function(){var pointer;if(pointer=this.mouse,0===this._numActivePointers&&this.getHasMouseCursor())return this.currentMousePath=updatePath(this.currentMousePath,this.pointerElementPath(pointer),function(_this){return function(oldElements){return _this.queueOutEvents(pointer,oldElements)}}(this),function(_this){return function(newElements){return _this.queueInEvents(pointer,newElements)}}(this),function(_this){return function(newPath){return _this.updateCursor(newPath)}}(this))},PointerEventManager.prototype.pointerDown=function(id,location,timeStampInPerformanceSeconds){var pointer;return eventEpoch.logEvent("pointerDown",id),this.activePointers[id]?console.error("pointerDown(id:"+inspect(id)+", location:"+inspect(location)+"): already have an active pointer for that id"):this._numActivePointers++,pointer=this.activePointers[id]=new Pointer(id,location),1===this._numActivePointers&&this.focus(pointer,peek(this.pointerElementPath(pointer))),this.queuePointerEvents("pointerDown",pointer,timeStampInPerformanceSeconds)},PointerEventManager.prototype.queuePointerUpInAndOutsideEvents=function(pointer,timeStampInPerformanceSeconds){return this.forEachReceivingElement(function(_this){return function(element){var locationInParentSpace,type;return locationInParentSpace=pointer.locationIn(element.parent),type=element.pointInside(locationInParentSpace)?"pointerUpInside":"pointerUpOutside",_this.queuePointerEventForElement(element,type,pointer,timeStampInPerformanceSeconds)}}(this))},PointerEventManager.prototype.queuePointerMoveInAndOutEvents=function(pointer,timeStampInPerformanceSeconds){var isInsideParent,wasInsideParent;return isInsideParent=!0,wasInsideParent=!0,this.forEachReceivingElement(function(_this){return function(element){var isInside,lastLocationInParentSpace,locationInParentSpace,type,wasInside;return lastLocationInParentSpace=pointer.lastLocationIn(element.parent),locationInParentSpace=pointer.locationIn(element.parent),wasInside=wasInsideParent&&element.pointInside(lastLocationInParentSpace),isInside=isInsideParent&&element.pointInside(locationInParentSpace),isInside!==wasInside&&(type=isInside?"pointerIn":"pointerOut",_this.queuePointerEventForElement(element,type,pointer,timeStampInPerformanceSeconds)),isInsideParent=isInside,wasInsideParent=wasInside}}(this))},PointerEventManager.prototype.pointerUp=function(id,timeStampInPerformanceSeconds){var pointer;return eventEpoch.logEvent("pointerUp",id),(pointer=this.activePointers[id])?(this._numActivePointers--,delete this.activePointers[id],this.queuePointerUpInAndOutsideEvents(pointer,timeStampInPerformanceSeconds),this.queuePointerEvents("pointerUp",pointer,timeStampInPerformanceSeconds),pointer.stayedWithinDeadzone&&(this.queuePointerEvents("pointerClick",pointer,timeStampInPerformanceSeconds),eventEpoch.flushEpochNow()),this.capturingElement&&0===this._numActivePointers?this.capturingElement=null:void 0):console.error("pointerUp("+id+"): no active pointer for that id")},PointerEventManager.prototype.mouseWheel=function(location,timeStampInPerformanceSeconds,props){return this.queueMouseEvents("mouseWheel",this.mouse,timeStampInPerformanceSeconds,props)},PointerEventManager.prototype.pointerCancel=function(id,timeStampInPerformanceSeconds){var pointer;return eventEpoch.logEvent("pointerCancel",id),(pointer=this.activePointers[id])?(this._numActivePointers--,delete this.activePointers[id],this.queuePointerEvents("pointerCancel",pointer,timeStampInPerformanceSeconds),this.capturingElement&&0===this._numActivePointers?this.capturingElement=null:void 0):console.error("pointerCancel("+id+"): no active pointer for that id")},PointerEventManager.prototype.pointerMove=function(id,location,timeStampInPerformanceSeconds){var pointer;return eventEpoch.logEvent("pointerMove",id),(pointer=this.activePointers[id])?pointer.location.eq(location)?void 0:(this.activePointers[id]=pointer=pointer.moved(location),this.queuePointerMoveInAndOutEvents(pointer,timeStampInPerformanceSeconds),this.queuePointerEvents("pointerMove",pointer,timeStampInPerformanceSeconds)):console.error("pointerMove("+id+", "+location+"): no active pointer for that id")},PointerEventManager.prototype.mouseDown=function(location,timeStampInPerformanceSeconds){return this.pointerDown("mousePointer",location,timeStampInPerformanceSeconds)},PointerEventManager.prototype.mouseUp=function(timeStampInPerformanceSeconds){return this.pointerUp("mousePointer",timeStampInPerformanceSeconds),this.updateMousePath()},PointerEventManager.prototype.mouseMove=function(location,timeStampInPerformanceSeconds){if(!this.mouse.location.eq(location))return this.mouse=this.mouse.moved(location),this.updateMousePath(),this._numActivePointers>0&&this.pointerMove("mousePointer",location,timeStampInPerformanceSeconds),this.queueMouseEvents("mouseMove",this.mouse)},PointerEventManager}(Foundation.BaseObject)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(125),__webpack_require__(19),__webpack_require__(168)],__WEBPACK_AMD_DEFINE_RESULT__=function(Atomic,Foundation,Events){var PointerEvent,arrayize,clone,first,inspect,matrix,merge,peek,point,rect,transformedArray;return point=Atomic.point,rect=Atomic.rect,matrix=Atomic.matrix,inspect=Foundation.inspect,clone=Foundation.clone,peek=Foundation.peek,first=Foundation.first,merge=Foundation.merge,arrayize=function(single,array,defaultArray){return single?[single]:array||defaultArray||[]},transformedArray=function(arrayOfPoints,matrix){var i,len,p,results;for(results=[],i=0,len=arrayOfPoints.length;i<len;i++)p=arrayOfPoints[i],results.push(matrix.transform(p));return results},PointerEvent=function(superClass){function PointerEvent(type,pointer,time,props){PointerEvent.__super__.constructor.call(this,type,props,time),this.pointer=pointer}var emptyObject;return extend(PointerEvent,superClass),emptyObject={},PointerEvent.prototype.newEvent=function(options){var e;return null==options&&(options=emptyObject),e=new PointerEvent(options.type||this.type,options.pointer||this.pointer,options.time||this.time),e.timeStamp=this.timeStamp,e.target=options.target||this.target,e},PointerEvent.getter({location:function(){return this.pointer.locationIn(this.target)},firstLocation:function(){return this.pointer.firstLocationIn(this.target)},lastLocation:function(){return this.pointer.lastLocationIn(this.target)},absLocation:function(){return this.pointer.location},absFirstLocation:function(){return this.pointer.firstLocation},absLastLocation:function(){return this.pointer.lastLocation},parentLocation:function(){return this.pointer.locationIn(this.target.parent)},parentParentLocation:function(){return this.pointer.locationIn(this.target.parent.parent)},parentFirstLocation:function(){return this.pointer.firstLocationIn(this.target.parent)},parentParentFirstLocation:function(){return this.pointer.firstLocationIn(this.target.parent.parent)},parentLastLocation:function(){return this.pointer.lastLocationIn(this.target.parent)},parentParentLastLocation:function(){return this.pointer.lastLocationIn(this.target.parent.parent)},absDelta:function(){return this.pointer.location.sub(this.pointer.lastLocation)},delta:function(){return this.location.sub(this.lastLocation)},parentDelta:function(){return this.pointer.deltaIn(this.target.parent)},parentParentDelta:function(){return this.pointer.deltaIn(this.target.parent.parent)},absTotalDelta:function(){return this.pointer.location.sub(this.pointer.firstLocation)},totalDelta:function(){return this.location.sub(this.firstLocation)},totalParentDelta:function(){return this.pointer.totalDeltaIn(this.target.parent)},totalParentParentDelta:function(){return this.pointer.totalDeltaIn(this.target.parent.parent)}}),PointerEvent.prototype.toElementMatrix=function(element){return this.target.getElementToElementMatrix(element)},PointerEvent.prototype.locationIn=function(element){return this.pointer.locationIn(element)},PointerEvent.prototype.lastLocationIn=function(element){return this.pointer.lastLocationIn(element)},PointerEvent.prototype.firstLocationIn=function(element){return this.pointer.firstLocationIn(element)},PointerEvent}(Events.Event)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var Animator,Atomic,Canvas,DrawCacheManager,DrawEpoch,Element,ElementBase,Foundation,GlobalEpochCycle,Join,Layout,Map,Matrix,Point,PointLayout,PointLayoutBase,Promise,Rectangle,StateEpoch,Unique,arrayWithoutValue,cacheAggressively,clone,compact,compactFlatten,createWithPostCreate,currentSecond,defaultSize,drawCacheManager,drawEpoch,floatEq,floatEq0,floor,globalEpochCycle,identityMatrix,insert,inspect,inspectLean,inspectedObjectLiteral,isFunction,isInfiniteResult,isNumber,isPlainArray,isPlainObject,isPoint,isString,keepIfRubyTrue,log,matrix,max,merge,mergeInto,min,minimumOrderedOverlappingMerge,modulo,nonStatePropertyKeyTest,perimeter,perimeter0,plainObjectsDeepEq,point,point0,point1,present,rect,remove,repeat,rubyTrue,shallowEq,stateEpoch,stats,time,truncateLayoutCoordinate,zeroedStats,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),Canvas=__webpack_require__(137),Animator=__webpack_require__(185),Layout=__webpack_require__(187),ElementBase=__webpack_require__(192),StateEpoch=__webpack_require__(194),DrawEpoch=__webpack_require__(202),GlobalEpochCycle=__webpack_require__(201),DrawCacheManager=__webpack_require__(203),isInfiniteResult=__webpack_require__(198).isInfiniteResult,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,Matrix=Atomic.Matrix,matrix=Atomic.matrix,identityMatrix=Atomic.identityMatrix,point0=Atomic.point0,point1=Atomic.point1,perimeter0=Atomic.perimeter0,isPoint=Atomic.isPoint,perimeter=Atomic.perimeter,floor=Math.floor,globalEpochCycle=GlobalEpochCycle.globalEpochCycle,drawCacheManager=DrawCacheManager.drawCacheManager,PointLayout=Layout.PointLayout,PointLayoutBase=Layout.PointLayoutBase,truncateLayoutCoordinate=function(v){return floor(v+1/256)},inspect=Foundation.inspect,inspectLean=Foundation.inspectLean,clone=Foundation.clone,time=Foundation.time,Map=Foundation.Map,plainObjectsDeepEq=Foundation.plainObjectsDeepEq,shallowEq=Foundation.shallowEq,Unique=Foundation.Unique,compact=Foundation.compact,compactFlatten=Foundation.compactFlatten,keepIfRubyTrue=Foundation.keepIfRubyTrue,log=Foundation.log,insert=Foundation.insert,remove=Foundation.remove,merge=Foundation.merge,max=Foundation.max,min=Foundation.min,arrayWithoutValue=Foundation.arrayWithoutValue,minimumOrderedOverlappingMerge=Foundation.minimumOrderedOverlappingMerge,isPlainObject=Foundation.isPlainObject,isPlainArray=Foundation.isPlainArray,isNumber=Foundation.isNumber,isString=Foundation.isString,isFunction=Foundation.isFunction,mergeInto=Foundation.mergeInto,floatEq=Foundation.floatEq,floatEq0=Foundation.floatEq0,Join=Foundation.Join,rubyTrue=Foundation.rubyTrue,createWithPostCreate=Foundation.createWithPostCreate,currentSecond=Foundation.currentSecond,repeat=Foundation.repeat,present=Foundation.present,Promise=Foundation.Promise,modulo=Foundation.modulo,inspectedObjectLiteral=Foundation.inspectedObjectLiteral,cacheAggressively=!1,stats=clone(zeroedStats={stagingBitmapsCreated:0,elementsDrawn:0}),defaultSize=point(100),stateEpoch=StateEpoch.stateEpoch,drawEpoch=DrawEpoch.drawEpoch,nonStatePropertyKeyTest=ElementBase.nonStatePropertyKeyTest,module.exports=createWithPostCreate(Element=function(superClass){function Element(options,children){var childrenArray,i,j,ref;if(Element.created++,Element.__super__.constructor.call(this,options),this._propertiesInitialized=!1,2===arguments.length&&children&&children.constructor===Array)children.length>0&&this.setChildren(children);else if(arguments.length>1){for(childrenArray=new Array(arguments.length-1),i=j=1,ref=arguments.length;j<ref;i=j+=1)childrenArray[i-1]=arguments[i];this.setChildren(childrenArray)}this._propertiesInitialized=!0}var childrenWithout,defaultLocationLayout,defaultSizeLayout,drawCachingEnabled,initialChildren;return extend(Element,superClass),Element.drawCachingEnabled=drawCachingEnabled=!0,Element.registerWithElementFactory=function(){return!0},Element.stats=stats,Element.resetStats=function(){return mergeInto(stats,zeroedStats)},Element.created=0,Element.createdByType={},Element.resetCreated=function(){return Element.created=0,Element.createdByType={}},Element.prototype._initFields=function(){return Element.__super__._initFields.apply(this,arguments),this._initDrawCache(),this._initTemporaryFields(),this._initComputedFields(),this._activeAnimator=null,this._toVoidAnimationStatus=!1,this._locationLayoutDisabled=!1},Element.prototype._initTemporaryFields=function(){return this._currentDrawTarget=null,this._currentToTargetMatrix=null,this._lastParentSize=null,this._bitmapFactory=null},Element.prototype._initComputedFields=function(){return this._elementSpaceDrawArea=null,this._rootElement=this,this._elementToAbsMatrix=null,this._absToElementMatrix=null,this._parentToElementMatrix=null},Element.layoutProperty=function(map){var options,prop,results1;results1=[];for(prop in map)options=map[prop],options.layoutProperty=!0,results1.push(this._defineElementProperty(prop,options));return results1},Element.drawProperty=function(map){var options,prop,results1;results1=[];for(prop in map)options=map[prop],options.drawProperty=!0,results1.push(this._defineElementProperty(prop,options));return results1},Element.drawLayoutProperty=function(map){var options,prop,results1;results1=[];for(prop in map)options=map[prop],options.layoutProperty=!0,options.drawProperty=!0,results1.push(this._defineElementProperty(prop,options));return results1},Element.drawAreaProperty=function(map){var options,prop,results1;results1=[];for(prop in map)options=map[prop],options.drawAreaProperty=!0,options.drawProperty=!0,results1.push(this._defineElementProperty(prop,options));return results1;
},Element.prototype._layoutPropertyChanged=function(){return this._elementChanged(!0)},Element.prototype._drawPropertyChanged=function(){return this._elementChanged(!1,!0,!1)},Element.prototype._drawAreaPropertyChanged=function(){return this._elementChanged(!1,!0,!0)},Element.getter({absToElementMatrix:function(){return this._absToElementMatrix||(this._absToElementMatrix=this._parent?this._parent.getAbsToElementMatrix().mul(this.getParentToElementMatrix()):this.getParentToElementMatrix())},parentToElementMatrix:function(){return this._parentToElementMatrix||(this._parentToElementMatrix=this._elementToParentMatrix.inv)},elementToDocumentMatrix:function(){return this.getElementToAbsMatrix().mul(this.getCanvasElement()._elementToDocumentMatrix)},documentToElementMatrix:function(){return this.getCanvasElement()._documentToElementMatrix.mul(this.getAbsToElementMatrix())},parentSpaceDrawArea:function(){return this._elementToParentMatrix.transformBoundingRect(this.getElementSpaceDrawArea())},elementSpaceDrawArea:function(){return this._elementSpaceDrawArea||(this._elementSpaceDrawArea=this._computeElementSpaceDrawArea())},drawArea:function(){return this.elementSpaceDrawArea},absOpacity:function(){var opacity,parent;return opacity=this.getVisible()?this.getOpacity():0,(parent=this.getParent())&&(opacity*=parent.getAbsOpacity()),opacity},isChanging:function(){return this.__stateChangeQueued},rootElement:function(){return this._rootElement||(this._rootElement=this._parent?this._parent.getRootElement():this)},bitmapFactory:function(){var ref;return this._bitmapFactory||(null!=(ref=this.getCanvasElement())?ref.bitmapFactory:void 0)||Canvas.Bitmap},devicePixelsPerPoint:function(){return this.getRootElement()._devicePixelsPerPoint||1},canvasElement:function(){var re;return re=this.getRootElement(),re!==this?re.getCanvasElement():null}}),Element.prototype.transformToParentSpace=function(p){return this._elementToParentMatrix.transform(p)},Element.prototype.transformFromParentSpace=function(p){return this._elementToParentMatrix.inverseTransform(p)},Element.prototype._clearRootElement=function(){var child,j,len,oldRootElement,ref,results1;if(oldRootElement=this._rootElement){for(this._rootElement=null,this.queueEvent("rootElementChanged",function(_this){return function(){return{oldRootElement:oldRootElement,rootElement:_this.getRootElement()}}}(this)),ref=this._children,results1=[],j=0,len=ref.length;j<len;j++)child=ref[j],results1.push(child._clearRootElement());return results1}},Element.prototype.preprocessEventHandlers=function(handlerMap){var k,v;for(k in handlerMap)v=handlerMap[k],"rootElementChanged"===k&&this.getRootElement();return handlerMap},Element.setter({absToElementMatrix:function(aToE){return this.setElementToAbsMatrix(aToE.invert())},parentToElementMatrix:function(pToE){return this.setElementToParentMatrix(pToE.invert())}}),defaultSizeLayout=new PointLayout({ps:1}),defaultLocationLayout=new PointLayout(0),Element.layoutProperty({size:{"default":{ps:1},preprocess:function(v){return v instanceof PointLayoutBase?v:new PointLayout(v,defaultSizeLayout)}},location:{"default":0,preprocess:function(v){return v instanceof PointLayoutBase?v:new PointLayout(v,defaultLocationLayout)},postSetter:function(){return this._locationLayoutDisabled=!1}},scale:{"default":1,preprocess:function(s){return isFunction(s)?s:point(s)},postSetter:function(){return this._locationLayoutDisabled=!1}},angle:{"default":0,postSetter:function(){return this._locationLayoutDisabled=!1}},childrenLayout:{"default":null,validate:function(v){return null===v||"flow"===v||"column"===v||"row"===v}},childrenGrid:{"default":null,validate:function(v){return null===v||isString(v)&&v.match(/^[ a-zA-Z]+$/)}},childrenAlignment:{"default":point0,preprocess:function(v){return point(v)}},axis:{"default":point0,preprocess:function(v){return point(v)}},inFlow:{"default":!0,preprocess:function(v){return!!v}},layoutWeight:{"default":1,validate:function(v){return isNumber(v)}},padding:{"default":0,preprocess:function(v){return isFunction(v)?v:v===!1||void 0===v||null===v?null:perimeter(v)}},margin:{"default":0,preprocess:function(v){return isFunction(v)?v:v===!1||void 0===v||null===v?null:perimeter(v)}}}),Element.concreteProperty({currentSize:{"default":defaultSize,setter:function(_new,_old){return _old}},currentPadding:{"default":perimeter0,setter:function(_new,_old){return _old}},currentMargin:{"default":perimeter0,setter:function(_new,_old){return _old}}}),Element.virtualProperty({currentLocationX:function(pending){var a,p,s,state;return state=this.getState(pending),s=state._currentSize,a=state._axis,p=state._currentPadding,state._elementToParentMatrix.transformX(s.x*a.x-p.left,s.y*a.y-p.top)},currentLocationY:function(pending){var a,p,s,state;return state=this.getState(pending),s=state._currentSize,a=state._axis,p=state._currentPadding,state._elementToParentMatrix.transformY(s.x*a.x-p.left,s.y*a.y-p.top)},currentLocation:function(pending,elementToParentMatrix){var a,p,s,state;return state=this.getState(pending),s=state._currentSize,a=state._axis,p=state._currentPadding,elementToParentMatrix||(elementToParentMatrix=state._elementToParentMatrix),elementToParentMatrix.transform(s.x*a.x-p.left,s.y*a.y-p.top)},currentAngle:function(pending){var state;return state=this.getState(pending),state._elementToParentMatrix.angle},currentScale:function(pending){var state;return state=this.getState(pending),state._elementToParentMatrix.getExactScale()},layout:{getter:function(){throw new Error("get layout is depricated")},setter:function(){throw new Error("set layout is depricated")}},elementToAbsMatrix:{getter:function(pending){var state;return state=this.getState(pending),state._elementToAbsMatrix||(state._elementToAbsMatrix=state._parent?state._elementToParentMatrix.mul(state._parent.getElementToAbsMatrix()):state._elementToParentMatrix)},setter:function(eToA){return this.setElementToParentMatrix(this._parent?eToA.mul(this._parent.getAbsToElementMatrix()):eToA)}}}),Element.getter({currentElementToParentMatrix:function(pending,withLocation,withScale){return withLocation||withScale?(withLocation||(withLocation=this.getCurrentLocation(pending)),this._getElementToParentMatrixForXY(pending,withLocation.x,withLocation.y,withScale)):this.getState(pending)._elementToParentMatrix}}),Element.concreteProperty({cursor:{"default":null,validate:function(v){return null===v||"string"==typeof v}},elementToParentMatrix:{"default":Matrix.identityMatrix,preprocess:function(v){return matrix(v)},setter:function(v){return this._locationLayoutDisabled=!0,matrix(v)}},parent:{"default":null,setter:function(p){return p?p.addChild(this):this.removeFromParent(),p}},children:{"default":initialChildren=[],setter:function(newChildren,oldChildren){var child,childrenHaveRemovedAnimations,firstTimeSettingChildren,j,keepOldChildren,len,len1,len2,len3,n,oldParent,q,r;for(this.__drawPropertiesChanged=!0,newChildren=compactFlatten(newChildren,keepIfRubyTrue),firstTimeSettingChildren=oldChildren===initialChildren,j=0,len=oldChildren.length;j<len;j++)if(child=oldChildren[j],child.getPendingHasToVoidAnimators()){childrenHaveRemovedAnimations=!0;break}if(childrenHaveRemovedAnimations){for(keepOldChildren=[],n=0,len1=oldChildren.length;n<len1;n++)child=oldChildren[n],"done"===child._toVoidAnimationStatus?child._toVoidAnimationStatus=!1:indexOf.call(newChildren,child)>=0?keepOldChildren.push(child):child.getPendingHasToVoidAnimators()&&(child._activateToVoidAnimators(),keepOldChildren.push(child));newChildren=minimumOrderedOverlappingMerge(keepOldChildren,newChildren)}for(q=0,len2=oldChildren.length;q<len2;q++)child=oldChildren[q],indexOf.call(newChildren,child)<0&&child._setParentOnly(null);for(r=0,len3=newChildren.length;r<len3;r++)child=newChildren[r],(oldParent=child.getPendingParent())!==this&&(null!=oldParent&&oldParent._setChildrenOnly(oldParent.pendingChildrenWithout(child)),child._setParentOnly(this));return newChildren}}}),Element.prototype.eachChild=function(f){var child,j,len,ref;for(ref=this._children,j=0,len=ref.length;j<len;j++)child=ref[j],f(child);return this},Element.prototype._toVoidAnimationDone=function(){var animator,prop,ref;ref=this.animators;for(prop in ref)if(animator=ref[prop],null!=animator.toVoid&&null!=animator.active)return;return this._toVoidAnimationStatus="done",this.removeFromParent()},Element.prototype._activateToVoidAnimators=function(){var animator,prop,ref,results1;if(!this._toVoidAnimationStatus&&this.getPendingHasToVoidAnimators()){this._toVoidAnimationStatus="active",ref=this.getPendingAnimators(),results1=[];for(prop in ref)animator=ref[prop],results1.push(animator.startToVoidAnimation(this).then(function(_this){return function(){return _this._toVoidAnimationDone()}}(this)));return results1}},Element.getter({area:function(){throw new Error("depricated - use logicalArea")},logicalArea:function(){var p,size;return p=this.getCurrentPadding(),size=this._currentSize,new Rectangle((-p.left),(-p.top),size.x,size.y)},paddedWidth:function(){return this._currentSize.x-this.getCurrentPadding().getWidth()},paddedHeight:function(){return this._currentSize.y-this.getCurrentPadding().getHeight()},paddedSize:function(){var p,size;return p=this.getCurrentPadding(),size=this._currentSize,point(size.x-p.getWidth(),size.y-p.getHeight())},paddedArea:function(){var p,size;return p=this.getCurrentPadding(),size=this._currentSize,new Rectangle(0,0,size.x-p.getWidth(),size.y-p.getHeight())}}),Element.drawAreaProperty({clip:{"default":!1,preprocess:function(v){return!!v}}}),Element.drawLayoutProperty({visible:{"default":!0,preprocess:function(v){return!!v}}}),Element.concreteProperty({opacity:{"default":1,validate:function(v){return"number"==typeof v}},compositeMode:{"default":"normal",validate:function(v){return"string"==typeof v}},pointerEventPriority:{"default":0,preprocess:function(v){return 0|v}},userProps:{"default":null,validate:function(v){return null==v||isPlainObject(v)}},receivePointerEvents:{"default":"inLogicalArea",validate:function(v){return"never"===v||"inLogicalArea"===v||"inPaddedArea"===v||"passToChildren"===v}}}),Element.concreteProperty({cacheDraw:{"default":!1,validate:function(v){return v===!1||v===!0||"locked"===v||"always"===v||"auto"===v},preprocess:function(v){return v===!0?"auto":v},description:"'auto', true: this element will be cached if it is rendered multiple times and isn't changing 'always': this element will always be cached 'locked': it will be cached once and no matter what changes, the old drawCache will be used for drawing. NOTE: If the element's internal draw properties change, _drawCacheBitmapInvalid is set to true, but the old drawCache is still used. NOTE: If it was 'locked' and then cacheDraw is changed to not 'locked' and not false, and _drawCacheBitmapInvalid is true, the cache will be regenerated."}}),Element.virtualProperty({invisible:{getter:function(pending){return this.getState(pending)._visible},setter:function(v){return this.setVisible(!v)}},hasToVoidAnimators:{getter:function(pending){var animator,animators,prop;if(animators=this.getState(pending)._animators)for(prop in animators)if(animator=animators[prop],animator.hasToVoidAnimation)return!0;return!1}},isMask:{getter:function(pending){return"alphaMask"===this.getState(pending)._compositeMode},setter:function(v){return this.setCompositeMode(v?"alphaMask":"normal")}},opacityPercent:function(pending){var state;return state=this.getState(pending),100*state._opacity|0},hasMask:function(pending){var child,j,len,ref,state;for(state=this.getState(pending),ref=state._children,j=0,len=ref.length;j<len;j++)if(child=ref[j],child.isMask)return!0;return!1},firstMask:function(pending){var child,j,len,ref,state;for(state=this.getState(pending),ref=state._children,j=0,len=ref.length;j<len;j++)if(child=ref[j],child.isMask)return child},sizeAffectsLocation:function(pending){var state;return state=this.getState(pending),0!==state._axis.x||0!==state._axis.y},absoluteAxis:function(pending){var state;return state=this.getState(pending),state._currentSize.mul(state._axis)},sizeForChildren:function(pending){var _currentPadding,_currentSize,ref;return ref=this.getState(pending),_currentPadding=ref._currentPadding,_currentSize=ref._currentSize,_currentPadding.subtractedFromSize(_currentSize)},parentSize:function(){throw new Error("parentSize depricated")},parentSizeForChildren:function(pending){var ref;return(null!=(ref=this.getState(pending)._parent)?ref.getSizeForChildren(pending):void 0)||defaultSize},nextSibling:{getter:function(pending){var parent;return parent=this.getState(pending)._parent,[parent,(null!=parent?parent.getChildren(pending)[parent.getChildIndex(this,pending)+1]:void 0)||null]},setter:function(siblingOrPair){return this.placeRelativeToSibling(siblingOrPair,0)}},prevSibling:{getter:function(pending){var parent;return parent=this.getState(pending)._parent,[parent,(null!=parent?parent.getChildren(pending)[parent.getChildIndex(this,pending)-1]:void 0)||null]},setter:function(siblingOrPair){return this.placeRelativeToSibling(siblingOrPair,1)}},maxXInParentSpace:function(pending){var _currentPadding,_currentSize,_elementToParentMatrix,bottom,left,padding,ref,right,top;return ref=this.getState(pending),_currentPadding=ref._currentPadding,_currentSize=ref._currentSize,_elementToParentMatrix=ref._elementToParentMatrix,padding=_currentPadding,left=-padding.left,top=-padding.top,right=_currentSize.x+left,bottom=_currentSize.y+top,max((_elementToParentMatrix.transformX(left,top),_elementToParentMatrix.transformX(left,bottom),_elementToParentMatrix.transformX(right,top),_elementToParentMatrix.transformX(right,bottom)))},maxYInParentSpace:function(pending){var _currentPadding,_currentSize,_elementToParentMatrix,bottom,left,padding,ref,right,top;return ref=this.getState(pending),_currentPadding=ref._currentPadding,_currentSize=ref._currentSize,_elementToParentMatrix=ref._elementToParentMatrix,padding=_currentPadding,left=-padding.left,top=-padding.top,right=_currentSize.x+left,bottom=_currentSize.y+top,max((_elementToParentMatrix.transformY(left,top),_elementToParentMatrix.transformY(left,bottom),_elementToParentMatrix.transformY(right,top),_elementToParentMatrix.transformY(right,bottom)))},widthInParentSpace:function(pending){var a,b,bottom,c,d,left,padding,right,state,top;return state=this.getState(pending),padding=state._currentPadding,left=-padding.left,top=-padding.top,right=state._currentSize.x+left,bottom=state._currentSize.y+top,a=state._elementToParentMatrix.transformX(left,top),b=state._elementToParentMatrix.transformX(left,bottom),c=state._elementToParentMatrix.transformX(right,top),d=state._elementToParentMatrix.transformX(right,bottom),max(a,b,c,d)-min(a,b,c,d)},heightInParentSpace:function(pending){var a,b,bottom,c,d,left,padding,right,state,top;return state=this.getState(pending),padding=state._currentPadding,left=-padding.left,top=-padding.top,right=state._currentSize.x+left,bottom=state._currentSize.y+top,a=state._elementToParentMatrix.transformY(left,top),b=state._elementToParentMatrix.transformY(left,bottom),c=state._elementToParentMatrix.transformY(right,top),d=state._elementToParentMatrix.transformY(right,bottom),max(a,b,c,d)-min(a,b,c,d)},layoutLocationParentCircular:function(pending){var ref,state;return state=this.getState(pending),!!state._location.layoutIsCircular(null!=(ref=state._parent)?ref.getState(pending)._size:void 0)},layoutSizeParentCircular:function(pending){var ref,state;return state=this.getState(pending),!!state._size.layoutIsCircular(null!=(ref=state._parent)?ref.getState(pending)._size:void 0)},layoutMovesChildren:function(pending){return!!this.getState(pending)._childrenLayout},animate:{"default":null,getter:function(pending){return this._activeAnimator},setter:function(options){if(!this._toVoidAnimationStatus)return this.finishAnimations(),stateEpoch.onNextReady(function(_this){return function(){if(options)return new Animator(_this,options)}}(this))}},preFilteredBaseDrawArea:function(pending){var _currentPadding,_currentSize,h,ref,w,x,y;return ref=this.getState(pending),_currentPadding=ref._currentPadding,_currentSize=ref._currentSize,x=_currentSize.x,y=_currentSize.y,w=_currentPadding.w,h=_currentPadding.h,rect(0,0,x-w,y-h)},baseDrawArea:function(pending){return this.getPreFilteredBaseDrawArea(pending)}}),Element.getter({allChildrenAreUpLayout:function(){return!1}}),Element.getter({coreProps:function(){var j,len,prop,properties,ret;for(properties=[this._axis&&!this.axis.eq(point())?"axis":void 0,this.location.eq(point0)?void 0:"location",this._currentSize?"size":void 0,floatEq0(this.angle)?void 0:"angle",this.scale.eq(point(1,1))?void 0:"scale",this._compositeMode&&"normal"!==this._compositeMode?"compositeMode":void 0,null!=this._opacity&&this._opacity<1?"opacity":void 0,this._invisible?"invisible":void 0,this._layout?"layout":void 0],ret={},j=0,len=properties.length;j<len;j++)prop=properties[j],prop&&(ret[prop]=this[prop]);return ret},requiresParentStagingBitmap:function(){switch(this._compositeMode){case"alphaMask":case"targetAlphaMask":case"destOver":case"sourceIn":case"inverseAlphaMask":return!0;case"add":case"normal":return!1;default:throw new Error("unknown compositeMode: "+this._compositeMode)}},firstChildRequiringParentStagingBitmap:function(){var child,j,len,ref;for(ref=this._children,j=0,len=ref.length;j<len;j++)if(child=ref[j],child.getRequiresParentStagingBitmap())return child},childRequiresParentStagingBitmap:function(){return!!this.getFirstChildRequiringParentStagingBitmap()}}),Element.prototype.inspectParentStructure=function(elementPath){return null==elementPath&&(elementPath=this.elementPath),1===elementPath.length?[elementPath[0].inspectedName,elementPath[0].coreProps]:[elementPath[0].inspectedName,elementPath[0].coreProps,this.inspectParentStructure(elementPath.slice(1))]},Element.prototype.inspectChildrenStructure=function(){var child;return[this.inspectedName,this.coreProps].concat(function(){var j,len,ref,results1;for(ref=this._children,results1=[],j=0,len=ref.length;j<len;j++)child=ref[j],results1.push(child.inspectChildrenStructure());return results1}.call(this))},Element.prototype.inspectRender=function(toBitmapOptions,callback){var childArea;return childArea=toBitmapOptions.area||"parentLogicalArea",this.onNextReady(function(_this){return function(){var child,fn,i,j,joiner,len,ref;for(joiner=new Join,joiner["do"](function(done){return _this.toBitmap(merge(toBitmapOptions,{area:"logicalArea"}),function(bitmap){var outPut;return outPut={},outPut[_this.inspectedName]=[_this.inspectedName,bitmap],done(outPut)})}),ref=_this.children,fn=function(child,i){return joiner["do"](function(done){return child.toBitmap(merge(toBitmapOptions,{area:childArea}),function(bitmap){var ret;return ret={},ret["child"+i]=[child.inspectedName,bitmap],done(ret)})})},i=j=0,len=ref.length;j<len;i=++j)child=ref[i],fn(child,i);return joiner.join(function(results){return callback(merge(results))})}}(this))},Element.prototype.logInspectRender=function(toBitmapOptions){return null==toBitmapOptions&&(toBitmapOptions={}),toBitmapOptions.pixelsPerPoint||(toBitmapOptions.pixelsPerPoint=this.devicePixelsPerPoint),this.inspectRender(toBitmapOptions,function(_this){return function(results){return _this.log(results)}}(this))},Element.prototype.abortAnimations=function(){if(this._activeAnimator)return this._activeAnimator.abort()},Element.prototype.finishAnimations=function(){if(this._activeAnimator)return this._activeAnimator.finish()},Element.prototype.startChildAddedAnimation=function(child){var animation;if(animation=child.getPendingAddedAnimation()||this._propertiesInitialized&&this.getPendingChildAddedAnimation())return child.animate=animation},Element.prototype._useStagingBitmap=function(){return(this.getHasChildren()||this.getIsMask())&&("normal"!==this._compositeMode||this._opacity<1||this.getChildRequiresParentStagingBitmap())},Element.prototype._drawChildren=function(target,elementToTargetMatrix,usingStagingBitmap){var child,j,len,ref;for(ref=this.children,j=0,len=ref.length;j<len;j++)child=ref[j],child.visible&&child.draw(target,child.getElementToTargetMatrix(elementToTargetMatrix));return this.children},Element.prototype._renderStagingBitmap=function(targetSpaceDrawArea,elementToTargetMatrix,stagingBitmap){return targetSpaceDrawArea=targetSpaceDrawArea.roundOut(),targetSpaceDrawArea.getLocationIsZero()||(elementToTargetMatrix=elementToTargetMatrix.translateXY(-targetSpaceDrawArea.x,-targetSpaceDrawArea.y)),stats.stagingBitmapsCreated++,stagingBitmap||(stagingBitmap=this.bitmapFactory.newBitmap(targetSpaceDrawArea.size)),this._currentDrawTarget=stagingBitmap,this._currentToTargetMatrix=elementToTargetMatrix,this.getHasCustomClipping()?this._clipDraw(null,stagingBitmap,elementToTargetMatrix):this._drawChildren(stagingBitmap,elementToTargetMatrix,!0),stagingBitmap},Element.prototype._accountForOverdraw=function(proposedTargetSpaceDrawArea,elementToTargetMatrix){var child,j,len,ref;for(ref=this.children,j=0,len=ref.length;j<len;j++)child=ref[j],child.overDraw&&(proposedTargetSpaceDrawArea=child.overDraw(proposedTargetSpaceDrawArea,elementToTargetMatrix));return proposedTargetSpaceDrawArea},Element.prototype._drawWithStagingBitmap=function(targetSpaceDrawArea,target,elementToTargetMatrix){var stagingBitmap;return targetSpaceDrawArea=this._accountForOverdraw(targetSpaceDrawArea,elementToTargetMatrix),stagingBitmap=this._renderStagingBitmap(targetSpaceDrawArea,elementToTargetMatrix),target.drawBitmap(targetSpaceDrawArea.locationMatrix,stagingBitmap,{compositeMode:this._compositeMode,opacity:this.opacity})},Element.prototype._clippedDrawWithStagingBitmapInElementSpace=function(target,elementToTargetMatrix){var m,s,stagingBitmap;return s=elementToTargetMatrix.getExactScale(),stagingBitmap=this._renderStagingBitmap(rect(0,0,this._currentSize.x*s.x,this._currentSize.y*s.y),m=Matrix.scale(s)),target.drawBitmap(m.inv.mul(elementToTargetMatrix),stagingBitmap,{compositeMode:this._compositeMode,opacity:this.opacity})},Element.prototype._fullDraw=function(targetSpaceDrawArea,target,elementToTargetMatrix){return this._clip?this._clipDraw(targetSpaceDrawArea,target,elementToTargetMatrix):this._useStagingBitmap()?this._drawWithStagingBitmap(targetSpaceDrawArea,target,elementToTargetMatrix):this._drawChildren(target,elementToTargetMatrix)},Element.prototype._clipDraw=function(clipArea,target,elementToTargetMatrix){return!elementToTargetMatrix.getIsTranslateAndScaleOnly()||this._useStagingBitmap()?this._clippedDrawWithStagingBitmapInElementSpace(target,elementToTargetMatrix):target.clippedTo(clipArea,function(_this){return function(){return _this._drawChildren(target,elementToTargetMatrix)}}(this))},Element.getter({hasCustomClipping:function(){return!1}}),Element.prototype.draw=function(target,elementToTargetMatrix){var targetSpaceDrawArea;stats.elementsDrawn++;try{if(this.opacity<1/256)return;if(this._currentDrawTarget=target,this._currentToTargetMatrix=elementToTargetMatrix,targetSpaceDrawArea=this.drawAreaIn(elementToTargetMatrix).intersection(target.getClippingArea()),targetSpaceDrawArea.area>0)return this._cachedFullDraw(targetSpaceDrawArea,target,elementToTargetMatrix)}finally{this._currentDrawTarget=this._currentToTargetMatrix=null}},Element.prototype.preCache=function(){var child,j,len,ref,sum;if(sum=0,this.getCacheDraw())this._drawCacheBitmap||(this._generateDrawCache(),sum++);else for(ref=this.getChildren(),j=0,len=ref.length;j<len;j++)child=ref[j],sum+=child.preCache();return sum},Element.prototype.whenCached=function(callback){return this.getCanvasElement().queueDrawEpochPreprocessor(function(_this){return function(){return _this.preCache(),drawEpoch.onNextReady(callback)}}(this))},Element.prototype._initDrawCache=function(){return this._drawCacheBitmap=null,this._drawCacheBitmapInvalid=!1,this._elementDrawChangedThisFrame=!0,this._drawCacheToElementMatrix=null,this._uncachableDrawCount=0,this._cachableDrawCount=0},Element.prototype._drawPropertiesChanged=function(){return this._drawCacheBitmap&&this._clearDrawCache(),this._elementDrawChangedThisFrame=!0},Element.prototype._elementToParentMatrixChanged=function(oldElementToParentMatrix){},Element.prototype._needsRedrawing=function(descendant){var ref;if(null==descendant&&(descendant=this),this._drawCacheBitmap&&this._clearDrawCache(),this._elementDrawChangedThisFrame=!0,this.getPendingVisible()&&this.getPendingOpacity()>1/512)return null!=(ref=this.getPendingParent())?ref._needsRedrawing(descendant):void 0},Element.prototype.__clearDrawCacheCallbackFromDrawCacheManager=function(){return this._drawCacheBitmap=null},Element.prototype._clearDrawCache=function(force){return"locked"===this._cacheDraw?void(this._drawCacheBitmapInvalid=!0):(this._drawCacheBitmap&&drawCacheManager.doneWithCacheBitmap(this),null)},Element.prototype._releaseAllCacheBitmaps=function(){var child,count,j,len,ref;for(count=0,this._drawCacheBitmap&&(drawCacheManager.doneWithCacheBitmap(this),count++),ref=this._children,j=0,len=ref.length;j<len;j++)child=ref[j],count+=child._releaseAllCacheBitmaps();return count},Element._drawCachingEnabled=drawCachingEnabled,Element.prototype._generateDrawCache=function(){var _drawCachingEnabled,cacheDrawArea,drawArea,pixelsPerPoint;if(drawArea=this.getElementSpaceDrawArea().roundOut(),!(drawArea.getArea()<=0||(pixelsPerPoint=this.getDevicePixelsPerPoint(),cacheDrawArea=drawArea.mul(pixelsPerPoint),cacheDrawArea.size.area>3145728)))return this._clearDrawCache(),this._drawCacheToElementMatrix=Matrix.translateXY(-drawArea.x,-drawArea.y).scale(pixelsPerPoint).inv,cacheAggressively||(_drawCachingEnabled=Element._drawCachingEnabled,Element._drawCachingEnabled=!1),globalEpochCycle.logEvent("generateDrawCache","same-id"),this._drawCacheBitmap=this._renderStagingBitmap(cacheDrawArea,Matrix.scale(pixelsPerPoint),drawCacheManager.allocateCacheBitmap(this,cacheDrawArea.size)),this._drawCacheBitmapInvalid=!1,cacheAggressively?void 0:Element._drawCachingEnabled=_drawCachingEnabled},Element.prototype._generateDrawCacheIfNeeded=function(){var _cacheDraw;return _cacheDraw=this._cacheDraw,_cacheDraw&&this._useStagingBitmap()&&this._elementDrawChangedThisFrame?(this._elementDrawChangedThisFrame=!1,this._generateDrawCache(),!0):_cacheDraw?("locked"!==_cacheDraw||!this._drawCacheBitmap)&&(this._elementDrawChangedThisFrame&&"auto"===_cacheDraw?(this._uncachableDrawCount++,this._elementDrawChangedThisFrame=!1,!1):(this._cachableDrawCount++,(!this._drawCacheBitmap||this._drawCacheBitmapInvalid)&&Element._drawCachingEnabled&&this.getCacheable()&&("auto"!==_cacheDraw||this._cachableDrawCount>=this._uncachableDrawCount)?(this._generateDrawCache(),!0):void 0)):(this._drawCacheBitmap&&this._clearDrawCache(),!1)},Element.prototype._cachedFullDraw=function(targetSpaceDrawArea,target,elementToTargetMatrix){var drawCacheToTargetMatrix;return this._generateDrawCacheIfNeeded(),this._drawCacheBitmap?(drawCacheManager.useDrawCache(this),drawCacheToTargetMatrix=this._drawCacheToElementMatrix.mul(elementToTargetMatrix),target.drawBitmap(drawCacheToTargetMatrix,this._drawCacheBitmap,{opacity:this.opacity,compositeMode:this.compositeMode})):this._fullDraw(targetSpaceDrawArea,target,elementToTargetMatrix)},Element.getter({cacheable:function(){return!0}}),Element.prototype.toBitmap=function(options,callback){if(null==options&&(options={}),callback&&console.error("callback DEPRICATED; toBitmap returns Promise now"),options.elementSpaceDrawArea)throw new Error("elementSpaceDrawArea option depricated");return new Promise(function(_this){return function(resolve){return stateEpoch.onNextReady(function(){var results;return resolve(results=_this.toBitmapSync(options)),"function"==typeof callback?callback(results.bitmap,results.elementToBitmapMatrix):void 0})}}(this))},Element.prototype.toBitmapSync=function(options){var areaOptions,backgroundColor,bitmap,bitmapFactory,drawArea,elementToBitmapMatrix,elementToDrawAreaMatrix,mode,oldBitmapFactory,pixelsPerPoint,ratio,scale,size;return null==options&&(options={}),options.elementToDrawAreaMatrix&&!options.area&&(options.area="targetDrawArea"),areaOptions=function(){switch(options.area||"drawArea"){case"logicalArea":return{drawArea:this.logicalArea,elementToDrawAreaMatrix:identityMatrix};case"paddedArea":return{drawArea:this.paddedArea,elementToDrawAreaMatrix:identityMatrix};case"drawArea":return{drawArea:this.elementSpaceDrawArea,elementToDrawAreaMatrix:identityMatrix};case"parentLogicalArea":return{drawArea:this.parent.logicalArea,elementToDrawAreaMatrix:this.elementToParentMatrix};case"parentPaddedArea":return{drawArea:this.parent.paddedArea,elementToDrawAreaMatrix:this.elementToParentMatrix};case"parentDrawArea":return{drawArea:this.parent.elementSpaceDrawArea,elementToDrawAreaMatrix:this.elementToParentMatrix};case"targetDrawArea":return{drawArea:this.drawAreaIn(options.elementToDrawAreaMatrix||identityMatrix),elementToDrawAreaMatrix:identityMatrix};default:throw new Error("invalid area option: "+options.area)}}.call(this),options=merge(areaOptions,options),drawArea=options.drawArea,elementToDrawAreaMatrix=options.elementToDrawAreaMatrix,size=options.size,mode=options.mode,bitmapFactory=options.bitmapFactory,pixelsPerPoint=options.pixelsPerPoint,backgroundColor=options.backgroundColor,pixelsPerPoint||(pixelsPerPoint=1),mode||(mode="fit"),size=point(size||drawArea.size).mul(pixelsPerPoint).ceil(),ratio=size.div(drawArea.size),"zoom"===mode?scale=ratio.max():(scale=ratio.min(),size=drawArea.size.mul(scale).ceil()),elementToBitmapMatrix=elementToDrawAreaMatrix.mul(Matrix.translate(drawArea.cc.neg).scale(scale).translate(size.cc)),oldBitmapFactory=this._bitmapFactory,this._bitmapFactory=bitmapFactory||this.bitmapFactory,bitmap=this.bitmapFactory.newBitmap(size),bitmap.pixelsPerPoint=pixelsPerPoint,backgroundColor&&bitmap.clear(backgroundColor),this.draw(bitmap,elementToBitmapMatrix),this._bitmapFactory=oldBitmapFactory,{bitmap:bitmap,elementToBitmapMatrix:elementToBitmapMatrix}},Element.prototype.logBitmap=function(options){return null==options&&(options={}),options.pixelsPerPoint||(options.pixelsPerPoint=this.devicePixelsPerPoint),this.toBitmap(options).then(function(_this){return function(arg){var bitmap;return bitmap=arg.bitmap,_this.log({size:_this.currentSize,location:_this.currentLocation,size:_this.size,location:_this.location,elementToParentMatrix:_this.elementToParentMatrix,bitmap:bitmap})}}(this))},Element.prototype.fillShape=function(target,elementToTargetMatrix,options){null==options&&(options={})},Element.prototype.strokeShape=function(target,elementToTargetMatrix,options){null==options&&(options={})},Element.prototype.compositingChanged=function(){return this.getOpacityChanged()||this.getCompositeModeChanged()},Element.getter({redrawRequired:function(){var _pendingState;return _pendingState=this._pendingState,this.__drawPropertiesChanged||this._opacity!==_pendingState._opacity||this._compositeMode!==_pendingState._compositeMode||this._parent!==_pendingState._parent||!this._currentSize.eq(_pendingState._currentSize)||!this._elementToParentMatrix.eq(_pendingState._elementToParentMatrix)}}),Element.prototype._setChildrenOnly=function(c){return this._pendingState._children=c,this._elementChanged(),c},Element.prototype._setParentOnly=function(p){return this._pendingState._parent=p,this._elementChanged(),p},Element.prototype._getElementToParentMatrixForXY=function(pending,x,y,withScale,withParentSize){var _angle,_axis,_currentPadding,_currentSize,_elementToParentMatrix,_parent,_scale,axis,axisXInElementSpace,axisYInElementSpace,currentX,currentY,left,parentSize,ref,size,state,top;return ref=state=this.getState(pending),_currentPadding=ref._currentPadding,_currentSize=ref._currentSize,_axis=ref._axis,_scale=ref._scale,_angle=ref._angle,_elementToParentMatrix=ref._elementToParentMatrix,null!=withScale&&(_scale=withScale),isFunction(_scale)&&(_parent=state._parent,parentSize=withParentSize||_parent.getState(pending)._currentSize,
_scale=_scale(parentSize,_currentSize)),_scale=point(_scale),left=_currentPadding.left,top=_currentPadding.top,size=_currentSize,axis=_axis,axisXInElementSpace=axis.x*size.x-left,axisYInElementSpace=axis.y*size.y-top,this._locationLayoutDisabled?(currentX=_elementToParentMatrix.transformX(axisXInElementSpace,axisYInElementSpace),currentY=_elementToParentMatrix.transformY(axisXInElementSpace,axisYInElementSpace),_elementToParentMatrix.translate(x-currentX,y-currentY)):(new Matrix).translateXY(-axisXInElementSpace,-axisYInElementSpace,!0).scale(_scale,!0).rotate(_angle,!0).translateXY(x,y,!0)},Element.prototype._setElementToParentMatrixFromLayout=function(l,parentSize){return this._setElementToParentMatrixFromLayoutXY(l.x,l.y,parentSize)},Element.prototype._setElementToParentMatrixFromLayoutXY=function(x,y,parentSize){var e2p;if(!this._locationLayoutDisabled)return e2p=this._getElementToParentMatrixForXY(!0,x,y,null,parentSize),this._pendingState._elementToParentMatrix.eq(e2p)||(this._pendingState._elementToParentMatrix=e2p,this._elementChanged()),this},Element.prototype._sizeDirectlyEffectsDrawing=function(){var c;return(c=this.getPendingChildren())&&0===c.length||this.getPendingClip()},Element.prototype._setSizeFromLayout=function(s){var x,y;if(x=s.x,y=s.y,!s.eq(this.getPendingCurrentSize()))return this._pendingState._currentSize=s,this._sizeDirectlyEffectsDrawing()&&(this.__drawPropertiesChanged=!0),this._elementChanged(),s},Element.prototype._setPaddingFromLayout=function(p){return this._pendingState._currentPadding=p,this._elementChanged(),p},Element.prototype._setMarginFromLayout=function(m){return this._pendingState._currentMargin=m,this._elementChanged(),m},Element.prototype._setElementToParentMatrixWithoutChangingLocation=function(m){var ax,axis,ay,o,size,x1,x2,y1,y2;return o=this._pendingState,size=o._currentSize,axis=o._axis,ax=size.x*axis.x,ay=size.y*axis.y,x1=o._elementToParentMatrix.transformX(ax,ay),y1=o._elementToParentMatrix.transformY(ax,ay),x2=m.transformX(ax,ay),y2=m.transformY(ax,ay),this.setElementToParentMatrix(m.translateXY(x1-x2,y1-y2))},Element.prototype.elementToElementMatrix=function(o){return console.error("depricated: elementToElementMatrix - use getElementToElementMatrix"),o===this?matrix():this.getElementToAbsMatrix().mul(o.getAbsToElementMatrix())},Element.prototype.elementToTargetMatrix=function(parentToTargetMatrix){return console.error("depricated: elementToTargetMatrix - use getElementToTargetMatrix"),this._elementToParentMatrix.mul(parentToTargetMatrix)},Element.prototype.getElementToElementMatrix=function(o){return o===this?matrix():this.getElementToAbsMatrix().mul(o.getAbsToElementMatrix())},Element.prototype.getElementToTargetMatrix=function(parentToTargetMatrix){return this._elementToParentMatrix.mul(parentToTargetMatrix)},Element.prototype.transformToAncestorSpace=function(v,ancestor){var element,x,x1,y,y1;for(x=v.x,y=v.y,element=this;element;)if(x1=element._elementToParentMatrix.transformX(x,y),y1=element._elementToParentMatrix.transformY(x,y),x=x1,y=y1,element=element.parent,element===ancestor)return point(x,y);return null},Element.prototype.transformToAncestorSpaceX=function(v,ancestor){var element,x,y;for(isPoint(v)?(x=v.x,y=v.y):(x=v,y=0),element=this;element;)if(x=element._elementToParentMatrix.transformX(x,y),y=element._elementToParentMatrix.transformY(x,y),element=element.parent,element===ancestor)return x;return null},Element.prototype.transformToAncestorSpaceY=function(v,ancestor){var element,x,y;for(isPoint(v)?(x=v.x,y=v.y):(x=0,y=v),element=this;element;)if(x=element._elementToParentMatrix.transformX(x,y),y=element._elementToParentMatrix.transformY(x,y),element=element.parent,element===ancestor)return y;return null},Element.prototype.pointInsideChildren=function(p){return!(!this._visible||!this.childUnderPoint(this.getParentToElementMatrix().transform(p)))},Element.prototype.pointInside=function(p){var h,p2EM,padding,size,w,x,y;return this._visible&&!this.getIsMask()&&function(){switch(this._receivePointerEvents){case"never":return!1;case"passToChildren":return this.pointInsideChildren(p);case"inPaddedArea":return p2EM=this.getParentToElementMatrix(),size=this._currentSize,padding=this._currentPadding,x=p2EM.transformX(p.x,p.y),y=p2EM.transformY(p.x,p.y),w=size.x-padding.getWidth(),h=size.y-padding.getHeight(),x>=0&&y>=0&&x<w&&y<h;case"inLogicalArea":return p2EM=this.getParentToElementMatrix(),size=this._currentSize,padding=this._currentPadding,x=p2EM.transformX(p.x,p.y),y=p2EM.transformY(p.x,p.y),x+=padding.left,y+=padding.top,w=size.x,h=size.y,x>=0&&y>=0&&x<w&&y<h}}.call(this)},Element.prototype.childUnderPoint=function(pointInElementSpace){var child,j,ref;for(ref=this._children,j=ref.length-1;j>=0;j+=-1)if(child=ref[j],child.pointInside(pointInElementSpace))return child;return!1},Element.prototype.drawAreaIn=function(elementToTargetMatrix){return elementToTargetMatrix.transformBoundingRect(this.getElementSpaceDrawArea())},Element.prototype._computeElementSpaceDrawArea=function(upToChild){var child,children,elementSpaceChildDrawArea,elementSpaceDrawArea,j,len;if((children=this.getPendingChildren()).length>0&&!this.getPendingClip()){for(elementSpaceDrawArea=rect(),j=0,len=children.length;j<len&&(child=children[j],child!==upToChild);j++)switch(elementSpaceChildDrawArea=child.getParentSpaceDrawArea(),child.compositeMode){case"alphaMask":elementSpaceChildDrawArea.intersectInto(elementSpaceDrawArea);break;case"sourceIn":case"targetAlphaMask":case"inverseAlphaMask":break;case"normal":case"add":case"replace":case"destOver":elementSpaceChildDrawArea.unionInto(elementSpaceDrawArea);break;default:throw new Error("unknown compositeMode:"+child.compositeMode)}return elementSpaceDrawArea}return this.getPendingBaseDrawArea()},Element.prototype._drawAreaChanged=function(){var p;if(this._elementSpaceDrawArea&&(this._elementSpaceDrawArea=null,p=this.getPendingParent()))return p._childsDrawAreaChanged()},Element.prototype._childsDrawAreaChanged=function(){if(!this.getPendingClip())return this._drawAreaChanged()},Element.prototype.getChildIndex=function(child,pending){return this.getChildren(pending).indexOf(child)},Element.prototype.find=function(pattern,arg,matches){var child,findAll,functionResult,j,len,matchAgainst,matchFound,ref,ref1,usedFunction,verbose;if(ref=null!=arg?arg:{},findAll=ref.findAll,verbose=ref.verbose,null==matches&&(matches=[]),matchFound=(usedFunction=isFunction(pattern))?!!(functionResult=pattern(this)):(matchAgainst=""+this.pathStringWithNames+(this.key?":"+this.key:"")+":"+this.objectId,matchAgainst.match(pattern)),matchFound&&(verbose&&this.log(usedFunction?{found:this.inspectedNameWithoutIds,functionResult:functionResult}:{found:this.inspectedNameWithoutIds,pattern:pattern,matched:matchAgainst}),matches.push(this)),!matchFound||findAll)for(ref1=this._children,j=0,len=ref1.length;j<len;j++)child=ref1[j],child.find(pattern,arguments[1],matches);return matches},Element.prototype.findElementsWithKey=function(key){return this.find(function(e){return e.key===key})},Element.prototype.findElementWithKey=function(key){var first;return first=this.findElementsWithKey(key)[0]},Element.getter({elementPath:function(){return this.parent?this.parent.elementPath+" > "+this.classPathNameAndId:this.classPathNameAndId},elementPathWithoutIds:function(){return this.parent?this.parent.elementPath+" > "+this.classPathNameAndId:this.classPathNameAndId},topMostParent:function(){return this._parent?this._parent.topMostParent||this._parent:null},hasChildren:function(){return this._children.length>0},reverseChildren:function(){return this._children.slice().reverse()},childrenMap:function(){return(new Map).tap(function(_this){return function(map){var child,j,len,ref,results1;for(ref=_this._children,results1=[],j=0,len=ref.length;j<len;j++)child=ref[j],results1.push(map.set(child,!0));return results1}}(this))},elementPath:function(){var elementPath;return this.parent?(elementPath=this.parent.elementPath,elementPath.push(this),elementPath):[this]},pathIdString:function(){var p;return function(){var j,len,ref,results1;for(ref=this.elementPath,results1=[],j=0,len=ref.length;j<len;j++)p=ref[j],results1.push(p.className+p.objectId);return results1}.call(this).join("/")},pathString:function(){var p;return function(){var j,len,ref,results1;for(ref=this.elementPath,results1=[],j=0,len=ref.length;j<len;j++)p=ref[j],results1.push(p.className);return results1}.call(this).join("/")},pathStringWithNames:function(){var p;return function(){var j,len,ref,results1;for(ref=this.elementPath,results1=[],j=0,len=ref.length;j<len;j++)p=ref[j],results1.push(p.inspectedNameWithoutIds);return results1}.call(this).join("/")},fullPathString:function(){var p;return function(){var j,len,ref,results1;for(ref=this.elementPath,results1=[],j=0,len=ref.length;j<len;j++)p=ref[j],results1.push(p.classPathNameAndId);return results1}.call(this).join("/")},childrenInspectedNames:function(){var c,j,len,ref,results1;for(ref=this._children,results1=[],j=0,len=ref.length;j<len;j++)c=ref[j],results1.push(c.inspectedName);return results1},inspectedObjects:function(){var child;return[inspectedObjectLiteral(this.inspectedName),this.minimalProps].concat(function(){var j,len,ref,results1;for(ref=this.children,results1=[],j=0,len=ref.length;j<len;j++)child=ref[j],results1.push(child.inspectedObjects);return results1}.call(this))}}),childrenWithout=function(children,child){var index;return children=children.slice(),(index=children.indexOf(child))>=0&&remove(children,index,1),children},Element.prototype.childrenWithout=function(child){return childrenWithout(this._children,child)},Element.prototype.pendingChildrenWithout=function(child){return childrenWithout(this.getPendingChildren(),child)},Element.prototype.insertChild=function(child,index){var children;return children=this.pendingChildrenWithout(child),index<0&&(index=children.length+1+index),this.setChildren(insert(children,index,child)),child},Element.prototype.addChild=function(child){return this.insertChild(child,-1)},Element.prototype.addChildBelow=function(child,belowChild){var children;return belowChild!==child&&indexOf.call(this.getPendingChildren(),belowChild)>=0?(children=this.pendingChildrenWithout(child),this.setChildren(insert(children,children.indexOf(belowChild),child)),child):this.insertChild(child,0)},Element.prototype.addChildAbove=function(child,aboveChild){var children;return aboveChild!==child&&indexOf.call(this.getPendingChildren(),aboveChild)>=0?(children=this.pendingChildrenWithout(child),this.setChildren(insert(children,children.indexOf(aboveChild)+1,child)),child):this.insertChild(child,-1)},Element.prototype.addBelow=function(sibling){return sibling.getPendingParent().addChildBelow(this,sibling)},Element.prototype.addAbove=function(sibling){return sibling.getPendingParent().addChildAbove(this,sibling)},Element.prototype.addChildBelowMask=function(child){return this.addChildBelow(child,this.getPendingFirstMask())},Element.prototype.placeRelativeToSibling=function(siblingOrPair,offset){var children,parent,sibling;if(siblingOrPair&&siblingOrPair.constructor===Array){if(2!==siblingOrPair.length)throw new Error("If array is provided, it must be formated: [parent, sibling]");if(parent=siblingOrPair[0],sibling=siblingOrPair[1],sibling&&sibling.getPendingParent()!==parent)throw new Error("Sibling's current parent does not match specified parent. Did the sibling move?")}else sibling=siblingOrPair,parent=(null!=sibling?sibling.getPendingParent():void 0)||this.getPendingParent();if(!parent){if(sibling)throw new Error("Can't place next to sibling. Sibling is an orphan.");return this.setParent(null)}return children=parent.pendingChildrenWithout(this),parent.setChildren(insert(children,children.indexOf(sibling)+offset,this))},Element.prototype.removeChild=function(child){if(child)return this.setChildren(this.pendingChildrenWithout(child)),child},Element.prototype.releaseChildren=function(){return this.setChildren([])},Element.prototype.removeFromParent=function(){var p,ref;return null!=(ref=p=this.getPendingParent())&&ref.removeChild(this),p},Element.prototype.moveChildToFront=function(child){return this.insertChild(child,-1)},Element.prototype.moveChildToBack=function(child){return this.insertChild(child,0)},Element.prototype.moveToFront=function(){var ref;return null!=(ref=this.getPendingParent())?ref.insertChild(this,-1):void 0},Element.prototype.moveToBack=function(){var ref;return null!=(ref=this.getPendingParent())?ref.insertChild(this,0):void 0},Element.prototype.moveBelow=function(sibling){var ref;return null!=sibling&&null!=(ref=sibling.getPendingParent())?ref.addChildBelow(this,sibling):void 0},Element.prototype.moveBelowMask=function(){var ref;return null!=(ref=this.getPendingParent())?ref.addChildBelowMask(this):void 0},Element.prototype._sizeChanged=function(newSize,oldSize){return this.queueEvent("sizeChanged",{oldSize:oldSize,size:newSize})},Element.prototype._applyStateChanges=function(){var oldElementToParentMatrix,releaseCount;if(this.getCurrentSizeChanged()&&this._sizeChanged(this._pendingState._currentSize,this._currentSize),this.getElementToParentMatrixChanged()&&(oldElementToParentMatrix=this._elementToParentMatrix),Element.__super__._applyStateChanges.apply(this,arguments),this.__drawAreaChanged&&this._drawAreaChanged(),this.__drawPropertiesChanged&&this._drawPropertiesChanged(),oldElementToParentMatrix&&this._elementToParentMatrixChanged(oldElementToParentMatrix),this.__drawAreaChanged=!1,this.__redrawRequired=!1,this.__drawPropertiesChanged=!1,this.__layoutPropertiesChanged=!1,!this._parent)return releaseCount=this._releaseAllCacheBitmaps()},Element.prototype._layoutPropertiesChanged=function(){},Element.prototype._updateDrawArea=function(){},Element.prototype._layoutSize=function(parentSize,childrenSize){return this.getPendingSize().layout(parentSize,childrenSize)},Element.prototype._layoutSizeForChildren=function(parentSize,childrenSize){var out,sizeLayout,x,y;return sizeLayout=this.getPendingSize(),out=sizeLayout.layout(parentSize,childrenSize),sizeLayout.getChildrenRelative()?(x=out.x,y=out.y,out["with"](isInfiniteResult(x)?parentSize.x:x,isInfiniteResult(y)?parentSize.y:y)):out},Element.prototype._layoutLocation=function(parentSize){return this.getPendingLocation().layout(parentSize)},Element.prototype._layoutLocationX=function(parentSize){return this.getPendingLocation().layoutX(parentSize)},Element.prototype._layoutLocationY=function(parentSize){return this.getPendingLocation().layoutY(parentSize)},Element.prototype._sizeForChildren=function(size){return this.getPendingCurrentPadding().subtractedFromSize(size)},Element.prototype.depth=function(){return this.parent?this.parent.depth()+1:1},Element.getter({focused:function(){var c;return!(!(c=this.getCanvasElement())||!c.isFocused(this))}}),Element.prototype._focus=function(){var ref;return null!=(ref=this.getCanvasElement())?ref.focusElement(this):void 0},Element.prototype._blur=function(){var ref;if(this.focused)return null!=(ref=this.getCanvasElement())?ref.focusElement(this.parent):void 0},Element.prototype.focus=function(){var ref;return null!=(ref=this.getCanvasElement())&&ref.focusCanvas(),this._focus()},Element.prototype.blur=function(){return this._blur()},Element.prototype.capturePointerEvents=function(){var ref;return null!=(ref=this.getCanvasElement())?ref.capturePointerEvents(this):void 0},Element.getter({pointerEventsCaptured:function(){var ref;return null!=(ref=this.getCanvasElement())?ref.pointerEventsCapturedBy(this):void 0}}),Element}(ElementBase))},function(module,exports,__webpack_require__){var Animator,BaseObject,Color,EasingFunctions,Event,EventEpoch,EventedMixin,Matrix,Point,Rectangle,Transaction,currentSecond,eventEpoch,inspect,inspectLean,log,matrix,max,min,point,rect,ref,ref1,ref2,rgbColor,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),currentSecond=ref.currentSecond,min=ref.min,max=ref.max,Transaction=ref.Transaction,inspect=ref.inspect,inspectLean=ref.inspectLean,log=ref.log,BaseObject=ref.BaseObject,ref1=__webpack_require__(125),rgbColor=ref1.rgbColor,Color=ref1.Color,point=ref1.point,Point=ref1.Point,rect=ref1.rect,Rectangle=ref1.Rectangle,matrix=ref1.matrix,Matrix=ref1.Matrix,ref2=__webpack_require__(168),Event=ref2.Event,EventEpoch=ref2.EventEpoch,EventedMixin=ref2.EventedMixin,EasingFunctions=__webpack_require__(186),eventEpoch=EventEpoch.eventEpoch,module.exports=Animator=function(superClass){function Animator(objects,options){if(null==options&&(options={}),Animator.__super__.constructor.apply(this,arguments),this.transaction=new Transaction(objects,options),this.fixedStep=options.fixedStep,this.fixedStep&&this.fixedStep<=0)throw new Error("fixedStep must be > 0");this.duration=options.duration||.25,this.f=options.f,this.f?"string"==typeof this.f?(this.fName=this.f,this.f=EasingFunctions[this.f]):this.fName="custom":this.f=EasingFunctions[this.fName="easeInQuad"],options.on&&this.on(options.on),this.then=options.then,this.start()}return extend(Animator,superClass),Animator.animate=function(objects,options){return new Animator(objects,options)},Animator.prototype.inspect=function(inspector){return inspector.put(this.classPathName),inspector.put(" duration: "+this.duration+", function: "+this.fName),this.activated&&inspector.put(", activated, frames: "+this.frames+", pos: "+this.pos),this.aborted&&inspector.put(", aborted"),this.deactivated&&inspector.put(", deactivated"),this.transaction.inspectParts(inspector)},Animator.prototype.abort=function(){if(!this.aborted)return eventEpoch.logEvent("animationAborted",this.getObjectId()),this.aborted=!0,this.deactivateAnimation(),this.queueEvent("abort")},Animator.prototype.start=function(){return this.transaction.saveFromValues(),this.transaction.saveToValues(),this.transaction.optimize(),this.updateValues(0),this.activateAnimation(),this.frames=0,eventEpoch.queue(function(_this){return function(){if(!_this.deactivated)return _this.updateValues(0),eventEpoch.logEvent("animation",_this.getObjectId()),_this.startTime=currentSecond(),_this.queueEvent("start"),eventEpoch.queue(function(){return _this.advance()})}}(this))},Animator.prototype.finish=function(){return this.updateValues(1),this.done()},Animator.getter({pos:function(){return this.fixedStep?this.frames*this.fixedStep:(this.now-this.startTime)/this.duration},objects:function(){return this.transaction.objects}}),Animator.prototype.activateAnimation=function(){var animatedObject,i,len,ref3,results;if(!this.activated){for(this.activated=!0,ref3=this.objects,results=[],i=0,len=ref3.length;i<len;i++)animatedObject=ref3[i],animatedObject._activeAnimator&&animatedObject._activeAnimator.abort(),results.push(animatedObject._activeAnimator=this);return results}},Animator.prototype.deactivateAnimation=function(){var animatedObject,i,len,ref3,results;if(!this.deactivated){for(this.deactivated=!0,ref3=this.objects,results=[],i=0,len=ref3.length;i<len;i++)animatedObject=ref3[i],animatedObject._activeAnimator!==this&&(this.log("INTERNAL WARNING - animatedObject._activeAnimator should == @"),this.log("  animatedObject: ("+inspect(animatedObject,1)),this.log("  animatedObject._activeAnimator: ("+inspect(animatedObject._activeAnimator,1)),this.log("  @: ("+inspect(this,1))),results.push(delete animatedObject._activeAnimator);return results}},Animator.prototype.advance=function(){var pos;if(!this.aborted&&!this.deactivated)return this.frames++,this.now=currentSecond(),pos=this.pos,pos<1?(this.updateValues(this.f(pos)),eventEpoch.queue(function(_this){return function(){return _this.advance()}}(this))):(this.updateValues(1),this.done())},Animator.prototype.done=function(){if(!this.aborted)return eventEpoch.logEvent("animation",this.getObjectId()),this.deactivateAnimation(),this.queueEvent("done"),this.nextAnimation()},Animator.prototype.nextAnimation=function(){var objects;if(this.then)return objects=this.then.objects||this.then.object||this.objects,new Animator(objects,this.then)},Animator.prototype.updateValues=function(p){return this.transaction.interpolate(p),this.queueEvent("update",{p:p})},Animator}(EventedMixin(BaseObject))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=function(_this){return function(){var EasingFunctions;return EasingFunctions=function(){function EasingFunctions(){}return EasingFunctions.linear=function(t){return t},EasingFunctions.easeOutQuad=function(t){return t*t},EasingFunctions.easeInQuad=function(t){return-t*(t-2)},EasingFunctions.easeBothQuad=function(t){return t<.5?.5*EasingFunctions.easeOutQuad(2*t):.5*EasingFunctions.easeInQuad(2*t-1)+.5},EasingFunctions.easeOutCubic=function(t){return t*t*t},EasingFunctions.easeInCubic=function(t){return(t-=1)*t*t+1},EasingFunctions.easeBothCubic=function(t){return t<.5?.5*EasingFunctions.easeOutCubic(2*t):.5*EasingFunctions.easeInCubic(2*t-1)+.5},EasingFunctions.easeOutQuart=function(t){return t*t*t*t},EasingFunctions.easeInQuart=function(t){return-((t-=1)*t*t*t-1)},EasingFunctions.easeBothQuart=function(t){return t<.5?.5*EasingFunctions.easeOutQuart(2*t):.5*EasingFunctions.easeInQuart(2*t-1)+.5},EasingFunctions.easeOutQuint=function(t){return 1*t*t*t*t*t},EasingFunctions.easeInQuint=function(t){return 1*((t-=1)*t*t*t*t+1)},EasingFunctions.easeBothQuint=function(t){return t<.5?.5*EasingFunctions.easeOutQuint(2*t):.5*EasingFunctions.easeInQuint(2*t-1)+.5},EasingFunctions.easeOutSine=function(t){return-Math.cos(t*Math.PI/2)+1},EasingFunctions.easeInSine=function(t){return Math.sin(t*Math.PI/2)},EasingFunctions.easeBothSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},EasingFunctions.easeOutExp=function(t){return t<=0?0:Math.pow(2,10*(t-1))},EasingFunctions.easeInExp=function(t){return t>=1?1:-Math.pow(2,-10*t)+1},EasingFunctions.easeBothExp=function(t){return t<.5?.5*EasingFunctions.easeOutExp(2*t):.5*EasingFunctions.easeInExp(2*t-1)+.5},EasingFunctions.easeOutCirc=function(t){return-(Math.sqrt(1-t*t)-1)},EasingFunctions.easeInCirc=function(t){return Math.sqrt(1-(t-=1)*t)},EasingFunctions.easeBothCirc=function(t){return t<.5?.5*EasingFunctions.easeOutCirc(2*t):.5*EasingFunctions.easeInCirc(2*t-1)+.5},EasingFunctions.easeOutElastic=function(t){var p,s;return t<=0?0:t>=1?1:(p=.3,s=p/4,t-=1,-Math.pow(2,10*t)*Math.sin((t-s)*(2*Math.PI)/p))},EasingFunctions.easeInElastic=function(t){var p,s;return t<=0?0:t>=1?1:(p=.3,s=p/4,Math.pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/p)+1)},EasingFunctions.easeBothElastic=function(t){return t<.5?.5*EasingFunctions.easeOutElastic(2*t):.5*EasingFunctions.easeInElastic(2*t-1)+.5},EasingFunctions.easeOutBack=function(t,s){return null==s&&(s=1.70158),t*t*((s+1)*t-s)},EasingFunctions.easeInBack=function(t,s){return null==s&&(s=1.70158),(t-=1)*t*((s+1)*t+s)+1},EasingFunctions.easeBothBack=function(t,s){return t<.5?.5*EasingFunctions.easeOutBack(2*t):.5*EasingFunctions.easeInBack(2*t-1)+.5},EasingFunctions.easeOutBounce=function(t){return 1-EasingFunctions.easeInBounce(1-t)},EasingFunctions.easeInBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},EasingFunctions.easeBothBounce=function(t){return t<.5?.5*EasingFunctions.easeOutBounce(2*t):.5*EasingFunctions.easeInBounce(2*t-1)+.5},EasingFunctions}()}}(this),__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(188).addModules({InterpolatedPointLayout:__webpack_require__(189),PointLayoutBase:__webpack_require__(190),PointLayout:__webpack_require__(191)})},function(module,exports,__webpack_require__){var Engine,Layout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.Layout||Engine.addNamespace("Layout",Layout=function(superClass){function Layout(){return Layout.__super__.constructor.apply(this,arguments)}return extend(Layout,superClass),Layout}(Neptune.Base))},function(module,exports,__webpack_require__){var Foundation,InterpolatedPointLayout,PointLayoutBase,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),PointLayoutBase=__webpack_require__(190),log=Foundation.log,module.exports=InterpolatedPointLayout=function(superClass){function InterpolatedPointLayout(layout1,layout2,p){InterpolatedPointLayout.__super__.constructor.apply(this,arguments),this.layout1=layout1,this.layout2=layout2,this.p=p,this._hasXLayout=this.layout1._hasXLayout||!this.layout2._hasXLayout,this._hasYLayout=this.layout1._hasYLayout||!this.layout2._hasYLayout,this._xRelativeToParentW=this.layout1._xRelativeToParentW||this.layout2._xRelativeToParentW,this._xRelativeToParentH=this.layout1._xRelativeToParentH||this.layout2._xRelativeToParentH,this._yRelativeToParentW=this.layout1._yRelativeToParentW||this.layout2._yRelativeToParentW,this._yRelativeToParentH=this.layout1._yRelativeToParentH||this.layout2._yRelativeToParentH,this._xRelativeToChildrenW=this.layout1._xRelativeToChildrenW||this.layout2._xRelativeToChildrenW,this._xRelativeToChildrenH=this.layout1._xRelativeToChildrenH||this.layout2._xRelativeToChildrenH,this._yRelativeToChildrenW=this.layout1._yRelativeToChildrenW||this.layout2._yRelativeToChildrenW,this._yRelativeToChildrenH=this.layout1._yRelativeToChildrenH||this.layout2._yRelativeToChildrenH,this.layoutX=function(ps,cs){return interpolate1D(p,layout1._hasXLayout,layout2._hasXLayout,layout1.layoutX(ps,cs),layout2.layoutX(ps,cs))},this.layoutY=function(ps,cs){return interpolate1D(p,layout1._hasYLayout,layout2._hasYLayout,layout1.layoutY(ps,cs),layout2.layoutY(ps,cs))}}var interpolate1D;return extend(InterpolatedPointLayout,superClass),PointLayoutBase.InterpolatedPointLayout=InterpolatedPointLayout,InterpolatedPointLayout.prototype.toString=function(){return"InterpolatedPointLayout(from: ("+this.layout1.toStringLean()+"), to: ("+this.layout2.toStringLean()+"), "+(100*this.p|0)+"%)"},InterpolatedPointLayout.getter({inspectedString:function(){return this.toString()}}),InterpolatedPointLayout.prototype.inspect=function(){return this.toString()},InterpolatedPointLayout.interpolate1D=interpolate1D=function(p,hasFrom,hasTo,from,to){return hasFrom?hasTo?(to-from)*p+from:from:to},InterpolatedPointLayout}(PointLayoutBase)},function(module,exports,__webpack_require__){var Atomic,BaseObject,Foundation,Point,PointLayoutBase,inspect,inspectedObjectLiteral,isFunction,isNumber,isPlainObject,log,nearInfinity,nearInfinityResult,point,point0,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),point=Atomic.point,Point=Atomic.Point,point0=Point.point0,BaseObject=Foundation.BaseObject,log=Foundation.log,inspect=Foundation.inspect,isFunction=Foundation.isFunction,isNumber=Foundation.isNumber,isPlainObject=Foundation.isPlainObject,nearInfinity=Foundation.nearInfinity,nearInfinityResult=Foundation.nearInfinityResult,inspectedObjectLiteral=Foundation.inspectedObjectLiteral,module.exports=PointLayoutBase=function(superClass){function PointLayoutBase(a,previousLayout){this._xRelativeToParentW=this._xRelativeToParentH=this._yRelativeToParentW=this._yRelativeToParentH=this._xRelativeToChildrenW=this._xRelativeToChildrenH=this._yRelativeToChildrenW=this._yRelativeToChildrenH=!1,this._hasXLayout=this._hasYLayout=!1,this.layoutX=this.layoutY=function(){return 0},this.layout=function(ps,cs){return point(this.layoutX(ps,cs),this.layoutY(ps,cs))}}var isChildrenHRelative,isChildrenWRelative,isParentHRelative,isParentWRelative,nearInfinityPoint,nearInfinityPointX,nearInfinityPointY;return extend(PointLayoutBase,superClass),PointLayoutBase.prototype.interpolate=function(toLayout,p){return 0===p?this:1===p?toLayout:new PointLayoutBase.InterpolatedPointLayout(this,toLayout,p)},PointLayoutBase.getter({inspectedString:function(){return this.toString()}}),PointLayoutBase.prototype.inspect=function(){return this.toString()},PointLayoutBase.prototype._copyXRelativity=function(sourceLayout){return this._xRelativeToParentW=sourceLayout._xRelativeToParentW,this._xRelativeToParentH=sourceLayout._xRelativeToParentH,this._xRelativeToChildrenW=sourceLayout._xRelativeToChildrenW,this._xRelativeToChildrenH=sourceLayout._xRelativeToChildrenH},PointLayoutBase.prototype._copyYRelativity=function(sourceLayout){return this._yRelativeToParentW=sourceLayout._yRelativeToParentW,this._yRelativeToParentH=sourceLayout._yRelativeToParentH,this._yRelativeToChildrenW=sourceLayout._yRelativeToChildrenW,this._yRelativeToChildrenH=sourceLayout._yRelativeToChildrenH},PointLayoutBase.getter({inspectedObjects:function(){return inspectedObjectLiteral(this.toString())}}),PointLayoutBase.getter("xRelativeToParentW\nxRelativeToParentH\nyRelativeToParentW\nyRelativeToParentH\nxRelativeToChildrenW\nxRelativeToChildrenH\nyRelativeToChildrenW\nyRelativeToChildrenH\nhasXLayout\nhasYLayout"),PointLayoutBase.getter({hasFullLayout:function(){return this._hasXLayout&&this._hasYLayout},hasLayout:function(){return this._hasXLayout||this._hasYLayout},parentRelative:function(){return this._xRelativeToParentH||this._xRelativeToParentW||this._yRelativeToParentH||this._yRelativeToParentW},childrenRelative:function(){return this._xRelativeToChildrenH||this._xRelativeToChildrenW||this._yRelativeToChildrenH||this._yRelativeToChildrenW},xParentRelative:function(){return this._xRelativeToParentH||this._xRelativeToParentW},yParentRelative:function(){return this._yRelativeToParentH||this._yRelativeToParentW},xChildrenRelative:function(){return this._xRelativeToChildrenH||this._xRelativeToChildrenW},yChildrenRelative:function(){return this._yRelativeToChildrenH||this._yRelativeToChildrenW}}),PointLayoutBase.prototype.layoutIsCircular=function(parentLayout){var result,xcx,xcy,xpx,xpy,ycx,ycy,ypx,ypy;return!!parentLayout&&(xpx=this._xRelativeToParentW,xpy=this._xRelativeToParentH,ypx=this._yRelativeToParentW,ypy=this._yRelativeToParentH,xcx=parentLayout.getXRelativeToChildrenW(),xcy=parentLayout.getXRelativeToChildrenH(),ycx=parentLayout.getYRelativeToChildrenW(),ycy=parentLayout.getYRelativeToChildrenH(),result=!!(xpx&&xcx||xpy&&ycx||ypy&&ycy||ypx&&xcy||xpy&&ycy&&ypx&&xcy||xpx&&xcy&&ypy&&ycx))},nearInfinityPoint=point(nearInfinity,nearInfinity),nearInfinityPointX=point0.withX(nearInfinity),nearInfinityPointY=point0.withY(nearInfinity),PointLayoutBase.isParentWRelative=isParentWRelative=function(f,baseline,baselinePoint,testPoint){return f(testPoint,baselinePoint)!==baseline},PointLayoutBase.isParentHRelative=isParentHRelative=function(f,baseline,baselinePoint,testPoint){return f(testPoint,baselinePoint)!==baseline},PointLayoutBase.isChildrenWRelative=isChildrenWRelative=function(f,baseline,baselinePoint,testPoint){
return f(baselinePoint,testPoint)!==baseline},PointLayoutBase.isChildrenHRelative=isChildrenHRelative=function(f,baseline,baselinePoint,testPoint){return f(baselinePoint,testPoint)!==baseline},PointLayoutBase.prototype._detectXRelativity=function(layoutX){var layoutBaseline,layoutLength,nearInfinityBaseline;if(null==layoutX&&(layoutX=this.layoutX),this._xRelativeToParentW=this._xRelativeToParentH=this._xRelativeToChildrenW=this._xRelativeToChildrenH=!1,layoutLength=layoutX.length,layoutBaseline=layoutX(point0,point0),nearInfinityBaseline=layoutX(nearInfinityPoint,nearInfinityPoint),layoutLength>0&&(this._xRelativeToParentW=isParentWRelative(layoutX,layoutBaseline,point0,nearInfinityPointX)||isParentWRelative(layoutX,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointY),this._xRelativeToParentH=isParentHRelative(layoutX,layoutBaseline,point0,nearInfinityPointY)||isParentHRelative(layoutX,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointX),1!==layoutLength||this._xRelativeToParentW||this._xRelativeToParentH||console.warn(this+": horizontal/x/w layout function has 1 input, which suggests it should be parent-relative, but it doesn't appear to be.\n\nResolution: If the input is unused, remove it. Otherwise, alter your function to respond differently for parent-sizes of 0 and children-sizes of near-infinity.\n\nlayoutX: "+layoutX)),layoutLength>1&&(this._xRelativeToChildrenW=isChildrenWRelative(layoutX,layoutBaseline,point0,nearInfinityPointX)||isChildrenWRelative(layoutX,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointY),this._xRelativeToChildrenH=isChildrenHRelative(layoutX,layoutBaseline,point0,nearInfinityPointY)||isChildrenHRelative(layoutX,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointX),!this._xRelativeToChildrenW&&!this._xRelativeToChildrenH))return console.warn(this+": horizontal/x/w layout function has 2 inputs, which suggests it should be child-relative, but it doesn't appear to be.\n\nResolution: If the second input is unused, remove it. Otherwise, alter your function to respond differently for children-sizes of 0 vs near-infinity when parent-size is 0.\n\nlayoutX: "+layoutX)},PointLayoutBase.prototype._detectYRelativity=function(layoutY){var layoutBaseline,layoutLength,nearInfinityBaseline;if(null==layoutY&&(layoutY=this.layoutY),this._yRelativeToParentW=this._yRelativeToParentH=this._yRelativeToChildrenW=this._yRelativeToChildrenH=!1,layoutLength=layoutY.length,layoutBaseline=layoutY(point0,point0),nearInfinityBaseline=layoutY(nearInfinityPoint,nearInfinityPoint),layoutLength>0&&(this._yRelativeToParentW=isParentWRelative(layoutY,layoutBaseline,point0,nearInfinityPointX)||isParentWRelative(layoutY,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointY),this._yRelativeToParentH=isParentHRelative(layoutY,layoutBaseline,point0,nearInfinityPointY)||isParentHRelative(layoutY,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointX),1!==layoutLength||this._yRelativeToParentW||this._yRelativeToParentH||console.warn(this+": vertical/y/h layout function has 1 input, which suggests it should be parent-relative, but it doesn't appear to be. \n\nResolution: If the input is unused, remove it. Otherwise, alter your function to respond differently for parent-sizes of 0 and children-sizes of near-infinity.")),layoutLength>1&&(this._yRelativeToChildrenW=isChildrenWRelative(layoutY,layoutBaseline,point0,nearInfinityPointX)||isChildrenWRelative(layoutY,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointY),this._yRelativeToChildrenH=isChildrenHRelative(layoutY,layoutBaseline,point0,nearInfinityPointY)||isChildrenHRelative(layoutY,nearInfinityBaseline,nearInfinityPoint,nearInfinityPointX),!this._yRelativeToChildrenW&&!this._yRelativeToChildrenH))return console.warn(this+": vertical/y/h layout function has 2 inputs, which suggests it should be child-relative, but it doesn't appear to be. \n\nResolution: If the second input is unused, remove it. Otherwise, alter your function to respond differently for children-sizes of 0 vs near-infinity when parent-size is 0.")},PointLayoutBase.prototype._detectRelativity=function(){return this._detectXRelativity(),this._detectYRelativity()},PointLayoutBase}(BaseObject)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(125),__webpack_require__(19),__webpack_require__(190)],__WEBPACK_AMD_DEFINE_RESULT__=function(Atomic,Foundation,PointLayoutBase){var BaseObject,Components,Point,PointLayout,inspect,inspectLean,isFunction,isNumber,isPlainObject,isString,log,max,min,point,point0;return point=Atomic.point,Point=Atomic.Point,point0=Point.point0,BaseObject=Foundation.BaseObject,log=Foundation.log,inspect=Foundation.inspect,inspectLean=Foundation.inspectLean,isFunction=Foundation.isFunction,isNumber=Foundation.isNumber,isString=Foundation.isString,isPlainObject=Foundation.isPlainObject,min=Foundation.min,max=Foundation.max,Components=function(){function Components(){}var applyComponentsFunctions,preprocess2dValue,preprocessValue,pts,returnZero,x,xcw,xph,xpw,y,ych,yph,ypw;return returnZero=function(){return 0},Components.setupPointLayout=function(newPointLayout,options,previousLayout){var applyFunction,k,layoutX,layoutY,maxLayout,v;maxLayout=options.max?new PointLayout(options.max):void 0,this._reset();for(k in options){if(v=options[k],applyFunction=applyComponentsFunctions[k],!applyFunction)throw new Error("invalid PointLayout component: "+inspect(k)+" in "+inspect(options));applyFunction(v,newPointLayout)}return newPointLayout.layoutX=newPointLayout._hasXLayout?(layoutX=this._buildXLayoutFromComponents(maxLayout),this.needToDetectXRelativity?newPointLayout._detectXRelativity(layoutX):void 0,layoutX):(null!=previousLayout?previousLayout._hasXLayout:void 0)?(newPointLayout._hasXLayout=!0,newPointLayout._copyXRelativity(previousLayout),previousLayout.layoutX):returnZero,newPointLayout.layoutY=newPointLayout._hasYLayout?(layoutY=this._buildYLayoutFromComponents(maxLayout),this.needToDetectYRelativity?newPointLayout._detectYRelativity(layoutY):void 0,layoutY):(null!=previousLayout?previousLayout._hasYLayout:void 0)?(newPointLayout._hasYLayout=!0,newPointLayout._copyYRelativity(previousLayout),previousLayout.layoutY):returnZero},Components._buildXLayoutFromComponents=function(maxLayout){var layoutX,ref,x,xcw,xph,xpw;return ref=this,x=ref.x,xpw=ref.xpw,xph=ref.xph,xcw=ref.xcw,layoutX=ref.layoutX,layoutX||(layoutX=0===xcw?function(ps){return x+xpw*ps.x+xph*ps.y}:function(ps,cs){return x+xpw*ps.x+xph*ps.y+xcw*cs.x}),(null!=maxLayout?maxLayout.getHasXLayout():void 0)?function(ps,cs){return min(maxLayout.layoutX(ps),layoutX(ps,cs))}:layoutX},Components._buildYLayoutFromComponents=function(maxLayout){var layoutY,ref,y,ych,yph,ypw;return ref=this,y=ref.y,yph=ref.yph,ypw=ref.ypw,ych=ref.ych,layoutY=ref.layoutY,layoutY||(layoutY=0===ych?function(ps){return y+yph*ps.y+ypw*ps.x}:function(ps,cs){return y+yph*ps.y+ypw*ps.x+ych*cs.y}),(null!=maxLayout?maxLayout.getHasYLayout():void 0)?function(ps,cs){return min(maxLayout.layoutY(ps),layoutY(ps,cs))}:layoutY},Components._reset=function(){return this.needToDetectXRelativity=!1,this.needToDetectYRelativity=!1,this.layoutX=null,this.layoutY=null,this.x=this.xpw=this.xph=this.xcw=this.y=this.yph=this.ypw=this.ych=0},Components._reset(),preprocessValue=function(value,pointLayout){if(value||(value=0),!isNumber(value))throw new Error("Each PointLayout component must be a number. Not "+inspect(value)+" from "+pointLayout);return value},preprocess2dValue=function(value,pointLayout){return point(value)},Components._applyComponentsFunctions=applyComponentsFunctions={max:function(value,pointLayout){},pts:pts=function(value,pointLayout){return value=preprocess2dValue(value,pointLayout),pointLayout._hasXLayout=pointLayout._hasYLayout=!0,Components.x+=value.x,Components.y+=value.y},x:x=function(value,pointLayout){return pointLayout._hasXLayout=!0,isFunction(value)?(Components.layoutX=value,Components.needToDetectXRelativity=!0):(value=preprocessValue(value,pointLayout),Components.x+=value)},y:y=function(value,pointLayout){return pointLayout._hasYLayout=!0,isFunction(value)?(Components.layoutY=value,Components.needToDetectYRelativity=!0):(value=preprocessValue(value,pointLayout),Components.y+=value)},ps:function(value,pointLayout){return value=preprocess2dValue(value,pointLayout),pointLayout._hasXLayout=pointLayout._hasYLayout=pointLayout._xRelativeToParentW=pointLayout._yRelativeToParentH=!0,Components.xpw+=value.x,Components.yph+=value.y},xpw:xpw=function(value,pointLayout){return value=preprocessValue(value,pointLayout),pointLayout._hasXLayout=pointLayout._xRelativeToParentW=!0,Components.xpw+=value},yph:yph=function(value,pointLayout){return value=preprocessValue(value,pointLayout),pointLayout._hasYLayout=pointLayout._yRelativeToParentH=!0,Components.yph+=value},xph:xph=function(value,pointLayout){return value=preprocessValue(value,pointLayout),pointLayout._hasXLayout=pointLayout._xRelativeToParentH=!0,Components.xph+=value},ypw:ypw=function(value,pointLayout){return value=preprocessValue(value,pointLayout),pointLayout._hasYLayout=pointLayout._yRelativeToParentW=!0,Components.ypw+=value},cs:function(value,pointLayout){return value=preprocess2dValue(value,pointLayout),pointLayout._hasXLayout=pointLayout._hasYLayout=pointLayout._xRelativeToChildrenW=pointLayout._yRelativeToChildrenH=!0,Components.xcw+=value.x,Components.ych+=value.y},xcw:xcw=function(value,pointLayout){return value=preprocessValue(value,pointLayout),pointLayout._hasXLayout=pointLayout._xRelativeToChildrenW=!0,Components.xcw+=value},ych:ych=function(value,pointLayout){return value=preprocessValue(value,pointLayout),pointLayout._hasYLayout=pointLayout._yRelativeToChildrenH=!0,Components.ych+=value},plus:pts,w:x,h:y,ww:xpw,hh:yph,xw:xpw,yh:yph,wh:xph,hw:ypw,xh:xph,yw:ypw,wpw:xpw,hph:yph,wcw:xcw,hch:ych,wph:xph,hpw:ypw,width:x,height:y,width_parentWidth:xpw,height_parentHeight:yph,width_childrenWidth:xcw,height_childrenHeight:ych,x_parentWidth:xpw,y_parentHeight:yph,x_childrenWidth:xcw,y_childrenHeight:ych},Components}(),PointLayout=function(superClass){function PointLayout(initializer,previousLayout){this.initializer=null!=initializer?initializer:point0,PointLayout.__super__.constructor.apply(this,arguments),isFunction(this.initializer)?this._setupFromFunction(this.initializer):isPlainObject(this.initializer)?this._setupFromOptions(this.initializer,previousLayout):this._setupFromPoint(this.initializer)}return extend(PointLayout,superClass),PointLayout.prototype.toString=function(){return"PointLayout("+this.toStringLean()+")"},PointLayout.prototype.toStringLean=function(){return this.initializer?this.initializer instanceof Point&&this.initializer.x===this.initializer.y?this.initializer.x:inspectLean(this.initializer):"0"},PointLayout.getter({inspectedInitializer:function(){return this.initializer?inspect(this.initializer):"0"},plainObjects:function(){var v;return v=this.initializer||0,v instanceof Point&&v.x===v.y&&(v=v.x),v.getPlainObjects&&(v=v.getPlainObjects()),v},inspectObjects:function(){return isPlainObject(this.initializer)?{inspect:function(_this){return function(){return inspectLean(_this.initializer)}}(this)}:isFunction(this.initializer)?{inspect:function(_this){return function(){return _this.initializer.toString().replace(/\s+/g," ")}}(this)}:this.initializer}}),PointLayout.prototype._setupFromPoint=function(val){var p,ref,x,y;return this._hasXLayout=this._hasYLayout=!0,ref=p=point(val),x=ref.x,y=ref.y,isString(val)?(this.layoutX=function(ps){return ps.x*x},this.layoutY=function(ps){return ps.y*y},this.layout=function(ps){return ps.mul(p)}):(this.layoutX=function(ps){return x},this.layoutY=function(ps){return y},this.layout=function(ps){return p}),this.initializer=p},PointLayout.prototype._setupFromFunction=function(layoutFunction){return this._hasXLayout=this._hasYLayout=!0,1===layoutFunction.length?isNumber(layoutFunction(point0))?(this.layout=function(ps){return point(layoutFunction(ps))},this.layoutX=layoutFunction,this.layoutY=layoutFunction):(this.layout=layoutFunction,this.layoutX=function(ps){return layoutFunction(ps).x},this.layoutY=function(ps){return layoutFunction(ps).y}):isNumber(layoutFunction(point0,point0))?(this.layout=function(ps,cs){return point(layoutFunction(ps,cs))},this.layoutX=layoutFunction,this.layoutY=layoutFunction):(this.layout=layoutFunction,this.layoutX=function(ps,cs){return layoutFunction(ps,cs).x},this.layoutY=function(ps,cs){return layoutFunction(ps,cs).y}),this._detectRelativity()},PointLayout.prototype._setupFromOptions=function(options,previousLayout){return Components.setupPointLayout(this,options,previousLayout)},PointLayout}(PointLayoutBase)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var Atomic,ElementBase,EventedEpochedObject,Foundation,compact,elementFactory,inspect,inspectLean,isFunction,isObject,log,merge,peek,present,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),elementFactory=__webpack_require__(160).elementFactory,EventedEpochedObject=__webpack_require__(193),log=Foundation.log,inspect=Foundation.inspect,merge=Foundation.merge,peek=Foundation.peek,present=Foundation.present,isFunction=Foundation.isFunction,inspectLean=Foundation.inspectLean,compact=Foundation.compact,isObject=Foundation.isObject,module.exports=ElementBase=function(superClass){function ElementBase(){return ElementBase.__super__.constructor.apply(this,arguments)}var _elementInstanceRegistry,inspectedPropsFirst,inspectedPropsNotToInclude;return extend(ElementBase,superClass),ElementBase.registerWithElementFactory=function(){return!1},ElementBase.postCreate=function(){return this.registerWithElementFactory()&&elementFactory.register(this),ElementBase.__super__.constructor.postCreate.apply(this,arguments)},ElementBase.prototype._initFields=function(){return ElementBase.__super__._initFields.apply(this,arguments),this.remoteId=null,this.creator=null,this.__depth=0,this.__redrawRequired=!1},ElementBase.concreteProperty({key:{"default":null,validate:function(v){return null===v||isFunction(v.toString)},preprocess:function(v){return null===v?v:v.toString()}}}),ElementBase.virtualProperty({name:{getter:function(pending){return this.getState(pending)._key},setter:function(v){return this.setKey(v)}}}),ElementBase.concreteProperty({willConsumeKeyboardEvent:{"default":function(artEngineKeyboardEventType,keyboardEvent){return!1},validate:function(v){return isObject(v)||"beforeDescendents"===v||"beforeAncestors"===v||isFunction(v)},preprocess:function(v){return isFunction(v)?v:function(){return v}}}}),ElementBase._elementInstanceRegistry=_elementInstanceRegistry={},ElementBase.getter({isRegistered:function(){return!!_elementInstanceRegistry[this.getInstanceId()]}}),ElementBase.getElementByInstanceId=function(instanceId){return _elementInstanceRegistry[instanceId]},ElementBase.prototype._register=function(){var instanceId;if(!_elementInstanceRegistry[instanceId=this.getInstanceId()])return this._activateContinuousPersistantAnimators(),_elementInstanceRegistry[instanceId]=this,this.eachChild(function(_this){return function(child){return child._register()}}(this)),this},ElementBase.prototype._unregister=function(){var instanceId;if(_elementInstanceRegistry[instanceId=this.getInstanceId()])return this._deactivatePersistantAnimators(),delete _elementInstanceRegistry[instanceId],this.eachChild(function(_this){return function(child){return child._unregister()}}(this)),this.queueEvent("unregistered"),null},ElementBase.prototype._updateRegistryFromPendingState=function(){var pendingParent;return(pendingParent=this.getPendingParent())?pendingParent.getIsRegistered()?this._register():void 0:this._unregister()},ElementBase.getter({instanceId:function(){return this.remoteId||this.getUniqueId()},shortNamespacePath:function(){var name;return name=this.namespacePath,peek(name.split("."))},inspectedName:function(){return this.shortNamespacePath+":"+(this.pendingKey||this.instanceId)},inspectedNameWithoutIds:function(){var key;return this.shortNamespacePath+((key=this.pendingKey)?":"+key:"")},inspectedString:function(){return this.inspectedName}}),inspectedPropsNotToInclude=["children","name","on"],inspectedPropsFirst=["key","instanceId","location","size","currentLocation","currentSize"],ElementBase.getter({inspectedPropsMaps:function(){var defaultValue,i,internalName,k,len1,props,ref,ref1,value,virtual;for(props={},i=0,len1=inspectedPropsFirst.length;i<len1;i++)k=inspectedPropsFirst[i],present(value=this[k])&&(props[k]=value);ref=this.metaProperties;for(k in ref)ref1=ref[k],internalName=ref1.internalName,virtual=ref1.virtual,defaultValue=ref1.defaultValue,!virtual&&indexOf.call(inspectedPropsNotToInclude,k)<0&&!EpochedObject.propsEq(defaultValue,value=this[internalName])&&(props[k]=value);return props},debugStructure:function(){var child,result;return result=[this.shortNamespacePath,this.inspectedPropsMaps],this.hasChildren&&(result=result.concat(function(){var i,len1,ref,results;for(ref=this.children,results=[],i=0,len1=ref.length;i<len1;i++)child=ref[i],results.push(child.debugStructure);return results}.call(this))),result},plainObjectProps:function(){var k,out,ref,v;ref=out=this.minimalProps;for(k in ref)v=ref[k],(null!=v?v.getPlainObjects:void 0)&&(out[k]=v.getPlainObjects());return out},propsInspectObjects:function(){var fn,k,length,out,ref,v;length=0,ref=out=this.minimalProps,fn=function(k,v){return out[k]=function(){var ref1;switch(null!=(ref1=v["class"])&&"function"==typeof ref1.getName?ref1.getName():void 0){case"Bitmap":return v;default:return(null!=v?v.getInspectObjects:void 0)?v.getInspectObjects():{inspect:function(){return(null!=v?v.getPlainObjects:void 0)&&(v=v.getPlainObjects()),inspectLean(v)}}}}()};for(k in ref)v=ref[k],length++,fn(k,v);return 0===length?null:out},inspectedProps:function(){return inspectLean(this.getPlainObjectProps())},plainObjects:function(){var child;return[this["class"].getName(),this.plainObjectProps].concat(function(){var i,len1,ref,results;for(ref=this._children,results=[],i=0,len1=ref.length;i<len1;i++)child=ref[i],results.push(child.plainObjects);return results}.call(this))},inspectObjects:function(){var child;return compact([{inspect:function(_this){return function(){return _this["class"].getName()}}(this)},this.propsInspectObjects].concat(function(){var i,len1,ref,results;for(ref=this._children,results=[],i=0,len1=ref.length;i<len1;i++)child=ref[i],results.push(child.inspectObjects);return results}.call(this)))},inspectTree:function(){var c;return[this.getInspectedName(),function(){var i,len1,ref,results;for(ref=this._children,results=[],i=0,len1=ref.length;i<len1;i++)c=ref[i],results.push(c.inspectTree);return results}.call(this)]},inspectedStructure:function(){return inspect(this.plainObjects)}}),ElementBase.prototype.inspect=function(){var a,child,inspectedProps,len;return inspectedProps=this.inspectedProps,a=this["class"].getName()+" "+inspectedProps,0<(len=this._children.length)&&(a+=(inspectedProps.length>0?",":"")+" children: ["+function(){var i,len1,ref,results;for(ref=this._children,results=[],i=0,len1=ref.length;i<len1;i++)child=ref[i],results.push(child["class"].getName());return results}.call(this).join(", ")+"]"),a},ElementBase}(EventedEpochedObject)},function(module,exports,__webpack_require__){var EpochedObject,EventedBaseMixin,EventedEpochedObject,Events,Foundation,StateEpoch,blankOptions,isPlainObject,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Events=__webpack_require__(168),StateEpoch=__webpack_require__(194),EpochedObject=__webpack_require__(200),EventedBaseMixin=Events.EventedBaseMixin,log=Foundation.log,isPlainObject=Foundation.isPlainObject,blankOptions={},module.exports=EventedEpochedObject=function(superClass){function EventedEpochedObject(options){null==options&&(options=blankOptions),EventedEpochedObject.__super__.constructor.apply(this,arguments),this._initDefaultEventHandlers(options)}var defaultEventHandlerPreprocessor,emptyEventHandlers;return extend(EventedEpochedObject,superClass),EventedEpochedObject.concreteProperty({on:{"default":{},validate:function(v){return isPlainObject(v)},setter:function(v){return this.preprocessEventHandlers(v)}}}),EventedEpochedObject.prototype.preprocessEventHandlers=defaultEventHandlerPreprocessor=function(handlerMap){return handlerMap},emptyEventHandlers={},EventedEpochedObject.prototype._initDefaultEventHandlers=function(options){if(!options.on&&this.preprocessEventHandlers!==defaultEventHandlerPreprocessor)return this.setOn(emptyEventHandlers)},EventedEpochedObject.prototype._applyStateChanges=function(){return this.getParentChanged()&&this.queueEvent("parentChanged",{oldParent:this._parent,parent:this._pendingState._parent}),this.queueEvent("ready"),EventedEpochedObject.__super__._applyStateChanges.apply(this,arguments)},EventedEpochedObject.prototype._hasEventHandler=function(eventType){var _on,ref;return(_on=this._pendingState._on||this._on)&&!!(_on[eventType]||(null!=(ref=_on.preprocess)?ref[eventType]:void 0))},EventedEpochedObject.prototype._sendToEventHandler=function(event){var _on,e,handler,preprocessor,processedEvent,ref,type;if(_on=this._on){if(type=(processedEvent=event).type,preprocessor=null!=(ref=_on.preprocess)?ref[type]:void 0)try{processedEvent=preprocessor(event)}catch(error){e=error,processedEvent=null,this._handleErrorInHandler(event,preprocessor,e)}if(processedEvent&&(handler=_on[type]))try{return handler(processedEvent)}catch(error){return e=error,this._handleErrorInHandler(processedEvent,handler,e)}}},EventedEpochedObject}(EventedBaseMixin(EpochedObject))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125),__webpack_require__(195)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic,StateEpochLayout){var Epoch,Point,StateEpoch,childrenDrawChanged,childrenDrawUnchanged,globalCount,inspect,log,longestCommonSubsequence,point,requestAnimationFrame,select;return point=Atomic.point,Point=Atomic.Point,log=Foundation.log,requestAnimationFrame=Foundation.requestAnimationFrame,longestCommonSubsequence=Foundation.longestCommonSubsequence,select=Foundation.select,inspect=Foundation.inspect,Epoch=Foundation.Epoch,globalCount=Foundation.globalCount,childrenDrawUnchanged=function(before,after){return window.lcs=longestCommonSubsequence(before,after)},childrenDrawChanged=function(before,after){var child,i,len,results;if(before){for(results=[],i=0,len=before.length;i<len;i++)child=before[i],indexOf.call(childrenDrawUnchanged(before,after),child)<0&&results.push(child);return results}return after},StateEpoch=function(superClass){function StateEpoch(){StateEpoch.__super__.constructor.call(this,{emptyQueueAfterProcessing:!0})}var epochCount,markChildrenRedrawRequired;return extend(StateEpoch,superClass),StateEpoch.singletonClass(),StateEpoch._stateEpochLayoutInProgress=!1,StateEpoch.prototype._addChangingElement=function(element){return this.queueItem(element)},StateEpoch.prototype._isChangingElement=function(element){return this.isItemQueued(element)},StateEpoch.prototype.computeDepth=function(element){return element?element.__depth=1+this.computeDepth(element.getPendingParent()):0},StateEpoch.prototype.computeDepths=function(changingElements){var element,i,len;for(i=0,len=changingElements.length;i<len;i++)element=changingElements[i],this.computeDepth(element);return null},StateEpoch.prototype.sortChangingElementsDepthsAscending=function(changingElements){return changingElements.sort(function(a,b){return a.__depth-b.__depth})},StateEpoch.prototype.notifyLayoutPropertiesChanged=function(changingElements){var element,i,len;for(i=0,len=changingElements.length;i<len;i++)element=changingElements[i],element.__layoutPropertiesChanged&&element._layoutPropertiesChanged();return null},StateEpoch.prototype.getDrawChangedElements=function(changingElements){var el,i,len,results;for(results=[],i=0,len=changingElements.length;i<len;i++)el=changingElements[i],el.__redrawRequired&&results.push(el);return results},StateEpoch.prototype.informAncestorsElementNeedsRedrawing=function(el){return el._needsRedrawing(),null},StateEpoch.prototype.applyStateChanges=function(changingElements){var el,i,len;for(i=0,len=changingElements.length;i<len;i++)el=changingElements[i],el._applyStateChanges();return null},markChildrenRedrawRequired=function(element){var child,i,len,ref;if(element.getChildrenChanged())for(ref=childrenDrawChanged(element.children,element.getPendingChildren()),i=0,len=ref.length;i<len;i++)child=ref[i],child.__redrawRequired=!0;return null},StateEpoch.prototype.markRedrawRequired=function(changingElements){var element,i,len;for(i=0,len=changingElements.length;i<len;i++)element=changingElements[i],element.__redrawRequired=element.getRedrawRequired(),markChildrenRedrawRequired(element);return null},StateEpoch.prototype.markDrawAreaChanged=function(changingElements){var element,i,len,parent;for(i=0,len=changingElements.length;i<len;i++)element=changingElements[i],element.__drawAreaChanged||(element.__drawAreaChanged=element.getChildrenChanged()||element.getCurrentSizeChanged()&&(0===element.getPendingChildren().length||element.getPendingClip())),element.getElementToParentMatrixChanged()&&(parent=element.getPendingParent())&&(parent.__drawAreaChanged=!0,parent._elementChanged());return null},StateEpoch.prototype.resetAbsMatriciesR=function(element){var child,i,len,ref;if(null!==element._elementToAbsMatrix||null!==element._absToElementMatrix){for(element._elementToAbsMatrix=element._absToElementMatrix=null,element.queueEvent("absMatriciesChanged"),ref=element.getPendingChildren(),i=0,len=ref.length;i<len;i++)child=ref[i],this.resetAbsMatriciesR(child);return null}},StateEpoch.prototype.resetParentToElementMatricies=function(elements){var el,i,len;for(i=0,len=elements.length;i<len;i++)el=elements[i],el&&el.getElementToParentMatrixChanged()&&(el._parentToElementMatrix=null);return null},StateEpoch.prototype.getElementToAbsMatrixChangedElementsDepthAscending=function(changingElements){var el,i,len,results;for(results=[],i=0,len=changingElements.length;i<len;i++)el=changingElements[i],(el.getElementToParentMatrixChanged()||el.getParentChanged())&&results.push(el);return results},StateEpoch.prototype.resetAbsMatricies=function(elements){var el,i,len;for(i=0,len=elements.length;i<len;i++)el=elements[i],this.resetAbsMatriciesR(el);return null},StateEpoch.prototype.updateElementParentChangingElements=function(changingElements){var el,i,len;for(i=0,len=changingElements.length;i<len;i++)el=changingElements[i],el.getParentChanged()&&(el._clearRootElement(),el._updateRegistryFromPendingState());return null},StateEpoch.prototype.recomputeMousePathAndCursor=function(changingElements){var el,i,len,ref,rootElement,testedRoots;for(testedRoots=[],i=0,len=changingElements.length;i<len;i++)el=changingElements[i],rootElement=el.getRootElement(),indexOf.call(testedRoots,rootElement)<0&&(testedRoots.push(rootElement),null!=(ref=rootElement.pointerEventManager)&&ref.updateMousePath());return null},epochCount=0,StateEpoch.prototype.inspectChangingElements=function(changingElements){var c,ce,changing,changingKeys,key,newV,o,oldV;return{epoch:++epochCount,changingElements:function(){var i,j,len,len1,results;for(results=[],i=0,len=changingElements.length;i<len;i++){if(ce=changingElements[i],o={},(changingKeys=ce._getChangingStateKeys()).length>0)for(o.changing=changing={},j=0,len1=changingKeys.length;j<len1;j++){switch(key=changingKeys[j],oldV=ce[key],newV=ce._pendingState[key],key){case"_parent":oldV=null!=oldV?oldV.inspectedName:void 0,newV=null!=newV?newV.inspectedName:void 0;break;case"_children":oldV=function(){var k,len2,results1;for(results1=[],k=0,len2=oldV.length;k<len2;k++)c=oldV[k],results1.push(c.inspectedName);return results1}(),newV=function(){var k,len2,results1;for(results1=[],k=0,len2=newV.length;k<len2;k++)c=newV[k],results1.push(c.inspectedName);return results1}()}changing[key]={old:oldV,"new":newV}}o.__depth=ce.__depth,ce.__drawAreaChanged&&(o.drawAreaChanged=!0),ce.__redrawRequired&&(o.drawPropertiesChanged=!0),results.push([ce.inspect(),o])}return results}()}},StateEpoch.prototype.applyAnimators=function(changingElements){var el,i,len;for(i=0,len=changingElements.length;i<len;i++)el=changingElements[i],el._applyAnimators();return null},StateEpoch.prototype.processEpochItems=function(changingElements){var changingElementsLength,drawChangedElements,el,elementToAbsMatrixChangedElementsDepthAscending,i,j,k,len,len1,len2,results;for(this.applyAnimators(changingElements),this.computeDepths(changingElements),this.notifyLayoutPropertiesChanged(changingElements),StateEpochLayout.markLayoutPropertiesChanged(changingElements),changingElementsLength=changingElements.length,this.sortChangingElementsDepthsAscending(changingElements),StateEpoch._stateEpochLayoutInProgress=!0,StateEpochLayout.updateLayouts(changingElements),StateEpoch._stateEpochLayoutInProgress=!1,this.markRedrawRequired(changingElements),this.markDrawAreaChanged(changingElements),changingElements.length!==changingElementsLength&&this.sortChangingElementsDepthsAscending(changingElements),elementToAbsMatrixChangedElementsDepthAscending=this.getElementToAbsMatrixChangedElementsDepthAscending(changingElements),drawChangedElements=this.getDrawChangedElements(changingElements),this.resetParentToElementMatricies(elementToAbsMatrixChangedElementsDepthAscending),i=0,len=changingElements.length;i<len;i++)el=changingElements[i],el.getElementToParentMatrixChanged()&&this.informAncestorsElementNeedsRedrawing(el);for(this.updateElementParentChangingElements(changingElements),this.applyStateChanges(changingElements),this.resetAbsMatricies(elementToAbsMatrixChangedElementsDepthAscending),j=0,len1=changingElements.length;j<len1;j++)el=changingElements[j],el.__drawAreaChanged&&el._drawAreaChanged();for(results=[],k=0,len2=drawChangedElements.length;k<len2;k++)el=drawChangedElements[k],results.push(this.informAncestorsElementNeedsRedrawing(el));return results},StateEpoch}(Epoch)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var ArtEngineCore,Atomic,BaseObject,Basics,CoreLayout,FlexLayout,Foundation,Point,StateEpochLayout,Unique,abs,deinfinitize,eachRunAsCharCodes,floatEq,getGlobalEpochCycle,inspect,isFunction,isInfiniteResult,isNumber,layoutChildrenFlex,layoutMargin,layoutPadding,log,longestCommonSubsequence,max,nearInfiniteSize,nearInfinity,nearInfinityResult,partition,peek,perimeter,point,point0,select,shallowEq,sizeWithPadding,extend=function(child,parent){
function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),ArtEngineCore=__webpack_require__(158),CoreLayout=__webpack_require__(196),FlexLayout=__webpack_require__(197),Basics=__webpack_require__(198),layoutChildrenFlex=FlexLayout.layoutChildrenFlex,nearInfiniteSize=Basics.nearInfiniteSize,nearInfinity=Basics.nearInfinity,nearInfinityResult=Basics.nearInfinityResult,layoutMargin=Basics.layoutMargin,sizeWithPadding=Basics.sizeWithPadding,layoutPadding=Basics.layoutPadding,deinfinitize=Basics.deinfinitize,isInfiniteResult=Basics.isInfiniteResult,point=Atomic.point,Point=Atomic.Point,perimeter=Atomic.perimeter,BaseObject=Foundation.BaseObject,log=Foundation.log,max=Foundation.max,shallowEq=Foundation.shallowEq,longestCommonSubsequence=Foundation.longestCommonSubsequence,select=Foundation.select,Unique=Foundation.Unique,peek=Foundation.peek,inspect=Foundation.inspect,isFunction=Foundation.isFunction,eachRunAsCharCodes=Foundation.eachRunAsCharCodes,floatEq=Foundation.floatEq,isNumber=Foundation.isNumber,point0=Point.point0,abs=Math.abs,getGlobalEpochCycle=function(){return ArtEngineCore.GlobalEpochCycle.globalEpochCycle},partition=function(src,f){var intoIfFalse,intoIfTrue,k,len,v;for(intoIfFalse=[],intoIfTrue=[],k=0,len=src.length;k<len;k++)v=src[k],f(v)?intoIfTrue.push(v):intoIfFalse.push(v);return[intoIfTrue,intoIfFalse]},module.exports=StateEpochLayout=function(superClass){function StateEpochLayout(){return StateEpochLayout.__super__.constructor.apply(this,arguments)}var alignChildren,isSpace,layoutChildrenComputeArea,layoutChildrenComputeMaxSize,layoutChildrenFlow,layoutChildrenFlowLine,layoutChildrenRowGrid,layoutElement,markParentLayoutPropertiesChanged,subLayoutChildrenAndGatherInformation;return extend(StateEpochLayout,superClass),StateEpochLayout.markLayoutPropertiesChanged=function(changingElements){var element,k,len,results;for(results=[],k=0,len=changingElements.length;k<len;k++)element=changingElements[k],(element.getParentChanged()&&element.getPendingParent()||element.getChildrenChanged()&&element.getPendingLayoutMovesChildren())&&(element.__layoutPropertiesChanged||(element.__layoutPropertiesChanged=!0,element._elementChanged())),results.push(markParentLayoutPropertiesChanged(element));return results},StateEpochLayout.updateLayouts=function(layoutChangedElements){var process;return process=function(){var element,k,len,results;for(results=[],k=0,len=layoutChangedElements.length;k<len;k++)element=layoutChangedElements[k],element.__layoutPropertiesChanged&&results.push(layoutElement(element,element.getPendingParentSizeForChildren()));return results},getGlobalEpochCycle()?getGlobalEpochCycle().timePerformance("aimLayout",process):process(),null},markParentLayoutPropertiesChanged=function(element){var results;for(results=[];(element=element.getPendingParent())&&(element.getPendingSize().getChildrenRelative()||element.getPendingLayoutMovesChildren())&&!element.__layoutPropertiesChanged;)element.__layoutPropertiesChanged=!0,results.push(element._elementChanged());return results},layoutChildrenComputeMaxSize=function(parentSize,children){var child,childrenHeight,childrenWidth,k,len,size;for(childrenHeight=0,childrenWidth=0,k=0,len=children.length;k<len;k++)child=children[k],children&&(size=layoutElement(child,parentSize),childrenWidth=max(childrenWidth,size.x),childrenHeight=max(childrenHeight,size.y));return point(childrenWidth,childrenHeight)},layoutChildrenComputeArea=function(currentPadding,parentSize,children,secondPassChildren,secondPassLocation){var child,childrenHeight,childrenWidth,k,layoutLocationInSecondPass,len,x,xInfinite,y,yInfinite;if(childrenHeight=0,childrenWidth=0,!children)return point0;for(k=0,len=children.length;k<len;k++)child=children[k],children&&(child.getPendingLayoutSizeParentCircular()?secondPassChildren.push(child):((layoutLocationInSecondPass=child.getPendingLayoutLocationParentCircular())&&(child._setElementToParentMatrixFromLayout(point0,parentSize),secondPassLocation.push(child)),layoutElement(child,parentSize,layoutLocationInSecondPass),x=child.getPendingMaxXInParentSpace(),y=child.getPendingMaxYInParentSpace(),xInfinite=isInfiniteResult(x),yInfinite=isInfiniteResult(y),xInfinite||yInfinite?secondPassChildren.push(child):layoutLocationInSecondPass&&secondPassLocation.push(child),xInfinite||(childrenWidth=max(childrenWidth,x)),yInfinite||(childrenHeight=max(childrenHeight,y))));return sizeWithPadding(childrenWidth,childrenHeight,currentPadding)},layoutChildrenFlowLine=function(children,rightEdge,state){var child,childI,childSize,childrenLength,currentMargin,firstChildOnLine,k,lastChildOnLine,lastLineMarginBottom,lastMarginRight,lineFull,lineHeight,m,maxLineMarginBottom,maxLineMarginTop,maxWidth,ref,ref1,ref2,ref3,x,y;for(y=state.y,firstChildOnLine=state.firstChildOnLine,lastLineMarginBottom=state.lastLineMarginBottom,maxWidth=state.maxWidth,childrenLength=children.length,maxLineMarginBottom=0,maxLineMarginTop=0,lineHeight=0,lastMarginRight=0,lastChildOnLine=firstChildOnLine,x=0,childI=k=ref=firstChildOnLine,ref1=childrenLength;k<ref1;childI=k+=1){if(lastChildOnLine=childI,child=children[lastChildOnLine],currentMargin=child.getPendingCurrentMargin(),childSize=child.getPendingCurrentSize(),lastChildOnLine!==firstChildOnLine&&(x+=max(currentMargin.left,lastMarginRight)),x+=childSize.x,lastMarginRight=currentMargin.right,lineFull=x>=rightEdge,child.getPendingLayoutSizeParentCircular()&&child.getPendingSize().getXParentRelative()&&(lastChildOnLine!==firstChildOnLine&&lastChildOnLine--,lineFull=!0),lineFull&&lastChildOnLine!==firstChildOnLine){lastChildOnLine--;break}if(maxLineMarginTop=max(currentMargin.top,maxLineMarginTop),maxLineMarginBottom=max(currentMargin.bottom,maxLineMarginBottom),lineHeight=max(lineHeight,childSize.y),lineFull)break}for(null!=lastLineMarginBottom&&(y+=max(lastLineMarginBottom,maxLineMarginTop)),x=0,lastMarginRight=0,childI=m=ref2=firstChildOnLine,ref3=lastChildOnLine;m<=ref3;childI=m+=1)child=children[childI],currentMargin=child.getPendingCurrentMargin(),childSize=child.getPendingCurrentSize(),childI!==firstChildOnLine&&(x+=max(currentMargin.left,lastMarginRight)),child._setElementToParentMatrixFromLayout(point(x,y),point(childSize.x,lineHeight)),x+=childSize.x,lastMarginRight=currentMargin.right;return state.flowChildren&&(state.firstChildIndexOfEachLine.push(firstChildOnLine),state.lastChildIndexOfEachLine.push(lastChildOnLine),state.widthOfEachLine.push(x)),state.lastLineMarginBottom=maxLineMarginBottom,state.y=y+lineHeight,state.firstChildOnLine=lastChildOnLine+1,state.maxWidth=max(maxWidth,x)},subLayoutChildrenAndGatherInformation=function(parentSize,children,secondPassSizeLayoutChildren){var child,k,len,results;for(results=[],k=0,len=children.length;k<len;k++)child=children[k],child.getPendingLayoutSizeParentCircular()?(child._setSizeFromLayout(child._layoutSize(point0,point0)),results.push(secondPassSizeLayoutChildren.push(child))):results.push(layoutElement(child,parentSize,!0));return results},layoutChildrenFlow=function(element,currentPadding,firstPassSizeForChildrenUnconstrained,firstPassSizeForChildrenConstrained,children,secondPassSizeLayoutChildren){var childrenAlignment,childrenLength,halfPixel,rightEdge,state;for(subLayoutChildrenAndGatherInformation(firstPassSizeForChildrenConstrained,children,secondPassSizeLayoutChildren),halfPixel=.5,rightEdge=firstPassSizeForChildrenUnconstrained.x+halfPixel,state={y:0,firstChildOnLine:0,lastLineMarginBottom:null,maxWidth:0},childrenAlignment=element.getPendingChildrenAlignment(),floatEq(childrenAlignment.x,0)&&floatEq(childrenAlignment.y,0)||(state.childrenAlignment=childrenAlignment,state.flowChildren=children,state.firstChildIndexOfEachLine=[],state.lastChildIndexOfEachLine=[],state.widthOfEachLine=[]),childrenLength=children.length;state.firstChildOnLine<childrenLength;)layoutChildrenFlowLine(children,rightEdge,state);return state.childrenSize=sizeWithPadding(state.maxWidth,state.y,currentPadding),state},isSpace=function(charCode){return 32===charCode},layoutChildrenRowGrid=function(isRowLayout,element,gridString,currentPadding,parentSize,children,secondPassSizeLayoutChildren){var gridCount,gridStep,lowerCaseACode,maxCrossSize,offset;return gridCount=gridString.length,lowerCaseACode=97,gridStep=(isRowLayout?parentSize.x:parentSize.y)/gridCount,maxCrossSize=offset=0,eachRunAsCharCodes(gridString.toLowerCase(),function(charCode,count){var adjustedParentSize,child,gridSize,locationX,locationY;return gridSize=count*gridStep,(child=children[charCode-lowerCaseACode])&&(adjustedParentSize=isRowLayout?parentSize.withX(gridSize):parentSize.withY(gridSize),layoutElement(child,adjustedParentSize,!0),locationX=child._layoutLocationX(adjustedParentSize),locationY=child._layoutLocationY(adjustedParentSize),maxCrossSize=max(maxCrossSize,isRowLayout?(child._setElementToParentMatrixFromLayoutXY(offset+locationX,locationY,parentSize),child.getPendingCurrentSize().y):(child._setElementToParentMatrixFromLayoutXY(locationX,offset+locationY,parentSize),child.getPendingCurrentSize().x))),offset+=gridSize}),{childrenSize:sizeWithPadding(offset,maxCrossSize,currentPadding)}},alignChildren=function(state,parentSize,childrenSize){var child,childrenAlignment,childrenAlignmentX,childrenAlignmentY,firstChildIndexOfEachLine,firstChildOnLine,firstIndex,flowChildren,i,j,k,l,lastChildIndexOfEachLine,lastIndex,len,offsetX,offsetY,results,width,widthOfEachLine,widthOfEachLineFunction;for(childrenAlignment=state.childrenAlignment,flowChildren=state.flowChildren,firstChildIndexOfEachLine=state.firstChildIndexOfEachLine,lastChildIndexOfEachLine=state.lastChildIndexOfEachLine,widthOfEachLine=state.widthOfEachLine,widthOfEachLineFunction=state.widthOfEachLineFunction,widthOfEachLineFunction||(widthOfEachLineFunction=function(i){return widthOfEachLine[i]}),childrenAlignmentX=childrenAlignment.x,childrenAlignmentY=childrenAlignment.y,results=[],i=k=0,len=firstChildIndexOfEachLine.length;k<len;i=++k)firstIndex=firstChildIndexOfEachLine[i],lastIndex=lastChildIndexOfEachLine[i],width=widthOfEachLineFunction(i),firstChildOnLine=flowChildren[firstIndex],firstChildOnLine.getPendingLayoutSizeParentCircular()&&firstChildOnLine.getPendingSize().getXParentRelative()&&(width=firstChildOnLine.getPendingCurrentSize().x),offsetX=(parentSize.x-width)*childrenAlignmentX,offsetY=(parentSize.y-childrenSize.y)*childrenAlignmentY,floatEq(offsetX,0)&&floatEq(offsetY,0)?results.push(void 0):results.push(function(){var m,ref,ref1,results1;for(results1=[],j=m=ref=firstIndex,ref1=lastIndex;m<=ref1;j=m+=1)child=flowChildren[j],l=child.getPendingCurrentLocation(),results1.push(child._setElementToParentMatrixFromLayoutXY(l.x+offsetX,l.y+offsetY,parentSize));return results1}());return results},CoreLayout.layoutElement=layoutElement=function(element,parentSize,skipLocation){var child,childI,childrenFlowState,childrenGrid,childrenLayout,childrenSize,currentMargin,currentPadding,finalLocation,firstPassChildren,firstPassSize,firstPassSizeForChildrenConstrained,firstPassSizeForChildrenUnconstrained,hasCustomLayoutChildrenFirstPass,hasCustomLayoutChildrenSecondPass,k,len,len1,len2,len3,m,n,o,pendingChildren,s,secondPassChildren,secondPassLocationLayoutChildren,secondPassSize,secondPassSizeForChildren,secondPassSizeLayoutChildren,size;if(!element.__layoutPropertiesChanged&&shallowEq(element._lastParentSize,parentSize))return element.getPendingCurrentSize();if(element._lastParentSize=parentSize,element.__layoutPropertiesChanged=!1,skipLocation||(finalLocation=element._layoutLocation(parentSize)),firstPassSize=element._layoutSize(parentSize,nearInfiniteSize),currentPadding=layoutPadding(element,parentSize),currentMargin=layoutMargin(element,parentSize),firstPassSizeForChildrenUnconstrained=element._sizeForChildren(firstPassSize),firstPassSizeForChildrenConstrained=element._sizeForChildren(element._layoutSizeForChildren(parentSize,nearInfiniteSize)),hasCustomLayoutChildrenFirstPass=isFunction(element.customLayoutChildrenFirstPass),hasCustomLayoutChildrenSecondPass=isFunction(element.customLayoutChildrenSecondPass),pendingChildren=element.getPendingChildren(),firstPassChildren=secondPassChildren=null,childrenLayout=element.getPendingChildrenLayout(),childrenLayout||element.getPendingSize().getChildrenRelative()){for(firstPassChildren=pendingChildren,childI=k=0,len=pendingChildren.length;k<len;childI=++k)child=pendingChildren[childI],child.getPendingInFlow()?secondPassChildren&&firstPassChildren.push(child):(secondPassChildren||(firstPassChildren=pendingChildren.slice(0,childI),secondPassChildren=[]),secondPassChildren.push(child));secondPassSizeLayoutChildren=[],secondPassLocationLayoutChildren=[],secondPassChildren||(secondPassChildren=[])}else secondPassChildren=pendingChildren;if(firstPassChildren||hasCustomLayoutChildrenFirstPass){if(childrenSize=function(){if(hasCustomLayoutChildrenFirstPass)return s=currentPadding.addedToSize(element.customLayoutChildrenFirstPass(firstPassSizeForChildrenUnconstrained)),(null!=pendingChildren?pendingChildren.length:void 0)>0&&(s=s.max(size=layoutChildrenComputeArea(currentPadding,firstPassSizeForChildrenConstrained,firstPassChildren,secondPassChildren,secondPassLocationLayoutChildren))),s;switch(childrenGrid=element.getPendingChildrenGrid(),childrenLayout){case"flow":return childrenFlowState=layoutChildrenFlow(element,currentPadding,firstPassSizeForChildrenUnconstrained,firstPassSizeForChildrenConstrained,firstPassChildren,secondPassSizeLayoutChildren),childrenFlowState.childrenSize;case"column":return childrenFlowState=childrenGrid?layoutChildrenRowGrid(!1,element,childrenGrid,currentPadding,firstPassSizeForChildrenConstrained,firstPassChildren,secondPassSizeLayoutChildren):layoutChildrenFlex(!1,element,currentPadding,firstPassSizeForChildrenConstrained,firstPassChildren,parentSize),childrenFlowState.childrenSize;case"row":return childrenFlowState=childrenGrid?layoutChildrenRowGrid(!0,element,childrenGrid,currentPadding,firstPassSizeForChildrenConstrained,firstPassChildren,secondPassSizeLayoutChildren):layoutChildrenFlex(!0,element,currentPadding,firstPassSizeForChildrenConstrained,firstPassChildren,parentSize),childrenFlowState.childrenSize;default:return layoutChildrenComputeArea(currentPadding,firstPassSizeForChildrenConstrained,firstPassChildren,secondPassChildren,secondPassLocationLayoutChildren)}}(),secondPassSize=element._layoutSize(parentSize,childrenSize),secondPassSizeForChildren=element._sizeForChildren(secondPassSize),secondPassSizeLayoutChildren)for(m=0,len1=secondPassSizeLayoutChildren.length;m<len1;m++)child=secondPassSizeLayoutChildren[m],layoutElement(child,secondPassSizeForChildren,!0);if(secondPassLocationLayoutChildren)for(n=0,len2=secondPassLocationLayoutChildren.length;n<len2;n++)child=secondPassLocationLayoutChildren[n],child._setElementToParentMatrixFromLayout(child._layoutLocation(secondPassSizeForChildren),parentSize)}else secondPassSize=firstPassSize,secondPassSizeForChildren=firstPassSizeForChildrenConstrained;if((null!=childrenFlowState?childrenFlowState.childrenAlignment:void 0)?alignChildren(childrenFlowState,secondPassSizeForChildren,childrenSize):hasCustomLayoutChildrenSecondPass&&element.customLayoutChildrenSecondPass(secondPassSizeForChildren),secondPassChildren)for(o=0,len3=secondPassChildren.length;o<len3;o++)child=secondPassChildren[o],layoutElement(child,secondPassSizeForChildren);return element._setSizeFromLayout(deinfinitize(secondPassSize)),skipLocation||element._setElementToParentMatrixFromLayout(deinfinitize(finalLocation),parentSize),secondPassSize},StateEpochLayout}(BaseObject)},function(module,exports,__webpack_require__){var Core,EpochLayout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Core=__webpack_require__(158),module.exports=Core.EpochLayout||Core.addNamespace("EpochLayout",EpochLayout=function(superClass){function EpochLayout(){return EpochLayout.__super__.constructor.apply(this,arguments)}return extend(EpochLayout,superClass),EpochLayout}(Neptune.Base))},function(module,exports,__webpack_require__){var Atomic,BaseObject,Basics,CoreLayout,FlexLayout,Foundation,Point,abs,floatEq,inspect,layoutMargin,log,max,peek,perimeter,point,point0,select,shallowEq,sizeWithPadding,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),CoreLayout=__webpack_require__(196),Basics=__webpack_require__(198),point=Atomic.point,Point=Atomic.Point,perimeter=Atomic.perimeter,BaseObject=Foundation.BaseObject,log=Foundation.log,inspect=Foundation.inspect,shallowEq=Foundation.shallowEq,select=Foundation.select,peek=Foundation.peek,inspect=Foundation.inspect,floatEq=Foundation.floatEq,layoutMargin=Basics.layoutMargin,sizeWithPadding=Basics.sizeWithPadding,point0=Point.point0,abs=Math.abs,max=Math.max,module.exports=FlexLayout=function(superClass){function FlexLayout(){return FlexLayout.__super__.constructor.apply(this,arguments)}return extend(FlexLayout,superClass),FlexLayout.layoutChildrenFlex=function(isRowLayout,element,currentPadding,elementSizeForChildren,children,parentSize){var addSecondPassChild,adjustedCrossSize,adjustedParentSize,child,childCrossSize,childFlexWeight,childrenAlignment,childrenSize,crossAlignment,crossCoordinate,crossOffset,crossRelativeTestFunction,crossSize,currentSize,effectivePrevMargin,elementCrossSizeForChildren,elementMainAxisIsChildRelative,elementMainSizeForChildren,finalPassMainSizesForChildren,finalPassSizeLayoutChildren,flexParentSize,hasCrossAlignment,hasMainAlignment,heightRemainingChildren,i,j,k,l,lastChildsNextMargin,len,len1,len2,len3,locationX,locationY,m,mainAlignment,mainCoordinate,mainPos,mainSize,mainSizeForChild,margin,maxCrossSize,nextMargin,previousMargin,ratio,relativeSizeIndex,relativeTestFunction,secondPassSizeForChildren,sizeForChild,spaceForFlexChildren,state,toPoint,totalFlexWeight,totalMainSize;for(isRowLayout?(mainCoordinate="x",crossCoordinate="y",previousMargin="left",nextMargin="right",relativeTestFunction="getXRelativeToParentW",crossRelativeTestFunction="getYRelativeToParentH",elementMainAxisIsChildRelative=element.getPendingSize().getXRelativeToChildrenW()):(mainCoordinate="y",crossCoordinate="x",previousMargin="top",nextMargin="bottom",relativeTestFunction="getYRelativeToParentH",crossRelativeTestFunction="getXRelativeToParentW",elementMainAxisIsChildRelative=element.getPendingSize().getYRelativeToChildrenH()),elementMainSizeForChildren=elementSizeForChildren[mainCoordinate],elementCrossSizeForChildren=elementSizeForChildren[crossCoordinate],heightRemainingChildren=null,maxCrossSize=totalFlexWeight=0,spaceForFlexChildren=elementSizeForChildren[mainCoordinate],totalMainSize=0,toPoint=function(mainPos,crossPos,currentPadding){var x,y;return x=y=0,isRowLayout?(x=mainPos,y=crossPos):(x=crossPos,y=mainPos),currentPadding?sizeWithPadding(x,y,currentPadding):point(x,y)},state={},lastChildsNextMargin=0,finalPassSizeLayoutChildren=null,finalPassMainSizesForChildren=null,addSecondPassChild=function(child,mainSizeForChild){return finalPassSizeLayoutChildren?(finalPassSizeLayoutChildren.push(child),finalPassMainSizesForChildren.push(mainSizeForChild)):(finalPassSizeLayoutChildren=[child],finalPassMainSizesForChildren=[mainSizeForChild])},i=j=0,len=children.length;j<len;i=++j)child=children[i],child.getPendingSize()[relativeTestFunction]()?(currentSize=child._layoutSize(elementSizeForChildren,point0),childFlexWeight=child.getPendingLayoutWeight(),totalFlexWeight+=childFlexWeight):(CoreLayout.layoutElement(child,elementSizeForChildren,!0),currentSize=child.getPendingCurrentSize(),mainSize=currentSize[mainCoordinate],totalMainSize+=mainSize,spaceForFlexChildren-=mainSize,child.getPendingLayoutSizeParentCircular()?addSecondPassChild(child,null):(crossSize=currentSize[crossCoordinate],maxCrossSize=max(maxCrossSize,crossSize))),margin=layoutMargin(child,elementSizeForChildren),i>0&&(effectivePrevMargin=max(lastChildsNextMargin,margin[previousMargin]),spaceForFlexChildren-=effectivePrevMargin),lastChildsNextMargin=margin[nextMargin];for(relativeSizeIndex=0,i=k=0,len1=children.length;k<len1;i=++k)child=children[i],child.getPendingSize()[relativeTestFunction]()&&(childFlexWeight=child.getPendingLayoutWeight(),ratio=childFlexWeight/totalFlexWeight,flexParentSize=toPoint(mainSizeForChild=spaceForFlexChildren*ratio,elementCrossSizeForChildren),CoreLayout.layoutElement(child,flexParentSize,!0),currentSize=child.getPendingCurrentSize(),mainSize=currentSize[mainCoordinate],child.getPendingLayoutSizeParentCircular()?addSecondPassChild(child,mainSizeForChild):(crossSize=currentSize[crossCoordinate],maxCrossSize=max(maxCrossSize,crossSize)),totalFlexWeight-=childFlexWeight,spaceForFlexChildren-=mainSize,totalMainSize+=mainSize);if(childrenSize=toPoint(totalMainSize,maxCrossSize,currentPadding),isRowLayout?(elementMainSizeForChildren=element.getPendingSize().layoutX(parentSize,childrenSize)-currentPadding.getWidth(),elementCrossSizeForChildren=element.getPendingSize().layoutY(parentSize,childrenSize)-currentPadding.getHeight()):(elementCrossSizeForChildren=element.getPendingSize().layoutX(parentSize,childrenSize)-currentPadding.getWidth(),elementMainSizeForChildren=element.getPendingSize().layoutY(parentSize,childrenSize)-currentPadding.getHeight()),finalPassSizeLayoutChildren)for(secondPassSizeForChildren=toPoint(elementMainSizeForChildren,elementCrossSizeForChildren),i=l=0,len2=finalPassSizeLayoutChildren.length;l<len2;i=++l)child=finalPassSizeLayoutChildren[i],sizeForChild=(mainSizeForChild=finalPassMainSizesForChildren[i])?toPoint(mainSizeForChild,elementCrossSizeForChildren):secondPassSizeForChildren,CoreLayout.layoutElement(child,sizeForChild,!0);for(lastChildsNextMargin=0,childrenAlignment=element.getPendingChildrenAlignment(),crossAlignment=childrenAlignment[crossCoordinate],hasCrossAlignment=!floatEq(0,crossAlignment),mainPos=!elementMainAxisIsChildRelative&&(hasMainAlignment=!floatEq(0,mainAlignment))?(mainAlignment=childrenAlignment[mainCoordinate],(elementMainSizeForChildren-totalMainSize)*mainAlignment):0,i=m=0,len3=children.length;m<len3;i=++m)child=children[i],margin=child.getPendingCurrentMargin(),i>0&&(effectivePrevMargin=max(lastChildsNextMargin,margin[previousMargin]),mainPos+=effectivePrevMargin),lastChildsNextMargin=margin[nextMargin],currentSize=child.getPendingCurrentSize(),mainSize=elementMainAxisIsChildRelative||i!==children.length-1?currentSize[mainCoordinate]:elementMainSizeForChildren-mainPos,crossOffset=0,adjustedCrossSize=elementCrossSizeForChildren,hasCrossAlignment&&(childCrossSize=currentSize[crossCoordinate],crossOffset=(elementCrossSizeForChildren-childCrossSize)*crossAlignment,adjustedCrossSize=childCrossSize),adjustedParentSize=toPoint(mainSize,adjustedCrossSize),locationX=child._layoutLocationX(adjustedParentSize),locationY=child._layoutLocationY(adjustedParentSize),isRowLayout?(locationX+=mainPos,locationY+=crossOffset):(locationY+=mainPos,locationX+=crossOffset),child._setElementToParentMatrixFromLayoutXY(locationX,locationY,adjustedParentSize),mainPos+=mainSize;return state.childrenSize=toPoint(mainPos,maxCrossSize,currentPadding),state},FlexLayout}(BaseObject)},function(module,exports,__webpack_require__){var Atomic,BaseObject,Basics,Foundation,Point,abs,isFunction,isInfiniteResult,nearInfiniteSize,nearInfinity,nearInfinityResult,perimeter,point,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),point=Atomic.point,Point=Atomic.Point,perimeter=Atomic.perimeter,BaseObject=Foundation.BaseObject,isFunction=Foundation.isFunction,abs=Foundation.abs,ref=__webpack_require__(199),nearInfiniteSize=ref.nearInfiniteSize,nearInfinity=ref.nearInfinity,nearInfinityResult=ref.nearInfinityResult,isInfiniteResult=ref.isInfiniteResult,module.exports=Basics=function(superClass){function Basics(){return Basics.__super__.constructor.apply(this,arguments)}return extend(Basics,superClass),Basics.nearInfiniteSize=nearInfiniteSize,Basics.nearInfinity=nearInfinity,Basics.nearInfinityResult=nearInfinityResult,Basics.layoutMargin=function(element,parentSize){var margin;return margin=element.getPendingMargin(),element._setMarginFromLayout(perimeter(isFunction(margin)?margin(parentSize):margin))},Basics.layoutPadding=function(element,parentSize){var padding;return padding=element.getPendingPadding(),element._setPaddingFromLayout(perimeter(isFunction(padding)?padding(parentSize):padding))},Basics.isInfiniteResult=isInfiniteResult,Basics.deinfinitize=function(p){var x,y;return x=p.x,y=p.y,x=isInfiniteResult(x)?0:x,y=isInfiniteResult(y)?0:y,p["with"](x,y)},Basics.sizeWithPadding=function(width,height,currentPadding){return point(width+currentPadding.getWidth(),height+currentPadding.getHeight())},Basics}(BaseObject)},function(module,exports,__webpack_require__){var Atomic,BaseObject,Foundation,abs,isFunction,isPlainObject,log,nearInfinitePoint,nearInfinity,nearInfinityResult,point;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),BaseObject=Foundation.BaseObject,isPlainObject=Foundation.isPlainObject,log=Foundation.log,isFunction=Foundation.isFunction,nearInfinity=Foundation.nearInfinity,nearInfinityResult=Foundation.nearInfinityResult,abs=Foundation.abs,point=Atomic.point,module.exports={nearInfinity:nearInfinity,nearInfinityResult:nearInfinityResult,nearInfinitePoint:nearInfinitePoint=point(nearInfinity),nearInfiniteSize:nearInfinitePoint,isInfiniteResult:function(x){return abs(x)>=nearInfinityResult}}},function(module,exports,__webpack_require__){var BaseObject,EasingPersistantAnimator,EpochedObject,Events,Foundation,GlobalEpochCycle,PeriodicPersistantAnimator,PersistantAnimator,StateEpoch,blankOptions,capitalize,compactFlatten,globalEpochCycle,inspect,isFunction,isNumber,isPlainArray,isPlainObject,isString,log,merge,mergeInto,nextTick,plainObjectsDeepEq,propInternalName,ref,shallowEq,stateEpoch,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Foundation=__webpack_require__(19),Events=__webpack_require__(168),StateEpoch=__webpack_require__(194),GlobalEpochCycle=__webpack_require__(201),ref=__webpack_require__(205),PersistantAnimator=ref.PersistantAnimator,EasingPersistantAnimator=ref.EasingPersistantAnimator,PeriodicPersistantAnimator=ref.PeriodicPersistantAnimator,log=Foundation.log,merge=Foundation.merge,mergeInto=Foundation.mergeInto,BaseObject=Foundation.BaseObject,capitalize=Foundation.capitalize,compactFlatten=Foundation.compactFlatten,isNumber=Foundation.isNumber,isFunction=Foundation.isFunction,shallowEq=Foundation.shallowEq,plainObjectsDeepEq=Foundation.plainObjectsDeepEq,isString=Foundation.isString,inspect=Foundation.inspect,isPlainObject=Foundation.isPlainObject,isPlainArray=Foundation.isPlainArray,nextTick=Foundation.nextTick,propInternalName=BaseObject.propInternalName,blankOptions={},stateEpoch=StateEpoch.stateEpoch,globalEpochCycle=GlobalEpochCycle.globalEpochCycle,module.exports=EpochedObject=function(superClass){function EpochedObject(options){null==options&&(options=blankOptions),EpochedObject.__super__.constructor.apply(this,arguments),this._initFields(),this._initProperties(options)}var _setPropertiesTempVirtualPropSetterNames,_setPropertiesTempVirtualPropValues,minimalPropsIngore,propsEq,shallowPropsEq;return extend(EpochedObject,superClass),EpochedObject.propsEq=propsEq=plainObjectsDeepEq,EpochedObject.shallowPropsEq=shallowPropsEq=shallowEq,EpochedObject.extendableProperty({propertyInitializerList:[],metaProperties:{}}),EpochedObject._defineElementProperty=function(externalName,options){var _getter,_setter,capitalizedExternalName,customPreprocessor,customSetter,customValidator,defaultValue,drawAreaProperty,drawProperty,getter,internalName,layoutProperty,metaProperties,pendingGetter,postSetter,preprocessor,setter;return null==options&&(options={}),internalName=propInternalName(externalName),customValidator=options.validate,customPreprocessor=options.preprocess,defaultValue=options["default"],preprocessor=customPreprocessor&&customValidator?customPreprocessor.length>1||customValidator.length>1?function(v,oldValue){if(null==v&&(v=defaultValue),!customValidator(v,oldValue))throw new Error("invalid value for "+externalName+": "+inspect(v));return customPreprocessor(v,oldValue)}:function(v){if(null==v&&(v=defaultValue),!customValidator(v))throw new Error("invalid value for "+externalName+": "+inspect(v));return customPreprocessor(v)}:customValidator?customValidator.length>1?function(v,oldValue){if(null==v&&(v=defaultValue),!customValidator(v,oldValue))throw new Error("invalid value for "+externalName+": "+inspect(v));return v}:function(v){if(null==v&&(v=defaultValue),!customValidator(v))throw new Error("invalid value for "+externalName+": "+inspect(v));return v}:customPreprocessor||function(v){return null==v&&(v=defaultValue),v},metaProperties={internalName:internalName,externalName:externalName,preprocessor:preprocessor,getterName:this._propGetterName(externalName),setterName:this._propSetterName(externalName)},options.virtual?(metaProperties.virtual=!0,_setter=options.setter||function(){},_getter=options.getter,getter=_getter,pendingGetter=function(){return _getter.call(this,!0)},setter=function(rawValue){return _setter.call(this,preprocessor(rawValue),rawValue,preprocessor)}):(metaProperties.defaultValue=defaultValue=preprocessor(defaultValue),getter=function(pending){return pending?this._pendingState[internalName]:this[internalName]},pendingGetter=function(){return this._pendingState[internalName]},layoutProperty=options.layoutProperty,drawProperty=options.drawProperty,drawAreaProperty=options.drawAreaProperty,postSetter=options.postSetter,setter=options.setter,setter=(customSetter=setter)?postSetter?function(rawNewValue){var newValue,oldValue;return oldValue=this._pendingState[internalName],newValue=this._pendingState[internalName]=customSetter.call(this,preprocessor(rawNewValue,oldValue),oldValue,rawNewValue,preprocessor),this._elementChanged(layoutProperty,drawProperty,drawAreaProperty),postSetter.call(this,newValue,oldValue,rawNewValue),newValue}:function(rawNewValue){var newValue,oldValue;return oldValue=this._pendingState[internalName],newValue=preprocessor(rawNewValue,oldValue),newValue=this._pendingState[internalName]=customSetter.call(this,preprocessor(rawNewValue,oldValue),oldValue,rawNewValue,preprocessor),this._elementChanged(layoutProperty,drawProperty,drawAreaProperty),newValue}:postSetter?function(rawNewValue){var newValue,oldValue;return oldValue=this._pendingState[internalName],newValue=this._pendingState[internalName]=preprocessor(rawNewValue,oldValue),this._elementChanged(layoutProperty,drawProperty,drawAreaProperty),postSetter.call(this,newValue,oldValue),newValue}:preprocessor.length>1?function(rawNewValue){var newValue,oldValue;
return oldValue=this._pendingState[internalName],newValue=this._pendingState[internalName]=preprocessor(rawNewValue,oldValue),this._elementChanged(layoutProperty,drawProperty,drawAreaProperty),newValue}:function(rawNewValue){var newValue;return newValue=this._pendingState[internalName]=preprocessor(rawNewValue),this._elementChanged(layoutProperty,drawProperty,drawAreaProperty),newValue},this.extendPropertyInitializerList().push([internalName,defaultValue,externalName])),this.extendMetaProperties(externalName,metaProperties),capitalizedExternalName=capitalize(externalName),this._addGetter(this.prototype,externalName,getter),this._addGetter(this.prototype,"pending"+capitalizedExternalName,pendingGetter),this._addGetter(this.prototype,externalName+"Changed",function(){return!shallowPropsEq(getter.call(this),pendingGetter.call(this))}),this._addSetter(this.prototype,externalName,setter)},EpochedObject.concreteProperty=function(map){var options,prop,results;results=[];for(prop in map)options=map[prop],results.push(this._defineElementProperty(prop,options));return results},EpochedObject.virtualProperty=function(map){var options,prop,results;results=[];for(prop in map)options=map[prop],isFunction(options)&&(options={getter:options}),options.virtual=!0,results.push(this._defineElementProperty(prop,options));return results},_setPropertiesTempVirtualPropSetterNames=[],_setPropertiesTempVirtualPropValues=[],EpochedObject.prototype.setProperties=function(props){var i,j,metaProperties,mp,prop,ref1,setterName,value,virtualPropCount;metaProperties=this.metaProperties,virtualPropCount=0;for(prop in props)value=props[prop],void 0!==value&&(mp=metaProperties[prop])&&(setterName=mp.setterName)&&(mp.virtual?(_setPropertiesTempVirtualPropSetterNames[virtualPropCount]=setterName,_setPropertiesTempVirtualPropValues[virtualPropCount++]=value):this[setterName](value));for(i=j=0,ref1=virtualPropCount;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j)this[_setPropertiesTempVirtualPropSetterNames[i]](_setPropertiesTempVirtualPropValues[i]);return props},EpochedObject.prototype.replaceProperties=function(propertySet){var externalName,metaProperties,mp,name,property;metaProperties=this.metaProperties;for(property in metaProperties)mp=metaProperties[property],mp.virtual||(externalName=mp.externalName,"function"==typeof this[name=mp.setterName]&&this[name](propertySet.hasOwnProperty(externalName)?propertySet[externalName]:mp.defaultValue));return propertySet},EpochedObject.prototype.setProperty=function(property,value){var mp,name;if(mp=this.metaProperties[property])return"function"==typeof this[name=mp.setterName]?this[name](value):void 0},EpochedObject.prototype.preprocessProperty=function(property,value){var mp;if(mp=this.metaProperties[property])return mp.preprocessor(value)},EpochedObject.prototype.resetProperty=function(property){var mp,name;if(mp=this.metaProperties[property])return"function"==typeof this[name=mp.setterName]?this[name](mp.defaultValue):void 0},EpochedObject.prototype.preprocessProperties=function(propertySet){var metaProperties,mp,property,value;metaProperties=this.metaProperties;for(property in propertySet)value=propertySet[property],(mp=metaProperties[property])&&(propertySet[property]=mp.preprocessor(value,this[mp.internalName]));return propertySet},EpochedObject.prototype.getPendingPropertyValues=function(propertyNames){var j,len,metaProp,property,ret;for(ret={},j=0,len=propertyNames.length;j<len;j++)property=propertyNames[j],(metaProp=this.metaProperties[property])&&(ret[property]=this._pendingState[metaProp.internalName]);return ret},EpochedObject.prototype.getPropertyValues=function(propertyNames){var j,len,metaProp,property,ret;for(ret={},j=0,len=propertyNames.length;j<len;j++)property=propertyNames[j],(metaProp=this.metaProperties[property])&&(ret[property]=this[metaProp.internalName]);return ret},EpochedObject.getter({props:function(){var k,ref1,ret,virtual;ret={},ref1=this.metaProperties;for(k in ref1)virtual=ref1[k].virtual,ret[k]=this[k];return ret},concreteProps:function(){var internalName,k,ref1,ref2,ret,virtual;ret={},ref1=this.metaProperties;for(k in ref1)ref2=ref1[k],internalName=ref2.internalName,virtual=ref2.virtual,virtual||(ret[k]=this[internalName]);return ret},virtualProps:function(){var k,ref1,ret,virtual;ret={},ref1=this.metaProperties;for(k in ref1)virtual=ref1[k].virtual,virtual&&(ret[k]=this[k]);return ret}}),minimalPropsIngore=["children","parent"],EpochedObject.getter({minimalProps:function(){var defaultValue,externalName,internalName,k,ref1,ref2,ret,value,virtual;ret={},ref1=this.metaProperties;for(k in ref1)ref2=ref1[k],externalName=ref2.externalName,internalName=ref2.internalName,virtual=ref2.virtual,defaultValue=ref2.defaultValue,virtual||indexOf.call(minimalPropsIngore,externalName)<0&&(propsEq(defaultValue,value=this[internalName])||(ret[k]=value));return ret}}),EpochedObject.prototype.onNextReady=function(callback,forceEpoch){return null==forceEpoch&&(forceEpoch=!0),stateEpoch.onNextReady(callback,forceEpoch,this)},EpochedObject.onNextReady=function(callback,forceEpoch){return null==forceEpoch&&(forceEpoch=!0),stateEpoch.onNextReady(callback,forceEpoch)},EpochedObject.prototype.onNextEpoch=function(callback,forceEpoch){return null==forceEpoch&&(forceEpoch=!0),globalEpochCycle.onNextReady(callback,forceEpoch,this)},EpochedObject.onNextEpoch=function(callback,forceEpoch){return null==forceEpoch&&(forceEpoch=!0),globalEpochCycle.onNextReady(callback,forceEpoch)},EpochedObject.prototype.onIdle=function(callback){return stateEpoch.onNextReady(callback)},EpochedObject.prototype.getState=function(pending){return null==pending&&(pending=!1),pending?this._pendingState:this},EpochedObject.concreteProperty({animators:{"default":null,preprocess:function(v){var addProp,addProps,processedAnimators;return processedAnimators=null,addProp=function(_this){return function(prop,options){return processedAnimators||(processedAnimators={}),processedAnimators["_"+prop]=options instanceof PersistantAnimator?options:isFunction(options)?new PersistantAnimator(prop,{animate:options}):isNumber(null!=options?options.period:void 0)?new PeriodicPersistantAnimator(prop,merge(options,{continuous:!0})):(null!=options?options.animate:void 0)?new PersistantAnimator(prop,options):new EasingPersistantAnimator(prop,options)}}(this),addProps=function(v){var el,j,l,len,len1,options,prop,ref1,results,results1,results2;if(v){if(isString(v)){for(ref1=v.match(/[a-z]+/gi),results=[],j=0,len=ref1.length;j<len;j++)prop=ref1[j],results.push(addProp(prop));return results}if(isPlainArray(v)){for(results1=[],l=0,len1=v.length;l<len1;l++)el=v[l],results1.push(addProps(el));return results1}results2=[];for(prop in v)options=v[prop],results2.push(addProp(prop,options));return results2}},addProps(v),processedAnimators}}}),EpochedObject.prototype._initFields=function(){return this._pendingState={},this.__stateEpochCount=0,this.__stateChangeQueued=!1,this.__layoutPropertiesChanged=!1,this.__drawAreaChanged=!0,this.__drawPropertiesChanged=!0},EpochedObject._generateSetPropertyDefaults=function(){var defaultName,defaultOverride,externalName,functionString,i,k,metaProperties,preprocessor,propertyInitializerList,v,value;return propertyInitializerList=this.getPropertyInitializerList(),metaProperties=this.getMetaProperties(),functionString=compactFlatten(["(function(options) {","var _pendingState = this._pendingState;","var metaProperties = this.metaProperties;",function(){var j,len,ref1,results;for(results=[],i=j=0,len=propertyInitializerList.length;j<len;i=++j)ref1=propertyInitializerList[i],k=ref1[0],v=ref1[1],externalName=ref1[2],value=void 0!==(defaultOverride=this.prototype[defaultName="default"+capitalize(externalName)])?((preprocessor=metaProperties[externalName].preprocessor)?this.prototype[defaultName]=preprocessor(defaultOverride):void 0,"this."+defaultName):null===v||v===!1||v===!0||void 0===v||isNumber(v)?v:"metaProperties."+externalName+".defaultValue;",results.push("this."+k+" = _pendingState."+k+" = "+value+";");return results}.call(this),"})"]).join("\n"),eval(functionString)},EpochedObject.prototype._initProperties=function(options){var metaProperties;return metaProperties=this.metaProperties,this.__proto__.hasOwnProperty("_initPropertiesAuto")||(this.__proto__._initPropertiesAuto=this["class"]._generateSetPropertyDefaults()),this._initPropertiesAuto(options),this.setProperties(options),this._elementChanged(!0,!0,!0),null},EpochedObject.prototype._getChangingStateKeys=function(){var k,ref1,results,v;ref1=this._pendingState,results=[];for(k in ref1)v=ref1[k],shallowPropsEq(this[k],this._pendingState[k])||results.push(k);return results},EpochedObject.prototype._logPendingStateChanges=function(){var k,newValues,oldValues,ref1,v;oldValues={},newValues={},ref1=this._pendingState;for(k in ref1)v=ref1[k],k.match(/^__/)||plainObjectsDeepEq(v,this[k])||(oldValues[k]=this[k],newValues[k]=v);return log({"ElementBase pending state changes":{element:this.inspectedName,old:oldValues,"new":newValues}})},EpochedObject.prototype._getIsChangingElement=function(){return stateEpoch._isChangingElement(this)},EpochedObject.prototype._elementChanged=function(layoutPropertyChanged,drawPropertyChanged,drawAreaPropertyChanged){var _pendingState;if(_pendingState=this._pendingState,layoutPropertyChanged&&(StateEpoch._stateEpochLayoutInProgress&&console.error("__layoutPropertiesChanged while _stateEpochLayoutInProgress"),this.__layoutPropertiesChanged=!0),drawPropertyChanged&&(this.__drawPropertiesChanged=!0),drawAreaPropertyChanged&&(this.__drawAreaChanged=!0),!this.__stateChangeQueued)return this.__stateChangeQueued=!0,stateEpoch._addChangingElement(this)},EpochedObject.prototype._applyStateChanges=function(){return this.__stateChangeQueued=!1,this.__stateEpochCount++,mergeInto(this,this._pendingState)},EpochedObject.prototype._deactivatePersistantAnimators=function(){var animator,prop,ref1,results;ref1=this.animators,results=[];for(prop in ref1)animator=ref1[prop],results.push(animator.deactivate());return results},EpochedObject.prototype._activateContinuousPersistantAnimators=function(){return nextTick(function(_this){return function(){return _this._elementChanged()}}(this))},EpochedObject.prototype.getPendingCreatedAndAddedToExistingParent=function(){var ref1;return 0===this.__stateEpochCount&&!(0===(null!=(ref1=this._pendingState._parent)?ref1.__stateEpochCount:void 0))},EpochedObject.prototype._applyAnimators=function(){var active,animateFromVoid,animator,currentValue,epochCount,frameSecond,hasFromVoidAnimation,newValue,pendingAnimators,pendingValue,prop;if(pendingAnimators=this._pendingState._animators){animateFromVoid=this.getPendingCreatedAndAddedToExistingParent(),frameSecond=stateEpoch.frameSecond,epochCount=stateEpoch.epochCount;for(prop in pendingAnimators)animator=pendingAnimators[prop],active=animator.active,pendingValue=this._pendingState[prop],currentValue=animateFromVoid&&(hasFromVoidAnimation=animator.hasFromVoidAnimation)?animator.getPreprocessedFromVoid(this):0===this.__stateEpochCount?pendingValue:this[prop],newValue=active||!propsEq(currentValue,pendingValue)?animator.animateAbsoluteTime(this,currentValue,pendingValue,frameSecond):pendingValue,this._pendingState[prop]=newValue}return null},EpochedObject}(BaseObject)},function(module,exports,__webpack_require__){var DrawCacheManager,DrawEpoch,DummyEpoch,Epoch,EventEpoch,Foundation,GlobalEpochCycle,IdleEpoch,Map,StateEpoch,arrayWithout,currentSecond,drawCacheManager,drawEpoch,dummyEpoch,durationString,eventEpoch,fastBind,fluxEpoch,globalCount,idleEpoch,isPlainObject,log,miniInspect,reactEpoch,requestAnimationFrame,stateEpoch,time,toMs,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),EventEpoch=__webpack_require__(168).EventEpoch,StateEpoch=__webpack_require__(194),DrawEpoch=__webpack_require__(202),IdleEpoch=__webpack_require__(204),DrawCacheManager=__webpack_require__(203),log=Foundation.log,requestAnimationFrame=Foundation.requestAnimationFrame,Map=Foundation.Map,miniInspect=Foundation.miniInspect,time=Foundation.time,arrayWithout=Foundation.arrayWithout,currentSecond=Foundation.currentSecond,Epoch=Foundation.Epoch,globalCount=Foundation.globalCount,isPlainObject=Foundation.isPlainObject,durationString=Foundation.durationString,fastBind=Foundation.fastBind,toMs=function(s){return(1e3*s).toFixed(1)+"ms"},eventEpoch=EventEpoch.eventEpoch,drawEpoch=DrawEpoch.drawEpoch,stateEpoch=StateEpoch.stateEpoch,idleEpoch=IdleEpoch.idleEpoch,drawCacheManager=DrawCacheManager.drawCacheManager,DummyEpoch=function(superClass){function DummyEpoch(){return DummyEpoch.__super__.constructor.apply(this,arguments)}return extend(DummyEpoch,superClass),DummyEpoch.singletonClass(),DummyEpoch}(Epoch),dummyEpoch=DummyEpoch.dummyEpoch,fluxEpoch=reactEpoch=dummyEpoch,module.exports=GlobalEpochCycle=function(superClass){function GlobalEpochCycle(){var boundQueueNextEpoch;GlobalEpochCycle.__super__.constructor.apply(this,arguments),this.cycleQueued=!1,this.processingCycle=!1,this.activeCanvasElements=[],this._fluxOnIdleOkUntil=currentSecond(),this._resetThisCyclesStats(),boundQueueNextEpoch=fastBind(this.queueNextEpoch,this),idleEpoch.queueNextEpoch=stateEpoch.queueNextEpoch=drawEpoch.queueNextEpoch=eventEpoch.queueNextEpoch=boundQueueNextEpoch,eventEpoch.logEvent=function(_this){return function(name,id){var ref;return null!=(ref=_this.globalEpochStats)?ref.logEvent(name,id):void 0}}(this)}var timerStack;return extend(GlobalEpochCycle,superClass),GlobalEpochCycle.singletonClass(),GlobalEpochCycle.classGetter({activeCanvasElements:function(){return this.globalEpochCycle.activeCanvasElements}}),GlobalEpochCycle.prototype.allowFluxOnIdle=function(nextNSeconds){return this._fluxOnIdleOkUntil=currentSecond()+nextNSeconds},GlobalEpochCycle.prototype._resetThisCyclesStats=function(){return this.performanceSamples={}},GlobalEpochCycle.prototype.addPerformanceSample=function(name,value){if(!this.performanceSamples)throw new Error("@performanceSamples not set");return this.performanceSamples[name]=(this.performanceSamples[name]||0)+value},timerStack=[],GlobalEpochCycle.prototype.timePerformance=function(name,f){var start,subTimeTotal,timeResult,tsl;return start=currentSecond(),timerStack.push(0),f(),subTimeTotal=timerStack.pop(),timeResult=currentSecond()-start,(tsl=timerStack.length)>0&&(timerStack[tsl-1]+=timeResult),this.addPerformanceSample(name,timeResult-subTimeTotal)},GlobalEpochCycle.getter({numActivePointers:function(){var canvasElement,count,i,len,ref;for(count=0,ref=this.activeCanvasElements,i=0,len=ref.length;i<len;i++)canvasElement=ref[i],count+=canvasElement.getNumActivePointers();return count},idle:function(){return 0===reactEpoch.getEpochLength()&&0===stateEpoch.getEpochLength()&&0===eventEpoch.getEpochLength()},epochLength:function(){return idleEpoch.getEpochLength()+eventEpoch.getEpochLength()+stateEpoch.getEpochLength()+reactEpoch.getEpochLength()+fluxEpoch.getEpochLength()}}),GlobalEpochCycle.getter({idleEpoch:function(){return idleEpoch},eventEpoch:function(){return eventEpoch},stateEpoch:function(){return stateEpoch},drawEpoch:function(){return drawEpoch},reactEpoch:function(){return reactEpoch},fluxEpoch:function(){return fluxEpoch}}),GlobalEpochCycle.prototype.includeReact=function(epoch){return(reactEpoch=epoch).queueNextEpoch=function(_this){return function(){return _this.queueNextEpoch()}}(this)},GlobalEpochCycle.prototype.includeFlux=function(epoch){return(fluxEpoch=epoch).queueNextEpoch=function(_this){return function(){return _this.queueNextEpoch()}}(this)},GlobalEpochCycle.prototype.logEvent=function(name,id){var ref;return null!=(ref=this.globalEpochStats)?ref.logEvent(name,id):void 0},GlobalEpochCycle.prototype.detachCanvasElement=function(toRemoveCe){return this.activeCanvasElements=arrayWithout(this.activeCanvasElements,toRemoveCe)},GlobalEpochCycle.prototype.attachCanvasElement=function(toAddCe){return this.activeCanvasElements.push(toAddCe)},GlobalEpochCycle.prototype.processFluxEpoch=function(){return this.timePerformance("flux",function(_this){return function(){return fluxEpoch.processEpoch()}}(this))},GlobalEpochCycle.prototype.processIdleEpoch=function(){return this.timePerformance("idle",function(_this){return function(){return null!=idleEpoch?idleEpoch.processEpoch():void 0}}(this))},GlobalEpochCycle.prototype.processEventEpoch=function(){return this.timePerformance("event",function(_this){return function(){return eventEpoch.processEpoch()}}(this))},GlobalEpochCycle.prototype.processReactEpoch=function(){return this.timePerformance("react",function(_this){return function(){return reactEpoch.processEpoch()}}(this))},GlobalEpochCycle.prototype.processStateEpoch=function(){return this.timePerformance("aim",function(_this){return function(){return stateEpoch.processEpoch()}}(this))},GlobalEpochCycle.prototype.processDrawEpoch=function(){return this.timePerformance("draw",function(_this){return function(){return drawEpoch.processEpoch()}}(this))},GlobalEpochCycle.prototype.flushEpochNow=function(){if(!this.processingCycle)return this.processingCycle=!0,this._processCycleExceptDraw(),this.processingCycle=!1},GlobalEpochCycle.prototype._processCycleExceptDraw=function(){return this.processEventEpoch(),this.processFluxEpoch(),this.getIdle()&&this.processIdleEpoch(),reactEpoch.updateGlobalCounts(),this.processReactEpoch(),globalCount("reactEpochAfter",reactEpoch.getEpochLength()),stateEpoch.updateGlobalCounts(),this.processStateEpoch(),globalCount("stateEpochAfter",stateEpoch.getEpochLength())},GlobalEpochCycle.prototype.processEpochItems=function(items){var drawCount,gc,globalEpochFrameTime,ref,startTime;if(fluxEpoch._frameSecond=idleEpoch._frameSecond=eventEpoch._frameSecond=reactEpoch._frameSecond=stateEpoch._frameSecond=drawEpoch._frameSecond=this._frameSecond,Foundation.resetGlobalCounts(),startTime=currentSecond(),this._resetThisCyclesStats(),this.processingCycle=!0,this._processCycleExceptDraw(),stateEpoch.getEpochLength()>0&&this.processStateEpoch(),drawCount=drawEpoch.epochLength,this.processDrawEpoch(),this.processingCycle=!1,this.getEpochLength()>0&&this.queueNextEpoch(),drawCount>0)return globalEpochFrameTime=currentSecond()-startTime,gc=Foundation.globalCounts,null!=(ref=this.globalEpochStats)?ref.add(startTime,globalEpochFrameTime,this.performanceSamples):void 0},GlobalEpochCycle}(Epoch)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125),__webpack_require__(203)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic,DrawCacheManager){var DrawEpoch,Epoch,Point,drawCacheManager,globalCount,inspect,log,longestCommonSubsequence,point,requestAnimationFrame,select;return point=Atomic.point,Point=Atomic.Point,log=Foundation.log,requestAnimationFrame=Foundation.requestAnimationFrame,longestCommonSubsequence=Foundation.longestCommonSubsequence,select=Foundation.select,inspect=Foundation.inspect,Epoch=Foundation.Epoch,globalCount=Foundation.globalCount,drawCacheManager=DrawCacheManager.drawCacheManager,DrawEpoch=function(superClass){function DrawEpoch(){return DrawEpoch.__super__.constructor.apply(this,arguments)}return extend(DrawEpoch,superClass),DrawEpoch.singletonClass(),DrawEpoch.prototype.processEpochItems=function(){return DrawEpoch.__super__.processEpochItems.apply(this,arguments),drawCacheManager.advanceFrame()},DrawEpoch}(Epoch)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(158),__webpack_require__(19),__webpack_require__(125),__webpack_require__(137)],__WEBPACK_AMD_DEFINE_RESULT__=function(ArtEngineCore,Foundation,Atomic,Canvas){var BaseObject,Bitmap,CacheBitmap,DrawCacheManager,Map,Matrix,Point,Rectangle,getGlobalEpochCycle,inspect,log,matrix,point,rect,remove,timeout;return point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,inspect=Foundation.inspect,BaseObject=Foundation.BaseObject,Map=Foundation.Map,timeout=Foundation.timeout,remove=Foundation.remove,log=Foundation.log,Bitmap=Canvas.Bitmap,getGlobalEpochCycle=function(){return ArtEngineCore.GlobalEpochCycle.globalEpochCycle},CacheBitmap=function(superClass){function CacheBitmap(element1,bitmap1,lastFrameUsed){this.element=element1,this.bitmap=bitmap1,this._reset(lastFrameUsed)}return extend(CacheBitmap,superClass),CacheBitmap.prototype._reset=function(lastFrameUsed){return this.useCount=0,this.lastFrameUsed=lastFrameUsed||0},CacheBitmap.prototype.recycle=function(newElement,lastFrameUsed){return this.elementDoneWithCacheBitmap(),this.element=newElement,this._reset(lastFrameUsed),this.bitmap.clear(),this.bitmap},CacheBitmap.prototype.use=function(currentFrameNumber){return this.lastFrameUsed=currentFrameNumber,this.useCount++},CacheBitmap.prototype.elementDoneWithCacheBitmap=function(){return this.element&&this.element._drawCacheBitmap===this.bitmap&&this.element.__clearDrawCacheCallbackFromDrawCacheManager(),this.element=null},CacheBitmap.getter({byteSize:function(){return this.bitmap.getByteSize()}}),CacheBitmap}(BaseObject),DrawCacheManager=function(superClass){function DrawCacheManager(){DrawCacheManager.__super__.constructor.apply(this,arguments),this._currentFrameNumber=0,this._maxCacheByteSize=67108864,this._cacheByteSize=0,this._unusedCacheByteSize=0,this._cachedBitmaps=new Map,this._bitmapsCreated=0,this._unusedCacheBitmaps=[]}var byteSizeFromSize,usableBitmap;return extend(DrawCacheManager,superClass),DrawCacheManager.byteSizeFromSize=byteSizeFromSize=function(size){return size.x*size.y*4},DrawCacheManager.singletonClass(),DrawCacheManager.usableBitmap=usableBitmap=function(bitmap,w,h){var ref,x,y;return ref=bitmap.size,x=ref.x,y=ref.y,w<=x&&h<=y&&x*y<w*h*2},DrawCacheManager.getter({currentFrameNumber:function(){return this._currentFrameNumber},recycleableSortedCacheBitmaps:function(){var currentFrameNumber,recyclable;return recyclable=[],currentFrameNumber=this._currentFrameNumber,this._cachedBitmaps.each(function(k,v){if(v.lastFrameUsed<currentFrameNumber-1)return recyclable.push(v)}),recyclable.sort(function(a,b){return a.lastFrameUsed-b.lastFrameUsed})}}),DrawCacheManager.prototype.doneWithCacheBitmap=function(element){var cachedBitmap;if(cachedBitmap=this._cachedBitmaps.remove(element))return cachedBitmap.elementDoneWithCacheBitmap(),this._unusedCacheByteSize+=cachedBitmap.getByteSize(),this._unusedCacheBitmaps.push(cachedBitmap)},DrawCacheManager.prototype.useDrawCache=function(element){var ref;return null!=(ref=this._cachedBitmaps.get(element))?ref.use(this._currentFrameNumber):void 0},DrawCacheManager.prototype.allocateCacheBitmap=function(element,size){return this.doneWithCacheBitmap(element),this._recycleUnusedCacheBitmap(element,size)||this._createCacheBitmap(element,size)},DrawCacheManager.prototype.advanceFrame=function(){var cfn;return this._currentFrameNumber++,cfn=this._currentFrameNumber},DrawCacheManager.prototype._recycleInUseCacheBitmap=function(element,size){var recyclableCacheBitmap;if(recyclableCacheBitmap=this._findRecycleableCacheBitmap(size))return this._cachedBitmaps.set(element,this._cachedBitmaps.remove(recyclableCacheBitmap.element)),getGlobalEpochCycle().logEvent("recycleUsedCacheBitmap","recycleUsedCacheBitmap"),recyclableCacheBitmap.recycle(element,this._currentFrameNumber)},DrawCacheManager.prototype._recycleUnusedCacheBitmap=function(element,size){var unusedCacheBitmap;if(unusedCacheBitmap=this._getUnusedCacheBitmap(size))return getGlobalEpochCycle().logEvent("recycleUnusedCacheBitmap","recycleUnusedCacheBitmap"),unusedCacheBitmap.recycle(element,this._currentFrameNumber),this._cachedBitmaps.set(element,unusedCacheBitmap),unusedCacheBitmap.bitmap},DrawCacheManager.prototype._createCacheBitmap=function(element,size){var bitmap,cacheBitmap,cachedBitmap;return this._roomInCacheForNewBitmap(size)||this._evictCacheBitmaps(size),this._bitmapsCreated++,getGlobalEpochCycle().logEvent("createCacheBitmap","createCacheBitmap"),bitmap=element.getBitmapFactory().newBitmap(size),cachedBitmap=this._cachedBitmaps.set(element,cacheBitmap=new CacheBitmap(element,bitmap,this._currentFrameNumber)),this._cacheByteSize+=cachedBitmap.getByteSize(),bitmap},DrawCacheManager.prototype._getUnusedCacheBitmap=function(size){var cachedBitmap,i,j,len,ref;for(ref=this._unusedCacheBitmaps,i=j=0,len=ref.length;j<len;i=++j)if(cachedBitmap=ref[i],cachedBitmap.bitmap.size.eq(size))return this._unusedCacheBitmaps=remove(this._unusedCacheBitmaps,i),this._unusedCacheByteSize-=cachedBitmap.getByteSize(),cachedBitmap},DrawCacheManager.prototype._findRecycleableCacheBitmap=function(size){var currentFrameNumber;return currentFrameNumber=this._currentFrameNumber,this._cachedBitmaps.findFirst(function(_this){return function(cachedBitmap){return cachedBitmap.lastFrameUsed<currentFrameNumber-1&&cachedBitmap.bitmap.size.eq(size)}}(this))},DrawCacheManager.prototype._roomInCacheForNewBitmap=function(size){var byteSize;return byteSize=byteSizeFromSize(size),byteSize+this._cacheByteSize<=this._maxCacheByteSize},DrawCacheManager.prototype._evictCacheBitmaps=function(size){var byteSize,cachedBitmap,evictionByteSize,j,len,maxCacheByteSize,ref;for(byteSize=byteSizeFromSize(size),maxCacheByteSize=this._maxCacheByteSize,evictionByteSize=0,ref=this.recycleableSortedCacheBitmaps,j=0,len=ref.length;j<len&&(cachedBitmap=ref[j],!((cachedBitmap=this._cachedBitmaps.remove(cachedBitmap.element))&&(cachedBitmap.elementDoneWithCacheBitmap(),byteSize=cachedBitmap.getByteSize(),evictionByteSize+=byteSize,this._cacheByteSize-=byteSize,this._cacheByteSize+byteSize<=maxCacheByteSize)));j++);return null},DrawCacheManager}(BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation){var Epoch,IdleEpoch,log;return log=Foundation.log,Epoch=Foundation.Epoch,IdleEpoch=function(superClass){function IdleEpoch(){return IdleEpoch.__super__.constructor.apply(this,arguments)}return extend(IdleEpoch,superClass),IdleEpoch.singletonClass(),IdleEpoch.prototype.queue=function(event){return this.queueItem(event)},IdleEpoch}(Epoch)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(206).addModules({Animator:__webpack_require__(185),EasingFunctions:__webpack_require__(186),EasingPersistantAnimator:__webpack_require__(207),PeriodicPersistantAnimator:__webpack_require__(209),PersistantAnimator:__webpack_require__(208)})},function(module,exports,__webpack_require__){var Animation,Engine,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.Animation||Engine.addNamespace("Animation",Animation=function(superClass){function Animation(){return Animation.__super__.constructor.apply(this,arguments)}return extend(Animation,superClass),Animation}(Neptune.Base))},function(module,exports,__webpack_require__){var BaseObject,EasingFunctions,EasingPersistantAnimator,EventedObject,Events,Foundation,PersistantAnimator,interpolate,isFunction,isNumber,isString,log,max,min,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Events=__webpack_require__(168),EasingFunctions=__webpack_require__(186),PersistantAnimator=__webpack_require__(208),log=Foundation.log,BaseObject=Foundation.BaseObject,isFunction=Foundation.isFunction,isString=Foundation.isString,isNumber=Foundation.isNumber,min=Foundation.min,max=Foundation.max,EventedObject=Events.EventedObject,interpolate=PersistantAnimator.interpolate,module.exports=EasingPersistantAnimator=function(superClass){function EasingPersistantAnimator(_,options){null==options&&(options={}),EasingPersistantAnimator.__super__.constructor.apply(this,arguments),this.setEasingFunction(options.f||options.easingFunction),this.setDuration(null!=options.d?options.d:options.duration)}return extend(EasingPersistantAnimator,superClass),EasingPersistantAnimator.getter("duration easingFunction"),EasingPersistantAnimator.getter({animationPos:function(){return min(1,this.getAnimationSeconds()/this._duration)}}),EasingPersistantAnimator.setter({duration:function(d){return this._duration=isNumber(d)?max(.001,d):.25},easingFunction:function(f){return this._easingFunction=f,isString(f)&&((this._easingFunction=EasingFunctions[f])||console.warn("invalid easing easingFunction: "+f)),this._easingFunction||(this._easingFunction=EasingFunctions.easeInQuad)}}),EasingPersistantAnimator.prototype.animate=function(){var animationPos,easingFunction,ref,startValue,toValue;return ref=this,startValue=ref.startValue,toValue=ref.toValue,animationPos=ref.animationPos,easingFunction=ref.easingFunction,1===animationPos&&this.stop(),interpolate(startValue,toValue,easingFunction(animationPos))},EasingPersistantAnimator}(PersistantAnimator)},function(module,exports,__webpack_require__){var BaseObject,EventedMixin,Events,Foundation,PersistantAnimator,capitalize,eq,inspectedObjectLiteral,isFunction,isPlainObject,isString,log,plainObjectsDeepEq,rubyOr,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Events=__webpack_require__(168),log=Foundation.log,BaseObject=Foundation.BaseObject,isFunction=Foundation.isFunction,isString=Foundation.isString,capitalize=Foundation.capitalize,inspectedObjectLiteral=Foundation.inspectedObjectLiteral,plainObjectsDeepEq=Foundation.plainObjectsDeepEq,isPlainObject=Foundation.isPlainObject,eq=Foundation.eq,rubyOr=Foundation.rubyOr,EventedMixin=Events.EventedMixin,module.exports=PersistantAnimator=function(superClass){function PersistantAnimator(prop,options){var ref,ref1;PersistantAnimator.__super__.constructor.apply(this,arguments),
this._prop=prop,this._options=options,this._active=!1,this._startSecond=null,this._currentSecond=null,this._lastSecond=null,this._startValue=null,this._currentValue=null,this._toValue=null,this._element=null,this._animate=options.animate,this._continuous=options.continuous,this._voidValue=rubyOr(options.voidValue,options.toFromVoid,options.fromToVoid,options["void"],options.toFrom,options.fromTo),this._toVoid=null!=(ref=options.toVoid)?ref:options.to,this._fromVoid=null!=(ref1=options.fromVoid)?ref1:options.from,(null!=options?options.on:void 0)&&this.on(options.on)}var interpolate;return extend(PersistantAnimator,superClass),PersistantAnimator.interpolate=interpolate=function(startValue,toValue,pos){var k,out,v;if(isFunction(startValue.interpolate))return startValue.interpolate(toValue,pos);if(isPlainObject(startValue)){out={};for(k in startValue)v=startValue[k],out[k]=interpolate(v,toValue[k],pos);return out}return startValue+(toValue-startValue)*pos},PersistantAnimator.getter("options prop element startValue currentValue toValue continuous voidValue currentSecond startSecond"),PersistantAnimator.getter({active:function(){return this._active||this._continuous&&(!this._element||this._element.isRegistered)},state:function(){return this._state||(this._state={})}}),PersistantAnimator.prototype.deactivate=function(){if(this._active)return this._deactivate()},PersistantAnimator.getter({inspectedObjects:function(){var ref;return[inspectedObjectLiteral("PersistantAnimator"),{prop:this.prop,element:null!=(ref=this.element)?ref.inspectedName:void 0,options:this.options}]}}),PersistantAnimator.getter({fromVoid:function(){return null!=this._voidValue?this._voidValue:this._fromVoid},toVoid:function(){return null!=this._voidValue?this._voidValue:this._toVoid},hasFromVoidAnimation:function(){return null!=this.fromVoid},hasToVoidAnimation:function(){return null!=this.toVoid}}),PersistantAnimator.getter({animationSeconds:function(){return this._currentSecond-this._startSecond},frameSeconds:function(){return this._active?this._currentSecond-this._lastSecond:0},stop:function(){return this._stop||(this._stop=function(_this){return function(){return _this._active=!1,_this._toValue}}(this))}}),PersistantAnimator.prototype.startToVoidAnimation=function(_element){return this._element=_element,this.hasToVoidAnimation?new Promise(function(_this){return function(resolve,reject){return _this._active&&_this._activate(),_this._element[_this._prop]=_this._toValue=_this.toVoid,_this.on({done:resolve})}}(this)):Promise.reject()},PersistantAnimator.prototype.getPreprocessedFromVoid=function(_element){return this._element=_element,this._element.preprocessProperty(this._prop,this.fromVoid)},PersistantAnimator.prototype.animate=function(){return this._animate?this._animate(this):(log("no @_animate"),this.stop())},PersistantAnimator.prototype._activate=function(){return this._lastSecond=this._startSecond=this._currentSecond-this.frameSeconds,this._startValue=this._currentValue,this.queueEvent("start"),this._active=!0},PersistantAnimator.prototype._deactivate=function(){return this.queueEvent("done"),this._active=!1},PersistantAnimator.prototype.animateAbsoluteTime=function(_element,_currentValue,toValue,_currentSecond){var animationSeconds,newValue;return this._element=_element,this._currentValue=_currentValue,this._currentSecond=_currentSecond,this._active&&eq(toValue,this._toValue)||this._activate(),this._toValue=toValue,animationSeconds=this.getAnimationSeconds(),newValue=this.animate(),this._active?(animationSeconds>0&&this.queueEvent("update"),this._element.onNextEpoch(function(_this){return function(){return _this._element[_this._prop]=_this._toValue}}(this))):this._deactivate(),this._lastSecond=this._currentSecond,this._element.preprocessProperty(this._prop,newValue)},PersistantAnimator}(EventedMixin(BaseObject))},function(module,exports,__webpack_require__){var BaseObject,EasingFunctions,EventedObject,Events,Foundation,PeriodicPersistantAnimator,PersistantAnimator,interpolate,isFunction,isNumber,isString,log,max,min,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Events=__webpack_require__(168),EasingFunctions=__webpack_require__(186),PersistantAnimator=__webpack_require__(208),log=Foundation.log,BaseObject=Foundation.BaseObject,isFunction=Foundation.isFunction,isString=Foundation.isString,isNumber=Foundation.isNumber,min=Foundation.min,max=Foundation.max,EventedObject=Events.EventedObject,interpolate=PersistantAnimator.interpolate,module.exports=PeriodicPersistantAnimator=function(superClass){function PeriodicPersistantAnimator(_,options){null==options&&(options={}),PeriodicPersistantAnimator.__super__.constructor.apply(this,arguments),this.period=options.period}return extend(PeriodicPersistantAnimator,superClass),PeriodicPersistantAnimator.getter({animationPos:function(){return this.getAnimationSeconds()%this._period/this._period}}),PeriodicPersistantAnimator.property("period"),PeriodicPersistantAnimator}(PersistantAnimator)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation){var BaseObject,EngineStat,Map,Stat,arrayWithout,currentSecond,log,miniInspect;return log=Foundation.log,Map=Foundation.Map,miniInspect=Foundation.miniInspect,currentSecond=Foundation.currentSecond,arrayWithout=Foundation.arrayWithout,BaseObject=Foundation.BaseObject,Stat=Foundation.Stat,EngineStat=function(superClass){function EngineStat(){this.reset()}return extend(EngineStat,superClass),EngineStat.prototype.reset=function(){return this.stats={}},EngineStat.prototype.add=function(statName,value){var base;return((base=this.stats)[statName]||(base[statName]=new Stat)).add(value)},EngineStat.prototype.length=function(statName){var stat;return(stat=this.stats[statName])?stat.length:0},EngineStat.prototype.log=function(){var greatestPow10LessThanMax,k,ref,smallestMultipleGreaterThanMax,toLog,v;toLog={},ref=this.stats;for(k in ref)v=ref[k],greatestPow10LessThanMax=Math.pow(10,Math.floor(Math.log10(v.max))),smallestMultipleGreaterThanMax=Math.ceil(v.max/greatestPow10LessThanMax)*greatestPow10LessThanMax,toLog[k]={min:v.min.toPrecision(5)/1,av:v.average.toPrecision(5)/1,max:v.max.toPrecision(5)/1,hist:v.histogram(10,0,smallestMultipleGreaterThanMax),histMax:smallestMultipleGreaterThanMax};return log(toLog)},EngineStat}(BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(196).addModules({Basics:__webpack_require__(198),FlexLayout:__webpack_require__(197),Infinity:__webpack_require__(199),StateEpochLayout:__webpack_require__(195)})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(213).includeInNamespace(__webpack_require__(214)).addModules({Base:__webpack_require__(219),FillableBase:__webpack_require__(218)}),__webpack_require__(232),__webpack_require__(241),__webpack_require__(215),__webpack_require__(237)},function(module,exports,__webpack_require__){var Elements,Engine,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.Elements||Engine.addNamespace("Elements",Elements=function(superClass){function Elements(){return Elements.__super__.constructor.apply(this,arguments)}return extend(Elements,superClass),Elements}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[__webpack_require__(215),__webpack_require__(232),__webpack_require__(237),__webpack_require__(241)]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(216).addModules({BitmapElement:__webpack_require__(217),RectangleElement:__webpack_require__(220),ShapeElement:__webpack_require__(230),TextElement:__webpack_require__(231)})},function(module,exports,__webpack_require__){var Elements,Shapes,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Elements=__webpack_require__(213),module.exports=Elements.Shapes||Elements.addNamespace("Shapes",Shapes=function(superClass){function Shapes(){return Shapes.__super__.constructor.apply(this,arguments)}return extend(Shapes,superClass),Shapes}(Neptune.Base))},function(module,exports,__webpack_require__){var Atomic,BaseObject,BitmapElement,Canvas,FillableBase,Foundation,Matrix,bound,ceil,createWithPostCreate,inspect,isNumber,isString,log,max,min,point,point0,point1,rect,round,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),FillableBase=__webpack_require__(218),ceil=Math.ceil,round=Math.round,inspect=Foundation.inspect,min=Foundation.min,max=Foundation.max,bound=Foundation.bound,log=Foundation.log,createWithPostCreate=Foundation.createWithPostCreate,isString=Foundation.isString,isNumber=Foundation.isNumber,BaseObject=Foundation.BaseObject,point=Atomic.point,rect=Atomic.rect,Matrix=Atomic.Matrix,point0=Atomic.point0,point1=Atomic.point1,module.exports=createWithPostCreate(BitmapElement=function(superClass){function BitmapElement(options){BitmapElement.__super__.constructor.apply(this,arguments),this._bitmapToElementMatrix=new Matrix}var sourceToBitmapCache;return extend(BitmapElement,superClass),BitmapElement.SourceToBitmapCache=function(superClass1){function SourceToBitmapCache(){this._cache={},this._referenceCounts={}}return extend(SourceToBitmapCache,superClass1),SourceToBitmapCache.singletonClass(),SourceToBitmapCache.prototype.get=function(url,initializerPromise){var base;return url.match("ImagePicker")&&(log("SourceToBitmapCache#get: cached:"+!!this._cache[url]+" "+url),log("initializerPromise: "+!!initializerPromise)),this._referenceCounts[url]=(this._referenceCounts[url]||0)+1,(base=this._cache)[url]||(base[url]=initializerPromise||Canvas.Bitmap.get(url))},SourceToBitmapCache.prototype.release=function(url){if(url){if(!isNumber(this._referenceCounts[url]))throw new Error("no references for "+url);return 0!==this._referenceCounts[url]&&isNumber(this._referenceCounts[url])?(this._referenceCounts[url]--,0===this._referenceCounts[url]&&(delete this._cache[url],!0)):console.error("invalid referenceCount: "+inspect(this._referenceCounts[url])+" for url: "+url)}},SourceToBitmapCache}(BaseObject),sourceToBitmapCache=BitmapElement.SourceToBitmapCache.singleton,BitmapElement.prototype._unregister=function(){return sourceToBitmapCache.release(this.getSource()),BitmapElement.__super__._unregister.apply(this,arguments)},BitmapElement.getter({cacheable:function(){return!1}}),BitmapElement.prototype.customLayoutChildrenFirstPass=function(size){var ref;return(null!=(ref=this.getPendingBitmap())?ref.pointSize:void 0)||point0},BitmapElement.prototype.customLayoutChildrenSecondPass=function(size){},BitmapElement.drawProperty({focus:{"default":null,preprocess:function(v){return null!=v?point(v).bound(point0,point1):null}},mode:{"default":"stretch",preprocess:function(v){return(null!=v?v.toString():void 0)||null}},sourceArea:{"default":null,preprocess:function(v){return null!=v?rect(v):null}}}),BitmapElement.concreteProperty({source:{"default":null,validate:function(v){return!v||isString(v)},postSetter:function(v){return v&&this._loadBitmapFromSource(v)}}}),BitmapElement.prototype._loadBitmapFromSource=function(source){return sourceToBitmapCache.get(source).then(function(_this){return function(bitmap){return _this.onNextReady(function(){return _this.queueEvent("load",function(){return{bitmap:bitmap}})}),_this.setBitmap(bitmap)}}(this),function(_this){return function(error){return console.error(error.stack),_this.onNextReady(function(){return _this.queueEvent("error",function(){return{error:e}})})}}(this))},BitmapElement.drawLayoutProperty({bitmap:{"default":null,validate:function(v){return!v||v instanceof Canvas.BitmapBase}}}),BitmapElement.prototype._drawPropertiesChanged=function(){var bitmapSize,currentSize,desiredSourceX,desiredSourceY,effectiveSourceLoc,effectiveSourceSize,effectiveSourceSizeX,effectiveSourceSizeY,scale,sourceLoc,sourceSize,sourceX,sourceY;if(BitmapElement.__super__._drawPropertiesChanged.apply(this,arguments),this._bitmap)return bitmapSize=this._bitmap.size,this._drawOptions.sourceArea=this._sourceArea?this._sourceArea.mul(this._bitmap.pixelsPerPoint):null,sourceSize=this._drawOptions.sourceArea?this._drawOptions.sourceArea.size:bitmapSize,sourceLoc=this._drawOptions.sourceArea?this._drawOptions.sourceArea.location:point(),currentSize=this.currentSize,this._bitmapToElementMatrix=function(){switch(this._mode){case"stretch":return Matrix.scale(currentSize.div(sourceSize));case"zoom":return scale=max(currentSize.x/sourceSize.x,currentSize.y/sourceSize.y),effectiveSourceSizeX=min(bitmapSize.x,ceil(currentSize.x/scale)),effectiveSourceSizeY=min(bitmapSize.y,ceil(currentSize.y/scale)),this._focus?(desiredSourceX=sourceSize.x*this._focus.x-.5*effectiveSourceSizeX,desiredSourceY=sourceSize.y*this._focus.y-.5*effectiveSourceSizeY):(desiredSourceX=sourceLoc.x+.5*sourceSize.x-round(.5*effectiveSourceSizeX),desiredSourceY=sourceLoc.y+.5*sourceSize.y-round(.5*effectiveSourceSizeY)),sourceX=bound(0,desiredSourceX,bitmapSize.x-effectiveSourceSizeX),sourceY=bound(0,desiredSourceY,bitmapSize.y-effectiveSourceSizeY),this._drawOptions.sourceArea=rect(sourceX,sourceY,effectiveSourceSizeX,effectiveSourceSizeY),Matrix.scale(scale);case"center":return effectiveSourceSize=currentSize.roundOut(),effectiveSourceLoc=sourceLoc.add(sourceSize.cc.sub(effectiveSourceSize.cc.round())),this._drawOptions.sourceArea=rect(effectiveSourceLoc,effectiveSourceSize),new Matrix;case"fit":return scale=currentSize.div(sourceSize).min(),Matrix.translate(sourceSize.cc.neg).scale(scale).translate(currentSize.cc);case"min":return scale=min(1/this.devicePixelsPerPoint,currentSize.div(sourceSize).min()),Matrix.translate(sourceSize.cc.neg).scale(scale).translate(currentSize.cc);default:throw new Error("unknown mode: "+this._mode)}}.call(this)},BitmapElement.prototype.fillShape=function(target,elementToTargetMatrix,options){return this._bitmap&&target.drawBitmap(this._bitmapToElementMatrix.mul(elementToTargetMatrix),this._bitmap,options)},BitmapElement}(FillableBase))},function(module,exports,__webpack_require__){var Atomic,Base,Canvas,Color,FillableBase,Foundation,GradientFillStyle,Matrix,Point,PointLayout,PointLayoutBase,Rectangle,createWithPostCreate,isNumber,isPlainObject,log,matrix,max,merge,min,point,point0,point1,rect,ref,rgbColor,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),Base=__webpack_require__(219),ref=__webpack_require__(187),PointLayout=ref.PointLayout,PointLayoutBase=ref.PointLayoutBase,log=Foundation.log,isPlainObject=Foundation.isPlainObject,min=Foundation.min,max=Foundation.max,createWithPostCreate=Foundation.createWithPostCreate,isNumber=Foundation.isNumber,merge=Foundation.merge,rgbColor=Atomic.rgbColor,Color=Atomic.Color,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,point0=Atomic.point0,point1=Atomic.point1,GradientFillStyle=Canvas.GradientFillStyle,module.exports=createWithPostCreate(FillableBase=function(superClass){function FillableBase(){return FillableBase.__super__.constructor.apply(this,arguments)}var defaultFrom,defaultOffset,defaultTo,noShadow;return extend(FillableBase,superClass),FillableBase.registerWithElementFactory=function(){return this!==FillableBase},FillableBase.getter({cacheable:function(){return this.getHasChildren()}}),defaultFrom=new PointLayout,defaultTo=new PointLayout({hh:1}),defaultOffset=new PointLayout({y:2}),noShadow={color:rgbColor(0,0,0,0),blur:0,offset:new PointLayout(0)},FillableBase.drawProperty({from:{preprocess:function(v){return v&&(v instanceof PointLayoutBase?v:new PointLayout(v))}},to:{preprocess:function(v){return v&&(v instanceof PointLayoutBase?v:new PointLayout(v))}},colors:{"default":null},gradientRadius:{"default":null},shadow:{"default":null,validate:function(v){return!v||v===!0||isPlainObject(v)},preprocess:function(v){var blur,color,offset;return v?(color=v.color,offset=v.offset,blur=v.blur,color=rgbColor(color||"#0007"),offset=null!=offset?offset instanceof PointLayoutBase?offset:new PointLayout(offset):defaultOffset,null==blur&&(blur=4),{blur:blur,offset:offset,color:color}):noShadow}}}),FillableBase.getter({normalizedShadow:function(){var offset,x,y;return this._shadow===noShadow?null:(offset=this._shadow.offset,x=offset.layoutX(this._currentSize),y=offset.layoutY(this._currentSize),merge(this._shadow,{offsetX:x,offsetY:y}))}}),FillableBase.prototype._expandRectangleByShadow=function(r,shadow){var blur,expandBottom,expandLeft,expandRight,expandTop,h,offsetX,offsetY,ref1,w,x,y;return shadow===noShadow?r:(x=r.x,y=r.y,w=r.w,h=r.h,ref1=this.normalizedShadow,blur=ref1.blur,offsetX=ref1.offsetX,offsetY=ref1.offsetY,offsetX||(offsetX=0),offsetY||(offsetY=0),blur||(blur=0),expandLeft=max(0,blur-offsetX),expandTop=max(0,blur-offsetY),expandRight=max(0,blur+offsetX),expandBottom=max(0,blur+offsetY),r["with"](x-expandLeft,y-expandTop,w+expandLeft+expandRight,h+expandTop+expandBottom))},FillableBase.virtualProperty({baseDrawArea:function(pending){return this._expandRectangleByShadow(this.getPreFilteredBaseDrawArea(pending),this.getState(pending)._shadow)}}),FillableBase.prototype._prepareDrawOptions=function(drawOptions,compositeMode,opacity){var _colors,_currentSize,_from,_gradientRadius,_to,gradientScale,r1,r2,ref1,ref2;if(FillableBase.__super__._prepareDrawOptions.apply(this,arguments),ref1=this,_colors=ref1._colors,_currentSize=ref1._currentSize,drawOptions.shadow=this.normalizedShadow,drawOptions.colors=null,drawOptions.gradientRadius=null,drawOptions.gradientRadius1=null,drawOptions.gradientRadius2=null,drawOptions.from=null,drawOptions.to=null,_colors)return ref2=this,_from=ref2._from,_to=ref2._to,_gradientRadius=ref2._gradientRadius,_from||(_from=defaultFrom),drawOptions.colors=_colors,null!=_gradientRadius&&(_to||(_to=_from),gradientScale=_currentSize.min()/2,isNumber(_gradientRadius)?drawOptions.gradientRadius=_gradientRadius*gradientScale:(r1=_gradientRadius[0],r2=_gradientRadius[1],drawOptions.gradientRadius1=r1*gradientScale,drawOptions.gradientRadius2=r2*gradientScale)),_to||(_to=defaultTo),drawOptions.from=_from.layout(_currentSize),drawOptions.to=_to.layout(_currentSize)},FillableBase}(Base))},function(module,exports,__webpack_require__){var Atomic,Base,Element,Foundation,createWithPostCreate,inspect,rgbColor,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Element=__webpack_require__(184),inspect=Foundation.inspect,createWithPostCreate=Foundation.createWithPostCreate,rgbColor=Atomic.rgbColor,module.exports=createWithPostCreate(Base=function(superClass){function Base(){Base.__super__.constructor.apply(this,arguments),this._drawOptions={}}return extend(Base,superClass),Base.registerWithElementFactory=function(){return this!==Base},Base.drawProperty({color:{"default":null,preprocess:function(v){return v?rgbColor(v):null}}}),Base.prototype.drawBasic=function(target,elementToTargetMatrix,compositeMode,opacity){return this._prepareDrawOptions(this._drawOptions,compositeMode,opacity),this.fillShape(target,elementToTargetMatrix,this._drawOptions)},Base.prototype._useStagingBitmap=function(){return this.getHasChildren()?Base.__super__._useStagingBitmap.apply(this,arguments):this.getChildRequiresParentStagingBitmap()||this.getIsMask()},Base.prototype._drawChildren=function(target,elementToTargetMatrix,usingStagingBitmap){return this.hasChildren?Base.__super__._drawChildren.apply(this,arguments):usingStagingBitmap?this.drawBasic(target,elementToTargetMatrix):this.drawBasic(target,elementToTargetMatrix,this.getCompositeMode(),this.getOpacity())},Base.prototype.fillShape=function(target,elementToTargetMatrix,options){throw new Error("fillShape or drawBasic must be overridden")},Base.prototype._prepareDrawOptions=function(drawOptions,compositeMode,opacity){return drawOptions.compositeMode=compositeMode,drawOptions.opacity=opacity,drawOptions.color=this._color},Base}(Element))},function(module,exports,__webpack_require__){var Atomic,FillableBase,Foundation,Paths,RectangleElement,Text,base,createWithPostCreate,curriedRoundedRectangle,floatEq,isNumber,isPlainObject,pureMerge,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Text=__webpack_require__(221),FillableBase=__webpack_require__(218),Paths=__webpack_require__(137).Paths,pureMerge=Foundation.pureMerge,floatEq=Foundation.floatEq,base=Foundation.base,createWithPostCreate=Foundation.createWithPostCreate,isPlainObject=Foundation.isPlainObject,isNumber=Foundation.isNumber,curriedRoundedRectangle=Paths.curriedRoundedRectangle,module.exports=createWithPostCreate(RectangleElement=function(superClass){function RectangleElement(){return RectangleElement.__super__.constructor.apply(this,arguments)}return extend(RectangleElement,superClass),RectangleElement.drawProperty({radius:{"default":0,validate:function(v){return!v||isNumber(v)||isPlainObject(v)},preprocess:function(v){return v||0}}}),RectangleElement.prototype.fillShape=function(target,elementToTargetMatrix,options){return options.radius=this._radius,options.color||(options.color=this._color),target.drawRectangle(elementToTargetMatrix,this.getPaddedArea(),options)},RectangleElement.prototype.strokeShape=function(target,elementToTargetMatrix,options){return options.radius=this._radius,options.color||(options.color=this._color),target.strokeRectangle(elementToTargetMatrix,this.getPaddedArea(),options)},RectangleElement.prototype._clipDraw=function(clipArea,target,elementToTargetMatrix){return floatEq(this._radius,0)?RectangleElement.__super__._clipDraw.apply(this,arguments):target.clippedTo(curriedRoundedRectangle(target.pixelSnapRectangle(elementToTargetMatrix,this.getPaddedArea()),this._radius),function(_this){return function(){return _this._drawChildren(target,elementToTargetMatrix)}}(this),elementToTargetMatrix)},RectangleElement.getter({hasCustomClipping:function(){return this._radius>0}}),RectangleElement}(FillableBase))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(222)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(223).includeInNamespace(__webpack_require__(225)).addModules({Layout:__webpack_require__(227),Metrics:__webpack_require__(228),TextLayoutFragment:__webpack_require__(229)})},function(module,exports,__webpack_require__){var Art,Text,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(224),module.exports=Art.Text||Art.addNamespace("Text",Text=function(superClass){function Text(){return Text.__super__.constructor.apply(this,arguments)}return extend(Text,superClass),Text}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var _package;module.exports=[{"package":_package=__webpack_require__(226),version:_package.version}]},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-canvas":"git://github.com/imikimi/art-canvas.git","art-foundation":"git://github.com/imikimi/art-foundation.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.4.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"art-text",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.0.0"}},function(module,exports,__webpack_require__){var Atomic,BaseObject,Bitmap,Foundation,Layout,Matrix,Metrics,Rectangle,ceil,emptyOptions,flatten,float32Eq,float32Eq0,floor,inspect,isNumber,log,matrix,max,merge,min,nearInfinity,nearInfinityResult,peek,point,pureMerge,rect,time,toFontCss,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Bitmap=__webpack_require__(137).Bitmap,Atomic=__webpack_require__(125),Metrics=__webpack_require__(228),rect=Atomic.rect,matrix=Atomic.matrix,Matrix=Atomic.Matrix,Rectangle=Atomic.Rectangle,point=Atomic.point,floor=Math.floor,ceil=Math.ceil,log=Foundation.log,inspect=Foundation.inspect,pureMerge=Foundation.pureMerge,flatten=Foundation.flatten,BaseObject=Foundation.BaseObject,nearInfinity=Foundation.nearInfinity,nearInfinityResult=Foundation.nearInfinityResult,peek=Foundation.peek,min=Foundation.min,max=Foundation.max,merge=Foundation.merge,time=Foundation.time,isNumber=Foundation.isNumber,float32Eq=Foundation.float32Eq,float32Eq0=Foundation.float32Eq0,toFontCss=Metrics.toFontCss,emptyOptions={},module.exports=Layout=function(superClass){function Layout(text,fontOptions,layoutOptions,layoutAreaWidth,layoutAreaHeight){if(null==layoutAreaWidth&&(layoutAreaWidth=nearInfinity),null==layoutAreaHeight&&(layoutAreaHeight=nearInfinity),!isNumber(layoutAreaWidth)||!isNumber(layoutAreaHeight))throw new Error("layoutAreaWidth, layoutAreaHeight must be numbers: "+inspect(layoutAreaHeight));this._layoutAreaWidth=layoutAreaWidth,this._layoutAreaHeight=layoutAreaHeight,this._fontOptions=Metrics.normalizeFontOptions(fontOptions||{}),this._layoutOptions=layoutOptions=pureMerge(defaultLayoutOptions,layoutOptions),this._text=text||defaultText,this._textLines=text.split("\n"),layoutOptions.wordWrapWidth&&console.error("Art.Text.Layout#wordWrapWidth is depricated. Pass layoutAreaWidth and layoutAreaHeight into constructor."),this._maxHeight=layoutOptions.maxHeight,this._overflow=layoutOptions.overflow,this._clipped="clipped"===this._overflow,this._ellipsis="ellipsis"===this._overflow,this._align=point(layoutOptions.align),this._leading=layoutOptions.leading,this._maxLines=layoutOptions.maxLines,this._layoutMode=layoutOptions.layoutMode,this._resetLayout(),this._left=this._right=this._top=this._bottom=0}var defaultLayoutOptions,defaultText,wordStringToHash;return extend(Layout,superClass),Layout.defaultText=defaultText="",Layout.defaultLayoutOptions=defaultLayoutOptions={leading:1.25,align:point("left"),layoutMode:"textualBaseline",overflow:"ellipsis",maxLines:void 0},wordStringToHash=function(wordString){var j,len,ref,ret,word;for(ret={},ref=wordString.split(/\s+/),j=0,len=ref.length;j<len;j++)word=ref[j],ret[word]=!0;return ret},Layout.validLayoutOptions={layoutMode:wordStringToHash("textual textualBaseline tight tight0"),overflow:wordStringToHash("ellipsis visible clipped")},Layout.getter("text align leading"),Layout.getter({fontStyle:function(){return this._fontOptions.fontStyle},fontVariant:function(){return this._fontOptions.fontVariant},fontWeight:function(){return this._fontOptions.fontWeight},fontFamily:function(){return this._fontOptions.fontFamily},fontSize:function(){return this._fontOptions.fontSize},leading:function(){return this._leading},align:function(){return this._align},layoutMode:function(){return this._layoutMode},fragments:function(){return this._updateLayout(),this._fragments},size:function(){return this._updateLayout(),this._size||(this._size=point(this._right-this._left,this._bottom-this._top))},area:function(){return this._updateLayout(),this._area||(this._area=rect(this._left,this._top,this._right-this._left,this._bottom-this._top))},drawArea:function(){return this._updateLayout(),this._drawArea||(this._drawArea=this._computeDrawArea())},fontCss:function(){return this._fontCss||(this._fontCss=toFontCss(this._fontOptions))},lineCount:function(){return this._updateLayout(),this._fragments.length}}),Layout.prototype._getFragmentLogicalAreas=function(layoutHeight){var j,layoutArea,len,ref,results;for(ref=this.fragments,results=[],j=0,len=ref.length;j<len;j++)layoutArea=ref[j].layoutArea,results.push(layoutArea);return results},Layout.prototype.draw=function(target,where,options){var context;return null==options&&(options=emptyOptions),(context=target.context2D)?(this._updateLayout(),target._setupDraw(where,options)?(context.font=this.getFontCss(),context.textAlign="left",context.textBaseline="alphabetic",options.stroke?this._strokeAllFragments(context):this._fillAllFragments(context),target._cleanupDraw(options)):void 0):this.drawToNonArtBitmap(target,where,options)},Layout.prototype.stroke=function(target,where,options){return null==options&&(options=emptyOptions),this.draw(target,where,merge(options,{stroke:!0}))},Layout.prototype.drawToNonArtBitmap=function(target,where,options){var bitmap2D,scale;return null==options&&(options=emptyOptions),scale=where.exactScale,bitmap2D=new Bitmap(this.getSize().mul(scale)),this.draw(bitmap2D,Matrix.scale(scale),options),
target.drawBitmap(Matrix.scale(scale.inv).mul(where),bitmap2D)},Layout.prototype.newBitmap=function(options){var scale,size;return null==options&&(options=emptyOptions),size=options.size||this.getSize(),this._align.x>0&&this._layoutAreaWidth<nearInfinityResult&&(size=size.withX(this._layoutAreaWidth)),this._align.y>0&&this._layoutAreaHeight<nearInfinityResult&&(size=size.withY(this._layoutAreaHeight)),(scale=options.scale)&&(size=size.mul(scale)),new Bitmap(size)},Layout.prototype.toBitmap=function(options){var bitmap,drawMatrix,scale;return null==options&&(options=emptyOptions),drawMatrix=options.drawMatrix||new Matrix,(scale=options.scale)&&(drawMatrix=drawMatrix.mul(Matrix.scale(scale))),bitmap=this.newBitmap(options),this.draw(bitmap,drawMatrix,options),bitmap},Layout.prototype._fillAllFragments=function(context){var frag,j,len,ref,results;for(ref=this.fragments,results=[],j=0,len=ref.length;j<len;j++)frag=ref[j],results.push(context.fillText(frag.text,frag.getTextX(),frag.getTextY()));return results},Layout.prototype._strokeAllFragments=function(context){var frag,j,len,ref,results;for(ref=this.fragments,results=[],j=0,len=ref.length;j<len;j++)frag=ref[j],results.push(context.strokeText(frag.text,frag.getTextX(),frag.getTextY()));return results},Layout.prototype._drawFragmentAreas=function(context){var fontSize,frag,j,layoutArea,len,ref,results;for(fontSize=this.getFontSize(),ref=this.fragments,results=[],j=0,len=ref.length;j<len;j++)frag=ref[j],layoutArea=frag.layoutArea,results.push(context.fillRect(layoutArea.x,layoutArea.y,layoutArea.w,layoutArea.h));return results},Layout.prototype._computeDrawArea=function(){var bottom,fragment,fragments,i,j,left,len,right,top;if(fragments=this.fragments,1===fragments.length)return fragments[0].alignedDrawArea;for(left=top=right=bottom=0,i=j=0,len=fragments.length;j<len;i=++j)fragment=fragments[i],0===i?(left=fragment.getAlignedDrawAreaLeft(),top=fragment.getAlignedDrawAreaTop(),right=fragment.getAlignedDrawAreaRight(),bottom=fragment.getAlignedDrawAreaBottom()):(left=min(left,fragment.getAlignedDrawAreaLeft()),top=min(top,fragment.getAlignedDrawAreaTop()),right=max(right,fragment.getAlignedDrawAreaRight()),bottom=max(bottom,fragment.getAlignedDrawAreaBottom()));return new Rectangle(left,top,right-left,bottom-top)},Layout.prototype._alignFragments=function(){var _align,_layoutAreaHeight,_layoutAreaWidth,area,frag,j,len,offsetY,ref,ref1,results,xAlign,yAlign;if(ref=this,_layoutAreaWidth=ref._layoutAreaWidth,_layoutAreaHeight=ref._layoutAreaHeight,_align=ref._align,area=ref.area,xAlign=_align.x,yAlign=_align.y,_layoutAreaWidth>=nearInfinityResult&&(xAlign=0),_layoutAreaHeight>=nearInfinityResult&&(yAlign=0),offsetY=(_layoutAreaHeight-area.h)*yAlign,!float32Eq0(offsetY)||!float32Eq0(xAlign)){for(ref1=this.fragments,results=[],j=0,len=ref1.length;j<len;j++)frag=ref1[j],frag.alignmentOffsetX=(_layoutAreaWidth-frag.layoutW)*xAlign,results.push(frag.alignmentOffsetY=offsetY);return results}},Layout.prototype._setArea=function(fragment){return this._top=fragment.getTop(),this._left=fragment.getLeft(),this._bottom=fragment.getBottom(),this._right=fragment.getRight()},Layout.prototype._expandArea=function(fragment){return this._top=min(this._top,fragment.getTop()),this._left=min(this._left,fragment.getLeft()),this._bottom=max(this._bottom,fragment.getBottom()),this._right=max(this._right,fragment.getRight())},Layout.prototype._generateFragments=function(){var _fontOptions,_layoutAreaWidth,_layoutMode,_textLines,fontCss,fragment,fragments,ref,text,wrappedFragments;return ref=this,_fontOptions=ref._fontOptions,_layoutAreaWidth=ref._layoutAreaWidth,_layoutMode=ref._layoutMode,_textLines=ref._textLines,_fontOptions=ref._fontOptions,fontCss=this.getFontCss(),this._fragments=function(){var j,k,l,len,len1,len2,results;if(_layoutAreaWidth<nearInfinityResult&&("textual"===_layoutMode||"textualBaseline"===_layoutMode)){for(fragments=[],j=0,len=_textLines.length;j<len;j++)for(text=_textLines[j],wrappedFragments=Metrics.wrap(text,_fontOptions,_layoutAreaWidth,fontCss,_layoutMode),k=0,len1=wrappedFragments.length;k<len1;k++)fragment=wrappedFragments[k],fragments.push(fragment);return fragments}for(results=[],l=0,len2=_textLines.length;l<len2;l++)text=_textLines[l],results.push(Metrics.get(text,_fontOptions,_layoutMode,fontCss));return results}()},Layout.prototype._layoutFragments=function(){var _clipped,_ellipsis,_layoutAreaHeight,_layoutAreaWidth,_maxLines,allFragments,effectiveLeading,fragment,i,j,len,m,offsetX,offsetY,ref,ref1,text,textWithEllipsis;for(ref=this,_layoutAreaWidth=ref._layoutAreaWidth,_layoutAreaHeight=ref._layoutAreaHeight,_maxLines=ref._maxLines,_clipped=ref._clipped,_ellipsis=ref._ellipsis,offsetX=0,offsetY=0,effectiveLeading=this.getFontSize()*this.getLeading(),allFragments=this._fragments,_maxLines&&_maxLines<this._fragments.length&&(this._fragments=this._fragments.slice(0,_maxLines)),ref1=this._fragments,i=j=0,len=ref1.length;j<len;i=++j){if(fragment=ref1[i],fragment.move(offsetX,offsetY),0===i)this._setArea(fragment);else{if(_clipped){if(fragment.getTop()-this._top>_layoutAreaHeight){this._fragments=this._fragments.slice(0,i);break}}else if(_ellipsis&&fragment.getBottom()-this._top>_layoutAreaHeight){this._fragments=this._fragments.slice(0,i);break}this._expandArea(fragment)}offsetY+=effectiveLeading}if(_ellipsis&&this._fragments.length<allFragments.length){for(text=peek(this._fragments).text,"."===text[text.length-1]&&(text=text.slice(0,text.length-1)),textWithEllipsis=text+"";text.length>0&&(m=Metrics.get(textWithEllipsis,this._fontOptions,this._layoutMode,this.getFontCss())).layoutW>_layoutAreaWidth;)text=text.slice(0,text.length-1),textWithEllipsis=text+"";return m.setLayoutLocationFrom(peek(this._fragments)),this._fragments[this._fragments.length-1]=m,this._expandArea(m)}},Layout.prototype._resetLayout=function(){return this._fragments=this._area=this._size=this._drawArea=null},Layout.prototype._updateLayout=function(){if(!this._fragments)return this._resetLayout(),this._generateFragments(),this._layoutFragments(),this._alignFragments()},Layout.setter({width:function(width){return this._updateLayout(),float32Eq(width,this._layoutAreaWidth)||(this._layoutAreaWidth=width,this._area=null,this._size=null,this._drawArea=null,this._alignFragments()),null}}),Layout}(BaseObject)},function(module,exports,__webpack_require__){(function(module){var Atomic,Canvas,Foundation,Rectangle,TextLayoutFragment,allIndexes,ceil,clone,defineModule,eachMatch,floor,inspect,isObject,isString,log,logL,max,merge,min,point,point0,rect,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),TextLayoutFragment=__webpack_require__(229),point=Atomic.point,rect=Atomic.rect,point0=Atomic.point0,Rectangle=Atomic.Rectangle,defineModule=Foundation.defineModule,merge=Foundation.merge,log=Foundation.log,logL=Foundation.logL,inspect=Foundation.inspect,max=Foundation.max,min=Foundation.min,isObject=Foundation.isObject,isString=Foundation.isString,allIndexes=Foundation.allIndexes,eachMatch=Foundation.eachMatch,clone=Foundation.clone,floor=Math.floor,ceil=Math.ceil,defineModule(module,function(){var alphaChannelOffset,pixelStep,tightThreshold;return alphaChannelOffset=3,pixelStep=4,tightThreshold=127,Text.Metrics=function(superClass){function Metrics(){return Metrics.__super__.constructor.apply(this,arguments)}var blankString,defaultFontOptions,noBreaksWrapIndex,tempRectangleToCapturePessimisticDrawArea,toFontCss;return extend(Metrics,superClass),Metrics.defaultFontSizeProportionalDrawAreaPadding=.45,Metrics.defaultFontOptions=defaultFontOptions={fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:16,fontFamily:"Times"},Metrics.toFontCss=toFontCss=function(fontOptions){return(fontOptions.fontStyle||"normal")+" "+(fontOptions.fontVariant||"normal")+" "+(fontOptions.fontWeight||"normal")+" "+(fontOptions.fontSize||16)+"px "+(fontOptions.fontFamily||"Times")+", Times"},Metrics.normalizeFontOptions=function(fontOptions){return fontOptions.fontStyle||(fontOptions.fontStyle=defaultFontOptions.fontStyle),fontOptions.fontVariant||(fontOptions.fontVariant=defaultFontOptions.fontVariant),fontOptions.fontWeight||(fontOptions.fontWeight=defaultFontOptions.fontWeight),fontOptions.fontSize||(fontOptions.fontSize=defaultFontOptions.fontSize),fontOptions.fontFamily||(fontOptions.fontFamily=defaultFontOptions.fontFamily),fontOptions},Metrics.get=function(text,fontOptions,layoutMode,fontCss){switch(null==fontOptions&&(fontOptions={}),layoutMode){case null:case void 0:case"textual":return this._getTextualFontMetrics(text,fontOptions,null,fontCss);case"textualBaseline":return this._getTextualFontMetrics(text,fontOptions,null,fontCss,!1);case"tight":return this._getTightFontMetrics(text,0,fontOptions,fontCss);case"tight0":return this._getTightFontMetrics(text,0,fontOptions,fontCss);default:throw new Error("invalid layoutMode: "+inspect(layoutMode))}},Metrics.getWidth=function(text,fontOptions,fontCss){var context;return context=Metrics.getScratchCanvasBitmap().context,context.font=fontCss||toFontCss(fontOptions),context.measureText(text).width},Metrics._wrapOnce=function(context,text,wordWrapWidth){if(context.measureText(text).width<=wordWrapWidth)return[text,null]},Metrics._noBreaksWrapIndex=noBreaksWrapIndex=function(context,text,wordWrapWidth){var left,leftPixelWidth,leftSlice,m,right,sliced,width;for(left=0,leftPixelWidth=0,leftSlice=null,right=text.length;right-left>1;)m=(left+right)/2|0,(width=context.measureText(sliced=text.slice(0,m)).width)>wordWrapWidth?right=m:(leftSlice=sliced,leftPixelWidth=width,left=m);return leftSlice||(leftSlice=text.slice(0,1),leftPixelWidth=context.measureText(leftSlice).width),[leftPixelWidth,leftSlice]},blankString="",Metrics.wrap=function(text,fontOptions,wordWrapWidth,fontCss,layoutMode){var areaIncludesDescender,context,line,linePixelWidth,lines,nextLine,trailingSpace,trailingSpacePixelWidth;return null==layoutMode&&(layoutMode="textual"),""===text?[this._getTextualFontMetrics("",fontOptions,0,fontCss)]:(wordWrapWidth<0&&(wordWrapWidth=0),areaIncludesDescender="textual"===layoutMode,context=this.getScratchCanvasBitmap().context,context.font=fontCss,linePixelWidth=0,lines=[],line=blankString,trailingSpace=blankString,trailingSpacePixelWidth=0,nextLine=function(_this){return function(){if(linePixelWidth>0)return lines.push(_this._getTextualFontMetrics(line,fontOptions,linePixelWidth,fontCss,areaIncludesDescender)),line=blankString,linePixelWidth=0,trailingSpace=blankString,trailingSpacePixelWidth=0}}(this),eachMatch(text,/(\s*[^\s]+)(\s*)/g,function(result){var _,firstHalfText,pixelWidth,ref,space,whiteSpaceLength,whiteSpacePixelWidth,word,wordLength,wordPixelWidth,wordStart;if(wordStart=result.index,_=result[0],word=result[1],space=result[2],wordLength=word.length,whiteSpaceLength=space.length,whiteSpacePixelWidth=context.measureText(space).width,wordPixelWidth=context.measureText(word).width,wordPixelWidth>wordWrapWidth){for(;wordPixelWidth>wordWrapWidth;)nextLine(),ref=noBreaksWrapIndex(context,word,wordWrapWidth),pixelWidth=ref[0],firstHalfText=ref[1],line=firstHalfText,linePixelWidth=pixelWidth,word=word.slice(firstHalfText.length,word.length),wordPixelWidth=context.measureText(word).width;nextLine(),line=word,linePixelWidth=wordPixelWidth}else trailingSpacePixelWidth+linePixelWidth+wordPixelWidth>wordWrapWidth?(nextLine(),line=word,linePixelWidth=wordPixelWidth):(line+=trailingSpace+word,linePixelWidth+=trailingSpacePixelWidth+wordPixelWidth);return trailingSpace=space,trailingSpacePixelWidth=whiteSpacePixelWidth}),nextLine(),lines)},Metrics._tightFontMetricCache={},Metrics._getTightFontMetrics=function(text,tightThreshold,fontOptions,fontCss){var base,previousResult,tightFontMetricCacheKey,upScale;return tightFontMetricCacheKey=text+":"+tightThreshold+":"+(fontCss||(fontCss=toFontCss(fontOptions))),previousResult=(base=this._tightFontMetricCache)[tightFontMetricCacheKey]||(base[tightFontMetricCacheKey]=1===text.length?(upScale=2,fontOptions=merge(fontOptions,{fontSize:fontOptions.fontSize*upScale}),fontCss=toFontCss(fontOptions),this._generateTightFontMetrics(text,tightThreshold,fontOptions,fontCss).mul(1/upScale)):this._generateTightFontMetrics(text,tightThreshold,fontOptions,fontCss)),previousResult.clone()},tempRectangleToCapturePessimisticDrawArea=new Rectangle,Metrics._generateTightFontMetrics=function(text,tightThreshold,fontOptions,fontCss){var area,ascender,bottom,data,descender,layoutH,layoutW,left,location,padding,ref,ref1,ref2,ref3,right,scratchBitmap,size,textOffsetX,textOffsetY,top;for(padding=2*Metrics.defaultFontSizeProportionalDrawAreaPadding,ref=this.renderTextToScratchBitmap(text,fontOptions,padding),scratchBitmap=ref[0],size=ref[1],location=ref[2],data=scratchBitmap.context.getImageData(0,0,size.x,size.y).data,ref1=scratchBitmap.getAutoCropRectangle(tightThreshold),left=ref1.left,right=ref1.right,top=ref1.top,bottom=ref1.bottom;0===left||0===top||right===size.x||bottom===size.y;)this.log("Art.Text.Metrics#_generateTightFontMetrics: "+inspect(fontOptions,1)+", padding: "+padding+" too small. scratchBitmap.size: "+scratchBitmap.size),padding*=2,ref2=this.renderTextToScratchBitmap(text,fontOptions,padding),scratchBitmap=ref2[0],size=ref2[1],location=ref2[2],ref3=scratchBitmap.getAutoCropRectangle(tightThreshold),left=ref3.left,right=ref3.right,top=ref3.top,bottom=ref3.bottom;return top--,left--,textOffsetX=location.x-left,textOffsetY=location.y-top,layoutW=right-left+1,layoutH=bottom-top+1,area=rect(left-location.x,top-location.y,right-left+1,bottom-top+1),ascender=location.y-top+1,descender=bottom-location.y,new TextLayoutFragment(text,fontOptions,ascender,descender,textOffsetX,textOffsetY,layoutW,layoutH,0,0,layoutW,layoutH)},Metrics._getTextualFontMetrics=function(text,fontOptions,alreadyComputedTextWidth,fontCss,areaIncludesDescender){var area,ascender,descender,fontSize,width;return null==areaIncludesDescender&&(areaIncludesDescender=!0),fontSize=fontOptions.fontSize-0,ascender=.75*fontSize,descender=.25*fontSize,width=null!=alreadyComputedTextWidth?alreadyComputedTextWidth:this.getWidth(text,fontOptions,fontCss),area=rect(0,descender-fontSize,width,fontSize-(areaIncludesDescender?0:descender)),this.pessimisticDrawArea(width,fontOptions,tempRectangleToCapturePessimisticDrawArea),new TextLayoutFragment(text,fontOptions,ascender,descender,(-area.x),(-area.y),area.w,area.h,tempRectangleToCapturePessimisticDrawArea.x,tempRectangleToCapturePessimisticDrawArea.y,tempRectangleToCapturePessimisticDrawArea.w,tempRectangleToCapturePessimisticDrawArea.h)},Metrics.classGetter({scratchCanvasBitmap:function(){return this._scratchCanvasBitmap||(this._scratchCanvasBitmap=new Canvas.Bitmap(point(10,10)))}}),Metrics.pessimisticDrawArea=function(textWidth,fontOptions,intoRectangle,increasedFontSizeProportionalDrawAreaPadding){var floatX,floatY,fontSize,h,padding,w,x,y;return fontSize=fontOptions.fontSize,padding=fontSize*(increasedFontSizeProportionalDrawAreaPadding||fontOptions.padding||Metrics.defaultFontSizeProportionalDrawAreaPadding),x=Math.floor(floatX=-padding),y=Math.floor(floatY=-padding),w=Math.ceil(floatX+textWidth+2*padding)-x,h=Math.ceil(floatY+fontSize+2*padding)-y,intoRectangle?(intoRectangle.x=x,intoRectangle.y=y,intoRectangle.w=w,intoRectangle.h=h,intoRectangle):rect(x,y,w,h)},Metrics._scratchBitmap=null,Metrics.renderTextToScratchBitmap=function(text,fontOptions,padding){var context,drawArea,ref,scratchBitmapSize,size,x,y;return drawArea=this.pessimisticDrawArea(this.getWidth(text,fontOptions),fontOptions,null,padding),size=drawArea.size.size,scratchBitmapSize=(null!=(ref=this._scratchBitmap)?ref.size:void 0)||point0,scratchBitmapSize.gt(size)?this._scratchBitmap.clear():this._scratchBitmap=new Canvas.Bitmap(scratchBitmapSize.max(size)),context=this._scratchBitmap.context,context.textAlign="left",context.textBaseline="alphabetic",context.font=toFontCss(fontOptions),context.fillText(text,x=-drawArea.x,y=-drawArea.y+3*fontOptions.fontSize/4),[this._scratchBitmap,size,point(x,y)]},Metrics.debug=function(area,bitmap,location,options){var image;return image=new Canvas.Bitmap(bitmap.size),image.clear("white"),image.drawRectangle(location,area,"#ddf"),image.drawRectangle(location,rect(area.location.x,0,area.size.x,1),"red"),image.drawRectangle(location,rect(0,area.location.y,1,area.size.y),"green"),image.drawBitmap(point(),bitmap),this.log(image,{layoutMode:options.layoutMode})},Metrics}(Foundation.BaseObject)})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125),__webpack_require__(137)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic,Canvas){var BaseObject,TextLayoutFragment,inspect,log,point,point0,rect;return point=Atomic.point,rect=Atomic.rect,point0=Atomic.point0,log=Foundation.log,BaseObject=Foundation.BaseObject,inspect=Foundation.inspect,TextLayoutFragment=function(superClass){function TextLayoutFragment(text,font,ascender,descender,textOffsetX,textOffsetY,layoutW,layoutH,drawAreaX,drawAreaY,drawAreaW,drawAreaH){this.text=text,this.font=font,this.ascender=ascender,this.descender=descender,this.textOffsetX=textOffsetX,this.textOffsetY=textOffsetY,this.layoutW=layoutW,this.layoutH=layoutH,this.drawAreaX=drawAreaX,this.drawAreaY=drawAreaY,this.drawAreaW=drawAreaW,this.drawAreaH=drawAreaH,this.layoutX=this.layoutY=0,this.alignmentOffsetX=0,this.alignmentOffsetY=0}return extend(TextLayoutFragment,superClass),TextLayoutFragment.prototype.toString=function(){return inspect(this.toPlainObject())},TextLayoutFragment.prototype.mul=function(x){return new TextLayoutFragment(this.text,this.font,x*this.ascender,x*this.descender,x*this.textOffsetX,x*this.textOffsetY,x*this.layoutW,x*this.layoutH,x*this.drawAreaX,x*this.drawAreaY,x*this.drawAreaW,x*this.drawAreaH)},TextLayoutFragment.prototype.toPlainObject=function(){return{text:this.text,font:this.font,ascender:this.ascender,descender:this.descender,textOffsetX:this.textOffsetX,textOffsetY:this.textOffsetY,layoutX:this.layoutX,layoutY:this.layoutY,layoutW:this.layoutW,layoutH:this.layoutH,drawAreaX:this.drawAreaX,drawAreaY:this.drawAreaY,drawAreaW:this.drawAreaW,drawAreaH:this.drawAreaH,alignmentOffsetX:this.alignmentOffsetX,alignmentOffsetY:this.alignmentOffsetY}},TextLayoutFragment.prototype.clone=function(){return new TextLayoutFragment(this.text,this.font,this.ascender,this.descender,this.textOffsetX,this.textOffsetY,this.layoutW,this.layoutH,this.drawAreaX,this.drawAreaY,this.drawAreaW,this.drawAreaH)},TextLayoutFragment.prototype.move=function(x,y){return this.moveX(x),this.moveY(y)},TextLayoutFragment.prototype.moveX=function(x){return this.layoutX+=x,this.drawAreaX+=x},TextLayoutFragment.prototype.moveY=function(y){return this.layoutY+=y,this.drawAreaY+=y},TextLayoutFragment.prototype.setLayoutLocationFrom=function(fragment){return this.layoutX=fragment.layoutX,this.layoutY=fragment.layoutY},TextLayoutFragment.getter({left:function(){return this.getAlignedLayoutX()},top:function(){return this.getAlignedLayoutY()},bottom:function(){return this.getAlignedLayoutY()+this.layoutH},right:function(){return this.getAlignedLayoutX()+this.layoutW},alignedLayoutX:function(){return this.layoutX+this.alignmentOffsetX},alignedLayoutY:function(){return this.layoutY+this.alignmentOffsetY},alignedDrawAreaX:function(){return this.drawAreaX+this.alignmentOffsetX},alignedDrawAreaY:function(){return this.drawAreaY+this.alignmentOffsetY},layoutArea:function(){return rect(this.layoutX,this.layoutY,this.layoutW,this.layoutH)},alignedLayoutArea:function(){return rect(this.getAlignedLayoutX(),this.getAlignedLayoutY(),this.layoutW,this.layoutH)},alignedDrawArea:function(){return rect(this.getAlignedDrawAreaX(),this.getAlignedDrawAreaY(),this.drawAreaW,this.drawAreaH)},alignedDrawAreaLeft:function(){return this.getAlignedDrawAreaX()},alignedDrawAreaTop:function(){return this.getAlignedDrawAreaY()},alignedDrawAreaRight:function(){return this.getAlignedDrawAreaX()+this.drawAreaW},alignedDrawAreaBottom:function(){return this.getAlignedDrawAreaY()+this.drawAreaH},area:function(){return console.error("TextLayoutFragment.area is DEPRICATED. Use: TextLayoutFragment#layoutArea"),rect(this.layoutX-this.textOffsetX,this.layoutY-this.textOffsetY,this.layoutW,this.layoutH)},textX:function(){return this.layoutX+this.textOffsetX+this.alignmentOffsetX},textY:function(){return this.layoutY+this.textOffsetY+this.alignmentOffsetY}}),TextLayoutFragment}(BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var Atomic,FillableBase,Foundation,ShapeElement,Text,createWithPostCreate,isFunction,pureMerge,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Text=__webpack_require__(221),FillableBase=__webpack_require__(218),pureMerge=Foundation.pureMerge,isFunction=Foundation.isFunction,createWithPostCreate=Foundation.createWithPostCreate,module.exports=createWithPostCreate(ShapeElement=function(superClass){function ShapeElement(){ShapeElement.__super__.constructor.apply(this,arguments),this._lastPathFunction=null,this._curriedPathFunction=null}return extend(ShapeElement,superClass),ShapeElement.drawProperty({fillRule:{"default":"nonzero",validate:function(r){return"nonzero"===r||"evenodd"===r}},path:{"default":function(context,size){var h,w;return w=size.w,h=size.h,context.beginPath(),context.moveTo(0,0),context.lineTo(0,h),context.lineTo(w,h),context.lineTo(w,0),context.lineTo(0,0),context.closePath()},validate:function(f){return isFunction(f)}}}),ShapeElement.getter({curriedPathFunction:function(){var pathFunction;return pathFunction=this.getPath(),this._lastPathFunction!==pathFunction?(this._lastPathFunction=pathFunction,this._curriedPathFunction=function(_this){return function(context){return pathFunction(context,_this.currentSize)}}(this)):this._curriedPathFunction}}),ShapeElement.prototype.drawBasic=function(target,elementToTargetMatrix,compositeMode,opacity){return this._prepareDrawOptions(this._drawOptions,compositeMode,opacity),this.fillShape(target,elementToTargetMatrix,this._drawOptions)},ShapeElement.prototype.fillShape=function(target,elementToTargetMatrix,options){return options.color||(options.color=this._color),options.fillRule=this._fillRule,target.fillShape(elementToTargetMatrix,options,this.getCurriedPathFunction())},ShapeElement.prototype.strokeShape=function(target,elementToTargetMatrix,options){return options.color||(options.color=this._color),target.strokeShape(elementToTargetMatrix,options,this.getCurriedPathFunction())},ShapeElement}(FillableBase))},function(module,exports,__webpack_require__){var Atomic,BaseObject,FillableBase,Foundation,GlobalEpochCycle,Text,TextElement,createWithPostCreate,globalEpochCycle,isNumber,isPlainArray,isString,log,merge,normalizeFontOptions,point,propInternalName,propSetterName,pureMerge,rect,shallowClone,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Text=__webpack_require__(221),FillableBase=__webpack_require__(218),GlobalEpochCycle=__webpack_require__(201),log=Foundation.log,BaseObject=Foundation.BaseObject,shallowClone=Foundation.shallowClone,pureMerge=Foundation.pureMerge,merge=Foundation.merge,createWithPostCreate=Foundation.createWithPostCreate,isPlainArray=Foundation.isPlainArray,isString=Foundation.isString,isNumber=Foundation.isNumber,point=Atomic.point,rect=Atomic.rect,normalizeFontOptions=Text.Metrics.normalizeFontOptions,globalEpochCycle=GlobalEpochCycle.globalEpochCycle,propInternalName=BaseObject.propInternalName,propSetterName=BaseObject._propSetterName,module.exports=createWithPostCreate(TextElement=function(superClass){function TextElement(){TextElement.__super__.constructor.apply(this,arguments),this._textLayout=null}return extend(TextElement,superClass),TextElement.prototype.defaultSize={cs:1},TextElement.getter({cacheable:function(){return!0}}),TextElement.drawLayoutProperty({fontSize:{"default":16,validate:function(v){return isNumber(v)}},fontFamily:{"default":"Times",validate:function(v){return isString(v)}},fontStyle:{"default":"normal",validate:function(v){return isString(v)}},fontVariant:{"default":"normal",validate:function(v){return isString(v)}},fontWeight:{"default":"normal",validate:function(v){return isString(v)}},align:{"default":0,preprocess:function(v){return point(v)}},layoutMode:{"default":"textualBaseline",validate:function(v){return isString(v)}},leading:{"default":1.25,validate:function(v){return isNumber(v)}},maxLines:{"default":null,validate:function(v){return null==v||isNumber(v)}},overflow:{"default":"ellipsis",validate:function(v){return isString(v)}},text:{"default":Text.Layout.defaultText,preprocess:function(t){return isPlainArray(t)?t.join("\n"):""+t}}}),TextElement.virtualProperty({font:{getter:function(pending){var _fontFamily,_fontSize,_fontStyle,_fontVariant,_fontWeight,ref;return ref=this.getState(pending),_fontFamily=ref._fontFamily,_fontSize=ref._fontSize,_fontStyle=ref._fontStyle,_fontVariant=ref._fontVariant,_fontWeight=ref._fontWeight,{fontFamily:_fontFamily,fontSize:_fontSize,fontStyle:_fontStyle,fontVariant:_fontVariant,fontWeight:_fontWeight}}},format:{getter:function(pending){var _align,_layoutMode,_leading,_maxLines,_overflow,ref;return ref=this.getState(pending),_align=ref._align,_layoutMode=ref._layoutMode,_leading=ref._leading,_maxLines=ref._maxLines,_overflow=ref._overflow,{align:_align,layoutMode:_layoutMode,leading:_leading,maxLines:_maxLines,overflow:_overflow}}}}),TextElement.prototype.getBaseDrawArea=function(){var ref;return(null!=(ref=this._textLayout)?ref.getDrawArea():void 0)||rect()},TextElement.prototype.getPendingBaseDrawArea=function(){var ref;return(null!=(ref=this._textLayout)?ref.getDrawArea():void 0)||rect()},TextElement.prototype.customLayoutChildrenFirstPass=function(size){var ret;return ret=null,globalEpochCycle.timePerformance("aimTL",function(_this){return function(){return _this._textLayout=new Text.Layout(_this.getPendingText(),_this.getPendingFont(),_this.getPendingFormat(),size.x,size.y),ret=_this._textLayout.getSize()}}(this)),ret},TextElement.prototype.customLayoutChildrenSecondPass=function(size){return this._textLayout.setWidth(size.x),this._textLayout.size},TextElement.prototype.fillShape=function(target,elementToTargetMatrix,options){return this._textLayout.draw(target,elementToTargetMatrix,pureMerge(options,{layoutSize:this.getCurrentSize(),color:(null!=options?options.color:void 0)||this._color}))},TextElement.prototype.strokeShape=function(target,elementToTargetMatrix,options){return this._textLayout.stroke(target,elementToTargetMatrix,pureMerge(options,{layoutSize:this.getCurrentSize(),color:(null!=options?options.color:void 0)||this._color}))},TextElement}(FillableBase))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(233).addModules({BlurElement:__webpack_require__(234),FilterElement:__webpack_require__(235),ShadowElement:__webpack_require__(236)})},function(module,exports,__webpack_require__){var Elements,Filters,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Elements=__webpack_require__(213),module.exports=Elements.Filters||Elements.addNamespace("Filters",Filters=function(superClass){function Filters(){return Filters.__super__.constructor.apply(this,arguments)}return extend(Filters,superClass),Filters}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var Atomic,BlurElement,FilterElement,Foundation,defineModule,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),FilterElement=__webpack_require__(235),(defineModule=Foundation.defineModule)(module,BlurElement=function(superClass){function BlurElement(){return BlurElement.__super__.constructor.apply(this,arguments)}return extend(BlurElement,superClass),BlurElement.prototype.defaultRadius=10,BlurElement.prototype.defaultCompositeMode="replace",BlurElement.prototype.filter=function(elementSpaceTarget,scale){return elementSpaceTarget.blur(this.radius*scale)},BlurElement}(FilterElement))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var Atomic,CoreElementsBase,FilterElement,Foundation,Matrix,createWithPostCreate,isString,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),CoreElementsBase=__webpack_require__(219),log=Foundation.log,isString=Foundation.isString,createWithPostCreate=Foundation.createWithPostCreate,Matrix=Atomic.Matrix,module.exports=createWithPostCreate(FilterElement=function(superClass){function FilterElement(){return FilterElement.__super__.constructor.apply(this,arguments)}return extend(FilterElement,superClass),FilterElement.registerWithElementFactory=function(){return this!==FilterElement},FilterElement.drawProperty({filterSource:{"default":null,validate:function(v){return!v||isString(v)}}}),FilterElement.drawAreaProperty({radius:{"default":0,validate:function(v){return"number"==typeof v}}}),FilterElement.prototype.filterPixelData=function(filterScratchBitmap,pixelData,scale){return pixelData},FilterElement.prototype.filter=function(filterScratchBitmap,scale){var imageData;return imageData=filterScratchBitmap.getImageData(),this.filterPixelData(filterScratchBitmap,imageData.data,scale),filterScratchBitmap.putImageData(imageData),filterScratchBitmap},FilterElement.prototype.fillShape=function(target,elementToTargetMatrix,options){var filterTarget,filterTargetToElementMatrix,ref,scale;return scale=elementToTargetMatrix.exactScaler,ref=this._filterFilterSource(scale,target),filterTargetToElementMatrix=ref.filterTargetToElementMatrix,filterTarget=ref.filterTarget,target.drawBitmap(filterTargetToElementMatrix.mul(elementToTargetMatrix),filterTarget,options)},FilterElement.prototype.overDraw=function(proposedTargetSpaceDrawArea,parentToTargetMatrix){var minimumElementSpaceDrawArea,propsedElementSpaceDrawArea,requiredTargetSpaceDrawArea,targetToElementMatrix;
return targetToElementMatrix=parentToTargetMatrix.inv.mul(this.parentToElementMatrix),propsedElementSpaceDrawArea=targetToElementMatrix.transformBoundingRect(proposedTargetSpaceDrawArea),minimumElementSpaceDrawArea=propsedElementSpaceDrawArea.grow(this.radius).intersection(this.elementSpaceDrawArea),requiredTargetSpaceDrawArea=parentToTargetMatrix.transformBoundingRect(minimumElementSpaceDrawArea),proposedTargetSpaceDrawArea.union(requiredTargetSpaceDrawArea)},FilterElement.virtualProperty({baseDrawArea:function(pending){var _currentSize,_radius,baseDrawArea,ref;return ref=this.getState(pending),_currentSize=ref._currentSize,_radius=ref._radius,baseDrawArea=this.getElementSpaceSourceDrawArea(pending),this._inverted&&this.filterSourceDrawAreaInElementSpace.unionInto(baseDrawArea),baseDrawArea.grow(_radius)}}),FilterElement.getter({requiresParentStagingBitmap:function(){return!0},isFilter:function(){return!0}}),FilterElement.prototype._getFilterSourceElement=function(pending,returnChild){var c,filterSource,p,state;if(state=this.getState(pending),filterSource=state._filterSource){for(p=state._parent,c=this;p&&p.name!==filterSource;)c=p,p=p.getState(pending)._parent;if(p)return returnChild?c:p;console.warn(this.inspectedName+": no ancestor's name matches filterSource:"+inspect(filterSource))}return returnChild?this:state._parent},FilterElement.prototype._filterFilterSource=function(scale,bitmapFactory){var elementSpaceDrawArea,elementToFilterScratchMatrix,filterScratch,filterSource,filterSourceTargetToFilterScratchMatrix;return filterSource=this.getFilterSourceElement(),elementSpaceDrawArea=this.getElementSpaceDrawArea(),elementToFilterScratchMatrix=Matrix.translate(elementSpaceDrawArea.location.neg.add(this.radius)).scale(scale),filterSourceTargetToFilterScratchMatrix=filterSource._currentToTargetMatrix.inv.scale(this.getFilterSourceSizeRatio()).mul(elementToFilterScratchMatrix),filterScratch=bitmapFactory.newBitmap(elementSpaceDrawArea.size.add(2*this.radius).mul(scale)).drawBitmap(filterSourceTargetToFilterScratchMatrix,filterSource._currentDrawTarget),{filterTargetToElementMatrix:elementToFilterScratchMatrix.inv,filterTarget:this.filter(filterScratch,scale)}},FilterElement.virtualProperty({filterSourceDrawArea:function(pending){var filterSourceChildElement,filterSourceElement;return filterSourceElement=this.getFilterSourceElement(pending),filterSourceChildElement=this.getFilterSourceChildElement(pending),filterSourceElement._computeElementSpaceDrawArea(filterSourceChildElement)},filterSourceSize:function(pending){return this.getFilterSourceElement(pending).getCurrentSize(pending)},filterSourceSizeRatio:function(pending){var _currentSize,filterSourceSize;return _currentSize=this.getState(pending)._currentSize,filterSourceSize=this.getFilterSourceSize(pending),_currentSize.eq(filterSourceSize)?1:_currentSize.div(filterSourceSize)},elementSpaceSourceDrawArea:function(pending){return this.getFilterSourceDrawArea(pending).mul(this.getFilterSourceSizeRatio(pending))},filterSourceElement:function(pending){return this._getFilterSourceElement(pending)},filterSourceChildElement:function(pending){return this._getFilterSourceElement(pending,!0)},filterSourceDrawAreaInElementSpace:function(pending){return this.getFilterSourceElement(pending).getElementToElementMatrix(this).transformBoundingRect(this.getFilterSourceDrawArea(pending))}}),FilterElement}(CoreElementsBase))},function(module,exports,__webpack_require__){var Atomic,FilterElement,Foundation,ShadowElement,createWithPostCreate,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),FilterElement=__webpack_require__(235),createWithPostCreate=Foundation.createWithPostCreate,log=Foundation.log,module.exports=createWithPostCreate(ShadowElement=function(superClass){function ShadowElement(){return ShadowElement.__super__.constructor.apply(this,arguments)}return extend(ShadowElement,superClass),ShadowElement.prototype.defaultCompositeMode="destOver",ShadowElement.drawProperty({inverted:{"default":!1}}),ShadowElement.prototype.filter=function(elementSpaceTarget,scale){return elementSpaceTarget.blurAlpha(this._radius*scale,{inverted:this.inverted}),elementSpaceTarget.drawRectangle(null,elementSpaceTarget.size,{color:this._color,compositeMode:"targetAlphaMask"})},ShadowElement}(FilterElement))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(238).addModules({PagingScrollElementWip:__webpack_require__(239),PagingScrollElement:__webpack_require__(240)})},function(module,exports,__webpack_require__){var Elements,Widgets,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Elements=__webpack_require__(213),module.exports=Elements.Widgets||Elements.addNamespace("Widgets",Widgets=function(superClass){function Widgets(){return Widgets.__super__.constructor.apply(this,arguments)}return extend(Widgets,superClass),Widgets}(Neptune.Base))},function(module,exports,__webpack_require__){var AnimatorSupport,Atomic,BaseModule,BaseObject,Element,EventEpoch,Foundation,GestureRecognizer,Matrix,PagingScrollElementWip,Point,Rectangle,ScrollAnimator,abs,absGt,absGte,absLt,absLte,animatorSpringConstant,animatorSpringFriction,bound,brakingFactor,ceil,createGestureRecognizer,createWithPostCreate,crossScrollProperties,currentSecond,eventEpoch,first,flickSpeedMultiplier,formattedInspect,inspect,isPlainArray,isPoint,last,log,matrix,max,maxChange,maxMagnitude,merge,min,minMagnitude,minimumFlickVelocity,neq,peek,point,point0,pointNearInfinity,rect,requestAnimationFrame,round,scrollProperties,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),EventEpoch=__webpack_require__(168).EventEpoch,Element=__webpack_require__(184),GestureRecognizer=__webpack_require__(165),log=Foundation.log,inspect=Foundation.inspect,currentSecond=Foundation.currentSecond,bound=Foundation.bound,round=Foundation.round,first=Foundation.first,last=Foundation.last,peek=Foundation.peek,min=Foundation.min,max=Foundation.max,abs=Foundation.abs,merge=Foundation.merge,createWithPostCreate=Foundation.createWithPostCreate,BaseObject=Foundation.BaseObject,timeout=Foundation.timeout,ceil=Foundation.ceil,round=Foundation.round,isPlainArray=Foundation.isPlainArray,BaseModule=Foundation.BaseModule,absLt=Foundation.absLt,absLte=Foundation.absLte,absGt=Foundation.absGt,absGte=Foundation.absGte,minMagnitude=Foundation.minMagnitude,maxMagnitude=Foundation.maxMagnitude,maxChange=Foundation.maxChange,absLt=Foundation.absLt,requestAnimationFrame=Foundation.requestAnimationFrame,formattedInspect=Foundation.formattedInspect,neq=Foundation.neq,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,isPoint=Atomic.isPoint,point0=Point.point0,pointNearInfinity=Point.pointNearInfinity,eventEpoch=EventEpoch.eventEpoch,createGestureRecognizer=GestureRecognizer.createGestureRecognizer,scrollProperties={vertical:"y",horizontal:"x"},crossScrollProperties={vertical:"x",horizontal:"y"},brakingFactor=3,minimumFlickVelocity=300,animatorSpringConstant=300,animatorSpringFriction=25,flickSpeedMultiplier=1,ScrollAnimator=function(superClass1){function ScrollAnimator(scrollElement,maximumVelocity1){this.scrollElement=scrollElement,this.maximumVelocity=maximumVelocity1,ScrollAnimator.__super__.constructor.apply(this,arguments),this._referenceFrame=this.scrollElement.getPendingReferenceFrame(),this._velocity=0,this._mode="tracking"}var frameCount,missCount;return extend(ScrollAnimator,superClass1),ScrollAnimator.getter("desiredScrollPosition",{mode:function(){return this._mode},minScrollPosition:function(){return this.scrollElement.getMinScrollPositionInReferenceFrame(this._referenceFrame)},maxScrollPosition:function(){return this.scrollElement.getMaxScrollPositionInReferenceFrame(this._referenceFrame)},scrollPosition:function(){return this.scrollElement.getScrollPositionInReferenceFrame(this._referenceFrame)},animationDone:function(){switch(this.mode){case"spring":return this.velocityIsSlow()&&this._desiredScrollPosition===this.getScrollPosition();case"braking":return this.velocityIsSlow();default:return!this._activeTouch}},animationContinues:function(){return!this.getAnimationDone()}}),ScrollAnimator.setter("desiredScrollPosition",{mode:function(v){return this._mode=v},referenceFrame:function(v){return this._referenceFrame=v},scrollPosition:function(l){return this.scrollElement.setScrollPositionInReferenceFrame(round(l),this._referenceFrame)},activeTouch:function(v){if(!(this._activeTouch=!!v))return this.mode="spring",this._desiredScrollPosition=this.boundLocation(this._desiredScrollPosition)}}),ScrollAnimator.prototype.addToDesiredScrollPosition=function(delta){return this._desiredScrollPosition+=delta},ScrollAnimator.prototype.animateToLocation=function(desiredScrollPosition){return this.mode="spring",this._desiredScrollPosition=desiredScrollPosition},ScrollAnimator.prototype.boundLocation=function(scrollPosition){return bound(this.getMinScrollPosition(),scrollPosition,this.getMaxScrollPosition())},ScrollAnimator.prototype.startTracking=function(desiredScrollPosition,referenceFrame){return this._referenceFrame=referenceFrame,this.mode="tracking",this._velocity=0,this.setDesiredScrollPosition(desiredScrollPosition),this._activeTouch=!0},ScrollAnimator.prototype.addVelocity=function(v){return this._velocity=v,this.mode="braking"},ScrollAnimator.prototype.velocityIsSlow=function(){return absLte(this._velocity,60)},frameCount=0,missCount=0,ScrollAnimator.prototype.frameUpdate=function(frameTime){var acceleration,boundedLocation,boundedTargetLocation,currentToTargetVector,distanceSquared,frictionAcceleration,frictionConstant,maxBeyond,maxV,minV,scrollPosition,springAcceleration,springConstant,targetScrollPosition,tookFrames,windowSize;switch(tookFrames=Math.round(60*frameTime),frameCount++,absLt(60*frameTime-1,.25)||tookFrames>1&&missCount++,scrollPosition=this.getScrollPosition(),targetScrollPosition=this._desiredScrollPosition,this._velocity=maxMagnitude(this._velocity,this.maximumVelocity),this._mode){case"tracking":windowSize=this.scrollElement.windowSize,boundedTargetLocation=this.boundLocation(targetScrollPosition),maxBeyond=windowSize/3,minV=min(boundedTargetLocation,targetScrollPosition),maxV=max(boundedTargetLocation,targetScrollPosition),targetScrollPosition=bound(minV,boundedTargetLocation+Math.atan((targetScrollPosition-boundedTargetLocation)/maxBeyond)*(2/Math.PI)*maxBeyond,maxV),this._velocity=0,this.setScrollPosition(targetScrollPosition);break;case"braking":this._activeTouch=!1,frictionConstant=brakingFactor,frictionAcceleration=this._velocity*-frictionConstant,acceleration=frictionAcceleration,this._velocity+=acceleration*frameTime,scrollPosition+=this._velocity*frameTime,this.setScrollPosition(scrollPosition),scrollPosition!==(boundedLocation=this.boundLocation(scrollPosition))&&(this.mode="spring",this._desiredScrollPosition=boundedLocation);break;case"spring":currentToTargetVector=targetScrollPosition-scrollPosition,distanceSquared=currentToTargetVector*currentToTargetVector,springConstant=animatorSpringConstant,frictionConstant=animatorSpringFriction,springAcceleration=currentToTargetVector*springConstant,frictionAcceleration=this._velocity*-frictionConstant,acceleration=springAcceleration+frictionAcceleration,this._velocity=this._velocity+acceleration*frameTime,this.setScrollPosition(this.velocityIsSlow()&&abs(scrollPosition-targetScrollPosition)<=1?targetScrollPosition:scrollPosition+minMagnitude(this._velocity*frameTime,1))}return this.getAnimationContinues()||log("frameUpdate "+this._mode+": DONE (miss rate: "+missCount+" / "+frameCount+")"),this.getAnimationContinues()},ScrollAnimator}(BaseObject),AnimatorSupport=function(superClass){return AnimatorSupport=function(superClass1){function AnimatorSupport(){return AnimatorSupport.__super__.constructor.apply(this,arguments)}return extend(AnimatorSupport,superClass1),AnimatorSupport.getter({animatorsActive:function(){return!!this._activeAnimators}}),AnimatorSupport.prototype.initAnimatorSupport=function(){return this._lastTime=0,this._activeAnimators=null,this._frameUpdateQueued=!1},AnimatorSupport.prototype.startAnimator=function(animator){return this.getAnimatorsActive()?this._activeAnimators.push(animator):(this._activeAnimators=[animator],this._lastTime=currentSecond(),this.getAnimatorsActive()),this._startAnimatorLoop(),animator},AnimatorSupport.prototype.replaceAnimator=function(newAnimator,oldAnimator){var index;return this._activeAnimators&&oldAnimator?(index=this._activeAnimators.indexOf(oldAnimator),index>=0?this._activeAnimators[index]=newAnimator:this.startAnimator(newAnimator)):this.startAnimator(newAnimator)},AnimatorSupport.prototype.stopAllAnimators=function(){return this._activeAnimators=null},AnimatorSupport.prototype._frameUpdate=function(frameTime){var animator,i,j,len,nextAnimators,now,ref;if(this._activeAnimators){for(now=frameTime,frameTime=now-this._lastTime,nextAnimators=null,ref=this._activeAnimators,i=j=0,len=ref.length;j<len;i=++j)animator=ref[i],animator.frameUpdate(frameTime)?null!=nextAnimators&&nextAnimators.push(animator):(this.queueEvent("animatorDone",{animator:animator}),nextAnimators||(nextAnimators=this._activeAnimators.slice(0,i)));return nextAnimators&&(0===nextAnimators.length?(this._activeAnimators=null,this.queueEvent("allAnimatorsDone")):this._activeAnimators=nextAnimators),this._lastTime=now}},AnimatorSupport.prototype._startAnimatorLoop=function(){if(!this._frameUpdateQueued)return requestAnimationFrame(function(_this){return function(frameTimeMs){var queueNextFrameUpdate;return _this._lastTime=frameTimeMs/1e3,(queueNextFrameUpdate=function(){if(_this.getAnimatorsActive())return _this._frameUpdateQueued=!0,requestAnimationFrame(function(frameTimeMs){return _this._frameUpdateQueued=!1,_this._frameUpdate(frameTimeMs/1e3),queueNextFrameUpdate()})})()}}(this))},AnimatorSupport}(superClass)},module.exports=createWithPostCreate(PagingScrollElementWip=function(superClass1){function PagingScrollElementWip(){this.initAnimatorSupport(),this._initGestureProps(),this._pages=null,this._currentPage=null,this._atEnd=!1,this._atStart=!0,this._scrollPositionRelativeToChildrenAlignment=!1,this._scrollContents=this._pagesBeforeBaselineWrapper=this._pagesAfterBaselineWrapper=null,this._setVerticalAxis(),PagingScrollElementWip.__super__.constructor.apply(this,arguments),self.pagingScrollElement=this,this._updateHiddenChildren()}var defaultReferenceFrame;return extend(PagingScrollElementWip,superClass1),PagingScrollElementWip.prototype.preprocessEventHandlers=function(handlerMap){return merge(this._externalHandlerMap=handlerMap,{mouseWheel:function(_this){return function(event){var horizontal,position,scrollValue,windowSize;switch(_this._mostRecentMouseWheelEvent=event,windowSize=_this.windowSize,scrollValue=(horizontal="horizontal"===_this.scroll)?event.props.deltaX||0:event.props.deltaY||0,event.props.deltaMode){case"line":scrollValue*=16;break;case"page":scrollValue*=.75*windowSize}return _this.getActiveScrollAnimator()||_this.startScrollAnimatorTracking(),scrollValue=bound(-windowSize,-scrollValue,windowSize),position=_this.getScrollAnimator().desiredScrollPosition+scrollValue,_this.getScrollAnimator().desiredScrollPosition=bound(_this.getScrollAnimator().minScrollPosition,position,_this.getScrollAnimator().maxScrollPosition),timeout(100).then(function(){if(_this._mostRecentMouseWheelEvent===event)return _this.endScrollAnimatorTracking()})}}(this),animatorDone:function(_this){return function(arg){var animator,props;if(props=arg.props,animator=props.animator,animator===_this._scrollAnimator)return _this._scrollAnimator=null}}(this)},createGestureRecognizer({custom:{resume:this.gestureResume.bind(this),recognize:this.gestureRecognize.bind(this),begin:this.gestureBegin.bind(this),move:this.gestureMove.bind(this),end:this.gestureEnd.bind(this)}}))},PagingScrollElementWip.prototype._setVerticalAxis=function(){return this.newPoint=function(mainV,crossV){return null==crossV&&(crossV=0),point(crossV,mainV)},this.getPagePosition=function(page){return(null!=page?page.transformToAncestorSpaceY(0,this):void 0)||0},this.getMainCoordinate=function(pnt){return pnt.y}},PagingScrollElementWip.prototype._setHorizontalAxis=function(){return this.newPoint=function(mainV,crossV){return null==crossV&&(crossV=0),point(mainV,crossV)},this.getPagePosition=function(page){return(null!=page?page.transformToAncestorSpaceX(0,this):void 0)||0},this.getMainCoordinate=function(pnt){return pnt.x}},PagingScrollElementWip.prototype.getPageSize=function(page){return page?this.getMainCoordinate(page.getCurrentSize()):0},PagingScrollElementWip.prototype.getPageEdgeOffset=function(arg){var atEndEdge,page;return page=arg.page,atEndEdge=arg.atEndEdge,atEndEdge?this.getPageSize(page):0},PagingScrollElementWip.prototype.getPageCenter=function(page){return this.getPagePosition(page)+this.getPageSize(page)/2},defaultReferenceFrame={page:null,atEndEdge:!1},PagingScrollElementWip.concreteProperty({referenceFrame:{"default":defaultReferenceFrame,postSetter:function(newReferenceFrame,previousReferenceFrame){var delta;return newReferenceFrame===previousReferenceFrame&&console.warn("referenceFrame_postSetter - frame didnt' change"),this._addToScrollPosition(delta=this.getReferenceFrameDelta(newReferenceFrame,previousReferenceFrame)),this._updatePointerReferenceFrame(newReferenceFrame),this._queueUpdateEvent(newReferenceFrame,previousReferenceFrame),this._updatePagesSplit()}},pages:{"default":[],validate:function(pages){return isPlainArray(pages)},postSetter:function(pages,oldPages){var atEndEdge,page,ref,referenceFrame;if(ref=referenceFrame=this.getPendingReferenceFrame(),page=ref.page,atEndEdge=ref.atEndEdge,this._atEnd&&(atEndEdge=!0,page=last(pages)),!this._atStart&&page||(atEndEdge=!1,page=first(pages)),referenceFrame.page&&0>pages.indexOf(referenceFrame.page)&&console.warn("PagingScrollElement#pages setter: New page list does not contain the current referenceFrame. ALWAYS include the current referenceFrame when setting pages. Screen will jump!\n\npage keys: "+inspect(function(){var j,len,results;for(results=[],j=0,len=pages.length;j<len;j++)page=pages[j],results.push(page.key);return results}())),referenceFrame.page!==page||referenceFrame.atEndEdge!==atEndEdge?this.setReferenceFrame({page:page,atEndEdge:atEndEdge}):this._updatePagesSplit(),oldPages.length>0)return this.onNextReady(function(_this){return function(){return _this._updateAtStartAndAtEnd()}}(this))}},scrollPosition:{"default":0,postSetter:function(position){return this.onNextReady(function(_this){return function(){return _this._updateAtStartAndAtEnd()}}(this)),this._setScrollContentsLocation(position)}}}),PagingScrollElementWip.prototype._updatePagesSplit=function(pages,referenceFrame){var atEndEdge,page,splitIndex;return null==pages&&(pages=this.getPendingPages()),null==referenceFrame&&(referenceFrame=this.getPendingReferenceFrame()),page=referenceFrame.page,atEndEdge=referenceFrame.atEndEdge,splitIndex=pages.indexOf(page),splitIndex<0&&(page&&console.warn("PagingScrollElement#_updatePagesSplit: could not find the old referenceFrame.page(key: "+(page.key||page.inspectedName)+") in the new children. New current page picked; display WILL jump."),splitIndex=0),atEndEdge&&splitIndex++,this._pagesBeforeBaselineWrapper.setChildren(pages.slice(0,splitIndex)),this._pagesAfterBaselineWrapper.setChildren(pages.slice(splitIndex))},PagingScrollElementWip.layoutProperty({scroll:{"default":"vertical",validate:function(v){return"vertical"===v||"horizontal"===v},postSetter:function(newV,oldValue){return"vertical"===newV?this._setVerticalAxis():this._setHorizontalAxis(),this._updateHiddenChildren(newV)}}}),PagingScrollElementWip.prototype.getReferenceFrameDelta=function(toReferenceFrame,fromReferenceFrame){var edgeDelta,positionDelta;return null==toReferenceFrame&&(toReferenceFrame=defaultReferenceFrame),null==fromReferenceFrame&&(fromReferenceFrame=defaultReferenceFrame),toReferenceFrame===fromReferenceFrame?0:(positionDelta=toReferenceFrame.page===fromReferenceFrame.page?0:this.getPagePosition(toReferenceFrame.page)-this.getPagePosition(fromReferenceFrame.page),edgeDelta=this.getPageEdgeOffset(toReferenceFrame)-this.getPageEdgeOffset(fromReferenceFrame),positionDelta+edgeDelta)},PagingScrollElementWip.prototype.getScrollPositionInReferenceFrame=function(targetReferenceFrame){return this.getScrollPosition()+this.getReferenceFrameDelta(targetReferenceFrame,this.getReferenceFrame())},PagingScrollElementWip.prototype.setScrollPositionInReferenceFrame=function(scrollPosition,referenceFrame){var pendingReferenceFrame;return null==referenceFrame&&(referenceFrame=this.getPendingReferenceFrame()),this.onNextReady(function(_this){return function(){return _this._updateReferenceFrame()}}(this)),pendingReferenceFrame=this.getPendingReferenceFrame(),scrollPosition+=this.getReferenceFrameDelta(pendingReferenceFrame,referenceFrame),this.setScrollPosition(scrollPosition)},PagingScrollElementWip.getter({minScrollPosition:function(){return this.getMinScrollPositionInReferenceFrame(this.getReferenceFrame())},maxScrollPosition:function(){return this.getMaxScrollPositionInReferenceFrame(this.getReferenceFrame())},boundedScrollPosition:function(){return bound(this.getMinScrollPosition(),this.getScrollPosition(),this.getMaxScrollPosition())}}),PagingScrollElementWip.prototype.getMinScrollPositionInReferenceFrame=function(referenceFrame){var afterSize,beforeSize,windowSize;return windowSize=this.getWindowSize(),beforeSize=this.getPagesBeforeBaselineSize(),afterSize=this.getPagesAfterBaselineSize(),beforeSize+afterSize<=windowSize?0:windowSize-afterSize+this.getReferenceFrameDelta(referenceFrame,this.getReferenceFrame())},PagingScrollElementWip.prototype.getMaxScrollPositionInReferenceFrame=function(referenceFrame){var afterSize,beforeSize,delta,windowSize;return windowSize=this.getWindowSize(),beforeSize=this.getPagesBeforeBaselineSize(),afterSize=this.getPagesAfterBaselineSize(),delta=this.getReferenceFrameDelta(referenceFrame,this.getReferenceFrame()),beforeSize+afterSize<=windowSize?0:beforeSize+delta},PagingScrollElementWip.prototype.jumpToStart=function(){return this.setScrollPositionInReferenceFrame(0,{page:first(this.getPendingPages()),atEndEdge:!1})},PagingScrollElementWip.prototype.jumpToEnd=function(){return this.getPagesFitInWindow()?this.jumpToStart():this.setScrollPositionInReferenceFrame(this.getWindowSize(),{page:last(this.getPendingPages()),atEndEdge:!0})},PagingScrollElementWip.getter({atEnd:function(){return this._atEnd},atStart:function(){return this._atStart},inMiddle:function(){return!this._atEnd&&!this._atStart},pagesFitInWindow:function(){return this.getWindowSize()>=this.getTotalPageSize()},windowSize:function(){return this.getMainCoordinate(this.getCurrentSize())},currentPagePosition:function(){return this.getMainCoordinate(this._scrollContents.getPendingCurrentLocation())},pagesBeforeBaselineSize:function(){return this.getMainCoordinate(this._pagesBeforeBaselineWrapper.getPendingCurrentSize())},pagesAfterBaselineSize:function(){return this.getMainCoordinate(this._pagesAfterBaselineWrapper.getPendingCurrentSize())},pagesBeforeBaseline:function(){return this._pagesBeforeBaselineWrapper.getChildren()},pagesAfterBaseline:function(){return this._pagesAfterBaselineWrapper.getChildren()},totalPageSize:function(){return this.getPagesBeforeBaselineSize()+this.getPagesAfterBaselineSize()},pagesOnScreenBeforeBaseline:function(){var averagePageSize,count,j,page,pages,pixelsLeft,pixelsOnScreen,ref,totalSize;for(pixelsOnScreen=this.getScrollPosition(),totalSize=0,count=0,ref=pages=this._pagesBeforeBaselineWrapper.getChildren(),j=ref.length-1;j>=0&&(page=ref[j],count++,totalSize+=this.getMainCoordinate(page.getCurrentSize()),!(totalSize>=pixelsOnScreen));j+=-1);return totalSize<pixelsOnScreen&&pages.length>0&&totalSize>0&&(averagePageSize=totalSize/pages.length,pixelsLeft=pixelsOnScreen-totalSize,count+=ceil(pixelsLeft/averagePageSize)),count},pagesOnScreenAfterBaseline:function(){var averagePageSize,count,j,len,page,pages,pixelsLeft,pixelsOnScreen,ref,totalSize;for(pixelsOnScreen=this.getWindowSize()-this.getScrollPosition(),totalSize=0,count=0,ref=pages=this._pagesAfterBaselineWrapper.getChildren(),j=0,len=ref.length;j<len&&(page=ref[j],count++,totalSize+=this.getMainCoordinate(page.getCurrentSize()),!(totalSize>=pixelsOnScreen));j++);return totalSize<pixelsOnScreen&&pages.length>0&&totalSize>0&&(averagePageSize=totalSize/pages.length,pixelsLeft=pixelsOnScreen-totalSize,count+=ceil(pixelsLeft/averagePageSize)),count},currentGeometry:function(){var currentPos,numPages,pixelsAfter,pixelsBefore,suggestedPageSpread,totalPageSize,windowSize;return windowSize=this.getWindowSize(),currentPos=this.getCurrentPagePosition(),pixelsBefore=this.getPagesBeforeBaselineSize(),pixelsAfter=this.getPagesAfterBaselineSize(),numPages=this._pages.length,totalPageSize=pixelsBefore+pixelsAfter,suggestedPageSpread=this.getPagesOnScreenBeforeBaseline()+this.getPagesOnScreenAfterBaseline(),{currentPagePosition:currentPos,windowSize:windowSize,numPages:numPages,numPagesBeforeBaseline:this._pagesBeforeBaselineWrapper.getChildren().length,numPagesAfterBaseline:this._pagesAfterBaselineWrapper.getChildren().length,totalPageSize:totalPageSize,focusedPageBeforeBaseline:this.getReferenceFrame().atEndEdge,suggestedPageSpread:suggestedPageSpread,pixelsOffscreenBeforeWindow:pixelsBefore-currentPos,pixelsOffscreenAfterWindow:pixelsAfter-windowSize+currentPos,pagesBeforeBaselineSize:pixelsBefore,pagesAfterBaselineSize:pixelsAfter}}}),PagingScrollElementWip.prototype._initGestureProps=function(){return this._flicked=!1,this._pointerStartPosition=0,this._pointerReferenceFrame=null,this._lastPointerEventTime=null,this._flickSpeed=0,this._gestureActive=!1,this._scrollAnimator=null},PagingScrollElementWip.getter({activeScrollAnimator:function(){return this._scrollAnimator},scrollAnimator:function(){var maximumVelocity;return maximumVelocity=60*this.getWindowSize()/2,this._scrollAnimator||(this._scrollAnimator=this.startAnimator(new ScrollAnimator(this,maximumVelocity)))},debugState:function(){var child,ref,referenceFrame;return referenceFrame=this.referenceFrame,{referenceFrame:{page:null!=(ref=referenceFrame.page)?ref.inspectedName:void 0,atEndEdge:referenceFrame.atEndEdge},pagesBefore:function(){var j,len,ref1,results;for(ref1=this._pagesBeforeBaselineWrapper.children,results=[],j=0,len=ref1.length;j<len;j++)child=ref1[j],results.push(child.inspectedName+" "+(0|this.getMainCoordinate(child.currentSize)));return results}.call(this),pagesAfter:function(){var j,len,ref1,results;for(ref1=this._pagesAfterBaselineWrapper.children,results=[],j=0,len=ref1.length;j<len;j++)child=ref1[j],results.push(child.inspectedName+" "+(0|this.getMainCoordinate(child.currentSize)));return results}.call(this),geometry:this.currentGeometry}}}),PagingScrollElementWip.prototype.gestureRecognize=function(arg){var delta;return delta=arg.delta,"vertical"===this._scroll?1>delta.absoluteAspectRatio:1<delta.absoluteAspectRatio},PagingScrollElementWip.prototype.gestureBegin=function(e){var location,timeStamp;return location=e.location,timeStamp=e.timeStamp,this._flickSpeed=0,this._gestureActive=!0,location=this.getMainCoordinate(location),this._pointerReferenceFrame=this._referenceFrame,this._pointerStartPosition=location-this._scrollPosition,this._lastPointerEventTime=timeStamp,this.getActiveScrollAnimator()?(this._flicked=!1,timeout(60,function(_this){return function(){var referenceFrame,scrollPosition;if(!_this._flicked&&_this._gestureActive)return _this._pointerReferenceFrame=_this._referenceFrame,scrollPosition=_this.getPendingScrollPosition(),referenceFrame=_this.getPendingReferenceFrame(),_this._pointerStartPosition=location-scrollPosition,_this.getScrollAnimator().startTracking(scrollPosition,referenceFrame)}}(this))):this.startScrollAnimatorTracking()},PagingScrollElementWip.prototype.gestureResume=function(e){return!!this.getActiveScrollAnimator()},PagingScrollElementWip.prototype.gestureMove=function(e){var delta,deltaV,location,scrollAnimator,timeStamp;return timeStamp=e.timeStamp,delta=e.delta,location=e.location,location=this.getMainCoordinate(location),delta=this.getMainCoordinate(deltaV=delta),scrollAnimator=this.getScrollAnimator(),timeStamp>this._lastPointerEventTime&&(this._flickSpeed=deltaV.getMagnitude()/(timeStamp-this._lastPointerEventTime),this._flickDirection=delta/abs(delta)||1,this._lastPointerEventTime=timeStamp),scrollAnimator.setDesiredScrollPosition(location-this._pointerStartPosition)},PagingScrollElementWip.prototype.gestureEnd=function(e){var scrollAnimator;return this._gestureActive=!1,absGt(this._flickSpeed,minimumFlickVelocity)?(scrollAnimator=this.getScrollAnimator(),scrollAnimator.addVelocity(this._flickSpeed*this._flickDirection*flickSpeedMultiplier),this._flicked=!0):this.endScrollAnimatorTracking()},PagingScrollElementWip.prototype.startScrollAnimatorTracking=function(){return this.getScrollAnimator().startTracking(this._scrollPosition,this._referenceFrame)},PagingScrollElementWip.prototype.endScrollAnimatorTracking=function(){var scrollAnimator;if(scrollAnimator=this.getActiveScrollAnimator())return scrollAnimator.setReferenceFrame(this.getReferenceFrame()),scrollAnimator.setDesiredScrollPosition(this.getScrollPosition()),scrollAnimator.setActiveTouch(!1)},PagingScrollElementWip.prototype.setChildren=function(newPages,oldChildren){var newChildren;return null==oldChildren&&(oldChildren=this.getPendingChildren()),newChildren=(null!=oldChildren?oldChildren.length:void 0)>0?oldChildren:(this._updateHiddenChildren(),[this._scrollContents]),this.setPages(newPages),PagingScrollElementWip.__super__.setChildren.call(this,newChildren)},PagingScrollElementWip.prototype._updatePointerReferenceFrame=function(newReferenceFrame){var delta,ref,ref1;if(this._pointerReferenceFrame)return delta=this.getReferenceFrameDelta(newReferenceFrame,this._pointerReferenceFrame),this._pointerStartPosition-=delta,null!=(ref=this.getActiveScrollAnimator())&&ref.addToDesiredScrollPosition(delta),null!=(ref1=this.getActiveScrollAnimator())?ref1.setReferenceFrame(this._pointerReferenceFrame=newReferenceFrame):void 0},PagingScrollElementWip.prototype._getPageUnderPosition=function(testPosition){var child,j,len,ref,relativeTestPosition,size,wrapper;for(relativeTestPosition=testPosition-this.getScrollPosition(),wrapper=relativeTestPosition<0?(relativeTestPosition+=this.getMainCoordinate(this._pagesBeforeBaselineWrapper.getCurrentSize()),this._pagesBeforeBaselineWrapper):this._pagesAfterBaselineWrapper,ref=wrapper.getChildren(),j=0,len=ref.length;j<len;j++){if(child=ref[j],size=this.getMainCoordinate(child.getCurrentSize()),relativeTestPosition<size)return child;relativeTestPosition-=size}return console.warn("PagingScrollElement#_getPageUnderPosition: could not find page under position"),null},PagingScrollElementWip.getter({contentsFitInWindow:function(){return this.getTotalPageSize()<=this.getWindowSize()}}),PagingScrollElementWip.prototype._setScrollContentsLocation=function(scrollPosition){var axis;return this.getContentsFitInWindow()?(this._scrollContents.setAxis(axis=this.getPendingChildrenAlignment()),
this._scrollContents.setLocation({ps:axis,plus:this.newPoint(scrollPosition)}),this._scrollPositionRelativeToChildrenAlignment=!0,this.onNextReady(function(_this){return function(){return _this._setAtStart()}}(this))):(this._scrollPositionRelativeToChildrenAlignment&&log(scrollPosition+=this.getWindowSize()),this._scrollContents.setAxis(point0),this._scrollContents.setLocation(this.newPoint(scrollPosition)),this._scrollPositionRelativeToChildrenAlignment=!1)},PagingScrollElementWip.prototype._setReferenceFrameIfChanged=function(referenceFrame){if(neq(referenceFrame,this.getReferenceFrame()))return this.setReferenceFrame(referenceFrame)},PagingScrollElementWip.prototype._setAtStart=function(){return this._setReferenceFrameIfChanged({page:first(this.getPages())}),this._atStart=!0,this._atEnd=!1,!0},PagingScrollElementWip.prototype._setAtEnd=function(){return this._setReferenceFrameIfChanged({atEndEdge:!0,page:last(this.getPages())}),this._atStart=!1,this._atEnd=!0,!0},PagingScrollElementWip.prototype._updateAtStartAndAtEnd=function(){var scrollPosition;return scrollPosition=this.getScrollPosition(),this.getContentsFitInWindow()?this._setAtStart():scrollPosition>=this.getMaxScrollPosition()?this._setAtStart():scrollPosition<=this.getMinScrollPosition()?this._setAtEnd():void 0},PagingScrollElementWip.prototype._addToScrollPosition=function(delta){return this.setScrollPosition(this.getPendingScrollPosition()+delta)},PagingScrollElementWip.prototype._updateReferenceFrame=function(){var atEndEdge,centerPosition,newCurrentPage,pageCenterPosition,referenceFrame,scrollPosition;if(!this._updateAtStartAndAtEnd())return scrollPosition=this.getScrollPosition(),centerPosition=this.getWindowSize()/2,newCurrentPage=this._getPageUnderPosition(centerPosition),newCurrentPage||console.warn("_updateReferenceFrame: no newCurrentPage"),pageCenterPosition=this.getPageCenter(newCurrentPage),atEndEdge=centerPosition>pageCenterPosition,referenceFrame=this.getReferenceFrame(),referenceFrame.page!==newCurrentPage||referenceFrame.atEndEdge!==atEndEdge?this.setReferenceFrame({page:newCurrentPage,atEndEdge:atEndEdge}):void 0},PagingScrollElementWip.prototype._queueUpdateEvent=function(newReferenceFrame,previousReferenceFrame){return this.onNextReady(function(_this){return function(){var referenceFrame;return referenceFrame=_this.getReferenceFrame(),_this.queueEvent("scrollUpdate",{previousReferenceFrame:previousReferenceFrame,referenceFrame:referenceFrame,focusedPage:referenceFrame.page,currentGeometry:_this.getCurrentGeometry(),pagesBeforeBaseline:_this.getPagesBeforeBaseline(),pagesAfterBaseline:_this.getPagesAfterBaseline()})}}(this))},PagingScrollElementWip.prototype._sizeChanged=function(newSize,oldSize){return this._updateAtStartAndAtEnd(this.scrollPosition,newSize),this._queueUpdateEvent(),PagingScrollElementWip.__super__._sizeChanged.apply(this,arguments)},PagingScrollElementWip.prototype._scrollContentsChildChanged=function(){var bsp;if(!this._scrollAnimator&&(this.contentsFitInWindow||this.scrollPosition!==(bsp=this.boundedScrollPosition)))return this.setScrollPosition(bsp)},PagingScrollElementWip.prototype._updateHiddenChildren=function(scrollMode){var commonSizeLayout;return null==scrollMode&&(scrollMode=this.getPendingScroll()),this._scrollContents||(this._scrollContents=new Element({key:"scrollContents",receivePointerEvents:"passToChildren"},this._pagesBeforeBaselineWrapper=new Element({key:"pagesBeforeBaseline",on:{sizeChanged:function(_this){return function(){return _this._scrollContentsChildChanged()}}(this)}}),this._pagesAfterBaselineWrapper=new Element({key:"pagesAfterBaseline",on:{sizeChanged:function(_this){return function(){return _this._scrollContentsChildChanged()}}(this)}}))),"horizontal"===scrollMode?(commonSizeLayout={hh:1,wcw:1},this._pagesBeforeBaselineWrapper.setAxis("topRight"),this._pagesBeforeBaselineWrapper.setChildrenLayout("row"),this._pagesAfterBaselineWrapper.setChildrenLayout("row")):(commonSizeLayout={ww:1,hch:1},this._pagesBeforeBaselineWrapper.setAxis("bottomLeft"),this._pagesBeforeBaselineWrapper.setChildrenLayout("column"),this._pagesAfterBaselineWrapper.setChildrenLayout("column")),this._scrollContents.setSize(commonSizeLayout),this._pagesBeforeBaselineWrapper.setSize(commonSizeLayout),this._pagesAfterBaselineWrapper.setSize(commonSizeLayout)},PagingScrollElementWip}(AnimatorSupport(Element)))},function(module,exports,__webpack_require__){var AnimatorSupport,Atomic,BaseObject,Element,EventEpoch,Foundation,GestureRecognizer,Matrix,PagingScrollElement,Point,Rectangle,ScrollAnimator,abs,absGt,absGte,absLt,absLte,animatorSpringConstant,animatorSpringFriction,bound,brakingFactor,ceil,createGestureRecognizer,createWithPostCreate,crossScrollProperties,currentSecond,eventEpoch,first,flickSpeedMultiplier,inspect,isPlainArray,isPoint,last,log,matrix,max,maxChange,maxMagnitude,merge,min,minMagnitude,minimumFlickVelocity,peek,point,point0,pointNearInfinity,rect,requestAnimationFrame,round,scrollProperties,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),EventEpoch=__webpack_require__(168).EventEpoch,Element=__webpack_require__(184),GestureRecognizer=__webpack_require__(165),log=Foundation.log,inspect=Foundation.inspect,currentSecond=Foundation.currentSecond,bound=Foundation.bound,round=Foundation.round,first=Foundation.first,last=Foundation.last,peek=Foundation.peek,min=Foundation.min,max=Foundation.max,abs=Foundation.abs,merge=Foundation.merge,createWithPostCreate=Foundation.createWithPostCreate,BaseObject=Foundation.BaseObject,timeout=Foundation.timeout,ceil=Foundation.ceil,round=Foundation.round,isPlainArray=Foundation.isPlainArray,absLt=Foundation.absLt,absLte=Foundation.absLte,absGt=Foundation.absGt,absGte=Foundation.absGte,minMagnitude=Foundation.minMagnitude,maxMagnitude=Foundation.maxMagnitude,maxChange=Foundation.maxChange,absLt=Foundation.absLt,requestAnimationFrame=Foundation.requestAnimationFrame,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,isPoint=Atomic.isPoint,point0=Point.point0,pointNearInfinity=Point.pointNearInfinity,eventEpoch=EventEpoch.eventEpoch,createGestureRecognizer=GestureRecognizer.createGestureRecognizer,scrollProperties={vertical:"y",horizontal:"x"},crossScrollProperties={vertical:"x",horizontal:"y"},brakingFactor=3,minimumFlickVelocity=300,animatorSpringConstant=300,animatorSpringFriction=25,flickSpeedMultiplier=1,ScrollAnimator=function(superClass1){function ScrollAnimator(scrollElement,maximumVelocity1){this.scrollElement=scrollElement,this.maximumVelocity=maximumVelocity1,ScrollAnimator.__super__.constructor.apply(this,arguments),this._referenceFrame=this.scrollElement.getPendingReferenceFrame(),this._velocity=0,this._mode="tracking"}var frameCount,missCount;return extend(ScrollAnimator,superClass1),ScrollAnimator.getter("desiredScrollPosition",{mode:function(){return this._mode},minScrollPosition:function(){return this.scrollElement.getMinScrollPositionInReferenceFrame(this._referenceFrame)},maxScrollPosition:function(){return this.scrollElement.getMaxScrollPositionInReferenceFrame(this._referenceFrame)},scrollPosition:function(){return this.scrollElement.getScrollPositionInReferenceFrame(this._referenceFrame)},animationDone:function(){switch(this.mode){case"spring":return this.velocityIsSlow()&&this._desiredScrollPosition===this.getScrollPosition();case"braking":return this.velocityIsSlow();default:return!this._activeTouch}},animationContinues:function(){return!this.getAnimationDone()}}),ScrollAnimator.setter("desiredScrollPosition",{mode:function(v){return this._mode=v},referenceFrame:function(v){return this._referenceFrame=v},scrollPosition:function(l){return this.scrollElement.setScrollPositionInReferenceFrame(round(l),this._referenceFrame)},activeTouch:function(v){if(!(this._activeTouch=!!v))return this.mode="spring",this._desiredScrollPosition=this.boundLocation(this._desiredScrollPosition)}}),ScrollAnimator.prototype.addToDesiredScrollPosition=function(delta){return this._desiredScrollPosition+=delta},ScrollAnimator.prototype.animateToLocation=function(desiredScrollPosition){return this.mode="spring",this._desiredScrollPosition=desiredScrollPosition},ScrollAnimator.prototype.boundLocation=function(scrollPosition){return bound(this.getMinScrollPosition(),scrollPosition,this.getMaxScrollPosition())},ScrollAnimator.prototype.startTracking=function(desiredScrollPosition,referenceFrame){return this._referenceFrame=referenceFrame,this.mode="tracking",this._velocity=0,this.setDesiredScrollPosition(desiredScrollPosition),this._activeTouch=!0},ScrollAnimator.prototype.addVelocity=function(v){return this._velocity=v,this.mode="braking"},ScrollAnimator.prototype.velocityIsSlow=function(){return absLte(this._velocity,60)},frameCount=0,missCount=0,ScrollAnimator.prototype.frameUpdate=function(frameTime){var acceleration,boundedLocation,boundedTargetLocation,currentToTargetVector,distanceSquared,frictionAcceleration,frictionConstant,maxBeyond,maxV,minV,scrollPosition,springAcceleration,springConstant,targetScrollPosition,tookFrames,windowSize;switch(tookFrames=Math.round(60*frameTime),frameCount++,absLt(60*frameTime-1,.25)||tookFrames>1&&missCount++,scrollPosition=this.getScrollPosition(),targetScrollPosition=this._desiredScrollPosition,this._velocity=maxMagnitude(this._velocity,this.maximumVelocity),this._mode){case"tracking":windowSize=this.scrollElement.windowSize,boundedTargetLocation=this.boundLocation(targetScrollPosition),maxBeyond=windowSize/3,minV=min(boundedTargetLocation,targetScrollPosition),maxV=max(boundedTargetLocation,targetScrollPosition),targetScrollPosition=bound(minV,boundedTargetLocation+Math.atan((targetScrollPosition-boundedTargetLocation)/maxBeyond)*(2/Math.PI)*maxBeyond,maxV),this._velocity=0,this.setScrollPosition(targetScrollPosition);break;case"braking":this._activeTouch=!1,frictionConstant=brakingFactor,frictionAcceleration=this._velocity*-frictionConstant,acceleration=frictionAcceleration,this._velocity+=acceleration*frameTime,scrollPosition+=this._velocity*frameTime,this.setScrollPosition(scrollPosition),scrollPosition!==(boundedLocation=this.boundLocation(scrollPosition))&&(this.mode="spring",this._desiredScrollPosition=boundedLocation);break;case"spring":currentToTargetVector=targetScrollPosition-scrollPosition,distanceSquared=currentToTargetVector*currentToTargetVector,springConstant=animatorSpringConstant,frictionConstant=animatorSpringFriction,springAcceleration=currentToTargetVector*springConstant,frictionAcceleration=this._velocity*-frictionConstant,acceleration=springAcceleration+frictionAcceleration,this._velocity=this._velocity+acceleration*frameTime,this.setScrollPosition(this.velocityIsSlow()&&abs(scrollPosition-targetScrollPosition)<=1?targetScrollPosition:scrollPosition+minMagnitude(this._velocity*frameTime,1))}return this.getAnimationContinues()||log("frameUpdate "+this._mode+": DONE (miss rate: "+missCount+" / "+frameCount+")"),this.getAnimationContinues()},ScrollAnimator}(BaseObject),AnimatorSupport=function(superClass){return AnimatorSupport=function(superClass1){function AnimatorSupport(){return AnimatorSupport.__super__.constructor.apply(this,arguments)}return extend(AnimatorSupport,superClass1),AnimatorSupport.getter({animatorsActive:function(){return!!this._activeAnimators}}),AnimatorSupport.prototype.initAnimatorSupport=function(){return this._lastTime=0,this._activeAnimators=null,this._frameUpdateQueued=!1},AnimatorSupport.prototype.startAnimator=function(animator){return this.getAnimatorsActive()?this._activeAnimators.push(animator):(this._activeAnimators=[animator],this._lastTime=currentSecond(),this.getAnimatorsActive()),this._startAnimatorLoop(),animator},AnimatorSupport.prototype.replaceAnimator=function(newAnimator,oldAnimator){var index;return this._activeAnimators&&oldAnimator?(index=this._activeAnimators.indexOf(oldAnimator),index>=0?this._activeAnimators[index]=newAnimator:this.startAnimator(newAnimator)):this.startAnimator(newAnimator)},AnimatorSupport.prototype.stopAllAnimators=function(){return this._activeAnimators=null},AnimatorSupport.prototype._frameUpdate=function(frameTime){var animator,i,j,len,nextAnimators,now,ref;if(this._activeAnimators){for(now=frameTime,frameTime=now-this._lastTime,nextAnimators=null,ref=this._activeAnimators,i=j=0,len=ref.length;j<len;i=++j)animator=ref[i],animator.frameUpdate(frameTime)?null!=nextAnimators&&nextAnimators.push(animator):(this.queueEvent("animatorDone",{animator:animator}),nextAnimators||(nextAnimators=this._activeAnimators.slice(0,i)));return nextAnimators&&(0===nextAnimators.length?(this._activeAnimators=null,this.queueEvent("allAnimatorsDone")):this._activeAnimators=nextAnimators),this._lastTime=now}},AnimatorSupport.prototype._startAnimatorLoop=function(){if(!this._frameUpdateQueued)return requestAnimationFrame(function(_this){return function(frameTimeMs){var queueNextFrameUpdate;return _this._lastTime=frameTimeMs/1e3,(queueNextFrameUpdate=function(){if(_this.getAnimatorsActive())return _this._frameUpdateQueued=!0,requestAnimationFrame(function(frameTimeMs){return _this._frameUpdateQueued=!1,_this._frameUpdate(frameTimeMs/1e3),queueNextFrameUpdate()})})()}}(this))},AnimatorSupport}(superClass)},module.exports=createWithPostCreate(PagingScrollElement=function(superClass1){function PagingScrollElement(){this.initAnimatorSupport(),this._initGestureProps(),this._pages=null,this._currentPage=null,this._atEnd=!1,this._atStart=!0,this._scrollContents=this._pagesBeforeBaselineWrapper=this._pagesAfterBaselineWrapper=null,this._setVerticalAxis(),PagingScrollElement.__super__.constructor.apply(this,arguments),self.pagingScrollElement=this,this._updateHiddenChildren(),this.onNextReady(function(_this){return function(){if(_this.startAtEnd)return _this.jumpToEnd()}}(this))}var defaultReferenceFrame;return extend(PagingScrollElement,superClass1),PagingScrollElement.prototype.preprocessEventHandlers=function(handlerMap){return merge(this._externalHandlerMap=handlerMap,{mouseWheel:function(_this){return function(event){var horizontal,position,scrollValue,windowSize;switch(_this._mostRecentMouseWheelEvent=event,windowSize=_this.windowSize,scrollValue=(horizontal="horizontal"===_this.scroll)?event.props.deltaX||0:event.props.deltaY||0,event.props.deltaMode){case"line":scrollValue*=16;break;case"page":scrollValue*=.75*windowSize}return _this.getActiveScrollAnimator()||_this.startScrollAnimatorTracking(),scrollValue=bound(-windowSize,-scrollValue,windowSize),position=_this.getScrollAnimator().desiredScrollPosition+scrollValue,_this.getScrollAnimator().desiredScrollPosition=bound(_this.getScrollAnimator().minScrollPosition,position,_this.getScrollAnimator().maxScrollPosition),timeout(100).then(function(){if(_this._mostRecentMouseWheelEvent===event)return _this.endScrollAnimatorTracking()})}}(this),animatorDone:function(_this){return function(arg){var animator,props;if(props=arg.props,animator=props.animator,animator===_this._scrollAnimator)return _this._scrollAnimator=null}}(this)},createGestureRecognizer({custom:{resume:this.gestureResume.bind(this),recognize:this.gestureRecognize.bind(this),begin:this.gestureBegin.bind(this),move:this.gestureMove.bind(this),end:this.gestureEnd.bind(this)}}))},PagingScrollElement.prototype._setVerticalAxis=function(){return this.newPoint=function(mainV,crossV){return null==crossV&&(crossV=0),point(crossV,mainV)},this.getPagePosition=function(page){return(null!=page?page.transformToAncestorSpaceY(0,this):void 0)||0},this.getMainCoordinate=function(pnt){return pnt.y}},PagingScrollElement.prototype._setHorizontalAxis=function(){return this.newPoint=function(mainV,crossV){return null==crossV&&(crossV=0),point(mainV,crossV)},this.getPagePosition=function(page){return(null!=page?page.transformToAncestorSpaceX(0,this):void 0)||0},this.getMainCoordinate=function(pnt){return pnt.x}},PagingScrollElement.prototype.getPageSize=function(page){return page?this.getMainCoordinate(page.getCurrentSize()):0},PagingScrollElement.prototype.getPageEdgeOffset=function(arg){var atEndEdge,page;return page=arg.page,atEndEdge=arg.atEndEdge,atEndEdge?this.getPageSize(page):0},PagingScrollElement.prototype.getPageCenter=function(page){return this.getPagePosition(page)+this.getPageSize(page)/2},defaultReferenceFrame={page:null,atEndEdge:!1},PagingScrollElement.concreteProperty({startAtEnd:{"default":!1},referenceFrame:{"default":defaultReferenceFrame,postSetter:function(newReferenceFrame,previousReferenceFrame){var delta;return newReferenceFrame===previousReferenceFrame&&console.warn("referenceFrame_postSetter - frame didn't change"),this._addToScrollPosition(delta=this.getReferenceFrameDelta(newReferenceFrame,previousReferenceFrame)),this._updatePointerReferenceFrame(newReferenceFrame),this._queueUpdateEvent(newReferenceFrame,previousReferenceFrame),this._updatePagesSplit()}},pages:{"default":[],validate:function(pages){return isPlainArray(pages)},postSetter:function(pages,oldPages){var atEndEdge,page,ref,referenceFrame;if(ref=referenceFrame=this.getPendingReferenceFrame(),page=ref.page,atEndEdge=ref.atEndEdge,this._atEnd&&(atEndEdge=!0,page=last(pages)),!this._atStart&&page||(atEndEdge=!1,page=first(pages)),referenceFrame.page&&0>pages.indexOf(referenceFrame.page)&&console.warn("PagingScrollElement#pages setter: New page list does not contain the current referenceFrame. ALWAYS include the current referenceFrame when setting pages. Screen will jump!\n\npage keys: "+inspect(function(){var j,len,results;for(results=[],j=0,len=pages.length;j<len;j++)page=pages[j],results.push(page.key);return results}())),referenceFrame.page!==page||referenceFrame.atEndEdge!==atEndEdge?this.setReferenceFrame({page:page,atEndEdge:atEndEdge}):this._updatePagesSplit(),oldPages.length>0)return this.onNextReady(function(_this){return function(){return _this._updateAtStartAndAtEnd()}}(this))}},scrollPosition:{"default":0,postSetter:function(position){return this.onNextReady(function(_this){return function(){return _this._updateAtStartAndAtEnd()}}(this)),this._scrollContents.setLocation(this.newPoint(position))}}}),PagingScrollElement.prototype._updatePagesSplit=function(pages,referenceFrame){var atEndEdge,page,splitIndex;return null==pages&&(pages=this.getPendingPages()),null==referenceFrame&&(referenceFrame=this.getPendingReferenceFrame()),page=referenceFrame.page,atEndEdge=referenceFrame.atEndEdge,splitIndex=pages.indexOf(page),splitIndex<0&&(page&&console.warn("PagingScrollElement#_updatePagesSplit: could not find the old referenceFrame.page(key: "+(page.key||page.inspectedName)+") in the new children. New current page picked; display WILL jump."),splitIndex=0),atEndEdge&&splitIndex++,this._pagesBeforeBaselineWrapper.setChildren(pages.slice(0,splitIndex)),this._pagesAfterBaselineWrapper.setChildren(pages.slice(splitIndex))},PagingScrollElement.layoutProperty({scroll:{"default":"vertical",validate:function(v){return"vertical"===v||"horizontal"===v},postSetter:function(newV,oldValue){return"vertical"===newV?this._setVerticalAxis():this._setHorizontalAxis(),this._updateHiddenChildren(newV)}}}),PagingScrollElement.prototype.getReferenceFrameDelta=function(toReferenceFrame,fromReferenceFrame){var edgeDelta,positionDelta;return null==toReferenceFrame&&(toReferenceFrame=defaultReferenceFrame),null==fromReferenceFrame&&(fromReferenceFrame=defaultReferenceFrame),toReferenceFrame===fromReferenceFrame?0:(positionDelta=toReferenceFrame.page===fromReferenceFrame.page?0:this.getPagePosition(toReferenceFrame.page)-this.getPagePosition(fromReferenceFrame.page),edgeDelta=this.getPageEdgeOffset(toReferenceFrame)-this.getPageEdgeOffset(fromReferenceFrame),positionDelta+edgeDelta)},PagingScrollElement.prototype.getScrollPositionInReferenceFrame=function(targetReferenceFrame){return this.getScrollPosition()+this.getReferenceFrameDelta(targetReferenceFrame,this.getReferenceFrame())},PagingScrollElement.prototype.setScrollPositionInReferenceFrame=function(scrollPosition,referenceFrame){var pendingReferenceFrame;return null==referenceFrame&&(referenceFrame=this.getPendingReferenceFrame()),this.onNextReady(function(_this){return function(){return _this._updateReferenceFrame()}}(this)),pendingReferenceFrame=this.getPendingReferenceFrame(),scrollPosition+=this.getReferenceFrameDelta(pendingReferenceFrame,referenceFrame),this.setScrollPosition(scrollPosition)},PagingScrollElement.getter({minScrollPosition:function(){return this.getMinScrollPositionInReferenceFrame(this.getReferenceFrame())},maxScrollPosition:function(){return this.getMaxScrollPositionInReferenceFrame(this.getReferenceFrame())}}),PagingScrollElement.prototype.getMinScrollPositionInReferenceFrame=function(referenceFrame){var afterSize,beforeSize,windowSize;return windowSize=this.getWindowSize(),beforeSize=this.getPagesBeforeBaselineSize(),afterSize=this.getPagesAfterBaselineSize(),beforeSize+afterSize<=windowSize?0:windowSize-afterSize+this.getReferenceFrameDelta(referenceFrame,this.getReferenceFrame())},PagingScrollElement.prototype.getMaxScrollPositionInReferenceFrame=function(referenceFrame){var afterSize,beforeSize,delta,windowSize;return windowSize=this.getWindowSize(),beforeSize=this.getPagesBeforeBaselineSize(),afterSize=this.getPagesAfterBaselineSize(),delta=this.getReferenceFrameDelta(referenceFrame,this.getReferenceFrame()),beforeSize+afterSize<=windowSize?0:beforeSize+delta},PagingScrollElement.prototype.jumpToStart=function(){return this.setScrollPositionInReferenceFrame(0,{page:first(this.getPendingPages()),atEndEdge:!1})},PagingScrollElement.prototype.jumpToEnd=function(){return log("jumpToEnd"),this.getPagesFitInWindow()?this.jumpToStart():this.setScrollPositionInReferenceFrame(this.getWindowSize(),{page:last(this.getPendingPages()),atEndEdge:!0})},PagingScrollElement.getter({atEnd:function(){return this._atEnd},atStart:function(){return this._atStart},inMiddle:function(){return!this._atEnd&&!this._atStart},pagesFitInWindow:function(){return this.getWindowSize()>=this.getTotalPageSize()},windowSize:function(){return this.getMainCoordinate(this.getCurrentSize())},currentPagePosition:function(){return this.getMainCoordinate(this._scrollContents.getCurrentLocation())},pagesBeforeBaselineSize:function(){return this.getMainCoordinate(this._pagesBeforeBaselineWrapper.getCurrentSize())},pagesAfterBaselineSize:function(){return this.getMainCoordinate(this._pagesAfterBaselineWrapper.getCurrentSize())},pagesBeforeBaseline:function(){return this._pagesBeforeBaselineWrapper.getChildren()},pagesAfterBaseline:function(){return this._pagesAfterBaselineWrapper.getChildren()},totalPageSize:function(){return this.getPagesBeforeBaselineSize()+this.getPagesAfterBaselineSize()},pagesOnScreenBeforeBaseline:function(){var averagePageSize,count,j,page,pages,pixelsLeft,pixelsOnScreen,ref,totalSize;for(pixelsOnScreen=this.getScrollPosition(),totalSize=0,count=0,ref=pages=this._pagesBeforeBaselineWrapper.getChildren(),j=ref.length-1;j>=0&&(page=ref[j],count++,totalSize+=this.getMainCoordinate(page.getCurrentSize()),!(totalSize>=pixelsOnScreen));j+=-1);return totalSize<pixelsOnScreen&&pages.length>0&&totalSize>0&&(averagePageSize=totalSize/pages.length,pixelsLeft=pixelsOnScreen-totalSize,count+=ceil(pixelsLeft/averagePageSize)),count},pagesOnScreenAfterBaseline:function(){var averagePageSize,count,j,len,page,pages,pixelsLeft,pixelsOnScreen,ref,totalSize;for(pixelsOnScreen=this.getWindowSize()-this.getScrollPosition(),totalSize=0,count=0,ref=pages=this._pagesAfterBaselineWrapper.getChildren(),j=0,len=ref.length;j<len&&(page=ref[j],count++,totalSize+=this.getMainCoordinate(page.getCurrentSize()),!(totalSize>=pixelsOnScreen));j++);return totalSize<pixelsOnScreen&&pages.length>0&&totalSize>0&&(averagePageSize=totalSize/pages.length,pixelsLeft=pixelsOnScreen-totalSize,count+=ceil(pixelsLeft/averagePageSize)),count},currentGeometry:function(){var currentPos,numPages,pixelsAfter,pixelsBefore,suggestedPageSpread,totalPageSize,windowSize;return windowSize=this.getWindowSize(),currentPos=this.getCurrentPagePosition(),pixelsBefore=this.getPagesBeforeBaselineSize(),pixelsAfter=this.getPagesAfterBaselineSize(),numPages=this._pages.length,totalPageSize=pixelsBefore+pixelsAfter,suggestedPageSpread=this.getPagesOnScreenBeforeBaseline()+this.getPagesOnScreenAfterBaseline(),{currentPagePosition:currentPos,windowSize:windowSize,numPages:numPages,numPagesBeforeBaseline:this._pagesBeforeBaselineWrapper.getChildren().length,numPagesAfterBaseline:this._pagesAfterBaselineWrapper.getChildren().length,totalPageSize:totalPageSize,focusedPageBeforeBaseline:this.getReferenceFrame().atEndEdge,suggestedPageSpread:suggestedPageSpread,pixelsOffscreenBeforeWindow:pixelsBefore-currentPos,pixelsOffscreenAfterWindow:pixelsAfter-windowSize+currentPos,pagesBeforeBaselineSize:pixelsBefore,pagesAfterBaselineSize:pixelsAfter}}}),PagingScrollElement.prototype._initGestureProps=function(){return this._flicked=!1,this._pointerStartPosition=0,this._pointerReferenceFrame=null,this._lastPointerEventTime=null,this._flickSpeed=0,this._gestureActive=!1,this._scrollAnimator=null},PagingScrollElement.getter({activeScrollAnimator:function(){return this._scrollAnimator},scrollAnimator:function(){var maximumVelocity;return maximumVelocity=60*this.getWindowSize()/2,this._scrollAnimator||(this._scrollAnimator=this.startAnimator(new ScrollAnimator(this,maximumVelocity)))},debugState:function(){var child,ref,referenceFrame;return referenceFrame=this.referenceFrame,{referenceFrame:{page:null!=(ref=referenceFrame.page)?ref.inspectedName:void 0,atEndEdge:referenceFrame.atEndEdge},pagesBefore:function(){var j,len,ref1,results;for(ref1=this._pagesBeforeBaselineWrapper.children,results=[],j=0,len=ref1.length;j<len;j++)child=ref1[j],results.push(child.inspectedName+" "+(0|this.getMainCoordinate(child.currentSize)));return results}.call(this),pagesAfter:function(){var j,len,ref1,results;for(ref1=this._pagesAfterBaselineWrapper.children,results=[],j=0,len=ref1.length;j<len;j++)child=ref1[j],results.push(child.inspectedName+" "+(0|this.getMainCoordinate(child.currentSize)));return results}.call(this),geometry:this.currentGeometry}}}),PagingScrollElement.prototype.gestureRecognize=function(arg){var delta;return delta=arg.delta,"vertical"===this._scroll?1>delta.absoluteAspectRatio:1<delta.absoluteAspectRatio},PagingScrollElement.prototype.gestureBegin=function(e){var location,timeStamp;return location=e.location,timeStamp=e.timeStamp,this._flickSpeed=0,this._gestureActive=!0,location=this.getMainCoordinate(location),this._pointerReferenceFrame=this._referenceFrame,this._pointerStartPosition=location-this._scrollPosition,this._lastPointerEventTime=timeStamp,this.getActiveScrollAnimator()?(this._flicked=!1,timeout(60,function(_this){return function(){var referenceFrame,scrollPosition;if(!_this._flicked&&_this._gestureActive)return _this._pointerReferenceFrame=_this._referenceFrame,scrollPosition=_this.getPendingScrollPosition(),referenceFrame=_this.getPendingReferenceFrame(),_this._pointerStartPosition=location-scrollPosition,_this.getScrollAnimator().startTracking(scrollPosition,referenceFrame)}}(this))):this.startScrollAnimatorTracking()},PagingScrollElement.prototype.gestureResume=function(e){return!!this.getActiveScrollAnimator()},PagingScrollElement.prototype.gestureMove=function(e){var delta,deltaV,location,scrollAnimator,timeStamp;return timeStamp=e.timeStamp,delta=e.delta,location=e.location,location=this.getMainCoordinate(location),delta=this.getMainCoordinate(deltaV=delta),scrollAnimator=this.getScrollAnimator(),timeStamp>this._lastPointerEventTime&&(this._flickSpeed=deltaV.getMagnitude()/(timeStamp-this._lastPointerEventTime),this._flickDirection=delta/abs(delta)||1,this._lastPointerEventTime=timeStamp),scrollAnimator.setDesiredScrollPosition(location-this._pointerStartPosition)},PagingScrollElement.prototype.gestureEnd=function(e){var scrollAnimator;return this._gestureActive=!1,absGt(this._flickSpeed,minimumFlickVelocity)?(scrollAnimator=this.getScrollAnimator(),scrollAnimator.addVelocity(this._flickSpeed*this._flickDirection*flickSpeedMultiplier),this._flicked=!0):this.endScrollAnimatorTracking()},PagingScrollElement.prototype.startScrollAnimatorTracking=function(){return this.getScrollAnimator().startTracking(this._scrollPosition,this._referenceFrame)},PagingScrollElement.prototype.endScrollAnimatorTracking=function(){var scrollAnimator;if(scrollAnimator=this.getActiveScrollAnimator())return scrollAnimator.setReferenceFrame(this.getReferenceFrame()),scrollAnimator.setDesiredScrollPosition(this.getScrollPosition()),scrollAnimator.setActiveTouch(!1)},PagingScrollElement.prototype.setChildren=function(newPages,oldChildren){var newChildren;return null==oldChildren&&(oldChildren=this.getPendingChildren()),newChildren=(null!=oldChildren?oldChildren.length:void 0)>0?oldChildren:(this._updateHiddenChildren(),[this._scrollContents]),this.setPages(newPages),PagingScrollElement.__super__.setChildren.call(this,newChildren)},PagingScrollElement.prototype._updatePointerReferenceFrame=function(newReferenceFrame){var delta,ref,ref1;if(this._pointerReferenceFrame)return delta=this.getReferenceFrameDelta(newReferenceFrame,this._pointerReferenceFrame),this._pointerStartPosition-=delta,null!=(ref=this.getActiveScrollAnimator())&&ref.addToDesiredScrollPosition(delta),null!=(ref1=this.getActiveScrollAnimator())?ref1.setReferenceFrame(this._pointerReferenceFrame=newReferenceFrame):void 0},PagingScrollElement.prototype._getPageUnderPosition=function(testPosition){var child,j,len,ref,relativeTestPosition,size,wrapper;for(relativeTestPosition=testPosition-this.getScrollPosition(),wrapper=relativeTestPosition<0?(relativeTestPosition+=this.getMainCoordinate(this._pagesBeforeBaselineWrapper.getCurrentSize()),this._pagesBeforeBaselineWrapper):this._pagesAfterBaselineWrapper,ref=wrapper.getChildren(),j=0,len=ref.length;j<len;j++){if(child=ref[j],size=this.getMainCoordinate(child.getCurrentSize()),relativeTestPosition<size)return child;relativeTestPosition-=size}return console.warn("PagingScrollElement#_getPageUnderPosition: could not find page under position"),null},PagingScrollElement.prototype._updateAtStartAndAtEnd=function(){var newAtEnd,newAtStart,pages,scrollPosition;return scrollPosition=this.getScrollPosition(),this.getTotalPageSize()<=this.getWindowSize()?(newAtStart=!0,newAtEnd=!1):(newAtEnd=scrollPosition<=this.getMinScrollPosition(),newAtStart=scrollPosition>=this.getMaxScrollPosition()),pages=this.getPages(),newAtStart&&newAtStart!==this._atStart?this.setReferenceFrame({page:first(pages)}):newAtEnd&&newAtEnd!==this._atEnd&&this.setReferenceFrame({atEndEdge:!0,page:last(pages)}),this._atEnd=newAtEnd,this._atStart=newAtStart,newAtEnd||newAtStart},PagingScrollElement.prototype._addToScrollPosition=function(delta){return this.setScrollPosition(this.getPendingScrollPosition()+delta)},PagingScrollElement.prototype._updateReferenceFrame=function(){var atEndEdge,centerPosition,newCurrentPage,pageCenterPosition,referenceFrame,scrollPosition;if(!this._updateAtStartAndAtEnd())return scrollPosition=this.getScrollPosition(),centerPosition=this.getWindowSize()/2,newCurrentPage=this._getPageUnderPosition(centerPosition),newCurrentPage||console.warn("_updateReferenceFrame: no newCurrentPage"),pageCenterPosition=this.getPageCenter(newCurrentPage),atEndEdge=centerPosition>pageCenterPosition,referenceFrame=this.getReferenceFrame(),referenceFrame.page!==newCurrentPage||referenceFrame.atEndEdge!==atEndEdge?this.setReferenceFrame({page:newCurrentPage,atEndEdge:atEndEdge}):void 0},PagingScrollElement.prototype._queueUpdateEvent=function(newReferenceFrame,previousReferenceFrame){
return this.onNextReady(function(_this){return function(){var referenceFrame;return referenceFrame=_this.getReferenceFrame(),_this.queueEvent("scrollUpdate",{previousReferenceFrame:previousReferenceFrame,referenceFrame:referenceFrame,focusedPage:referenceFrame.page,currentGeometry:_this.getCurrentGeometry(),pagesBeforeBaseline:_this.getPagesBeforeBaseline(),pagesAfterBaseline:_this.getPagesAfterBaseline()})}}(this))},PagingScrollElement.prototype._sizeChanged=function(newSize,oldSize){return this._queueUpdateEvent(),PagingScrollElement.__super__._sizeChanged.apply(this,arguments)},PagingScrollElement.prototype._updateHiddenChildren=function(scrollMode){var commonSizeLayout;return null==scrollMode&&(scrollMode=this.getPendingScroll()),this._scrollContents||(this._scrollContents=new Element({key:"scrollContents",receivePointerEvents:"passToChildren"},this._pagesBeforeBaselineWrapper=new Element({key:"pagesBeforeBaseline"}),this._pagesAfterBaselineWrapper=new Element({key:"pagesAfterBaseline"}))),"horizontal"===scrollMode?(commonSizeLayout={hh:1,wcw:1},this._pagesBeforeBaselineWrapper.setAxis("topRight"),this._pagesBeforeBaselineWrapper.setChildrenLayout("row"),this._pagesAfterBaselineWrapper.setChildrenLayout("row")):(commonSizeLayout={ww:1,hch:1},this._pagesBeforeBaselineWrapper.setAxis("bottomLeft"),this._pagesBeforeBaselineWrapper.setChildrenLayout("column"),this._pagesAfterBaselineWrapper.setChildrenLayout("column")),this._scrollContents.setSize(commonSizeLayout),this._pagesBeforeBaselineWrapper.setSize(commonSizeLayout),this._pagesAfterBaselineWrapper.setSize(commonSizeLayout)},PagingScrollElement}(AnimatorSupport(Element)))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(242).addModules({FillElement:__webpack_require__(243),OutlineElement:__webpack_require__(244)})},function(module,exports,__webpack_require__){var Elements,ShapeChildren,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Elements=__webpack_require__(213),module.exports=Elements.ShapeChildren||Elements.addNamespace("ShapeChildren",ShapeChildren=function(superClass){function ShapeChildren(){return ShapeChildren.__super__.constructor.apply(this,arguments)}return extend(ShapeChildren,superClass),ShapeChildren}(Neptune.Base))},function(module,exports,__webpack_require__){var Atomic,Canvas,FillElement,FillableBase,Foundation,GradientFillStyle,createWithPostCreate,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),FillableBase=__webpack_require__(218),log=Foundation.log,createWithPostCreate=Foundation.createWithPostCreate,GradientFillStyle=Canvas.GradientFillStyle,module.exports=createWithPostCreate(FillElement=function(superClass){function FillElement(){return FillElement.__super__.constructor.apply(this,arguments)}var _drawOptionsTemp;return extend(FillElement,superClass),FillElement.virtualProperty({preFilteredBaseDrawArea:function(pending){return this.getParent().getPreFilteredBaseDrawArea(pending)}}),_drawOptionsTemp={},FillElement.prototype.drawBasic=function(target,elementToTargetMatrix,compositeMode,opacity){var base,k,v;"function"==typeof(base=this._parent)._prepareDrawOptions&&base._prepareDrawOptions(this._drawOptions,compositeMode,opacity),this._prepareDrawOptions(_drawOptionsTemp,compositeMode,opacity);for(k in _drawOptionsTemp)v=_drawOptionsTemp[k],v&&(this._drawOptions[k]=v);return this._parent.fillShape(target,elementToTargetMatrix,this._drawOptions)},FillElement}(FillableBase))},function(module,exports,__webpack_require__){var Atomic,Color,FillableBase,Foundation,Matrix,OutlineElement,Point,Rectangle,color,createWithPostCreate,isPlainArray,log,matrix,merge,point,rect,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),FillableBase=__webpack_require__(218),merge=Foundation.merge,createWithPostCreate=Foundation.createWithPostCreate,log=Foundation.log,isPlainArray=Foundation.isPlainArray,color=Atomic.color,Color=Atomic.Color,point=Atomic.point,Point=Atomic.Point,rect=Atomic.rect,Rectangle=Atomic.Rectangle,matrix=Atomic.matrix,Matrix=Atomic.Matrix,module.exports=createWithPostCreate(OutlineElement=function(superClass){function OutlineElement(){return OutlineElement.__super__.constructor.apply(this,arguments)}var validLineCaps,validLineJoins;return extend(OutlineElement,superClass),validLineCaps=["butt","round","square"],validLineJoins=["round","bevel","miter"],OutlineElement.drawProperty({lineWidth:{"default":1,validate:function(v){return"number"==typeof v}},lineCap:{"default":"butt",validate:function(v){return indexOf.call(validLineCaps,v)>=0}},lineJoin:{"default":"miter",validate:function(v){return indexOf.call(validLineJoins,v)>=0}},lineDash:{"default":null,validate:function(v){return!v||isPlainArray(v)}},filled:{"default":!1},miterLimit:{"default":10,validate:function(v){return!v||"number"==typeof v},preprocess:function(v){return null!=v?v:10}}}),OutlineElement.virtualProperty({drawAreaPadding:function(pending){var _lineJoin,_lineWidth,_miterLimit,ref;return ref=this.getState(pending),_lineWidth=ref._lineWidth,_lineJoin=ref._lineJoin,_miterLimit=ref._miterLimit,_lineWidth*("miter"===_lineJoin?_miterLimit/2:.5)}}),OutlineElement.prototype.getPreFilteredBaseDrawArea=function(pending){return OutlineElement.__super__.getPreFilteredBaseDrawArea.apply(this,arguments).grow(this.getDrawAreaPadding(pending))},OutlineElement.getter({cacheable:function(){return this.getHasChildren()}}),OutlineElement.prototype.fillShape=function(target,elementToTargetMatrix,options){return this._filled&&this._parent.fillShape(target,elementToTargetMatrix,options),this._parent.strokeShape(target,elementToTargetMatrix,options)},OutlineElement.prototype._prepareDrawOptions=function(drawOptions,compositeMode,opacity){return OutlineElement.__super__._prepareDrawOptions.apply(this,arguments),drawOptions.lineWidth=this._lineWidth,drawOptions.lineCap=this._lineCap,drawOptions.lineJoin=this._lineJoin,drawOptions.lineDash=this._lineDash,drawOptions.miterLimit=this._miterLimit},OutlineElement}(FillableBase))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(246).addModules({SynchronizedDomOverlay:__webpack_require__(247),TextInput:__webpack_require__(248)})},function(module,exports,__webpack_require__){var Engine,Forms,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.Forms||Engine.addNamespace("Forms",Forms=function(superClass){function Forms(){return Forms.__super__.constructor.apply(this,arguments)}return extend(Forms,superClass),Forms}(Neptune.Base))},function(module,exports,__webpack_require__){var Atomic,Element,Foundation,SynchronizedDomOverlay,float32Eq,inspect,log,merge,point,point1,rect,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Element=__webpack_require__(184),log=Foundation.log,merge=Foundation.merge,inspect=Foundation.inspect,float32Eq=Foundation.float32Eq,rect=Atomic.rect,point1=Atomic.point1,point=Atomic.point,module.exports=SynchronizedDomOverlay=function(superClass){function SynchronizedDomOverlay(options){null==options&&(options={}),this._attachedToCanvasElement=null,this._updateQueued=!1,this.setDomElement(options.domElement),SynchronizedDomOverlay.__super__.constructor.apply(this,arguments)}return extend(SynchronizedDomOverlay,superClass),SynchronizedDomOverlay.getter({domElement:function(){return this._domElement}}),SynchronizedDomOverlay.setter({domElement:function(domElement){return this._detachDomElement(),this._domElement=domElement,this._domElement.style.position="fixed",this._domElement.style.top="0",this.onNextReady(function(_this){return function(){return _this._attachDomElement()}}(this))}}),SynchronizedDomOverlay.prototype.preprocessEventHandlers=function(handlerMap){return SynchronizedDomOverlay.__super__.preprocessEventHandlers.call(this,merge(handlerMap,{rootElementChanged:function(_this){return function(e){return _this._rootElementChanged(e)}}(this)}))},SynchronizedDomOverlay.prototype._rootElementChanged=function(e){return this.onNextReady(function(_this){return function(){return _this._attachDomElement()}}(this))},SynchronizedDomOverlay.prototype._unregister=function(){return SynchronizedDomOverlay.__super__._unregister.apply(this,arguments),this._detachDomElement()},SynchronizedDomOverlay.prototype._queueUpdate=function(){if(!this._updateQueued&&this._attachedToCanvasElement)return this._updateQueued=!0,this.onNextReady(function(_this){return function(){return _this._updateQueued=!1,_this._updateDomLayout(),_this._queueUpdate()}}(this),!1)},SynchronizedDomOverlay.prototype._updateDomLayout=function(){var m,newCanvasElement,opacity,r,size,sx,sy,x,y;if(this._attachedToCanvasElement!==(newCanvasElement=this.getCanvasElement())&&this._attachDomElement(newCanvasElement),this._attachedToCanvasElement)return m=this.getElementToDocumentMatrix(),x=m.getLocationX(),y=m.getLocationY(),size=this.getPaddedSize(),sx=m.getScaleX(),sy=m.getScaleY(),r=rect(x,y,size.x,size.y).round(),opacity=this.getAbsOpacity(),this._domElement.style.opacity=opacity,this._domElement.style.left=r.x+"px",this._domElement.style.top=r.y+"px",this._domElement.style.width=r.w+"px",this._domElement.style.height=r.h+"px",this._domElement.style.transform=float32Eq(sx,1)&&float32Eq(sy,1)?"none":(this._domElement.style["transform-origin"]="left top","scale("+sx+", "+sy+")")},SynchronizedDomOverlay.prototype._detachDomElement=function(){var ref;if(this._attachedToCanvasElement)return null!=(ref=this._domElement)&&ref.parentElement.removeChild(this._domElement),this._attachedToCanvasElement=null},SynchronizedDomOverlay.prototype._attachDomElement=function(){var canvasElement;if(this.isRegistered){if(canvasElement=this.getCanvasElement(),this._attachedToCanvasElement){if(canvasElement===this._attachedToCanvasElement)return;this._detachDomElement()}return canvasElement?(this._attachedToCanvasElement=canvasElement,canvasElement.htmlCanvasElement.parentElement.appendChild(this._domElement),this._queueUpdate()):void 0}},SynchronizedDomOverlay}(Element)},function(module,exports,__webpack_require__){var Atomic,Foundation,Input,SynchronizedDomOverlay,TextArea,TextInput,createElementFromHtml,createWithPostCreate,inspect,log,merge,ref,rgbColor,select,timeout,wordsArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),SynchronizedDomOverlay=__webpack_require__(247),rgbColor=Atomic.rgbColor,createElementFromHtml=Foundation.Browser.Dom.createElementFromHtml,ref=Foundation.Browser.DomElementFactories,TextArea=ref.TextArea,Input=ref.Input,log=Foundation.log,merge=Foundation.merge,select=Foundation.select,inspect=Foundation.inspect,createWithPostCreate=Foundation.createWithPostCreate,wordsArray=Foundation.wordsArray,timeout=Foundation.timeout,module.exports=createWithPostCreate(TextInput=function(superClass){function TextInput(options){var Factory,props;null==options&&(options={}),props={placeholder:options.placeholder||"",type:options.type,maxlength:options.maxLength||options.maxlength,autocapitalize:options.autoCapitalize||options.autocapitalize,autocomplete:options.autoComplete||options.autocomplete,autocorrect:options.autoCorrect||options.autocorrect},Factory="textarea"===props.type?(delete props.type,TextArea):(props.type||(props.type="text"),Input),options.domElement=Factory(props,options.attrs,options.style,{value:options.value||"",style:{resize:"none",backgroundColor:"transparent",border:"0px",color:rgbColor(options.color||"black").toString(),fontFamily:options.fontFamily||"Arial",fontSize:(options.fontSize||16)+"px",margin:"0",outline:"0",padding:"0",textAlign:options.align||"left",verticalAlign:"bottom"},on:{keydown:function(_this){return function(keyboardEvent){var ref1;return null!=(ref1=_this.getCanvasElement())?ref1.keyDownEvent(keyboardEvent):void 0}}(this),keyup:function(_this){return function(keyboardEvent){var ref1;return null!=(ref1=_this.getCanvasElement())?ref1.keyUpEvent(keyboardEvent):void 0}}(this),change:function(_this){return function(event){return _this.checkIfValueChanged()}}(this),input:function(_this){return function(event){return _this.checkIfValueChanged()}}(this),select:function(_this){return function(event){return _this.queueEvent("selectionChanged")}}(this),focus:function(_this){return function(event){return _this._canvasElementToFocusOnBlur=_this.getCanvasElement(),_this._focus()}}(this),blur:function(_this){return function(event){return _this._canvasElementToFocusOnBlur&&timeout(0,function(){if(document.body===document.activeElement)return _this._canvasElementToFocusOnBlur.focusCanvas()}),_this._blur()}}(this)}}),TextInput.__super__.constructor.apply(this,arguments),this.willConsumeKeyboardEvent={order:"beforeAncestors",allowBrowserDefault:!0},this.lastValue=this.value}return extend(TextInput,superClass),TextInput.prototype.preprocessEventHandlers=function(handlerMap){return merge(TextInput.__super__.preprocessEventHandlers.apply(this,arguments),{focus:function(_this){return function(){if(!_this.domElement.focused)return _this.domElement.focus()}}(this),blur:function(_this){return function(){if(_this.domElement.focused)return _this.domElement.blur()}}(this),keyPress:function(_this){return function(arg){var props;if(props=arg.props,"Enter"===props.key&&_this.handleEvent("enter",{value:_this.value}),"Escape"===props.key)return _this.handleEvent("escape",{value:_this.value})}}(this)})},TextInput.prototype._unregister=function(){var ref1;return null!=(ref1=this._canvasElementToFocusOnBlur)&&ref1.focusCanvas(),TextInput.__super__._unregister.apply(this,arguments)},TextInput.prototype.checkIfValueChanged=function(){if(this.lastValue!==this.value)return this.lastValue=this.value,this.queueEvent("valueChanged",{value:this.value,lastValue:this.lastValue})},TextInput.virtualProperty({value:{getter:function(pending){return this.domElement.value},setter:function(v){if(v=null!=v?""+v:"",this.domElement.value!==v)return this.domElement.value=v}},color:{getter:function(){return rgbColor(this.domElement.style.color)},setter:function(c){return self.domElement=this.domElement,this.domElement.style.color=rgbColor(c).toString()}}}),TextInput.prototype.selectAll=function(){return this.domElement.select()},TextInput}(SynchronizedDomOverlay))},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-canvas":"git://github.com/imikimi/art-canvas.git","art-events":"git://github.com/imikimi/art-events.git","art-foundation":"git://github.com/imikimi/art-foundation.git","art-text":"git://github.com/imikimi/art-text.git","art-xbd":"git://github.com/imikimi/art-xbd.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","javascript-detect-element-resize":"^0.5.3","json-loader":"^0.5.4","keyboardevent-key-polyfill":"^1.0.2",mocha:"^2.5.3","neptune-namespaces":"^1.5.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"art-engine",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.15.1"}},function(module,exports,__webpack_require__){var Foundation,FullScreenApp,Link,Meta,Promise,log,merge,parseQuery,ref;Foundation=__webpack_require__(19),merge=Foundation.merge,Promise=Foundation.Promise,parseQuery=Foundation.parseQuery,log=Foundation.log,ref=Foundation.Browser.DomElementFactories,Meta=ref.Meta,Link=ref.Link,module.exports=FullScreenApp=function(){function FullScreenApp(){}return FullScreenApp._domReady=function(){var DomConsole,Engine,query;return Engine=__webpack_require__(152),query=parseQuery(),log("Art.Engine.FullScreenApp options:\n  ?dev=true\n    show DomConsole\n  ?perfGraphs=true\n    show performance graphs"),"true"!==query.dev&&"true"!==query.perfGraphs||(DomConsole=__webpack_require__(251),DomConsole.enable(),"true"===query.perfGraphs&&Engine.DevTools.GlobalEpochStats.enable()),log("Art.Engine.FullScreenApp: app ready")},FullScreenApp.init=function(config){var appReadyPromise;return null==config&&(config={}),document.onreadystatechange=function(_this){return function(){if("interactive"===document.readyState)return _this._domReady(),appReadyPromise.resolve()}}(this),module.exports=appReadyPromise=new Promise,this.writeDom(config),appReadyPromise},FullScreenApp.writeDom=function(arg){var content,fontFamilies,fontFamily,fontFamilyInits,html,i,info,len,link,manifest,meta,name,nameContentMetas,newLine,ref1,rel,scriptLinks,scriptUrl,scripts,sheetUrl,styleSheets,title;title=arg.title,styleSheets=arg.styleSheets,scripts=arg.scripts,fontFamilies=arg.fontFamilies,meta=arg.meta,link=arg.link,manifest=arg.manifest,document.title=title||"Art App",scripts||(scripts=[]),styleSheets||(styleSheets=[]),fontFamilies||(fontFamilies=[]),scriptLinks=function(){var i,len,results;for(results=[],i=0,len=scripts.length;i<len;i++)scriptUrl=scripts[i],scriptUrl&&results.push("<script type='text/javascript' src='"+scriptUrl+"'></script>");return results}(),fontFamilyInits=function(){var i,len,results;for(results=[],i=0,len=fontFamilies.length;i<len;i++)fontFamily=fontFamilies[i],results.push("<div style='font-family:"+fontFamily+";position:absolute;font-size:0;'>T</div>");return results}(),newLine="\n    ",nameContentMetas=merge({viewport:"user-scalable=no, width=device-width, initial-scale=1.0","apple-mobile-web-app-capable":"yes","apple-mobile-web-app-status-bar-style":"black-translucent","format-detection":"telephone=no"},meta),document.head.appendChild(Meta({charset:"utf-8"})),document.head.appendChild(Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge,chrome=1"}));for(name in nameContentMetas)content=nameContentMetas[name],document.head.appendChild(Meta({name:name,content:content}));for(i=0,len=styleSheets.length;i<len;i++)sheetUrl=styleSheets[i],document.head.appendChild(Link({rel:"stylesheet",href:sheetUrl}));ref1=link||{};for(rel in ref1)info=ref1[rel],document.head.appendChild(Link({rel:rel},info));return html="<html "+(manifest?"manifest='"+manifest+"'":"")+">\n\n  <style>\n    html {\n      height: 100%;\n    }\n    body {\n      padding: 0px;\n      margin: 0px;\n      background-color: #eee;\n      overflow: hidden;\n      font-size: 0px;\n      height: 100%;\n    }\n  </style>\n\n  <body>\n    "+fontFamilyInits.join(newLine)+"\n    "+scriptLinks.join(newLine)+"\n  </body>\n</html>",document.write(html)},FullScreenApp}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(252)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(253).includeInNamespace(__webpack_require__(255)).addModules({Chart:__webpack_require__(265),Console:__webpack_require__(256),ToolBar:__webpack_require__(261)}),__webpack_require__(262)},function(module,exports,__webpack_require__){var DevTools,DomConsole,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;DevTools=__webpack_require__(254),module.exports=DevTools.DomConsole||DevTools.addNamespace("DomConsole",DomConsole=function(superClass){function DomConsole(){return DomConsole.__super__.constructor.apply(this,arguments)}return extend(DomConsole,superClass),DomConsole}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,DevTools,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(22),module.exports=Art.DevTools||Art.addNamespace("DevTools",DevTools=function(superClass){function DevTools(){return DevTools.__super__.constructor.apply(this,arguments)}return extend(DevTools,superClass),DevTools}(Neptune.Base))},function(module,exports,__webpack_require__){var Foundation,console,slice=[].slice;Foundation=__webpack_require__(19),console=__webpack_require__(256).console,module.exports=[{enable:function(){return Foundation.Log.alternativeLogger=console,this.enabled=!0,console.show()},disable:function(){return this.enabled=!1,Foundation.Log.alternativeLogger=null,console.hide(),console.reset()},hide:function(){return console.hide()},show:function(){return console.show()},reset:function(){return console.reset()},increaseWidth:function(){return console.increaseWidth()},decreaseWidth:function(){return console.decreaseWidth()},foo:function(){return"foo"},getShown:function(){return null!=console?console.getShown():void 0},logCore:function(){var ref;return(ref=console.logCore).call.apply(ref,[console].concat(slice.call(arguments)))},logF:function(){var ref;return(ref=console.logF).call.apply(ref,[console].concat(slice.call(arguments)))},log:function(){var ref;return(ref=console.log).call.apply(ref,[console].concat(slice.call(arguments)))}}]},function(module,exports,__webpack_require__){(function(global){var Atomic,BaseObject,Color,Console,Div,Foundation,Img,InspectedObjectLiteral,Li,Map,Pre,Promise,Span,ToolBar,Ul,clone,colorRegex,containsImages,containsPromises,createWithPostCreate,deepAll,deepEach,deepMap,domConsoleId,escapeJavascriptString,flatten,hasProperties,htmlEscape,insertBetweenEveryElement,inspect,inspectLean,isArray,isFunction,isHTMLImageElement,isImage,isNumber,isPlainArray,isPlainObject,isString,merge,nextTick,objectKeyCount,packageLogArgs,point,point0,ref,resolveImages,rgbColor,timeout,toInspectedObjects,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;self.document&&__webpack_require__(257),Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),ToolBar=__webpack_require__(261),rgbColor=Atomic.rgbColor,Color=Atomic.Color,point=Atomic.point,point0=Atomic.point0,BaseObject=Foundation.BaseObject,inspect=Foundation.inspect,clone=Foundation.clone,merge=Foundation.merge,Map=Foundation.Map,nextTick=Foundation.nextTick,timeout=Foundation.timeout,flatten=Foundation.flatten,isArray=Foundation.isArray,isString=Foundation.isString,isFunction=Foundation.isFunction,isNumber=Foundation.isNumber,createWithPostCreate=Foundation.createWithPostCreate,colorRegex=Foundation.colorRegex,Promise=Foundation.Promise,containsPromises=Foundation.containsPromises,deepAll=Foundation.deepAll,toInspectedObjects=Foundation.toInspectedObjects,isPlainArray=Foundation.isPlainArray,isPlainObject=Foundation.isPlainObject,hasProperties=Foundation.hasProperties,objectKeyCount=Foundation.objectKeyCount,InspectedObjectLiteral=Foundation.InspectedObjectLiteral,deepEach=Foundation.deepEach,deepMap=Foundation.deepMap,inspectLean=Foundation.inspectLean,escapeJavascriptString=Foundation.escapeJavascriptString,isHTMLImageElement=global.HTMLImageElement?function(obj){return obj instanceof HTMLImageElement}:function(){return!1},isImage=function(o){return isHTMLImageElement(o)||isFunction(o.toImage)},containsImages=function(plainStructure){var foundImages;return foundImages=!1,deepEach(plainStructure,function(v){return foundImages||(foundImages=isImage(v))}),foundImages},resolveImages=function(plainStructure){return deepAll(deepMap(plainStructure,function(element){return isImage(element)?Promise.then(function(){return isHTMLImageElement(element)?element:element.toImage()}).then(function(htmlImageElement){return htmlImageElement.complete?htmlImageElement:new Promise(function(resolve){return htmlImageElement.onload=function(){return resolve(htmlImageElement)}})}):element}))},ref=Foundation.Browser.DomElementFactories,Div=ref.Div,Pre=ref.Pre,Span=ref.Span,Img=ref.Img,Li=ref.Li,Ul=ref.Ul,isImage=function(o){return o&&("function"==typeof o.toImage||o.constructor===HTMLImageElement)},htmlEscape=function(str){return str},insertBetweenEveryElement=function(array,el){var first,j,len,res,v;for(res=[],first=!0,j=0,len=array.length;j<len;j++)v=array[j],first?first=!1:res.push(el),res.push(v);return res},domConsoleId="artDomConsole",packageLogArgs=function(args){return 1===args.length?args[0]:args},module.exports=createWithPostCreate(Console=function(superClass){function Console(){window.domConsole=this,this._width=500,this._devicePixelRatio=Foundation.Browser.Dom.getDevicePixelRatio(),this.initDom()}var isColor,literalToDomHelper,logCount,logSerializer,noOptions,toggleCollapsable;return extend(Console,superClass),Console.singletonClass(),Console.postCreate=function(){return self.domConsole=this.singleton,Console.__super__.constructor.postCreate.apply(this,arguments)},Console.prototype.reset=function(){return this.domContainer.innerHTML=""},Console.prototype.hide=function(){return this.domConsoleParent.style.display="none"},Console.prototype.show=function(){return this.domConsoleParent.style.display="block"},Console.prototype.increaseWidth=function(){return this.width+=25},Console.prototype.decreaseWidth=function(){return this.width-=25},Console.getter({shown:function(){return"block"===this.domContainer.style.display}}),toggleCollapsable=function(el){var child,j,len,ref1;for(ref1=el.parentElement.children,j=0,len=ref1.length;j<len;j++)child=ref1[j],child.style.display="block";return el.style.display="none"},Console.setter({width:function(w){return this._width=w,this.domConsoleParent.style.width=w+"px"}}),Console.getter("width"),Console.prototype.initDom=function(){var bodyChildren,child,delay,fixMochaStats,maxAttempts,mocha;if(mocha=document.getElementById("mocha"),bodyChildren=function(){var j,len,ref1,results;for(ref1=document.body.childNodes,results=[],j=0,len=ref1.length;j<len;j++)child=ref1[j],results.push(child);return results}(),document.body.appendChild(Div(null,Div({style:{display:"flex",flexDirection:"row",position:"fixed",left:"0",right:"0",top:"0",bottom:"0"}},Div({id:domConsoleId+"Area",style:{flex:"1 1 auto",overflow:"scroll"}},bodyChildren),this.domConsoleParent=Div({style:{overflow:"auto",backgroundColor:"white",top:"0",bottom:"0",paddingTop:"25px",flex:"0 0 auto",width:this._width+"px",borderLeft:"1px solid #aaa"}},this.domContainer=Div({"class":"domConsole",style:{padding:"5px"},on:{click:function(_this){return function(arg){var results,target;for(target=arg.target,results=[];target;){if(target.className.match("collapsable")){toggleCollapsable(target);break}results.push(target=target.parentElement)}return results}}(this)}}))),ToolBar())),mocha)return maxAttempts=8,delay=62.5,fixMochaStats=function(){var ms;return maxAttempts--?(delay*=2,(ms=document.getElementById("mocha-stats"))?ms.style.position="relative":(console.log("domConsoleMocha fixMochaStats... (waiting "+delay+"ms for #mocha-stats div to appear: "+maxAttempts+")"),timeout(delay,fixMochaStats))):void console.log("domConsoleMocha fixMochaStats... giving up; sorry for the ugly screen")},timeout(delay,fixMochaStats)},Console.prototype.appendLog=function(domElement){return this.domContainer.appendChild(Div({"class":"logLine"},domElement)),nextTick(function(_this){return function(){return _this.domConsoleParent.scrollTop=_this.domConsoleParent.scrollHeight}}(this))},Console.prototype.log=function(){var args;return args=1<=arguments.length?slice.call(arguments,0):[],this.logCore(packageLogArgs(args)),args[args.length-1]},Console.prototype.logF=function(options){return this.logCore(options.log,null,null,options),options.log},Console.prototype.format=function(domEl,options){var backgroundColor,label,labelColor;return label=options.label,labelColor=options.labelColor,backgroundColor=options.backgroundColor,label&&(domEl=Div({style:{backgroundColor:backgroundColor||"yellow"}},Div(label,{style:{color:labelColor,fontWeight:"bold"}}),Div({style:{paddingLeft:"10px"}},domEl))),domEl},Console.prototype.arrayKidsToDomArray=function(arrayOfInspectedObjects,Factory,options,addCommasAndBrackets){var child,i,kids;return options.maxDepth--,kids=function(){var j,len,results;for(results=[],i=j=0,len=arrayOfInspectedObjects.length;j<len&&(child=arrayOfInspectedObjects[i],!(i>50));i=++j)50===i?results.push(Factory({"class":"value"},"array length: "+arrayOfInspectedObjects.length+" (showing the first "+i+")")):results.push(Factory({"class":"value"},this.toDom(child,options)));return results}.call(this),options.maxDepth++,addCommasAndBrackets&&(kids=this.addCommasAndBrackets(kids,"[","]")),kids},Console.prototype.arrayToDomBasic=function(arrayOfInspectedObjects,options){var l;return 0===options.maxDepth?Span({"class":"array maxdepth "+options["class"]},0===arrayOfInspectedObjects.length?"[]":arrayOfInspectedObjects.length<=5&&(l=inspectLean(arrayOfInspectedObjects)).length<=30?"["+l+"]":"[... "+arrayOfInspectedObjects.length+"]"):Span({"class":"array "+options["class"]},this.arrayKidsToDomArray(arrayOfInspectedObjects,Span,options,!0))},Console.prototype.arrayToDom=function(arrayOfInspectedObjects,options){return options.treeView?this.arrayToDomTreeView(arrayOfInspectedObjects,options):this.arrayToDomBasic(arrayOfInspectedObjects,options)},Console.prototype.addCommasAndBrackets=function(kids,leftBracket,rightBracket,typeName){var i,j,kid,len;for(i=j=0,len=kids.length;j<len;i=++j)kid=kids[i],i+1<kids.length&&kid.appendChild(Span(", "));return flatten(leftBracket,typeName,kids,rightBracket)},Console.prototype.mapKidsToDomArray=function(inspectedObject,Factory,options,addCommasAndBrackets){var k,kids,v;return options.maxDepth--,kids=function(){var results;results=[];for(k in inspectedObject)v=inspectedObject[k],results.push(Factory(null,Span({"class":"key"},k+": "),Span({"class":"value"},this.toDom(v,options))));return results}.call(this),options.maxDepth++,addCommasAndBrackets?this.addCommasAndBrackets(kids,"{","}"):kids},Console.prototype.objectToDomBasic=function(inspectedObject,options){var inside,l,length;return 0===options.maxDepth?(length=objectKeyCount(inspectedObject),
inside=0===length?"":length<=5?(l=inspectLean(inspectedObject)).length<=40?l:Object.keys(inspectedObject).join(" "):""+length,Span({"class":"object maxdepth "+options["class"]},"{"+inside+"}")):Span({"class":"object"},this.mapKidsToDomArray(inspectedObject,Span,options,!0))},Console.prototype.treeViewCollapsable=function(collapsablePair,options){return collapsablePair[options.collapsed?0:1].style.display="none",collapsablePair},Console.prototype.arrayToDomTreeView=function(arrayOfInspectedObjects,options){return 0===arrayOfInspectedObjects.length?Span({"class":"array"},"[]"):this.treeViewCollapsable([Ul({"class":"array collapsable open"},this.arrayKidsToDomArray(arrayOfInspectedObjects,Li,options)),Ul({"class":"array collapsable closed"},this.arrayToDomBasic(arrayOfInspectedObjects,merge(options,{maxDepth:1,treeView:!1})))],options)},Console.prototype.objectToDomTreeView=function(inspectedObject,options){return hasProperties(inspectedObject)?this.treeViewCollapsable([Ul({"class":"object collapsable open"},this.mapKidsToDomArray(inspectedObject,Li,options)),Ul({"class":"object collapsable closed"},this.objectToDomBasic(inspectedObject,merge(options,{maxDepth:1,treeView:!1})))],options):Span({"class":"object"},"{}")},Console.prototype.objectToDom=function(inspectedObject,options){return options.treeView?this.objectToDomTreeView(inspectedObject,options):this.objectToDomBasic(inspectedObject,options)},literalToDomHelper=function(classes,literalString){var Factory;return(Factory=literalString.match(/\s\s+|\n/)?Pre:Span)({"class":classes},literalString)},Console.prototype.literalToDom=function(inspectedObject){return literalToDomHelper("literal",isString(inspectedObject)?escapeJavascriptString(inspectedObject):""+inspectedObject)},Console.prototype.errorLiteralToDom=function(inspectedObject){return literalToDomHelper("errorLiteral",inspectedObject.toString())},Console.prototype.colorToDom=function(clr){var clrString,displayString;return displayString=isString(clrString=clr)?(clr=rgbColor(clr),"'"+clrString+"'"):clr.toString(),Span({"class":"inspected",style:{backgroundColor:clr,padding:"0 5px",color:clr.perceptualLightness<.8&&clr.a>.25?"white":"black"}},""+displayString)},Console.prototype.imgToDom=function(image){var maxImageDisplaySize,minImageDisplaySize,scale,size;return minImageDisplaySize=point(0),maxImageDisplaySize=point(1024,512).mul(this._devicePixelRatio),size=point(image.width,image.height),scale=1/this._devicePixelRatio,size.gte(minImageDisplaySize)?size.lt(maxImageDisplaySize)||(scale*=maxImageDisplaySize.div(size).min()):scale*=Math.ceil(minImageDisplaySize.div(size).min()),Img({src:image.src},size.gt(point0)?{style:{width:(image.naturalWidth*scale|0)+"px",height:(image.naturalHeight*scale|0)+"px"}}:void 0)},isColor=function(obj){return obj instanceof Color||isString(obj)&&obj.match(colorRegex)},Console.prototype.toDom=function(inspectedObject,options){return null==options&&(options={}),null==inspectedObject?this.literalToDom(inspectedObject):inspectedObject instanceof InspectedObjectLiteral?isColor(inspectedObject.literal)?this.colorToDom(inspectedObject.literal):inspectedObject.isError?(console.error(inspectedObject.literal),this.errorLiteralToDom(inspectedObject.literal)):literalToDomHelper("literal",inspectedObject.literal):isHTMLImageElement(inspectedObject)?this.imgToDom(inspectedObject):isColor(inspectedObject)?this.colorToDom(inspectedObject):isPlainArray(inspectedObject)?this.arrayToDom(inspectedObject,options):isPlainObject(inspectedObject)?this.objectToDom(inspectedObject,options):this.literalToDom(inspectedObject)},logSerializer=new Promise.Serializer,logCount=1,noOptions={},Console.prototype.logCore=function(m,callStack,options){var formatSystemMessage,hasPromises,localLogCount,ret;return null==options&&(options=noOptions),formatSystemMessage=function(params){var failure,pending,success;return success=params.success,failure=params.failure,pending=params.pending,{backgroundColor:failure?"#fff0f0":"white",labelColor:success?"green":failure?"#a00":pending?"blue":void 0,label:(success||failure||pending)+": (log #"+localLogCount+")"}},localLogCount=logCount,(hasPromises=containsPromises(m))&&(options=merge(options,formatSystemMessage({pending:"RESOLVING PROMISES"}))),options.isError&&(options=merge(options,formatSystemMessage({failure:"ERROR"}))),ret=logSerializer.then(function(_this){return function(){var maxDepth;return options.treeView=!0,maxDepth=options.maxDepth,isNumber(maxDepth)||(maxDepth=20),"string"!=typeof m||m.match(colorRegex)?Promise.then(function(){var inspected;return containsImages(inspected=toInspectedObjects(m))?resolveImages(inspected):inspected}).then(function(inspected){var domEl;return domEl=_this.toDom(inspected,options),_this.appendLog(_this.format(domEl,options))}):_this.appendLog(_this.format(Pre(m),options))}}(this)),logSerializer["catch"](function(e){return console.error("Error in DomConsole.Console",e)}),hasPromises&&deepAll(m,function(promiseResult){return{"promise.then":promiseResult}}).then(function(_this){return function(resolvedM){return _this.logCore(resolvedM,callStack,merge(options,formatSystemMessage({success:"ALL PROMISES RESOLVED"})))}}(this))["catch"](function(_this){return function(rejected){return _this.logCore(rejected,callStack,merge(options,formatSystemMessage({failure:"ONE OR MORE PROMISES WERE REJECTED"})))}}(this)),logCount++,ret},Console}(BaseObject))}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var content=__webpack_require__(258);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(260)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(259)(),exports.push([module.id,'@charset "UTF-8";\n.domConsole {\n  }\n  .domConsole img {\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: crisp-edges;\n    -ms-interpolation-mode: nearest-neighbor;\n    border: 1px solid rgba(255, 255, 255, 0); }\n    .domConsole img:hover {\n      border: 1px solid #bbbbbb; }\n  .domConsole ul {\n    list-style-type: none; }\n  .domConsole .collapsable {\n    cursor: pointer;\n    margin: 0;\n    padding: 0;\n    padding-left: 12px;\n    margin-bottom: 5px;\n    position: relative;\n    border-left: 1px solid transparent; }\n    .domConsole .collapsable:before {\n      content: "\\25BE";\n      position: absolute;\n      left: 2px;\n      top: 0;\n      bottom: 0; }\n    .domConsole .collapsable:hover {\n      border-left: 1px solid #cccc44;\n      border-radius: 5px; }\n  .domConsole .collapsable.closed {\n    overflow: hidden;\n    height: 14px;\n  }\n  .domConsole .collapsable.closed.array:before {\n    content: "\\25B9"; }\n  .domConsole .collapsable.open.array:before {\n    content: "\\25BF"; }\n  .domConsole .collapsable.closed.object:before {\n    content: "\\25B8"; }\n  .domConsole .collapsable.open.object:before {\n    content: "\\25BE"; }\n  .domConsole pre {\n    margin: 0;\n    color: #555555; }\n  .domConsole .logLine {\n    font-family: "Courier";\n    font-size: 12px;\n    color: #aaaaaa;\n    border-right: 2px solid transparent; }\n    .domConsole .logLine .literal {\n      color: green; }\n    .domConsole .logLine .errorLiteral {\n      color: red; }\n    .domConsole .logLine .object .key {\n      color: #bbbb00; }\n    .domConsole .logLine:hover {\n      border-right: 2px solid #e0e0e0; }\n  .domConsole h1 {\n    margin-bottom: 20px;\n    margin-top: 40px; }\n  .domConsole h2 {\n    margin-bottom: 15px;\n    margin-top: 30px; }\n  .domConsole h3 {\n    margin-bottom: 10px;\n    margin-top: 20px; }\n  .domConsole h1 .logLine {\n    font-size: 24px;\n    border-bottom: 4px solid #e0e0e0; }\n  .domConsole h2 .logLine {\n    font-size: 20px;\n    border-bottom: 3px solid #e0e0e0; }\n  .domConsole h3 .logLine {\n    font-size: 16px;\n    border-bottom: 2px solid #e0e0e0; }\n',""])},function(module,exports){module.exports=function(){var list=[];return list.toString=function(){for(var result=[],i=0;i<this.length;i++){var item=this[i];item[2]?result.push("@media "+item[2]+"{"+item[1]+"}"):result.push(item[1])}return result.join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,styleElement){var head=getHeadElement(),lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling):head.appendChild(styleElement):head.insertBefore(styleElement,head.firstChild),styleElementsInsertedAtTop.push(styleElement);else{if("bottom"!==options.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");head.appendChild(styleElement)}}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);idx>=0&&styleElementsInsertedAtTop.splice(idx,1)}function createStyleElement(options){var styleElement=document.createElement("style");return styleElement.type="text/css",insertStyleElement(options,styleElement),styleElement}function createLinkElement(options){var linkElement=document.createElement("link");return linkElement.rel="stylesheet",insertStyleElement(options,linkElement),linkElement}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options)),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(styleElement=createLinkElement(options),update=updateLink.bind(null,styleElement),remove=function(){removeStyleElement(styleElement),styleElement.href&&URL.revokeObjectURL(styleElement.href)}):(styleElement=createStyleElement(options),update=applyToTag.bind(null,styleElement),remove=function(){removeStyleElement(styleElement)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media;if(media&&styleElement.setAttribute("media",media),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,obj){var css=obj.css,sourceMap=obj.sourceMap;sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},memoize=function(fn){var memo;return function(){return"undefined"==typeof memo&&(memo=fn.apply(this,arguments)),memo}},isOldIE=memoize(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),getHeadElement=memoize(function(){return document.head||document.getElementsByTagName("head")[0]}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[];module.exports=function(list,options){options=options||{},"undefined"==typeof options.singleton&&(options.singleton=isOldIE()),"undefined"==typeof options.insertAt&&(options.insertAt="bottom");var styles=listToStyles(list);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports,__webpack_require__){var A,BaseObject,Component,Div,DomConsole,Foundation,ToolBar,createWithPostCreate,ref,wordsArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),DomConsole=__webpack_require__(253),Component=__webpack_require__(262).Component,BaseObject=Foundation.BaseObject,createWithPostCreate=Foundation.createWithPostCreate,wordsArray=Foundation.wordsArray,ref=Foundation.Browser.DomElementFactories,Div=ref.Div,A=ref.A,module.exports=createWithPostCreate(ToolBar=function(superClass){function ToolBar(){return ToolBar.__super__.constructor.apply(this,arguments)}return extend(ToolBar,superClass),ToolBar.prototype.render=function(){var action,shown;return shown=this.state.shown,Div({style:{position:"fixed",top:0,right:0,display:"flex",flexDirection:"row",borderBottom:"1px solid #aaa",borderLeft:"1px solid #aaa",fontSize:"10px",fontFamily:"Arial",justifyContent:"flex-end",backgroundColor:"#f7f3df"}},Div({style:{margin:"5px"}},"Art.Foundation.DomConsole"),function(){var i,len,ref1,results;for(ref1=["reset","show","hide","increaseWidth","decreaseWidth"],results=[],i=0,len=ref1.length;i<len;i++)action=ref1[i],results.push(function(_this){return function(action){return Div({style:{margin:"5px"}},A({href:"#",on:{click:function(){return DomConsole[action]()}}},action))}}(this)(action));return results}.call(this))},ToolBar}(Component))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(263).addModules({Component:__webpack_require__(264)})},function(module,exports,__webpack_require__){var DomConsole,PseudoReact,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;DomConsole=__webpack_require__(253),module.exports=DomConsole.PseudoReact||DomConsole.addNamespace("PseudoReact",PseudoReact=function(superClass){function PseudoReact(){return PseudoReact.__super__.constructor.apply(this,arguments)}return extend(PseudoReact,superClass),PseudoReact}(Neptune.Base))},function(module,exports,__webpack_require__){var BaseObject,Component,Div,Foundation,createObjectTreeFactory,merge,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),ref=Foundation.Browser.DomElementFactories,Div=ref.Div,createObjectTreeFactory=ref.createObjectTreeFactory,merge=Foundation.merge,BaseObject=Foundation.BaseObject,module.exports=Component=function(superClass){function Component(props1){this.props=null!=props1?props1:{},this.state=this.getInitialState(),this._pendingState=null}return extend(Component,superClass),Component.postCreate=function(){return this.toComponentFactory()},Component.toComponentFactory=function(){return createObjectTreeFactory(function(_this){return function(props,children){return props.children||(props.children=children),new _this(props).rerender()}}(this))},Component.prototype.getInitialState=function(){return{}},Component.prototype.getPendingState=function(){return this._pendingState?this._pendingState:(this._queueApplyPendingState(),this._pendingState={})},Component.prototype._queueApplyPendingState=function(){return setTimeout(function(_this){return function(){return _this._applyPendingState()}}(this),0)},Component.prototype._applyPendingState=function(){var k,ref1,v;ref1=this._pendingState;for(k in ref1)v=ref1[k],this.state[k]=v;return this.rerender(),this._pendingState=null},Component.prototype._setState=function(k,v){return this.getPendingState()[k]=v},Component.prototype.setState=function(a,b){var k,results,v;if(a.constructor===Object){results=[];for(k in a)v=a[k],results.push(this._setState(k,v));return results}return this._setState(a,b)},Component.prototype.rerender=function(){var oldRootElement,ref1;return oldRootElement=this._rootElement,this._render(),null!=oldRootElement&&null!=(ref1=oldRootElement.parentElement)&&ref1.replaceChild(this._rootElement,oldRootElement),this._rootElement},Component.prototype.render=function(){return Div()},Component.prototype._render=function(){return this._rootElement=this.render()},Component}(BaseObject)},function(module,exports,__webpack_require__){var Atomic,Chart,Foundation,Matrix,inspect,log,point,rect,rgbColor;Atomic=__webpack_require__(125),Foundation=__webpack_require__(19),point=Atomic.point,rgbColor=Atomic.rgbColor,rect=Atomic.rect,Matrix=Atomic.Matrix,inspect=Foundation.inspect,log=Foundation.log,module.exports=Chart=function(){function Chart(){}return Chart.bar=function(numbers,options){var barArea,barColor,barWidth,bgColor,chartBgColor,drawArea,drawMatrix,fontSize,height,i,j,k,len,len1,margin,maxNumber,minWidth,out,percent,pixelsPerPoint,pos,range,size,textColor;for(null==options&&(options={}),range=options.range,pixelsPerPoint=options.pixelsPerPoint||2,fontSize=options.fontSize||10,margin=options.margin||(range?1.4*fontSize:0),bgColor=rgbColor(options.bgColor||rgbColor(1,1,1,0)),chartBgColor=rgbColor(options.chartBgColor||"#fff7f0"),barColor=rgbColor(options.barColor||"rgba(0,0,0,.5)"),textColor=rgbColor(options.textColor||"orange"),minWidth=options.minWidth||50,size=options.size||point(4*numbers.length,50+2*margin),options.barWidth&&(size=size.withX(numbers.length*options.barWidth)),size.x<minWidth&&(size=size.withX(minWidth)),barWidth=size.x/numbers.length,drawMatrix=Matrix.scale(pixelsPerPoint),out=new Art.Canvas.Bitmap(size.mul(pixelsPerPoint)),out.pixelsPerPoint=pixelsPerPoint,out.clear(bgColor),drawArea=rect(0,margin,size.w,size.h-2*margin),out.drawRectangle(drawMatrix,drawArea,chartBgColor),pos=drawArea.left,maxNumber=0,j=0,len=numbers.length;j<len;j++)i=numbers[j],i>maxNumber&&(maxNumber=i);for(k=0,len1=numbers.length;k<len1;k++)i=numbers[k],percent=i/maxNumber,height=drawArea.h*percent,barArea=rect(pos,drawArea.bottom-height,barWidth,height).round(),out.drawRectangle(drawMatrix,barArea,barColor),pos+=barWidth;return range&&(out.drawText(Matrix.translate(0,fontSize).mul(drawMatrix),"max: "+maxNumber,{size:fontSize,color:textColor}),out.drawText(Matrix.translate(0,size.y).mul(drawMatrix),range[0],{size:fontSize,color:textColor}),out.drawText(Matrix.translate(size).mul(drawMatrix),range[1],{size:fontSize,color:textColor,align:"right"})),out},Chart}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(267).addModules({GlobalEpochStats:__webpack_require__(268)})},function(module,exports,__webpack_require__){var DevTools,Engine,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.DevTools||Engine.addNamespace("DevTools",DevTools=function(superClass){function DevTools(){return DevTools.__super__.constructor.apply(this,arguments)}return extend(DevTools,superClass),DevTools}(Neptune.Base))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(19),__webpack_require__(125),__webpack_require__(137),__webpack_require__(157)],__WEBPACK_AMD_DEFINE_RESULT__=function(Foundation,Atomic,Canvas,EngineCore){var GlobalEpochCycle,GlobalEpochStat,GlobalEpochStats,Map,Matrix,aimColor,currentSecond,floor,globalEpochCycle,log,max,min,miniInspect,peek,point,reactColor,rect,rgbColor,timeout;return log=Foundation.log,Map=Foundation.Map,miniInspect=Foundation.miniInspect,currentSecond=Foundation.currentSecond,max=Foundation.max,min=Foundation.min,timeout=Foundation.timeout,peek=Foundation.peek,point=Atomic.point,rect=Atomic.rect,Matrix=Atomic.Matrix,rgbColor=Atomic.rgbColor,GlobalEpochCycle=EngineCore.GlobalEpochCycle,globalEpochCycle=GlobalEpochCycle.globalEpochCycle,floor=Math.floor,reactColor=rgbColor("gold"),aimColor=rgbColor("#9c3"),GlobalEpochStat=function(superClass){function GlobalEpochStat(sampleTime1,total1,sampleSet1){this.sampleTime=sampleTime1,this.total=total1,this.sampleSet=sampleSet1}var statColors,statFields;return extend(GlobalEpochStat,superClass),GlobalEpochStat.statFields=statFields=["total","draw","aim","aimLayout","aimTL","aimRR","react","reactAim","reactLC","reactRender","event","flux"],GlobalEpochStat.statColors=statColors={total:"gray",draw:"#39c",aim:aimColor,aimLayout:aimColor.withLightness(.9*aimColor.lightness),aimTL:aimColor.withLightness(.8*aimColor.lightness),aimRR:aimColor.withLightness(.7*aimColor.lightness),react:reactColor,reactAim:reactColor.withLightness(.9*reactColor.lightness),reactLC:reactColor.withLightness(.8*reactColor.lightness),reactRender:reactColor.withLightness(.7*reactColor.lightness),event:"#ff6347",flux:"#d936a3"},GlobalEpochStat.prototype.getStacked=function(sampleName){var i,sn,sum;if("total"===sampleName)return this.total;for(sum=0,i=statFields.length-1;i>=0&&(sn=statFields[i],sum+=this.sampleSet[sn]||0,sn!==sampleName);i+=-1);return sum},GlobalEpochStat.prototype.drawSample=function(bitmap,drawMatrix,sampleWidth,sampleField,h){var sample,sampleTime,x,y;return sampleTime=this.sampleTime,sample=this.getStacked(sampleField),x=floor(drawMatrix.transformX(sampleTime,sample)),y=floor(drawMatrix.transformY(sampleTime,sample)),bitmap.drawRectangle(null,rect(x,y,sampleWidth,h-y),{color:statColors[sampleField]})},GlobalEpochStat}(Foundation.BaseObject),GlobalEpochStats=function(superClass){function GlobalEpochStats(){this.reset()}return extend(GlobalEpochStats,superClass),GlobalEpochStats.classGetter({enabled:function(){return!!globalEpochCycle.globalEpochStats}}),GlobalEpochStats.enable=function(){return log("Enabled globalEpochStats"),globalEpochCycle.globalEpochStats=new this,!0},GlobalEpochStats.toggle=function(){return this.enabled?this.disable():this.enable()},GlobalEpochStats.disable=function(){return log("Disabled globalEpochStats"),globalEpochCycle.globalEpochStats=null,!1},GlobalEpochStats.prototype.reset=function(){return this.maxMs=2/60,this.stats=[],this.nextEventIdIndex=0,this.eventsById={},this.eventLegend={},this._minSampleTime=null,this._maxSampleTime=null},GlobalEpochStats.prototype.add=function(sampleTime,total,sampleSet){var ges;return this.stats.push(ges=new GlobalEpochStat(sampleTime,total,sampleSet)),this.maxMs=max(this.maxMs,1.5*total),this.logAndResetWhenIdle(),this.addSampleTime(sampleTime)},GlobalEpochStats.prototype.addSampleTime=function(time){return this._minSampleTime=min(time,this._minSampleTime||time),this._maxSampleTime=max(time,this._maxSampleTime||time)},GlobalEpochStats.prototype.logEvent=function(name,id){var base,clr,colors,ebi,now;return now=currentSecond(),this.addSampleTime(now),colors={generateDrawCache:"green",animation:"#77f",animationAborted:"#f77",animationDone:"#77f","default":"gray"},clr=colors[name]||colors["default"],ebi=(base=this.eventsById)[id]||(base[id]={startTime:now,endTime:now,index:this.nextEventIdIndex++,events:[],name:name,clr:clr}),ebi.startTime=min(now,ebi.startTime),ebi.endTime=max(now,ebi.endTime),this.eventLegend[name]=clr,ebi.events.push({time:now,name:name,clr:clr})},GlobalEpochStats.getter({minSampleTime:function(){return this._minSampleTime},maxSampleTime:function(){return this._maxSampleTime},sampleTimeRange:function(){return this.maxSampleTime-this.minSampleTime}}),GlobalEpochStats.prototype.drawAllSamplesForOneField=function(bitmap,drawMatrix,sampleField){var h,i,len,ref,sampleTimeRange,sampleWidth,size,stat,stats,w;for(size=bitmap.size,w=size.w,h=size.h,ref=this,sampleTimeRange=ref.sampleTimeRange,stats=ref.stats,sampleWidth=floor(w/sampleTimeRange/60),i=0,len=stats.length;i<len;i++)stat=stats[i],stat.drawSample(bitmap,drawMatrix,sampleWidth,sampleField,h);return null},GlobalEpochStats.prototype.getDrawMatrix=function(size){var h,legendWidth,maxMs,minSampleTime,ref,sampleTimeRange,sampleWidth,w,xScale,yScale;return w=size.w,h=size.h,legendWidth=80,w-=legendWidth,ref=this,sampleTimeRange=ref.sampleTimeRange,minSampleTime=ref.minSampleTime,maxMs=ref.maxMs,sampleWidth=floor(w/sampleTimeRange/60),xScale=(w-sampleWidth)/sampleTimeRange,yScale=h/maxMs,Matrix.scaleXY(1,-1).translateXY(-minSampleTime,0).scaleXY(xScale,yScale).translateXY(legendWidth,h)},GlobalEpochStats.prototype.drawLabeledHLine=function(bitmap,x1,x2,y,clr,label){return bitmap.drawRectangle(null,rect(x1,y,x2-x1,1),{color:rgbColor(clr)}),bitmap.drawText(point(x1,y-5),label,{size:14,color:rgbColor(clr)})},GlobalEpochStats.prototype.drawEvents=function(bitmap,drawMatrix){var clr,endTime,eventTimeLineHeight,events,h,id,index,name,ref,ref1,ref2,results,startTime,time,w,x,x1,x2,y;ref=bitmap.size,w=ref.w,h=ref.h,eventTimeLineHeight=floor(h/20),ref1=this.eventsById,results=[];for(id in ref1)ref2=ref1[id],index=ref2.index,startTime=ref2.startTime,endTime=ref2.endTime,clr=ref2.clr,events=ref2.events,name=ref2.name,x1=floor(drawMatrix.transformX(startTime,0)),x2=floor(drawMatrix.transformX(endTime,0)),y=(index+1)*eventTimeLineHeight,this.drawLabeledHLine(bitmap,x1,x2,y,clr,name),results.push(function(){var i,len,ref3,results1;for(results1=[],i=0,len=events.length;i<len;i++)ref3=events[i],time=ref3.time,name=ref3.name,clr=ref3.clr,x=floor(drawMatrix.transformX(time,0)),results1.push(bitmap.drawRectangle(null,rect(x,y,1,eventTimeLineHeight*(1/3)),{color:clr}));return results1}());return results},GlobalEpochStats.prototype.log=function(){var averageFps,averageFrameTimeMs,averageFrameTimeMsY,bitmap,ce,clr,drawMatrix,field,fiveMsY,h,i,j,legend,len,len1,missedFrames,perfectFrameCount,ref,ref1,ref2,sampleField,size,tenMsY,totalFrames,w,y;if(this.stats.length>0){for(!(null!=(ref=Neptune.Art.DevTools.DomConsole)?ref.enabled:void 0)&&(ce=GlobalEpochCycle.activeCanvasElements[0]),bitmap=new Canvas.Bitmap(size=ce?ce.canvasBitmap.size:point(1e3,600)),w=size.w,h=size.h,bitmap.clear("#fff"),drawMatrix=this.getDrawMatrix(size),y=floor(drawMatrix.transformY(0,1/60)),tenMsY=floor(drawMatrix.transformY(0,.01)),fiveMsY=floor(drawMatrix.transformY(0,.005)),bitmap.drawRectangle(null,rect(0,y,w,1),{color:"#0007"}),ref1=GlobalEpochStat.statFields,i=0,len=ref1.length;i<len;i++)sampleField=ref1[i],this.drawAllSamplesForOneField(bitmap,drawMatrix,sampleField);for(legend={},this.drawLabeledHLine(bitmap,40,w,tenMsY,"#0007","10ms"),this.drawLabeledHLine(bitmap,40,w,fiveMsY,"#0007","5ms"),this.drawEvents(bitmap,drawMatrix),totalFrames=this.stats.length,averageFrameTimeMs=this.sampleTimeRange/totalFrames,perfectFrameCount=60*this.sampleTimeRange+.5|0,missedFrames=perfectFrameCount-totalFrames,averageFrameTimeMsY=floor(drawMatrix.transformY(0,averageFrameTimeMs)),(averageFps=1/averageFrameTimeMs+.5|0)<55&&this.drawLabeledHLine(bitmap,40,w,y,"#0007","60fps - 16.7ms"),this.drawLabeledHLine(bitmap,40,w,averageFrameTimeMsY,"#0007","average: "+averageFps+"fps (miss-rate: "+(100*missedFrames/perfectFrameCount).toPrecision(2)+"% "+missedFrames+"/"+perfectFrameCount+")"),y=0,ref2=GlobalEpochStat.statFields,j=0,len1=ref2.length;j<len1;j++)field=ref2[j],clr=GlobalEpochStat.statColors[field],bitmap.drawRectangle(null,rect(0,y,75,23),{color:clr}),bitmap.drawText(point(5,y+18),field,{size:16,color:rgbColor("white")}),y+=25;return bitmap.drawBorder(null,bitmap.size,"#eee"),ce?(log("showing GlobalEpochStats"),ce.canvasBitmap.drawBitmap(null,bitmap,{opacity:.9})):log(bitmap)}},GlobalEpochStats.prototype.logAndResetWhenIdle=function(){var samples;if(samples=this.stats.length,samples>0)return timeout(1e3,function(_this){return function(){if(samples===_this.stats.length&&GlobalEpochStats.enabled)return _this.log(),_this.reset()}}(this))},GlobalEpochStats}(Foundation.BaseObject)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(270).addModules({V1Loader:__webpack_require__(271),V1Writer:__webpack_require__(280)})},function(module,exports,__webpack_require__){var Engine,File,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Engine=__webpack_require__(154),module.exports=Engine.File||Engine.addNamespace("File",File=function(superClass){function File(){return File.__super__.constructor.apply(this,arguments)}return extend(File,superClass),File}(Neptune.Base))},function(module,exports,__webpack_require__){var Atomic,BaseObject,Binary,Canvas,Core,Element,Elements,EncodedImage,Foundation,Promise,StateEpoch,V1Loader,Xbd,compositeModes,inspect,layoutModes,log,lowerCamelCase,matrix,merge,mergeInto,point,rect,stateEpoch,supportedCompositeModes,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),
Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),Xbd=__webpack_require__(272),Core=__webpack_require__(157),Elements=__webpack_require__(212),Binary=Foundation.Binary,inspect=Foundation.inspect,BaseObject=Foundation.BaseObject,Promise=Foundation.Promise,log=Foundation.log,mergeInto=Foundation.mergeInto,lowerCamelCase=Foundation.lowerCamelCase,merge=Foundation.merge,point=Atomic.point,rect=Atomic.rect,matrix=Atomic.matrix,EncodedImage=Binary.EncodedImage,Element=Core.Element,StateEpoch=Core.StateEpoch,stateEpoch=StateEpoch.stateEpoch,compositeModes={normal:0,add:1,sub:2,mul:3,destOver:4,replace:5,alphaMask:6,inverseAlphaMask:7,erase:8,0:"normal",1:"add",2:"sub",3:"mul",4:"destOver",5:"replace",6:"alphaMask",7:"inverseAlphaMask",8:"erase"},supportedCompositeModes={normal:"normal",add:"add"},layoutModes={leftAddWidthFixed:0,rightAddWidthFixed:1,centeredWidthFixed:2,leftAddWidthChildren:3,rightAddWidthChildren:4,centeredWidthChildren:5,bothAdd:6,bothMul:7,bothStretch:8,0:"leftAddWidthFixed",1:"rightAddWidthFixed",2:"centeredWidthFixed",3:"leftAddWidthChildren",4:"rightAddWidthChildren",5:"centeredWidthChildren",6:"bothAdd",7:"bothMul",8:"bothStretch"},module.exports=V1Loader=function(superClass){function V1Loader(){return V1Loader.__super__.constructor.apply(this,arguments)}return extend(V1Loader,superClass),V1Loader.singletonClass(),V1Loader.load=function(data,bitmapFactory){return this.singleton.load(data,bitmapFactory)},V1Loader.prototype.load=function(data,bitmapFactory1){return this.bitmapFactory=null!=bitmapFactory1?bitmapFactory1:Canvas.Bitmap,this.decodeTopTag(Xbd.parse(data).tag("art_file")).then(function(_this){return function(artFile){var child;return artFile.axis=point(),artFile.location=point(),artFile.children=function(){var i,len,ref,results;for(ref=artFile.getPendingChildren(),results=[],i=0,len=ref.length;i<len;i++)child=ref[i],child.getPendingIsMask()||results.push(child);return results}(),artFile.bitmapFactory=_this.bitmapFactory,stateEpoch.onNextReady(function(){return artFile})}}(this))},V1Loader.objectFactory={art_file:function(){return new Element},pego:function(){return new Element},art_stencil_shape:function(){return new Element},art_bitmap:function(tag,loader){var bitmap,bitmap_id;return bitmap_id=tag.attrs.bitmap_id,bitmap=loader.bitmaps[bitmap_id],new Elements.BitmapElement({bitmap:bitmap})}},V1Loader.prototype.decodeBitmapsTag=function(bitmapsTag){var promises,tag;return bitmapsTag?(this.bitmaps=[],promises=function(){var i,len,ref,results;for(ref=bitmapsTag.tags,results=[],i=0,len=ref.length;i<len;i++)tag=ref[i],results.push(function(_this){return function(tag){return EncodedImage.toImage(tag.attrs.pixel_data).then(function(image){var bitmapId;return bitmapId=0|tag.attrs.bitmap_id,_this.bitmaps[bitmapId]=_this.bitmapFactory.newBitmap(image)})}}(this)(tag));return results}.call(this),Promise.all(promises)):Promise.resolve()},V1Loader.prototype.decodeTopTag=function(topTag){return this.decodeBitmapsTag(topTag.tag("bitmaps")).then(function(_this){return function(){return _this.createElementFromTag(topTag)}}(this))},V1Loader.prototype.createElement=function(tag){var constructor;return constructor=V1Loader.objectFactory[tag.name],constructor?constructor(tag,this):(this.log("WARNING: unknown object type: "+tag.name+". Defaulting to Art.Engine.Core.Element"),new Element)},V1Loader.prototype.populateChildrenFromTag=function(parent,childrenTag){var child,children,i,j,len,len1,postChildren,ref,results,route,shapeChildren;for(shapeChildren=[],children=[],postChildren=[],route={"-stencil":shapeChildren,"+stencil":shapeChildren,stencil:shapeChildren,normal:children,post:postChildren},ref=childrenTag.tags,i=0,len=ref.length;i<len;i++)child=ref[i],route[child.attrs.stack_mode||"normal"].push(this.createElementFromTag(child,parent));for(parent.setChildren(children),shapeChildren.length>0&&(shapeChildren[0].isMask=!0,parent.addChild(shapeChildren[0]),shapeChildren.length>1&&this.log("WARNING - loading more than one mask (shape/stencil) child not currently supported! (using first one only)")),results=[],j=0,len1=postChildren.length;j<len1;j++)child=postChildren[j],results.push(parent.addChild(child));return results},V1Loader.prototype.decodeHorizontalLinearLayout=function(object,layout,l,s,locationOut,sizeOut){switch(layout){case layoutModes.leftAddWidthFixed:return mergeInto(locationOut,{x:l}),mergeInto(sizeOut,{w:s});case layoutModes.rightAddWidthFixed:return mergeInto(locationOut,{x:l,xpw:1}),mergeInto(sizeOut,{w:s});case layoutModes.centeredWidthFixed:return mergeInto(locationOut,{xpw:l}),mergeInto(sizeOut,{w:s});case layoutModes.bothAdd:return mergeInto(locationOut,{x:l}),mergeInto(sizeOut,{w:s,wpw:1});case layoutModes.bothMul:return mergeInto(locationOut,{xpw:l}),mergeInto(sizeOut,{wpw:s});case layoutModes.bothStretch:case layoutModes.centeredWidthChildren:case layoutModes.rightAddWidthChildren:case layoutModes.leftAddWidthChildren:return this.log("WARNING: unsupported layout "+layoutModes[layout]+" for "+channel+" loc="+location+" size="+size)}},V1Loader.prototype.decodeVerticalLinearLayout=function(object,layout,l,s,locationOut,sizeOut){switch(layout){case layoutModes.leftAddWidthFixed:return mergeInto(locationOut,{y:l}),mergeInto(sizeOut,{h:s});case layoutModes.rightAddWidthFixed:return mergeInto(locationOut,{y:l,yph:1}),mergeInto(sizeOut,{h:s});case layoutModes.centeredWidthFixed:return mergeInto(locationOut,{yph:l}),mergeInto(sizeOut,{h:s});case layoutModes.bothAdd:return mergeInto(locationOut,{y:l}),mergeInto(sizeOut,{h:s,hph:1});case layoutModes.bothMul:return mergeInto(locationOut,{yph:l}),mergeInto(sizeOut,{hph:s});case layoutModes.bothStretch:case layoutModes.centeredWidthChildren:case layoutModes.rightAddWidthChildren:case layoutModes.leftAddWidthChildren:return this.log("WARNING: unsupported layout "+layoutModes[layout]+" for "+channel+" loc="+location+" size="+size)}},V1Loader.prototype.decodeLayout=function(object,tag,parent){var hVal,location,size,wVal,xLayout,xVal,yLayout,yVal;return xLayout=0|(tag.attrs.x_layout_mode||layoutModes.leftAddWidthFixed),yLayout=0|(tag.attrs.y_layout_mode||layoutModes.leftAddWidthFixed),xVal=(tag.attrs.x_val||0)-0,yVal=(tag.attrs.y_val||0)-0,wVal=(tag.attrs.w_val||0)-0,hVal=(tag.attrs.h_val||0)-0,location={},size={},this.decodeHorizontalLinearLayout(object,xLayout,xVal,wVal,location,size),this.decodeVerticalLinearLayout(object,yLayout,yVal,hVal,location,size),object.location=location,object.size=size},V1Loader.prototype.setCompositeMode=function(object,mode){return supportedCompositeModes[compositeModes[mode]]||this.log("WARNING: unknown composite mode: "+mode),object.compositeMode=supportedCompositeModes[compositeModes[mode]]||"normal"},V1Loader.prototype.createElementFromTag=function(tag,parent){var children,k,object,ref,tagKey,userProps,v;null==parent&&(parent=null),object=this.createElement(tag),object.axis=point(tag.attrs.handle||point(.5,.5)),this.decodeLayout(object,tag,parent),userProps={},ref=tag.attrs;for(k in ref)switch(v=ref[k],k){case"name":object.name=v;break;case"matrix":object.elementToParentMatrix=matrix(v);break;case"art_engine_version":break;case"kimi_editor_version":break;case"composite_mode":this.setCompositeMode(object,v);break;case"drop_in_enabled":userProps.dropInEnabled=!0;break;case"lock_mode":break;case"handle":case"w_val":case"h_val":case"x_val":case"y_val":case"x_layout_mode":case"y_layout_mode":case"stack_mode":break;default:switch(tagKey=tag.name+":"+k){case"art_file:bitmaps":case"art_bitmap:bitmap_id":break;default:userProps[lowerCamelCase(k)]=v.toString(),this.log("WARNING: unknown tag:attribute: "+tagKey+" (ignored)")}}return object.userProps=userProps,(children=tag.tags.children)&&this.populateChildrenFromTag(object,children),object},V1Loader}(BaseObject)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(273)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(274).includeInNamespace(__webpack_require__(276)).addModules({XbdDictionary:__webpack_require__(278),XbdTag:__webpack_require__(277)})},function(module,exports,__webpack_require__){var Art,Xbd,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(275),module.exports=Art.Xbd||Art.addNamespace("Xbd",Xbd=function(superClass){function Xbd(){return Xbd.__super__.constructor.apply(this,arguments)}return extend(Xbd,superClass),Xbd}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){var Xbd,XbdTag,_package;Xbd=__webpack_require__(274),XbdTag=__webpack_require__(277),module.exports=[[XbdTag,"fromXbd","createTagFactories"],{parse:XbdTag.fromXbd,"package":_package=__webpack_require__(279),version:_package.version}]},function(module,exports,__webpack_require__){var BaseObject,Binary,Foundation,WriteStream,Xbd,XbdDictionary,XbdTag,binary,countKeys,createObjectTreeFactories,inspect,isFunction,log,plainObjectsDeepEq,stream,upperCamelCase,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Xbd=__webpack_require__(274),XbdDictionary=__webpack_require__(278),Binary=Foundation.Binary,isFunction=Foundation.isFunction,BaseObject=Foundation.BaseObject,log=Foundation.log,countKeys=Foundation.countKeys,upperCamelCase=Foundation.upperCamelCase,createObjectTreeFactories=Foundation.createObjectTreeFactories,plainObjectsDeepEq=Foundation.plainObjectsDeepEq,inspect=Foundation.inspect,binary=Binary.binary,stream=Binary.stream,WriteStream=Binary.WriteStream,module.exports=XbdTag=function(superClass){function XbdTag(name1,attrs1,tags1){this.name=name1,this.attrs=null!=attrs1?attrs1:{},this.tags=null!=tags1?tags1:[]}var indentString,writeXbdHeader,xbdHeader;return extend(XbdTag,superClass),XbdTag.createTagFactories=function(tagNames,factoryNameSuffix){return null==factoryNameSuffix&&(factoryNameSuffix="Tag"),createObjectTreeFactories({suffix:factoryNameSuffix},tagNames,function(tagName,attrs,subTags){return new XbdTag(tagName,attrs,subTags)})},XbdTag.fromXbd=function(input){var header;return input=stream(input),header=input.read(xbdHeader.length),XbdTag._parse(input,XbdDictionary.parse(input,"tag names"),XbdDictionary.parse(input,"attribute names"),XbdDictionary.parse(input,"attribute values"))},XbdTag.prototype.inspect=function(){return this.toXml("  ")},XbdTag.prototype.eq=function(b){return b&&plainObjectsDeepEq(this.plainObjects,b.plainObjects)},XbdTag.prototype.toXbd=function(){var attrNamesDictionary,attrValuesDictionary,ref,tagNamesDictionary,writeStream;return ref=this,tagNamesDictionary=ref.tagNamesDictionary,attrNamesDictionary=ref.attrNamesDictionary,attrValuesDictionary=ref.attrValuesDictionary,writeXbdHeader(writeStream=new WriteStream),tagNamesDictionary.writeWithPromise(writeStream).then(function(){return attrNamesDictionary.writeWithPromise(writeStream)}).then(function(){return attrValuesDictionary.writeWithPromise(writeStream)}).then(function(_this){return function(){return _this._getBinaryStringPromise(tagNamesDictionary,attrNamesDictionary,attrValuesDictionary)}}(this)).then(function(binaryString){return writeStream.writeAsiString(binaryString),writeStream.binaryStringPromise})},XbdTag.prototype.tag=function(name){var i,len,ref,tag;for(ref=this.tags,i=0,len=ref.length;i<len;i++)if(tag=ref[i],tag.name===name)return tag;return null},XbdTag.prototype.toString=function(){return this.toXml("  ")},XbdTag.prototype.toPlainObjects=function(){var attrs,i,k,len,out,ref,ref1,tag,v;if(out=[this.name],0<countKeys(this.attrs)){attrs={},ref=this.attrs;for(k in ref)v=ref[k],attrs[k]=v.toString();out.push(attrs)}if(this.tags.length>0)for(ref1=this.tags,i=0,len=ref1.length;i<len;i++)tag=ref1[i],out.push(tag.toPlainObjects());return out},XbdTag.prototype.toXml=function(indent){var attr_xml;return null==indent&&(indent=""),attr_xml="",this.attrs&&(attr_xml=this._attributesXml())&&(attr_xml=" "+attr_xml),0===this.tags.length?"<"+this.name+attr_xml+"/>":"<"+this.name+attr_xml+">\n"+this._tagsXml(indent)+"\n</"+this.name+">"},XbdTag.getter({xbdPromise:function(){return this.toXbd()},xml:function(){return this.toXml()},plainObjects:function(){return this.toPlainObjects()},tagNamesDictionary:function(dictionary){var i,len,ref,tag;for(null==dictionary&&(dictionary=new XbdDictionary([],"tag names")),dictionary.add(this.name),ref=this.tags,i=0,len=ref.length;i<len;i++)tag=ref[i],tag.getTagNamesDictionary(dictionary);return dictionary},attrNamesDictionary:function(dictionary){var i,k,len,ref,ref1,tag,v;null==dictionary&&(dictionary=new XbdDictionary([],"attribute names")),ref=this.attrs;for(k in ref)v=ref[k],dictionary.add(k);for(ref1=this.tags,i=0,len=ref1.length;i<len;i++)tag=ref1[i],tag.getAttrNamesDictionary(dictionary);return dictionary},attrValuesDictionary:function(dictionary){var i,k,len,ref,ref1,tag,v;null==dictionary&&(dictionary=new XbdDictionary([],"attribute values")),ref=this.attrs;for(k in ref)v=ref[k],dictionary.add(v);for(ref1=this.tags,i=0,len=ref1.length;i<len;i++)tag=ref1[i],tag.getAttrValuesDictionary(dictionary);return dictionary}}),xbdHeader="SBDXML\0",writeXbdHeader=function(writeStream){return writeStream.write("SBDXML"),writeStream.write([1,0])},indentString=function(str,indentStr){return indentStr+str.split("\n").join("\n"+indentStr)},XbdTag.prototype._attributesXml=function(){var k,out,v;return out=function(){var ref,results;ref=this.attrs,results=[];for(k in ref)v=ref[k],results.push(k+"='"+v+"'");return results}.call(this),out.join(" ")},XbdTag.prototype._tagsXml=function(indent){var out;return out=this.tags.map(function(tag){return tag.toXml(indent)}),indentString(out.join("\n"),indent)},XbdTag.prototype._getAttributesBinaryStringPromise=function(attrNamesDictionary,attrValuesDictionary){var name,ref,value,writeStream;writeStream=new WriteStream,ref=this.attrs;for(name in ref)value=ref[name],writeStream.writeAsi(attrNamesDictionary.get(name)),writeStream.writeAsi(attrValuesDictionary.get(value));return writeStream.binaryStringPromise},XbdTag.prototype._writeSubTagsWithPromise=function(writeStream,tagNamesDictionary,attrNamesDictionary,attrValuesDictionary){var index,processNext;return index=0,(processNext=function(_this){return function(){var ref,tag;return(tag=null!=(ref=_this.tags)?ref[index++]:void 0)?tag._getBinaryStringPromise(tagNamesDictionary,attrNamesDictionary,attrValuesDictionary).then(function(binaryString){return writeStream.writeAsiString(binaryString),processNext()}):Promise.resolve()}}(this))()},XbdTag.prototype._getBinaryStringPromise=function(tagNamesDictionary,attrNamesDictionary,attrValuesDictionary){var writeStream;return writeStream=new WriteStream,writeStream.writeAsi(tagNamesDictionary.get(this.name)),this._getAttributesBinaryStringPromise(attrNamesDictionary,attrValuesDictionary).then(function(_this){return function(attributesBinaryString){return writeStream.writeAsiString(attributesBinaryString),_this._writeSubTagsWithPromise(writeStream,tagNamesDictionary,attrNamesDictionary,attrValuesDictionary)}}(this)).then(function(){return writeStream.binaryStringPromise})},XbdTag._parse=function(stream,tagsd,attrsd,valuesd){var attrData,attrs,n,name,name1,subTag,tagData,tags,v;for(tagData=stream.readAsiString(),name=tagsd.readString(tagData).toString(),attrData=tagData.readAsiString(),attrs=null;!attrData.done();)attrs||(attrs={}),n=attrsd.readString(attrData).toString(),v=valuesd.readString(attrData),attrs[n]=v;for(tags=[];!tagData.done();)subTag=XbdTag._parse(tagData,tagsd,attrsd,valuesd),tags.push(subTag),tags[name1=subTag.name]||(tags[name1]=subTag);return new XbdTag(name,attrs,tags)},XbdTag}(BaseObject)},function(module,exports,__webpack_require__){var BaseObject,Binary,WriteStream,XbdDictionary,binary,inspect,log,ref,stream,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),Binary=ref.Binary,BaseObject=ref.BaseObject,log=ref.log,inspect=ref.inspect,binary=Binary.binary,WriteStream=Binary.WriteStream,stream=Binary.stream,module.exports=XbdDictionary=function(superClass){function XbdDictionary(strings1,name1){this.strings=strings1,this.name=name1}return extend(XbdDictionary,superClass),XbdDictionary.parse=function(stream,name){var encodedDictionary,i,len,lengths,strings;return encodedDictionary=stream.readAsiString(),lengths=function(){var j,ref1,results;for(results=[],i=j=0,ref1=encodedDictionary.readAsi();0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j)results.push(encodedDictionary.readAsi());return results}(),strings=function(){var j,len1,results;for(results=[],j=0,len1=lengths.length;j<len1;j++)len=lengths[j],results.push(encodedDictionary.read(len));return results}(),new XbdDictionary(strings,name)},XbdDictionary.prototype.add=function(string){var index;return string=binary(string),0<=(index=this._indexOf(string))?index:(this.strings.push(string),this.strings.length)},XbdDictionary.prototype.get=function(string){var index;if(string=binary(string),0<=(index=this._indexOf(string)))return index;throw new Error("string not found in dictionary: "+inspect(string))},XbdDictionary.prototype.readString=function(stream){var id,string;if(id=stream.readAsi(),string=this.strings[id],!string)throw"string id("+id+") not in "+this.name+" dictionary. keys = '"+Object.keys(this.strings)+"'";return string},XbdDictionary.getter({binaryStringPromise:function(){var j,k,len1,len2,normalizedStrings,s,string,writeStream;for(writeStream=new WriteStream,normalizedStrings=this._getNormalizeStrings(),writeStream.writeAsi(normalizedStrings.length),j=0,len1=normalizedStrings.length;j<len1;j++)s=normalizedStrings[j],writeStream.writeAsi(s.length);for(k=0,len2=normalizedStrings.length;k<len2;k++)string=normalizedStrings[k],writeStream.write(string);return writeStream.binaryStringPromise}}),XbdDictionary.prototype.writeWithPromise=function(writeStream){return this.binaryStringPromise.then(function(binaryString){return writeStream.writeAsiString(binaryString)})},XbdDictionary.prototype._getNormalizeStrings=function(){var j,len1,ref1,results,s;for(ref1=this.strings,results=[],j=0,len1=ref1.length;j<len1;j++)s=ref1[j],results.push(binary(s));return results},XbdDictionary.prototype._indexOf=function(binaryString){var i,j,len1,ref1,s;for(ref1=this.strings,i=j=0,len1=ref1.length;j<len1;i=++j)if(s=ref1[i],s.eq(binaryString))return i;return-1},XbdDictionary}(BaseObject)},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-foundation":"git://github.com/imikimi/art-foundation.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.4.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"art-xbd",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"0.0.4"}},function(module,exports,__webpack_require__){(function(module){var ArtBitmapTag,ArtFileTag,ArtRectangleTag,ArtSolidFillTag,ArtStencilShapeTag,Atomic,BaseObject,BitmapTag,BitmapsTag,Canvas,ChildrenTag,Core,Elements,Foundation,PegoTag,RootTag,V1Writer,Xbd,XbdTag,createObjectTreeFactories,createTagFactories,createWithPostCreate,elementNameToV1NameMap,elementToTagFactory,floatEq,log,point,propsEq,ref,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Atomic=__webpack_require__(125),Canvas=__webpack_require__(137),Xbd=__webpack_require__(272),Core=__webpack_require__(157),Elements=__webpack_require__(212),BaseObject=Foundation.BaseObject,log=Foundation.log,createObjectTreeFactories=Foundation.createObjectTreeFactories,createWithPostCreate=Foundation.createWithPostCreate,floatEq=Foundation.floatEq,point=Atomic.point,XbdTag=Xbd.XbdTag,createTagFactories=Xbd.createTagFactories,propsEq=Core.EpochedObject.propsEq,ref=createTagFactories("Root bitmaps bitmap art_file pego art_bitmap children art_stencil_shape art_rectangle art_solid_fill"),ArtFileTag=ref.ArtFileTag,PegoTag=ref.PegoTag,ArtBitmapTag=ref.ArtBitmapTag,ChildrenTag=ref.ChildrenTag,ArtStencilShapeTag=ref.ArtStencilShapeTag,ArtRectangleTag=ref.ArtRectangleTag,ArtSolidFillTag=ref.ArtSolidFillTag,BitmapsTag=ref.BitmapsTag,BitmapTag=ref.BitmapTag,RootTag=ref.RootTag,elementNameToV1NameMap={Element:"pego",BitmapElement:"art_bitmap"},elementToTagFactory={Element:PegoTag,RectangleElement:PegoTag,BitmapElement:ArtBitmapTag},module.exports=createWithPostCreate(module,V1Writer=function(superClass){function V1Writer(){this._toXbdTag=bind(this._toXbdTag,this),this.toEncodedArtFile=bind(this.toEncodedArtFile,this),V1Writer.__super__.constructor.apply(this,arguments),this.reset()}return extend(V1Writer,superClass),V1Writer.singletonClass(),V1Writer.toArtFileTags=function(element){return V1Writer.singleton.toArtFileTags(element)},V1Writer.toEncodedArtFile=function(element){return V1Writer.singleton.toEncodedArtFile(element)},V1Writer.prototype.reset=function(){return this.bitmapTags={},this.bitmapTagCount=0},V1Writer.prototype.toArtFileTags=function(rootElement){return this.reset(),rootElement.onNextReady().then(function(_this){return function(){return _this._generateBitmapsTag(rootElement)}}(this)).then(function(_this){return function(){return Promise.all([_this._encodeProps(rootElement),_this._getChildrenTagPromise(rootElement)])}}(this)).then(function(_this){return function(arg){var childrenTag,encodedProps;return encodedProps=arg[0],childrenTag=arg[1],encodedProps.art_engine_version="0.0.2",encodedProps.kimi_editor_version="0.6.0",RootTag(ArtFileTag(encodedProps,childrenTag,_this.bitmapsTag))}}(this))},V1Writer.prototype.toEncodedArtFile=function(element){return this.toArtFileTags(element).then(function(tag){return tag.toXbd()})},V1Writer.prototype._encodeLayout=function(element,encodedProps){var angle,axis,currentLocation,currentSize,e2p,matrix;if(currentSize=element.currentSize,currentLocation=element.currentLocation,axis=element.axis,e2p=element.getElementToParentMatrix(),matrix=e2p.withLocation(0).toArray().join(","),"1,1,0,0,0,0"!==matrix&&(encodedProps.matrix=matrix),floatEq(0,angle=e2p.getAngle())||(encodedProps.angle=""+angle),encodedProps.w_val=currentSize.x.toString(),encodedProps.h_val=currentSize.y.toString(),propsEq(currentLocation,point())||(encodedProps.x_val=currentLocation.x.toString(),encodedProps.y_val=currentLocation.y.toString()),!propsEq(axis,point(.5)))return encodedProps.handle="("+axis.x+","+axis.y+")"},V1Writer.prototype._addTagForBitmap=function(arg){var bitmap,encodedBitmap,uniqueId,userProps;return bitmap=arg.bitmap,userProps=arg.userProps,uniqueId=bitmap.uniqueId,this.bitmapTags[uniqueId]?Promise.resolve():(userProps&&(encodedBitmap=userProps.encodedBitmap),Promise.resolve().then(function(_this){return function(){return encodedBitmap||bitmap.toJpg()}}(this)).then(function(_this){return function(encodedBitmap){return _this.bitmapTags[uniqueId]=BitmapTag({bitmap_id:_this.bitmapTagCount++,pixel_data:encodedBitmap})}}(this)))},V1Writer.prototype._populateBitmapSubTagsRecursive=function(element){var bitmap,children;return bitmap=element.bitmap,children=element.children,Promise.resolve().then(function(_this){return function(){return bitmap&&_this._addTagForBitmap(element)}}(this)).then(function(_this){return function(){var child;return Promise.all(function(){var i,len,results;for(results=[],i=0,len=children.length;i<len;i++)child=children[i],results.push(this._populateBitmapSubTagsRecursive(child));return results}.call(_this))}}(this))},V1Writer.prototype._generateBitmapsTag=function(element){return this._populateBitmapSubTagsRecursive(element).then(function(_this){return function(){var k,tag;if(_this.bitmapTagCount>0)return _this.bitmapsTag=BitmapsTag(function(){var ref1,results;ref1=this.bitmapTags,results=[];for(k in ref1)tag=ref1[k],results.push(tag);return results}.call(_this))}}(this))},V1Writer.prototype._encodeProps=function(element){var bitmapTag,encodedProps,k,minimalProps,v;minimalProps=element.minimalProps,encodedProps={};for(k in minimalProps)switch(v=minimalProps[k],k){case"userProps":v.dropInEnabled&&(encodedProps.drop_in_enabled="true",encodedProps.lock_mode="2");break;case"compositeMode":"alphaMask"===v&&(encodedProps.stack_mode="+stencil");break;case"key":encodedProps.name=v.toString();break;case"elementToParentMatrix":encodedProps.matrix=v.toString();break;case"bitmap":(bitmapTag=this.bitmapTags[v.uniqueId])||console.warn("Bitmap missing: "+v.uniqueId),encodedProps.bitmap_id=bitmapTag.attrs.bitmap_id;break;case"location":case"children":case"parent":case"currentSize":case"size":case"axis":case"color":case"scale":case"angle":break;default:console.warn("Art.Engine.V1Writer: ignored unsupported prop type: elementType: "+element["class"].name+", propType: "+k)}return this._encodeLayout(element,encodedProps),encodedProps},V1Writer.prototype._getChildrenTagPromise=function(element){return Promise.resolve().then(function(_this){return function(){var child,ref1;switch(element["class"].name){case"RectangleElement":return ChildrenTag(null,ArtStencilShapeTag({stack_mode:"+stencil",x_layout_mode:"7",x_val:"0.5",w_val:"1",y_layout_mode:"7",y_val:"0.5",h_val:"1"},ArtRectangleTag()),ArtSolidFillTag({color:(null!=(ref1=element.color)?ref1.rawRgbaHexString:void 0)||"000000ff"}));default:return Promise.all(function(){var i,len,ref2,results;for(ref2=element.children,results=[],i=0,len=ref2.length;i<len;i++)child=ref2[i],results.push(this._toXbdTag(child));return results}.call(_this)).then(function(savedChildren){return savedChildren.length>0&&ChildrenTag(savedChildren)})}}}(this))},V1Writer.prototype._toXbdTag=function(element){var TagFactory;return(TagFactory=elementToTagFactory[element["class"].name])?Promise.all([this._encodeProps(element),this._getChildrenTagPromise(element)]).then(function(_this){return function(arg){var childrenTag,encodedProps;return encodedProps=arg[0],childrenTag=arg[1],TagFactory(encodedProps,childrenTag)}}(this)):(console.warn("Art.Engine.V1Writer: unsupported Element type: "+element["class"].name),null)},V1Writer}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(282)},function(module,exports,__webpack_require__){var Aim,CanvasElement,Element,ElementFactory,Engine,FullScreenApp,React,log,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;log=__webpack_require__(19).log,Engine=__webpack_require__(152),React=__webpack_require__(283),ElementFactory=Engine.ElementFactory,Element=Engine.Element,CanvasElement=Engine.CanvasElement,FullScreenApp=Engine.FullScreenApp,module.exports=React,Aim=__webpack_require__(300),React.addElementFactories=function(elementClassNames){var factories,k,ref,v;ref=factories=Aim.createVirtualElementFactories(React.VirtualElementArtEngine,elementClassNames);for(k in ref)v=ref[k],React[k]||(React[k]=v);return factories},React.VirtualElementArtEngine=function(superClass){function VirtualElementArtEngine(){return VirtualElementArtEngine.__super__.constructor.apply(this,arguments)}return extend(VirtualElementArtEngine,superClass),VirtualElementArtEngine.prototype._updateElementProps=function(newProps){var addedOrChanged,removed;return addedOrChanged=function(_this){return function(k,v){return _this.element.setProperty(k,v)}}(this),removed=function(_this){return function(k,v){return _this.element.resetProperty(k)}}(this),this._updateElementPropsHelper(newProps,addedOrChanged,removed)},VirtualElementArtEngine.prototype._setElementChildren=function(childElements){return this.element.setChildren(childElements)},VirtualElementArtEngine.prototype._newElement=function(elementClassName,props,childElements,bindToOrCreateNewParentElementProps){var element;return element=ElementFactory.newElement(this.elementClassName,props,childElements),bindToOrCreateNewParentElementProps&&(bindToOrCreateNewParentElementProps instanceof Element?bindToOrCreateNewParentElementProps.addChild(element):(props=merge(bindToOrCreateNewParentElementProps,{webgl:"true"===Browser.Parse.query().webgl,children:[element]}),new CanvasElement(props))),element.creator=this,element},VirtualElementArtEngine.prototype._newErrorElement=function(){return this._newElement("RectangleElement",{key:"ART_REACT_ERROR_CREATING_CHILD_PLACEHOLDER",color:"orange"})},VirtualElementArtEngine}(React.VirtualElement),React.fullScreenReactAppInit=function(a,b){var initOptions,topComponent;return initOptions=isPlainObject(a)?(topComponent=b,a):(topComponent=a,b||{}),FullScreenApp.init(initOptions).then(function(){return Promise.resolve(topComponent).then(function(topComponent){return topComponent.instantiateAsTopComponent()})})["catch"](function(error){return log.error("ArtReact.fullScreenReactAppInit failed",error)})},React.addElementFactories()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(284).includeInNamespace(__webpack_require__(286)),__webpack_require__(287)},function(module,exports,__webpack_require__){var Art,React,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(285),module.exports=Art.React||Art.addNamespace("React",React=function(superClass){function React(){return React.__super__.constructor.apply(this,arguments)}return extend(React,superClass),React}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments);
}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(287)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(288).includeInNamespace(__webpack_require__(289)).addModules({Component:__webpack_require__(290),HotStyleProps:__webpack_require__(298),ReactArtEngineEpoch:__webpack_require__(292),VirtualElement:__webpack_require__(299),VirtualNode:__webpack_require__(291)})},function(module,exports,__webpack_require__){var Core,React,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;React=__webpack_require__(284),module.exports=React.Core||React.addNamespace("Core",Core=function(superClass){function Core(){return Core.__super__.constructor.apply(this,arguments)}return extend(Core,superClass),Core}(Neptune.Base))},function(module,exports,__webpack_require__){var Component,_package,arrayWith,isPlainArray,isString,log,reactArtEngineEpoch,ref;Component=__webpack_require__(290),reactArtEngineEpoch=__webpack_require__(292).reactArtEngineEpoch,ref=__webpack_require__(19),isPlainArray=ref.isPlainArray,isString=ref.isString,arrayWith=ref.arrayWith,log=ref.log,module.exports=[[Component,"createAndInstantiateTopComponent","createComponentFactory"],{instantiateTopComponent:function(componentInstance,bindToOrCreateNewParentElementProps){return console.warn("React.instantiateTopComponent is DEPRICATED. Use: componentInstance.instantiateAsTopComponent"),componentInstance.instantiateAsTopComponent(bindToOrCreateNewParentElementProps)},onNextReady:function(callback){return reactArtEngineEpoch.onNextReady(callback)},"package":_package=__webpack_require__(297),version:_package.version,objectTreeFactoryOptions:{mergePropsInto:function(into,props){var k,oldValue,v;for(k in props)v=props[k],into[k]="text"===k&&isPlainArray(v)&&isPlainArray(oldValue=into[k])?oldValue.concat(v):v;return into},preprocessElement:function(element){return isString(element)?{text:[element]}:element}}}]},function(module,exports,__webpack_require__){(function(module){var ArtEngineCore,BaseObject,Foundation,GlobalEpochCycle,HotLoader,InstanceFunctionBindingMixin,React,ReactArtEngineEpoch,StateEpoch,VirtualNode,arrayWithout,clone,compactFlatten,countStep,createObjectTreeFactory,createWithPostCreate,defineModule,fastBind,formattedInspect,getModuleBeingDefined,globalCount,globalEpochCycle,inspect,isArray,isFunction,isObject,isString,keepIfRubyTrue,log,merge,mergeInto,onNextStateEpochReady,reactArtEngineEpoch,runHot,select,shallowClone,slice,stackTime,stateEpoch,time,timePerformance,upperCamelCase,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),VirtualNode=__webpack_require__(291),ReactArtEngineEpoch=__webpack_require__(292),defineModule=Foundation.defineModule,log=Foundation.log,merge=Foundation.merge,mergeInto=Foundation.mergeInto,clone=Foundation.clone,shallowClone=Foundation.shallowClone,inspect=Foundation.inspect,compactFlatten=Foundation.compactFlatten,keepIfRubyTrue=Foundation.keepIfRubyTrue,BaseObject=Foundation.BaseObject,fastBind=Foundation.fastBind,slice=Foundation.slice,isObject=Foundation.isObject,isString=Foundation.isString,isArray=Foundation.isArray,isFunction=Foundation.isFunction,globalCount=Foundation.globalCount,time=Foundation.time,stackTime=Foundation.stackTime,countStep=Foundation.countStep,createWithPostCreate=Foundation.createWithPostCreate,arrayWithout=Foundation.arrayWithout,upperCamelCase=Foundation.upperCamelCase,createObjectTreeFactory=Foundation.createObjectTreeFactory,select=Foundation.select,formattedInspect=Foundation.formattedInspect,getModuleBeingDefined=Foundation.getModuleBeingDefined,InstanceFunctionBindingMixin=Foundation.InstanceFunctionBindingMixin,reactArtEngineEpoch=ReactArtEngineEpoch.reactArtEngineEpoch,React=__webpack_require__(288),HotLoader=__webpack_require__(293).HotLoader,runHot=HotLoader.runHot,(ArtEngineCore=Neptune.Art.Engine.Core)?(StateEpoch=ArtEngineCore.StateEpoch,GlobalEpochCycle=ArtEngineCore.GlobalEpochCycle,stateEpoch=StateEpoch.stateEpoch,globalEpochCycle=GlobalEpochCycle.globalEpochCycle,onNextStateEpochReady=function(f){return stateEpoch.onNextReady(f)},timePerformance=function(name,f){return globalEpochCycle.timePerformance(name,f)}):(onNextStateEpochReady=function(f){return reactArtEngineEpoch.onNextReady(f)},timePerformance=function(name,f){return f()}),defineModule(module,function(){var Component;return Component=function(superClass){function Component(props){null==props&&(props=emptyProps),Component.created++,globalCount("ReactComponent_Created"),Component.__super__.constructor.call(this,props),this.state={},this.refs=null,this._pendingState=null,this._virtualAimBranch=null,this._mounted=!1,this._wasMounted=!1,this._bindList=null,this._applyingPendingState=!1,Component.pushCreatedComponent(this)}var defaultComponentDidMount,defaultComponentDidUpdate,defaultComponentWillMount,defaultComponentWillReceiveProps,defaultComponentWillUnmount,defaultComponentWillUpdate,defaultPreprocessProps,defaultPreprocessState,emptyArray,emptyProps,emptyState,getModule,sf,unknownModule;return extend(Component,superClass),Component.abstractClass(),Component.nonBindingFunctions="getInitialState componentWillReceiveProps componentWillMount componentWillUnmount componentWillUpdate componentDidMount componentDidUpdate render".split(/\s+/),Component.created=0,Component.topComponentInstances=[],Component.rerenderAll=function(){var component,j,len,ref,results;for(ref=this.topComponentInstances,results=[],j=0,len=ref.length;j<len;j++)component=ref[j],results.push(component.rerenderAll());return results},Component.prototype.rerenderAll=function(){var component,j,len,ref,results;for(this._queueRerender(),ref=this.subComponents,results=[],j=0,len=ref.length;j<len;j++)component=ref[j],results.push(component.rerenderAll());return results},Component.createAndInstantiateTopComponent=function(spec){return Component.createComponentFactory(spec).instantiateAsTopComponent()},unknownModule={},Component.createComponentFactory=function(spec,BaseClass){var AnonymousComponent,_module,anonymousComponentName,componentClass;return null==BaseClass&&(BaseClass=Component),componentClass=function(){if((null!=spec?spec.prototype:void 0)instanceof Component)return spec;if((null!=spec?spec.constructor:void 0)===Object)return _module=getModule(spec)||unknownModule,_module.uniqueComponentNameId||(_module.uniqueComponentNameId=1),anonymousComponentName="Anonymous"+BaseClass.getClassName(),anonymousComponentName+="_"+_module.uniqueComponentNameId++,anonymousComponentName+=_module.id?"_Module"+_module.id:"_ModuleUnknown",AnonymousComponent=function(superClass1){function AnonymousComponent(){return AnonymousComponent.__super__.constructor.apply(this,arguments)}var k,v;extend(AnonymousComponent,superClass1),AnonymousComponent._name=anonymousComponentName;for(k in spec)v=spec[k],AnonymousComponent.prototype[k]=v;return AnonymousComponent}(BaseClass);throw new Error("Specification Object or class inheriting from Component required.")}.call(this),createWithPostCreate(componentClass)},Component.getModule=getModule=function(spec){return null==spec&&(spec=this.prototype),spec.module||spec.hotModule||getModuleBeingDefined()},Component.getCanHotReload=function(){var ref;return null!=(ref=this.getModule())?ref.hot:void 0},Component._hotReloadUpdate=function(_moduleState){var hotInstances,instance,j,len,name,results;if(this._moduleState=_moduleState,name=this.getClassName(),hotInstances=this._moduleState.hotInstances){for(log({HotReload:{Component:this,instanceCount:hotInstances.length,forEachInstance:"instance.componentDidHotReload()"}}),results=[],j=0,len=hotInstances.length;j<len;j++)instance=hotInstances[j],results.push(instance._componentDidHotReload());return results}},Component.allComponents={},Component.postCreateConcreteClass=function(arg){var classModuleState,hotReloadEnabled;return classModuleState=arg.classModuleState,hotReloadEnabled=arg.hotReloadEnabled,Component.__super__.constructor.postCreateConcreteClass.apply(this,arguments),hotReloadEnabled&&this._hotReloadUpdate(classModuleState),this.toComponentFactory()},Component.toComponentFactory=function(){return createObjectTreeFactory(merge(React.objectTreeFactoryOptions,{inspectedName:this.getName()+"ComponentFactory","class":this,bind:"instantiateAsTopComponent"}),function(_this){return function(props,children){var instance;return children.length>0&&(props.children=children),instance=new _this(props),instance._validateChildren(null!=props?props.children:void 0),instance}}(this))},Component.instantiateAsTopComponent=function(props,options){return new this(props).instantiateAsTopComponent(options)},Component.extendableProperty({stateFields:{}}),Component.stateFields=sf=function(fields){var field,initialValue,results;this.extendStateFields(fields),results=[];for(field in fields)initialValue=fields[field],results.push(function(_this){return function(field){return _this.addSetter(field,function(v){return this.setState(field,v)}),_this.addGetter(field,function(){return this.state[field]})}}(this)(field));return results},Component.stateField=sf,Component.createdComponents=null,Component.pushCreatedComponent=function(c){return this.createdComponents||(this.createdComponents=[]),this.createdComponents.push(c)},Component.resetCreatedComponents=function(){return this.createdComponents=null},emptyProps={},Component.prototype.withElement=function(f){return this._virtualAimBranch.withElement(f)},Component.prototype.instantiateAsTopComponent=function(bindToOrCreateNewParentElementProps){return Component.topComponentInstances.push(this),this._instantiate(null,bindToOrCreateNewParentElementProps)},Component.prototype.unbindTopComponent=function(){var index;if(!(0<=(index=Component.topComponentInstances.indexOf(this))))throw new Error("not a top component!");return Component.topComponentInstances=arrayWithout(Component.topComponentInstances,index),this._unmount()},Component.getter({inspectedName:function(){return""+this.className+(this.key?"-"+this.key:"")},mounted:function(){return this._mounted}}),Component.prototype.onNextReady=function(callback,forceEpoch){return null==forceEpoch&&(forceEpoch=!0),onNextStateEpochReady(callback,forceEpoch,this)},Component.prototype.setState=function(newState,callback,callbackB){var _state,k,testState,v;if(isString(newState))return this._setSingleState(newState,callback,callbackB);if(this.onNextReady(callback),newState){testState=this._pendingState||this.state,_state=null;for(k in newState)v=newState[k],testState[k]!==v&&(_state||(_state=this._getStateToSet()),_state[k]=v)}return newState},Component.prototype.replaceState=function(newState,callback){return this._setPendingState(newState),this.onNextReady(callback)},Component.prototype.forceUpdate=function(callback){return this._getPendingState(),this.onNextReady(callback)},Component.prototype.getInitialState=function(){return{}},Component.prototype.componentDidHotReload=function(){var count;return count=(this.state._hotModuleReloadCount||0)+1,this.setState({_hotModuleReloadCount:count})},Component.prototype.componentWillReceiveProps=defaultComponentWillReceiveProps=function(newProps){},Component.prototype.componentWillMount=defaultComponentWillMount=function(){},Component.prototype.componentWillUnmount=defaultComponentWillUnmount=function(){},Component.prototype.componentWillUpdate=defaultComponentWillUpdate=function(newProps,newState){},Component.prototype.componentDidMount=defaultComponentDidMount=function(){},Component.prototype.componentDidUpdate=defaultComponentDidUpdate=function(oldProps,oldState){},Component.prototype.preprocessProps=defaultPreprocessProps=function(newProps){return newProps},Component.prototype.preprocessState=defaultPreprocessState=function(newState){return newState},Component.prototype.find=function(pattern,arg,matches,path){var child,findAll,functionResult,j,len,matchFound,pathString,ref,ref1,usedFunction,verbose;if(ref=null!=arg?arg:{},findAll=ref.findAll,verbose=ref.verbose,null==matches&&(matches=[]),pathString=path?path+"/"+this.inspectedName:this.inspectedName,matchFound=(usedFunction=isFunction(pattern))?!!(functionResult=pattern(this)):pathString.match(pattern),matchFound?(verbose&&this.log(usedFunction?{matched:pathString,functionResult:functionResult}:{matched:pathString}),matches.push(this)):"all"===verbose&&this.log(usedFunction?{notMatched:pathString,functionResult:functionResult}:{notMatched:pathString}),(!matchFound||findAll)&&this.subComponents)for(ref1=this.subComponents,j=0,len=ref1.length;j<len;j++)child=ref1[j],child.find(pattern,arguments[1],matches);return matches},Component.prototype.toCoffeescript=function(indent){return this._virtualAimBranch.toCoffeescript(indent)},Component.prototype.getPendingState=function(){return this._pendingState||this.state},Component.prototype._getStateToSet=function(){return this._wasMounted?this._getPendingState():this.state},Component.prototype._setSingleState=function(stateKey,stateValue,callback){return this.onNextReady(callback),(this._pendingState||this.state[stateKey]!==stateValue)&&(this._getStateToSet()[stateKey]=stateValue),stateValue},Component.prototype._queueRerender=function(){return this._getPendingState()},Component.prototype._setPendingState=function(state){return this._pendingState||this._applyingPendingState||reactArtEngineEpoch.addChangingComponent(this),this._pendingState=state?shallowClone(state):{}},Component.prototype._getPendingState=function(){return this._pendingState||this._setPendingState(this.state)},Component.prototype._unmount=function(){var ref;return this._removeHotInstance(),this._componentWillUnmount(),null!=(ref=this._virtualAimBranch)&&ref._unmount(),this._mounted=!1},Component.prototype._addHotInstance=function(){var moduleState;if(moduleState=this["class"]._moduleState)return(moduleState.hotInstances||(moduleState.hotInstances=[])).push(this)},Component.prototype._removeHotInstance=function(){var hotInstances,index,moduleState;if((moduleState=this["class"]._moduleState)&&(hotInstances=moduleState.hotInstances,hotInstances&&0<=(index=hotInstances.indexOf(this))))return moduleState.hotInstances=arrayWithout(hotInstances,index)},emptyState={},Component.prototype._instantiate=function(parentComponent,bindToOrCreateNewParentElementProps){var __state,initialState;return Component.__super__._instantiate.apply(this,arguments),globalCount("ReactComponent_Instantiated"),this.bindFunctionsToInstance(),this.props=this._preprocessProps(this.props),this._addHotInstance(),this._componentWillMount(),initialState=this.getInitialState(),__state=this.state,this.state=emptyState,this.state=this._preprocessState(merge(this.getStateFields(),__state,initialState)),this._virtualAimBranch=this._renderCaptureRefs(),this._virtualAimBranch._instantiate(this,bindToOrCreateNewParentElementProps),this.element=this._virtualAimBranch.element,this._componentDidMount(),this._wasMounted=this._mounted=!0,this},emptyArray=[],Component.prototype._renderCaptureRefs=function(){var ret;return ret=null,timePerformance("reactRender",function(_this){return function(){if(globalCount("ReactComponent_Rendered"),VirtualNode.assignRefsTo=_this.refs={},Component.resetCreatedComponents(),ret=_this.render(),!(ret instanceof VirtualNode))throw new Error(_this.className+": render must return a VirtualNode. Got: "+inspect(ret));return _this.subComponents=Component.createdComponents||emptyArray,VirtualNode.assignRefsTo=null}}(this)),ret},Component.prototype._updateRefsAfterReRender=function(){var _updateTarget,c,i,j,k,len,ref,ref1,results,update,v;ref=this.refs;for(k in ref)v=ref[k],(_updateTarget=this.refs[k]._updateTarget)&&(this.refs[k]=_updateTarget);for(ref1=this.subComponents,results=[],i=j=0,len=ref1.length;j<len;i=++j)c=ref1[i],(update=c._updateTarget)&&results.push(this.subComponents[i]=update);return results},Component.prototype._canUpdateFrom=function(b){return this["class"]===b["class"]&&this.key===b.key},Component.prototype._shouldReRenderComponent=function(componentInstance){return this._propsChanged(componentInstance)||this._pendingState},Component.prototype._reRenderComponent=function(){var newRenderResult,ref;return newRenderResult=this._renderCaptureRefs(),this._virtualAimBranch._canUpdateFrom(newRenderResult)?(this._virtualAimBranch._updateFrom(newRenderResult),this._updateRefsAfterReRender()):(console.error("REACT-ART-ENGINE ERROR - The render function's top-level Component/VirtualElement changed 'too much.' The VirtualNode returned by a component's render function cannot change its Type or Key.\n\nSolution: Wrap your changing VirtualNode with a non-changing VirtualElement.\n\nOffending component: "+this.classPathName+"\nOffending component assigned to: self.offendingComponent"),console.log("CHANGED-TOO-MUCH-ERROR-DETAILS - all these properties must be the same on the oldRoot and newRoot",{oldRoot:select(this._virtualAimBranch,"key","elementClassName","class"),newRoot:select(newRenderResult,"key","elementClassName","class")}),self.offendingComponent=this,null!=(ref=this._virtualAimBranch)&&ref._unmount(),(this._virtualAimBranch=newRenderResult)._instantiate(this)),this.element=this._virtualAimBranch.element},Component.prototype._updateFrom=function(componentInstance){return Component.__super__._updateFrom.apply(this,arguments),this._shouldReRenderComponent(componentInstance)?(globalCount("ReactComponent_UpdateFromTemporaryComponent_Changed"),this._applyPendingState(componentInstance.props)):globalCount("ReactComponent_UpdateFromTemporaryComponent_NoChange"),this},Component.prototype._applyPendingState=function(newProps){var newState,oldProps,oldState;if(this._pendingState||newProps)return this._applyingPendingState=!0,newProps&&(newProps=this._preprocessProps(newProps),this._componentWillReceiveProps(newProps)),oldProps=this.props,oldState=this.state,newProps||(newProps=oldProps),newState=this._pendingState||oldState,this._componentWillUpdate(newProps,newState),newState=this._pendingState||oldState,this._pendingState=null,this.props=newProps,this.state=this._preprocessState(newState),this._applyingPendingState=!1,this._reRenderComponent(),this._componentDidUpdate(oldProps,oldState)},Component.prototype._componentWillReceiveProps=function(newProps){if(defaultComponentWillReceiveProps!==this.componentWillReceiveProps)return timePerformance("reactLC",function(_this){return function(){return _this.componentWillReceiveProps(newProps)}}(this))},Component.prototype._preprocessProps=function(props){return defaultPreprocessProps===this.preprocessProps?props:(timePerformance("reactLC",function(_this){return function(){return props=_this.preprocessProps(props)}}(this)),props)},Component.prototype._preprocessState=function(state){return defaultPreprocessState===this.preprocessState?state:(timePerformance("reactLC",function(_this){return function(){return state=_this.preprocessState(state)}}(this)),state)},Component.prototype._componentWillMount=function(){if(defaultComponentWillMount!==this.componentWillMount)return timePerformance("reactLC",function(_this){return function(){return _this.componentWillMount()}}(this))},Component.prototype._componentDidHotReload=function(){this.bindFunctionsToInstance();try{return this.componentDidHotReload()}catch(error){}},Component.prototype._componentWillUnmount=function(){if(defaultComponentWillUnmount!==this.componentWillUnmount)return timePerformance("reactLC",function(_this){return function(){return _this.componentWillUnmount()}}(this))},Component.prototype._componentWillUpdate=function(newProps,newState){if(defaultComponentWillUpdate)return timePerformance("reactLC",function(_this){return function(){return _this.componentWillUpdate(newProps,newState)}}(this))},Component.prototype._componentDidMount=function(){if(defaultComponentDidMount!==this.componentDidMount)return this.onNextReady(function(_this){return function(){return timePerformance("reactLC",function(){return _this.componentDidMount()})}}(this))},Component.prototype._componentDidUpdate=function(oldProps,oldState){if(defaultComponentDidUpdate!==this.componentDidUpdate)return this.onNextReady(function(_this){return function(){return timePerformance("reactLC",function(){return _this.componentDidUpdate(oldProps,oldState)})}}(this))},Component}(InstanceFunctionBindingMixin(VirtualNode))})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var BaseObject,Foundation,ReactArtEngineEpoch,VirtualNode,compact,deepEach,emptyObject,flatten,globalCount,inspect,isObject,isPlainObject,keepIfRubyTrue,log,objectKeyCount,propsEq,reactArtEngineEpoch,shallowClone,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;Foundation=__webpack_require__(19),ReactArtEngineEpoch=__webpack_require__(292),log=Foundation.log,compact=Foundation.compact,globalCount=Foundation.globalCount,flatten=Foundation.flatten,BaseObject=Foundation.BaseObject,shallowClone=Foundation.shallowClone,inspect=Foundation.inspect,objectKeyCount=Foundation.objectKeyCount,isObject=Foundation.isObject,deepEach=Foundation.deepEach,isPlainObject=Foundation.isPlainObject,keepIfRubyTrue=Foundation.keepIfRubyTrue,propsEq=Foundation.propsEq,reactArtEngineEpoch=ReactArtEngineEpoch.reactArtEngineEpoch,emptyObject={},module.exports=VirtualNode=function(superClass){function VirtualNode(props){null==props&&(props=emptyObject),this._updateTarget=null,this._parentComponent=null,this.key=props.key,this.props=props,this._propsLength=-1,this.element=null,VirtualNode._assignRefs(this)}return extend(VirtualNode,superClass),VirtualNode.prototype.onNextReady=function(f,forceEpoch){return null==forceEpoch&&(forceEpoch=!0),reactArtEngineEpoch.onNextReady(f,forceEpoch,this)},VirtualNode.assignRefsTo=null,VirtualNode.getter({propsLength:function(){return this._propsLength>=0?this._propsLength:this._propsLength=objectKeyCount(this.props)}}),VirtualNode.setter({propsLength:function(v){return this._propsLength=v}}),VirtualNode.prototype.withElement=function(f){return new Promise(function(_this){return function(resolve){return resolve(f(_this.element))}}(this))},VirtualNode.prototype.sendToElement=function(){var args,method;return method=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[],new Promise(function(_this){return function(resolve){var ref;return resolve((ref=_this.element)[method].apply(ref,args))}}(this))},VirtualNode._separateConstructionParams=function(args,propsOut,childrenOut){return deepEach(args,function(obj){var k,results,v;if(isPlainObject(obj)){results=[];for(k in obj)v=obj[k],results.push(propsOut[k]=v);return results}if(keepIfRubyTrue(obj))return childrenOut.push(obj)})},VirtualNode._assignRefs=function(node){var key;if((key=node.key)&&this.assignRefsTo)return this.assignRefsTo[key]?console.warn("WARNING: Duplicate key found. This MUST be fixed for correct operation.\n  key: "+inspect(key)+"\n  new VirtualNode: "+node.inspectedName+"\n  old VirtualNode: "+this.assignRefsTo[key].inspectedName):this.assignRefsTo[key]=node},VirtualNode.prototype._validateChildren=function(children){var child,i,len;if(!children)return children;for(i=0,len=children.length;i<len;i++)if(child=children[i],!(child instanceof VirtualNode))throw console.warn({"invalid VirtualNode child":child,parent:this}),isObject(child)&&console.warn("Hint: Did you place properties AFTER a child element?"),new Error("VirtualNode child is not a VirtualNode.\ninvalid child: "+inspect(child)+"\nparent: "+this.inspectedName);return children},VirtualNode.prototype._propsChanged=function(virtualNode){var _propsLength,k,newProps,ref,v;newProps=virtualNode.props,_propsLength=0,ref=this.props;for(k in ref)if(v=ref[k],_propsLength++,!propsEq(v,newProps[k]))return!0;return this._propsLength=_propsLength,_propsLength!==virtualNode.getPropsLength()},VirtualNode.prototype._updateFrom=function(sourceNode){return sourceNode._updateTarget=this},VirtualNode.prototype._canUpdateFrom=function(sourceNode){return!1},VirtualNode.prototype._instantiate=function(parentComponent,bindToOrCreateNewParentElementProps){return this._parentComponent=parentComponent,this},VirtualNode}(BaseObject)},function(module,exports,__webpack_require__){var ArtEngineCore,BaseObject,Epoch,Foundation,GlobalEpochCycle,ReactArtEngineEpoch,clone,globalCount,inspect,isWebWorker,log,merge,peek,stackTime,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),log=Foundation.log,merge=Foundation.merge,clone=Foundation.clone,peek=Foundation.peek,inspect=Foundation.inspect,timeout=Foundation.timeout,BaseObject=Foundation.BaseObject,Epoch=Foundation.Epoch,globalCount=Foundation.globalCount,stackTime=Foundation.stackTime,isWebWorker=Foundation.isWebWorker,timeout=Foundation.timeout,module.exports=ReactArtEngineEpoch=function(superClass){function ReactArtEngineEpoch(){return ReactArtEngineEpoch.__super__.constructor.apply(this,arguments)}return extend(ReactArtEngineEpoch,superClass),ReactArtEngineEpoch.singletonClass(),ReactArtEngineEpoch.prototype.addChangingComponent=function(component){return this.queueItem(component)},ReactArtEngineEpoch.prototype.processEpochItems=function(changingComponents){return globalCount("ReactArtEngineEpoch processEpochItems",stackTime(function(_this){return function(){var component,i,len,results;for(results=[],i=0,len=changingComponents.length;i<len;i++)component=changingComponents[i],results.push(component._applyPendingState());return results}}(this)))},ReactArtEngineEpoch}(Epoch),(ArtEngineCore=Neptune.Art.Engine.Core)&&(GlobalEpochCycle=ArtEngineCore.GlobalEpochCycle,GlobalEpochCycle.singleton.includeReact(ReactArtEngineEpoch.singleton))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(294)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(295).addModules({HotLoader:__webpack_require__(296)})},function(module,exports,__webpack_require__){var DevTools,Webpack,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;DevTools=__webpack_require__(254),module.exports=DevTools.Webpack||DevTools.addNamespace("Webpack",Webpack=function(superClass){function Webpack(){return Webpack.__super__.constructor.apply(this,arguments)}return extend(Webpack,superClass),Webpack}(Neptune.Base))},function(module,exports,__webpack_require__){var BaseObject,HotLoader,log,peek,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),BaseObject=ref.BaseObject,peek=ref.peek,log=ref.log,module.exports=HotLoader=function(superClass){function HotLoader(){this._modulePersistantState=[]}return extend(HotLoader,superClass),HotLoader.singletonClass(),HotLoader.runHot=function(m,f){return HotLoader.singleton.runHot(m,f)},HotLoader.getModuleState=function(){return peek(HotLoader.singleton._modulePersistantState)},HotLoader.prototype.runHot=function(_module,f){var base,res;return(null!=_module?_module.hot:void 0)&&(this._modulePersistantState.push(((base=_module.hot).data||(base.data={modulePersistantState:{}})).modulePersistantState),_module.hot.accept(),_module.hot.dispose(function(data){return data.modulePersistantState=_module.hot.data.modulePersistantState})),res=f(peek(this._modulePersistantState)),(null!=_module?_module.hot:void 0)&&this._modulePersistantState.pop(),res},HotLoader}(BaseObject)},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-engine":"git://github.com/imikimi/art-engine.git","art-engine-remote":"git://github.com/imikimi/art-engine-remote.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.4.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},description:"Art.React is inspired by Facebook's React. In fact, it is much the same. However, ArtReact is designed from the ground up to run with the Art.Engine.",license:"ISC",name:"art-react",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.1.0"}},function(module,exports,__webpack_require__){var Component,Foundation,HotStyleProps,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Component=__webpack_require__(290),module.exports=HotStyleProps=function(superClass){function HotStyleProps(){return HotStyleProps.__super__.constructor.apply(this,arguments)}return extend(HotStyleProps,superClass),HotStyleProps.postCreate=function(arg){var hotReloaded;return hotReloaded=arg.hotReloaded,hotReloaded&&Component.rerenderAll(),HotStyleProps.__super__.constructor.postCreate.apply(this,arguments)},HotStyleProps}(Foundation.BaseObject)},function(module,exports,__webpack_require__){var BaseObject,Browser,Foundation,Promise,VirtualElement,VirtualNode,compactFlatten,globalCount,inspect,isPlainObject,isWebWorker,keepIfRubyTrue,log,merge,objectDiff,propsEq,shallowClone,stackTime,time,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),VirtualNode=__webpack_require__(291),log=Foundation.log,compactFlatten=Foundation.compactFlatten,globalCount=Foundation.globalCount,time=Foundation.time,stackTime=Foundation.stackTime,BaseObject=Foundation.BaseObject,shallowClone=Foundation.shallowClone,inspect=Foundation.inspect,keepIfRubyTrue=Foundation.keepIfRubyTrue,stackTime=Foundation.stackTime,isPlainObject=Foundation.isPlainObject,compactFlatten=Foundation.compactFlatten,isWebWorker=Foundation.isWebWorker,objectDiff=Foundation.objectDiff,Browser=Foundation.Browser,merge=Foundation.merge,Promise=Foundation.Promise,propsEq=Foundation.propsEq,module.exports=VirtualElement=function(superClass){function VirtualElement(elementClassName,props,children){VirtualElement.created++,this.elementClassName=elementClassName,VirtualElement.__super__.constructor.call(this,props||emptyProps),this.children=this._validateChildren(compactFlatten(children,keepIfRubyTrue));
}var emptyProps;return extend(VirtualElement,superClass),VirtualElement.created=0,VirtualElement.instantiated=0,emptyProps={},VirtualElement.getter({inspectedName:function(){var elementClassName,key,ref;return ref=this,key=ref.key,elementClassName=ref.elementClassName,"VirtualElement-"+elementClassName+(key?"-"+key:"")}}),VirtualElement.prototype.toCoffeescript=function(indent){var child,k,subIndent,v;return null==indent&&(indent=""),compactFlatten([""+indent+this.elementClassName,function(){var ref,results;if(0===Object.keys(this.props).length)return"{}";ref=this.props,results=[];for(k in ref)v=ref[k],results.push("\n  "+indent+k+": "+inspect(v));return results}.call(this),function(){var j,len,ref,ref1,results;if((null!=(ref=this.children)?ref.length:void 0)>0){for(subIndent=indent+"  ",ref1=this.children,results=[],j=0,len=ref1.length;j<len;j++)child=ref1[j],results.push("\n"+child.toCoffeescript(subIndent));return results}}.call(this)]).join("")},VirtualElement.prototype.withElement=function(f){return new Promise(function(_this){return function(resolve){return resolve(f(_this.element))}}(this))},VirtualElement.prototype._updateElementProps=function(newProps){},VirtualElement.prototype._setElementChildren=function(childElements){},VirtualElement.prototype._newElement=function(elementClassName,props,childElements,bindToOrCreateNewParentElementProps){return elementClassName},VirtualElement.prototype._newErrorElement=function(){return null},VirtualElement.prototype._findOldChildToUpdate=function(child){var i,j,len,oldChild,oldChildren;for(oldChildren=this.children,i=j=0,len=oldChildren.length;j<len;i=++j)if(oldChild=oldChildren[i],oldChild&&oldChild._canUpdateFrom(child))return oldChildren[i]=null,oldChild;return null},VirtualElement.prototype._canUpdateFrom=function(b){return this.elementClassName===b.elementClassName&&this.key===b.key},VirtualElement.prototype._fastUpdateChildren=function(newChildren){var i,j,l,len,len1,oldChild,oldChildren;if(oldChildren=this.children,oldChildren.length!==newChildren.length)return!1;for(i=j=0,len=oldChildren.length;j<len;i=++j)if(oldChild=oldChildren[i],!oldChild._canUpdateFrom(newChildren[i]))return!1;for(i=l=0,len1=oldChildren.length;l<len1;i=++l)oldChild=oldChildren[i],oldChild._updateFrom(newChildren[i]);return!0},VirtualElement.prototype._slowUpdateChildren=function(newChildren){var child,childElements,finalChild,i,j,len,newChild,oldChild,oldChildren;for(oldChildren=this.children,childElements=function(){var j,len,results;for(results=[],i=j=0,len=newChildren.length;j<len;i=++j)newChild=newChildren[i],finalChild=(oldChild=this._findOldChildToUpdate(newChild))?newChildren[i]=oldChild._updateFrom(newChild):newChild._instantiate(this._parentComponent),results.push(finalChild.element);return results}.call(this),j=0,len=oldChildren.length;j<len;j++)child=oldChildren[j],child&&child._unmount();return this._setElementChildren(childElements),this.children=newChildren},VirtualElement.prototype._updateChildren=function(newChildren){return!this._fastUpdateChildren(newChildren)&&(this._slowUpdateChildren(newChildren),!0)},VirtualElement.prototype._unmount=function(){var child,j,len,ref,results;for(ref=this.children,results=[],j=0,len=ref.length;j<len;j++)child=ref[j],results.push(child._unmount());return results},VirtualElement.prototype._updateFrom=function(newNode){var childrenChanged,propsChanged;if(VirtualElement.__super__._updateFrom.apply(this,arguments),this.element)return propsChanged=this._updateElementProps(newNode.props),childrenChanged=this._updateChildren(newNode.children),this},VirtualElement.prototype._instantiate=function(parentComponent,bindToOrCreateNewParentElementProps){var c,childElements,e,i;return VirtualElement.__super__._instantiate.apply(this,arguments),VirtualElement.instantiated++,childElements=function(){var j,len,ref,results;for(ref=this.children,results=[],i=j=0,len=ref.length;j<len;i=++j){c=ref[i];try{c._instantiate(parentComponent),results.push(c.element)}catch(error){e=error,console.error(e.stack),console.error("Error instantiating child:\n  childIndex "+i+"\n  error: "+e+"\n  child: "+c+"\n  elementClassName: "+this.elementClassName+"\n  props: "+inspect(this.props)),results.push(this._newErrorElement())}}return results}.call(this),this.element=this._newElement(this.elementClassName,this.props,childElements,bindToOrCreateNewParentElementProps),this},VirtualElement.prototype._updateElementPropsHelper=function(newProps,addedOrChanged,removed){var newPropsLength,noChange,noChangeCount,oldProps,oldPropsLength;return oldPropsLength=this.getPropsLength(),oldProps=this.props,noChangeCount=0,noChange=function(){return noChangeCount++},newPropsLength=this.setPropsLength(objectDiff(newProps,oldProps,addedOrChanged,removed,addedOrChanged,noChange,propsEq)),(newPropsLength!==noChangeCount||oldPropsLength!==newPropsLength)&&(this.props=newProps,!0)},VirtualElement}(VirtualNode)},function(module,exports,__webpack_require__){var Aim,Foundation,React,VirtualElement,createObjectTreeFactories,createObjectTreeFactory,getNextPageIndexes,log,mergeInto,objectTreeFactoryOptions,standardArtEngineElementClassNames;Foundation=__webpack_require__(19),React=__webpack_require__(287),log=Foundation.log,createObjectTreeFactories=Foundation.createObjectTreeFactories,mergeInto=Foundation.mergeInto,createObjectTreeFactory=Foundation.createObjectTreeFactory,VirtualElement=React.VirtualElement,objectTreeFactoryOptions=React.objectTreeFactoryOptions,getNextPageIndexes=__webpack_require__(301).getNextPageIndexes,standardArtEngineElementClassNames="BitmapElement BlurElement CanvasElement ShapeElement Element FillElement OutlineElement PagingScrollElement RectangleElement ShadowElement TextElement TextInput",module.exports=Aim=function(){function Aim(){}return Aim.createVirtualElementFactories=function(VirtualElementClass,elementClassNames){return null==elementClassNames&&(elementClassNames=standardArtEngineElementClassNames),mergeInto(this,createObjectTreeFactories(objectTreeFactoryOptions,elementClassNames,function(elementClassName){return function(props,children){return new VirtualElementClass(elementClassName,props,children)}})),this.bindHelperFunctions(),this},Aim.bindHelperFunctions=function(){return this.PagingScrollElement.getNextPageIndexes=getNextPageIndexes},Aim}()},function(module,exports,__webpack_require__){var Foundation,PagingScrollElement,bound,max,min;Foundation=__webpack_require__(19),max=Foundation.max,min=Foundation.min,bound=Foundation.bound,module.exports=PagingScrollElement=function(){function PagingScrollElement(){}return PagingScrollElement.getNextPageIndexes=function(lastPageIndexes,suggestedPageSpread,focusedPageIndex,maxKeep,maxPrerender,maxPageIndex,minPageIndex){var firstPageIndex,lastPageIndex,newFirstPageIndex,newLastPageIndex;return null==minPageIndex&&(minPageIndex=0),firstPageIndex=lastPageIndexes.firstPageIndex,lastPageIndex=lastPageIndexes.lastPageIndex,newFirstPageIndex=focusedPageIndex-suggestedPageSpread-maxPrerender,newLastPageIndex=focusedPageIndex+suggestedPageSpread+maxPrerender,firstPageIndex=max(minPageIndex,bound(newFirstPageIndex-maxKeep,firstPageIndex,newFirstPageIndex)),lastPageIndex=min(maxPageIndex,bound(newLastPageIndex,lastPageIndex,newLastPageIndex+maxKeep)),firstPageIndex===lastPageIndexes.firstPageIndex&&lastPageIndex===lastPageIndexes.lastPageIndex?null:{firstPageIndex:firstPageIndex,lastPageIndex:lastPageIndex}},PagingScrollElement}()},function(module,exports,__webpack_require__){__webpack_require__(152),__webpack_require__(281),module.exports=__webpack_require__(303)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(304).includeInNamespace(__webpack_require__(306)),__webpack_require__(307),__webpack_require__(319),__webpack_require__(324),__webpack_require__(314)},function(module,exports,__webpack_require__){var Art,Flux,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(305),module.exports=Art.Flux||Art.addNamespace("Flux",Flux=function(superClass){function Flux(){return Flux.__super__.constructor.apply(this,arguments)}return extend(Flux,superClass),Flux}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var FluxComponent,FluxCore,FluxModel,FluxStore,FluxSubscriptionsMixin,ModelRegistry,_package,defineModule,fluxStore;defineModule=__webpack_require__(19).defineModule,FluxCore=__webpack_require__(307),FluxComponent=__webpack_require__(314).FluxComponent,FluxStore=FluxCore.FluxStore,ModelRegistry=FluxCore.ModelRegistry,FluxModel=FluxCore.FluxModel,FluxSubscriptionsMixin=FluxCore.FluxSubscriptionsMixin,fluxStore=FluxStore.fluxStore,defineModule(module,[{FluxSubscriptionsMixin:FluxSubscriptionsMixin,FluxStore:FluxStore,FluxModel:FluxModel,ModelRegistry:ModelRegistry,FluxComponent:FluxComponent,ApplicationState:__webpack_require__(317),models:ModelRegistry.models,createFluxComponentFactory:FluxComponent.createFluxComponentFactory,fluxStore:fluxStore,_reset:function(){return fluxStore._reset(),ModelRegistry._reset()},"package":_package=__webpack_require__(318),version:_package.version}])}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(308).addModules({FluxEntry:__webpack_require__(309),FluxModel:__webpack_require__(310),FluxStore:__webpack_require__(311),FluxSubscriptionsMixin:__webpack_require__(313),ModelRegistry:__webpack_require__(312)})},function(module,exports,__webpack_require__){var Core,Flux,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Flux=__webpack_require__(304),module.exports=Flux.Core||Flux.addNamespace("Core",Core=function(superClass){function Core(){return Core.__super__.constructor.apply(this,arguments)}return extend(Core,superClass),Core}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,Epoch,FluxEntry,Foundation,Unique,clone,defineModule,failure,inspect,isPlainObject,log,merge,pending,propsEq,pushIfNotPresent,removeFirstMatch,shallowClone,success,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),log=Foundation.log,BaseObject=Foundation.BaseObject,merge=Foundation.merge,removeFirstMatch=Foundation.removeFirstMatch,pushIfNotPresent=Foundation.pushIfNotPresent,Epoch=Foundation.Epoch,shallowClone=Foundation.shallowClone,inspect=Foundation.inspect,Unique=Foundation.Unique,clone=Foundation.clone,isPlainObject=Foundation.isPlainObject,propsEq=Foundation.propsEq,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,pending=CommunicationStatus.pending,success=CommunicationStatus.success,failure=CommunicationStatus.failure,defineModule(module,FluxEntry=function(superClass){function FluxEntry(modelName,key){FluxEntry.__super__.constructor.apply(this,arguments),this._fluxRecord={status:pending,key:key,modelName:modelName},this._subscribers=[],this._previousFluxRecord=null}var warnCantSetField,warnUnsettableFields;return extend(FluxEntry,superClass),FluxEntry.warnCantSetField=warnCantSetField=function(newFluxRecord,oldFluxRecord,field){var newValue,oldValue;if(newValue=newFluxRecord[field],oldValue=null!=oldFluxRecord?oldFluxRecord[field]:void 0,newFluxRecord.hasOwnProperty(field)&&newValue!==oldValue)return console.warn(FluxEntry.namespacePath+": Do not put/post the '"+field+"' field (new value == "+inspect(newValue)+", old value == "+inspect(oldValue)+"). Ignored.")},FluxEntry.warnUnsettableFields=warnUnsettableFields=function(newFluxRecord,oldFluxRecord){return warnCantSetField(newFluxRecord,oldFluxRecord,"key"),warnCantSetField(newFluxRecord,oldFluxRecord,"modelName")},FluxEntry.getter("previousFluxRecord fluxRecord subscribers",{dataChanged:function(){var ref,ref1;return!propsEq(null!=(ref=this._fluxRecord)?ref.data:void 0,null!=(ref1=this._previousFluxRecord)?ref1.data:void 0)},fluxRecordChanged:function(){return!propsEq(this._fluxRecord,this._previousFluxRecord)},subscriberCount:function(){return this._subscribers.length},key:function(){return this._fluxRecord.key},modelName:function(){return this._fluxRecord.modelName}}),FluxEntry.setter({fluxRecord:function(newFluxRecord){var key,modelName,ref;if(ref=this._fluxRecord,key=ref.key,modelName=ref.modelName,warnUnsettableFields(newFluxRecord,this._fluxRecord),newFluxRecord.key=key,newFluxRecord.modelName=modelName,!isPlainObject(newFluxRecord))throw new Error("fluxRecord must be an object");return this._fluxRecord=newFluxRecord}}),FluxEntry.getter({plainStructure:function(){return{fluxRecord:this._fluxRecord,subscribers:this._subscribers}},hasSubscribers:function(){return this._subscribers.length>0}}),FluxEntry.prototype._merge=function(src){if(!isPlainObject(src))throw new Error("fluxRecord must be an object");return this._fluxRecord=src._fluxRecord,this._subscribers=this._subscribers.concat(src._subscribers)},FluxEntry.prototype._notifySubscribers=function(){var i,len,ref,subscriber;if(this._previousFluxRecord){for(ref=this._subscribers,i=0,len=ref.length;i<len;i++)(subscriber=ref[i])(this._fluxRecord,this._previousFluxRecord);return this._previousFluxRecord=null}},FluxEntry.prototype._updateFluxRecord=function(updateFunction){if(this._previousFluxRecord||(this._previousFluxRecord=this._fluxRecord),this.setFluxRecord(("function"==typeof updateFunction?updateFunction(this._fluxRecord):void 0)||{}),propsEq(this._fluxRecord,this._previousFluxRecord))return this._previousFluxRecord=null},FluxEntry.prototype._subscribe=function(subscriber){return pushIfNotPresent(this._subscribers,subscriber)},FluxEntry.prototype._unsubscribe=function(subscriber){return removeFirstMatch(this._subscribers,subscriber)},FluxEntry}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,FluxModel,Foundation,InstanceFunctionBindingMixin,ModelRegistry,Promise,capitalize,compactFlatten,decapitalize,defineModule,emailRegexp,failure,fluxStore,globalCount,inspect,isFunction,isNumber,isString,isoDateRegexp,log,missing,nextTick,pending,pluralize,pureMerge,ref,shallowClone,success,time,urlRegexp,validStatus,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),ref=Foundation.CommunicationStatus,missing=ref.missing,success=ref.success,pending=ref.pending,failure=ref.failure,validStatus=ref.validStatus,defineModule=ref.defineModule,fluxStore=__webpack_require__(311).fluxStore,ModelRegistry=__webpack_require__(312),log=Foundation.log,BaseObject=Foundation.BaseObject,decapitalize=Foundation.decapitalize,pluralize=Foundation.pluralize,pureMerge=Foundation.pureMerge,shallowClone=Foundation.shallowClone,isString=Foundation.isString,emailRegexp=Foundation.emailRegexp,urlRegexp=Foundation.urlRegexp,isNumber=Foundation.isNumber,nextTick=Foundation.nextTick,capitalize=Foundation.capitalize,inspect=Foundation.inspect,isFunction=Foundation.isFunction,pureMerge=Foundation.pureMerge,isoDateRegexp=Foundation.isoDateRegexp,time=Foundation.time,globalCount=Foundation.globalCount,compactFlatten=Foundation.compactFlatten,InstanceFunctionBindingMixin=Foundation.InstanceFunctionBindingMixin,Promise=Foundation.Promise,defineModule=Foundation.defineModule,defineModule(module,FluxModel=function(superClass){function FluxModel(name){FluxModel.__super__.constructor.apply(this,arguments),this._name=name||decapitalize(this["class"].getName()),this.bindFunctionsToInstance()}return extend(FluxModel,superClass),FluxModel.abstractClass(),FluxModel.register=function(){return this.singletonClass(),ModelRegistry.register(this.getSingleton())},FluxModel.prototype.register=function(){return ModelRegistry.register(this)},FluxModel.postCreateConcreteClass=function(arg){var hotReloaded;return hotReloaded=arg.hotReloaded,hotReloaded?this.singleton.bindFunctionsToInstance():this.register(),FluxModel.__super__.constructor.postCreateConcreteClass.apply(this,arguments)},FluxModel.aliases=function(){return this._aliases=compactFlatten(arguments,this._aliases),null},FluxModel.prototype.onNextReady=function(f){return fluxStore.onNextReady(f)},FluxModel.classGetter({models:function(){return ModelRegistry.models},fluxStore:function(){return fluxStore}}),FluxModel.getter({models:function(){return ModelRegistry.models},fluxStore:function(){return fluxStore},singlesModel:function(){return this._singlesModel||this}}),FluxModel.prototype.subscribe=function(fluxKey,subscriptionFunction){return fluxStore.subscribe(this._name,fluxKey,subscriptionFunction)},FluxModel.getter("name"),FluxModel.prototype.load=function(key){return this.loadData?(Promise.then(function(_this){return function(){return _this.loadData(key)}}(this)).then(function(_this){return function(data){return _this.updateFluxStore(key,{status:success,data:data})}}(this))["catch"](function(_this){return function(error){return validStatus(error)?_this.updateFluxStore(key,{status:error}):_this.updateFluxStore(key,{status:failure,error:error})}}(this)),null):this.loadFluxRecord?(this.loadFluxRecord(key).then(function(_this){return function(fluxRecord){return _this.updateFluxStore(key,fluxRecord)}}(this))["catch"](function(_this){return function(error){return _this.updateFluxStore(key,{status:failure,error:error})}}(this)),null):this.updateFluxStore(key,{status:missing})},FluxModel.prototype.reload=function(key){return this.load(key)},FluxModel.prototype.updateFluxStore=function(key,fluxRecord){return fluxStore.update(this._name,key,fluxRecord)},FluxModel.prototype.fluxStoreGet=function(key){return fluxStore.get(this._name,key)},FluxModel.prototype.toFluxKey=function(key){if(!isString(key))throw"FluxModel "+this.name+": Must implement custom toFluxKey for non-string fluxKeys like: "+inspect(key);return key},FluxModel.prototype.fluxStoreEntryUpdated=function(entry){},FluxModel.prototype.fluxStoreEntryAdded=function(entry){},FluxModel.prototype.fluxStoreEntryRemoved=function(entry){},FluxModel.prototype._localStoreKey=function(id){return"fluxModel:"+this._name+":"+id},FluxModel.prototype._localStoreGet=function(id){var data;return(data=localStorage.getItem(this._localStoreKey(id)))?JSON.parse(data):null},FluxModel.prototype._localStoreSet=function(id,data){return localStorage.setItem(this._localStoreKey(id),JSON.stringify(data))},FluxModel}(InstanceFunctionBindingMixin(BaseObject)))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,Epoch,FluxEntry,FluxStore,Foundation,GlobalEpochCycle,ModelRegistry,Unique,clone,consistentJsonStringify,defineModule,failure,globalCount,inspect,isFunction,isString,log,merge,missing,pending,pushIfNotPresent,ref,ref1,removeFirstMatch,success,time,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxEntry=__webpack_require__(309),ModelRegistry=__webpack_require__(312),BaseObject=Foundation.BaseObject,merge=Foundation.merge,removeFirstMatch=Foundation.removeFirstMatch,pushIfNotPresent=Foundation.pushIfNotPresent,removeFirstMatch=Foundation.removeFirstMatch,Epoch=Foundation.Epoch,log=Foundation.log,isFunction=Foundation.isFunction,Unique=Foundation.Unique,clone=Foundation.clone,consistentJsonStringify=Foundation.consistentJsonStringify,isString=Foundation.isString,timeout=Foundation.timeout,globalCount=Foundation.globalCount,time=Foundation.time,inspect=Foundation.inspect,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,success=CommunicationStatus.success,pending=CommunicationStatus.pending,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,defineModule(module,FluxStore=function(superClass){function FluxStore(){FluxStore.__super__.constructor.apply(this,arguments),this._reset()}return extend(FluxStore,superClass),FluxStore.singletonClass(),FluxStore.getter("length"),FluxStore.prototype.get=function(modelName,key){var ref;return null!=(ref=this._getEntry(modelName,key))?ref.fluxRecord:void 0},FluxStore.prototype.getSubscribers=function(modelName,key){var ref;return null!=(ref=this._getEntry(modelName,key))?ref.subscribers:void 0},FluxStore.prototype.getHasSubscribers=function(modelName,key){var ref;return!!(null!=(ref=this._getEntry(modelName,key))?ref.getHasSubscribers():void 0)},FluxStore.prototype.subscribe=function(modelName,key,subscriber,initialFluxRecord){return this._queueChange({modelName:modelName,key:key,addSubscriber:subscriber}),this._vivifyAndLoadEntry(modelName,key,initialFluxRecord).fluxRecord},FluxStore.prototype.unsubscribe=function(modelName,key,subscriber){return this._queueChange({modelName:modelName,key:key,removeSubscriber:subscriber})},FluxStore.prototype.update=function(modelName,key,updateFunctionOrNewFluxRecord){if(!isString(key))throw new Error("key must be a string. got: "+inspect(key));return this._queueChange({modelName:modelName,key:key,updateFunction:isFunction(updateFunctionOrNewFluxRecord)?updateFunctionOrNewFluxRecord:function(oldRecord){return updateFunctionOrNewFluxRecord}}),updateFunctionOrNewFluxRecord},FluxStore.getter({status:function(){var entries,entry,entrySubscribers,key,model,modelCount,ref;entrySubscribers=0,modelCount=0,ref=this._entriesByModelName;for(model in ref){entries=ref[model],modelCount++;for(key in entries)entry=entries[key],entrySubscribers+=entry.subscriberCount}return{entries:this._length,entrySubscribers:entrySubscribers,models:modelCount}}}),FluxStore.prototype._reset=function(){return this._length=0,this._entriesByModelName={},this._addedEntries=[]},FluxStore.prototype._getEntriesForModelName=function(modelName){var base;return(base=this._entriesByModelName)[modelName]||(base[modelName]={})},FluxStore.prototype._getEntry=function(modelName,key){if(!isString(modelName))throw new Error("Expected 'modelName' to be a String. Got: "+inspect(modelName));if(!isString(key))throw new Error("Expected 'key' to be a String. Got: "+inspect(key));return this._getEntriesForModelName(modelName)[key]},FluxStore.prototype._addEntry=function(modelName,key){var entry;return this._length++,entry=this._getEntriesForModelName(modelName)[key]=new FluxEntry(modelName,key),pushIfNotPresent(this._addedEntries,entry),entry},FluxStore.prototype._removeEntry=function(entry){return this._length--,delete this._getEntriesForModelName(entry.fluxRecord.modelName)[entry.fluxRecord.key]},FluxStore.prototype._vivifyAndLoadEntry=function(modelName,key,initialFluxRecord){var entry;return entry=this._getEntry(modelName,key),entry||(entry=this._addEntry(modelName,key),initialFluxRecord?entry.setFluxRecord(initialFluxRecord):this._loadKeyWithRetriesWithExponentalFalloff(modelName,key,entry)),entry},FluxStore.prototype._loadKeyWithRetriesWithExponentalFalloff=function(modelName,key,entry){var e,fluxRecord,loadRetryCallback,message,model,retryDelay;if(retryDelay=250,!(model=ModelRegistry.models[modelName]))return console.warn("ArtFlux: there is no model registered with the name: "+modelName+". FluxEntry for "+modelName+":"+key+" will forever be status: pending.");loadRetryCallback=function(_this){return function(loadInfo){if(loadInfo.status!==pending&&loadInfo.status!==success&&loadInfo.status!==missing)return _this._getEntry(modelName,key)?(retryDelay<6e4&&(retryDelay*=2),console.warn("FluxStore retry is disabled")):log({FluxStore_get_retry:{model:modelName,key:key,status:loadInfo.status,aborting:"no longer have subscribers"}})}}(this);try{if(fluxRecord=model.load(key,loadRetryCallback))return entry.setFluxRecord(fluxRecord)}catch(error){return e=error,message="Error loading record from model '"+modelName+"' for key '"+key+"'. Error: "+e,console.error(message,e.stack),entry.setFluxRecord({status:failure,errorObject:e,message:message})}},FluxStore.prototype._vivifyEntry=function(modelName,key){return this._getEntry(modelName,key)||this._addEntry(modelName,key)},FluxStore.prototype._queueChange=function(change){var key,modelName;if(modelName=change.modelName,key=change.key,!isString(modelName))throw new Error("Expected 'modelName' to be a String. Got: "+inspect(modelName));if(!isString(key))throw new Error("Expected 'key' to be a String. Got: "+inspect(key));return this.queueItem(change),null},FluxStore.prototype.processEpochItems=function(changes){var addSubscriber,entry,i,j,k,key,l,len,len1,len2,len3,modelName,models,ref,ref1,ref2,ref3,ref4,removeEntry,removeSubscriber,removedEntries,updateFunction,updatedEntries;for(updatedEntries=[],removedEntries=[],i=0,len=changes.length;i<len;i++)ref=changes[i],modelName=ref.modelName,key=ref.key,removeEntry=ref.removeEntry,addSubscriber=ref.addSubscriber,removeSubscriber=ref.removeSubscriber,updateFunction=ref.updateFunction,entry=this._vivifyEntry(modelName,key),updateFunction?entry._updateFluxRecord(updateFunction):addSubscriber?entry._subscribe(addSubscriber):removeSubscriber&&entry._unsubscribe(removeSubscriber),pushIfNotPresent(updatedEntries,entry);for(models=ModelRegistry.models,j=0,len1=updatedEntries.length;j<len1;j++)entry=updatedEntries[j],null!=(ref1=models[entry.getModelName()])&&ref1.fluxStoreEntryUpdated(entry),entry._notifySubscribers(),0===entry.subscribers.length&&(pushIfNotPresent(removedEntries,entry),this._removeEntry(entry));for(ref2=this._addedEntries,k=0,len2=ref2.length;k<len2;k++)entry=ref2[k],null!=(ref3=models[entry.getModelName()])&&ref3.fluxStoreEntryAdded(entry);for(l=0,len3=removedEntries.length;l<len3;l++)entry=removedEntries[l],null!=(ref4=models[entry.getModelName()])&&ref4.fluxStoreEntryRemoved(entry);return this._addedEntries=[],null},FluxStore}(Epoch)),(GlobalEpochCycle=null!=(ref=Neptune.Art.Engine)&&null!=(ref1=ref.Core)?ref1.GlobalEpochCycle:void 0)&&GlobalEpochCycle.singleton.includeFlux(FluxStore.singleton)}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,ModelRegistry,decapitalize,defineModule,inspect,isClass,log,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),log=ref.log,BaseObject=ref.BaseObject,decapitalize=ref.decapitalize,isClass=ref.isClass,inspect=ref.inspect,defineModule=ref.defineModule,defineModule(module,ModelRegistry=function(superClass){function ModelRegistry(){return ModelRegistry.__super__.constructor.apply(this,arguments)}var models;return extend(ModelRegistry,superClass),ModelRegistry.models=models={},ModelRegistry.register=function(modelClassOrInstance){var _aliases,alias,newSingleton,ref1;return newSingleton=isClass(modelClassOrInstance)?(console.warn("ModelRegistry.register Class (not instance) is DEPRICATED"),_aliases=modelClassOrInstance._aliases,modelClassOrInstance,new modelClassOrInstance):(ref1=modelClassOrInstance["class"],_aliases=ref1._aliases,ref1,modelClassOrInstance),_aliases&&function(){var i,len,results;for(results=[],i=0,len=_aliases.length;i<len;i++)alias=_aliases[i],results.push(models[alias]=newSingleton);return results}(),models[newSingleton.name]=newSingleton},ModelRegistry._singletonName=function(model){return decapitalize(model.name)},ModelRegistry._reset=function(){var i,k,len,ref1,results;for(ref1=Object.keys(models),results=[],i=0,len=ref1.length;i<len;i++)k=ref1[i],results.push(delete models[k]);return results},ModelRegistry}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,ModelRegistry,capitalize,defineModule,fluxStore,globalCount,isString,log,mergeInfo,nextTick,ref,time,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),isString=ref.isString,defineModule=ref.defineModule,log=ref.log,BaseObject=ref.BaseObject,nextTick=ref.nextTick,mergeInfo=ref.mergeInfo,capitalize=ref.capitalize,globalCount=ref.globalCount,time=ref.time,fluxStore=__webpack_require__(311).fluxStore,ModelRegistry=__webpack_require__(312),defineModule(module,function(){return function(superClass){var FluxSubscriptionsMixin;return FluxSubscriptionsMixin=function(superClass1){function FluxSubscriptionsMixin(){FluxSubscriptionsMixin.__super__.constructor.apply(this,arguments),this._subscriptions={}}var combinedKey;return extend(FluxSubscriptionsMixin,superClass1),FluxSubscriptionsMixin.getter({models:function(){return ModelRegistry.models}}),FluxSubscriptionsMixin.prototype.getSubscriptions=function(){return this._subscriptions},FluxSubscriptionsMixin._combinedKey=combinedKey=function(model,fluxKey,stateField){return model.name+"/"+stateField+"/"+fluxKey},FluxSubscriptionsMixin.prototype.subscribe=function(model,fluxKey,stateField,arg){var ckey,initialFluxRecord,modelName,ref1,subscriptionFunction,updatesCallback;if(ref1=null!=arg?arg:{},initialFluxRecord=ref1.initialFluxRecord,updatesCallback=ref1.updatesCallback,isString(modelName=model)&&(model=this.models[modelName],!model))throw new Error("No model registered with the name: "+modelName+". Models:\n  "+Object.keys(this.models).join("\n  "));return ckey=combinedKey(model,fluxKey,stateField),this.setStateFromFluxRecord(stateField,this._subscriptions[ckey]?(console.error("already subscribed"),fluxStore.get(model.name,fluxKey)):(this._subscriptions[ckey]={fluxKey:fluxKey,model:model,subscriptionFunction:subscriptionFunction=function(_this){return function(fluxRecord,subscribers){return"function"==typeof updatesCallback&&updatesCallback(fluxRecord),_this.setStateFromFluxRecord(stateField,fluxRecord)}}(this)},fluxStore.subscribe(model.name,fluxKey,subscriptionFunction,initialFluxRecord)))},FluxSubscriptionsMixin.prototype.unsubscribe=function(model,fluxKey,stateField){var ckey,subscription;if(ckey=combinedKey(model,fluxKey,stateField),subscription=this._subscriptions[ckey])return fluxStore.unsubscribe(model.name,fluxKey,subscription.subscriptionFunction),delete this._subscriptions[ckey]},FluxSubscriptionsMixin.prototype.setStateFromFluxRecord=function(baseField,fluxRecord){return this.setState(baseField,null!=fluxRecord?fluxRecord.data:void 0),
fluxRecord.status&&this.setState(baseField+"Status",fluxRecord.status),null!=fluxRecord.progress&&this.setState(baseField+"Progress",fluxRecord.progress),this.setState(baseField+"FluxRecord",fluxRecord)},FluxSubscriptionsMixin.prototype.unsubscribeAll=function(){var ckey,fluxKey,model,ref1,ref2,subscriptionFunction;ref1=this._subscriptions;for(ckey in ref1)ref2=ref1[ckey],model=ref2.model,fluxKey=ref2.fluxKey,subscriptionFunction=ref2.subscriptionFunction,fluxStore.unsubscribe(model.name,fluxKey,subscriptionFunction);return this._subscriptions={}},FluxSubscriptionsMixin}(superClass)}})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(315).addModules({FluxComponent:__webpack_require__(316)})},function(module,exports,__webpack_require__){var Flux,React,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Flux=__webpack_require__(304),module.exports=Flux.React||Flux.addNamespace("React",React=function(superClass){function React(){return React.__super__.constructor.apply(this,arguments)}return extend(React,superClass),React}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,Component,FluxComponent,FluxCore,FluxSubscriptionsMixin,Foundation,ModelRegistry,Validator,compactFlatten,createComponentFactory,defineModule,globalCount,inspect,isFunction,isPlainObject,isString,log,mergeInfo,nextTick,pending,ref,rubyFalse,rubyTrue,success,time,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxCore=__webpack_require__(307),ref=Neptune.Art.React,Component=ref.Component,createComponentFactory=ref.createComponentFactory,defineModule=Foundation.defineModule,BaseObject=Foundation.BaseObject,nextTick=Foundation.nextTick,mergeInfo=Foundation.mergeInfo,log=Foundation.log,isPlainObject=Foundation.isPlainObject,isString=Foundation.isString,isFunction=Foundation.isFunction,inspect=Foundation.inspect,time=Foundation.time,globalCount=Foundation.globalCount,rubyTrue=Foundation.rubyTrue,rubyFalse=Foundation.rubyFalse,compactFlatten=Foundation.compactFlatten,Validator=Foundation.Validator,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,ModelRegistry=FluxCore.ModelRegistry,FluxSubscriptionsMixin=FluxCore.FluxSubscriptionsMixin,pending=CommunicationStatus.pending,success=CommunicationStatus.success,defineModule(module,FluxComponent=function(superClass){function FluxComponent(){FluxComponent.__super__.constructor.apply(this,arguments),this._autoMaintainedSubscriptions={},this["class"]._prepareSubscriptions()}var normalizeSubscriptionOptions,subscriptionValidator;return extend(FluxComponent,superClass),FluxComponent.abstractClass(),FluxComponent.createFluxComponentFactory=function(spec){return createComponentFactory(spec,FluxComponent)},FluxComponent.subscriptions=function(){var arg,fn,fn1,i,j,len,len1,ref1,ref2,stateField,subscriptionMap,subscriptionName,subscriptionNames,value;for(ref1=compactFlatten(arguments),i=0,len=ref1.length;i<len;i++)if(arg=ref1[i],isPlainObject(subscriptionMap=arg)){fn=function(_this){return function(stateField,value){return _this._addSubscription(stateField,value)}}(this);for(stateField in subscriptionMap)value=subscriptionMap[stateField],fn(stateField,value)}else if(isString(subscriptionNames=arg))for(ref2=subscriptionNames.match(/[_a-z][._a-z0-9]*/gi),fn1=function(_this){return function(subscriptionName){var _,matches,modelName,subscriptionNameId;return(matches=subscriptionName.match(/([_a-z0-9]+)\.([_a-z0-9]+)/i))?(_=matches[0],modelName=matches[1],stateField=matches[2],_this._addSubscription(stateField,{model:modelName})):(subscriptionNameId=subscriptionName+"Id",_this._addSubscription(subscriptionName,{key:function(props){var ref3;return(null!=(ref3=props[subscriptionName])?ref3.id:void 0)||props[subscriptionNameId]}}))}}(this),j=0,len1=ref2.length;j<len1;j++)subscriptionName=ref2[j],fn1(subscriptionName);return null},subscriptionValidator=new Validator({stateField:"present string",model:{required:{validate:function(v){return isFunction(v)||isString(v)}}},key:{required:{validate:function(v){return"undefined"!==v}}}}),FluxComponent._normalizeSubscriptionOptions=normalizeSubscriptionOptions=function(stateField,subscriptionOptions){var key,model;return isPlainObject(subscriptionOptions)?(key=subscriptionOptions.key,model=subscriptionOptions.model,{stateField:stateField,model:model||stateField,key:subscriptionOptions.hasOwnProperty("key")?key:stateField}):{stateField:stateField,model:stateField,key:subscriptionOptions}},FluxComponent._addSubscription=function(stateField,subscriptionOptions){if(subscriptionOptions=normalizeSubscriptionOptions(stateField,subscriptionOptions),subscriptionValidator.validateSync(subscriptionOptions),this.getSubscriptionProperties()[stateField])throw new Error("stateField subscription already defined");return this.extendSubscriptionProperties(stateField,subscriptionOptions),this.addGetter(stateField,function(){return this.state[stateField]})},FluxComponent.prototype.preprocessProps=function(newProps){return this._updateAllSubscriptions(newProps=FluxComponent.__super__.preprocessProps.apply(this,arguments)),newProps},FluxComponent.prototype.componentWillUnmount=function(){return FluxComponent.__super__.componentWillUnmount.apply(this,arguments),this.unsubscribeAll()},FluxComponent.extendableProperty({subscriptionProperties:{}}),FluxComponent._prepareSubscription=function(subscription){var error,key,model,modelName,stateField;if(stateField=subscription.stateField,model=subscription.model,key=subscription.key,!model)throw new Error("no model specified in subscription: "+inspect({stateField:stateField,model:model,"class":this.name,subscription:subscription}));if(isString(model)&&(modelName=model,model=ModelRegistry.models[modelName],!model))throw console.error(error=this.getName()+"::subscriptions() model '"+modelName+"' not registered (component = "+this.getNamespacePath()+")"),new Error(error);return subscription.model=model,subscription.keyFunction=isFunction(key)?key:function(){return key}},FluxComponent.postCreateConcreteClass=function(){return this.prototype.subscriptions&&this.subscriptions(this.prototype.subscriptions),this._subscriptionsPrepared=!1,FluxComponent.__super__.constructor.postCreateConcreteClass.apply(this,arguments)},FluxComponent._prepareSubscriptions=function(){var ref1,results,stateField,subscription;if(!this._subscriptionsPrepared){this._subscriptionsPrepared=!0,ref1=this.getSubscriptionProperties(),results=[];for(stateField in ref1)subscription=ref1[stateField],results.push(this._prepareSubscription(subscription));return results}},FluxComponent.prototype._toFluxKey=function(stateField,key,model,props){var ref1;return rubyFalse(key)&&(key=null!=(ref1=props[stateField])?ref1.id:void 0),rubyTrue(key)?model.toFluxKey(key):null},FluxComponent.prototype._updateSubscription=function(stateField,key,model,props){var existingSubscriptionFluxKey,fluxKey,initialData;if(fluxKey=this._toFluxKey(stateField,key,model,props),this.state[stateField]||(this.state[stateField]=initialData=props[stateField]),rubyTrue(existingSubscriptionFluxKey=this._autoMaintainedSubscriptions[stateField])||(existingSubscriptionFluxKey=null),model&&(null!==fluxKey||fluxKey!==existingSubscriptionFluxKey))return null!==existingSubscriptionFluxKey&&this.unsubscribe(model,existingSubscriptionFluxKey,stateField),this._autoMaintainedSubscriptions[stateField]=fluxKey,rubyTrue(fluxKey)?this.subscribe(model,fluxKey,stateField,{initialFluxRecord:initialData?{status:success,data:initialData}:void 0}):this.setStateFromFluxRecord(stateField,{status:success}),!0},FluxComponent.prototype._updateAllSubscriptions=function(props){var keyFunction,model,ref1,stateField,subscriptionProps;null==props&&(props=this.props),ref1=this["class"].getSubscriptionProperties();for(stateField in ref1)subscriptionProps=ref1[stateField],keyFunction=subscriptionProps.keyFunction,model=subscriptionProps.model,isFunction(model)&&(model=model(props)),isString(model)&&((model=this.models[model])||console.error("Could not find model named "+inspect(model)+" for subscription in component "+this.inspectedName)),model&&this._updateSubscription(stateField,keyFunction(props),model,props);return null},FluxComponent}(FluxSubscriptionsMixin(Component)))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var ApplicationState,BaseObject,CommunicationStatus,FluxCore,FluxModel,FluxStore,Foundation,Unique,clone,defineModule,failure,fluxStore,isPlainObject,isString,log,merge,mergeInto,missing,objectWithout,pending,propsEq,success,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxCore=__webpack_require__(307),clone=Foundation.clone,objectWithout=Foundation.objectWithout,BaseObject=Foundation.BaseObject,log=Foundation.log,isString=Foundation.isString,isPlainObject=Foundation.isPlainObject,merge=Foundation.merge,propsEq=Foundation.propsEq,mergeInto=Foundation.mergeInto,Unique=Foundation.Unique,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,FluxStore=FluxCore.FluxStore,FluxModel=FluxCore.FluxModel,fluxStore=FluxStore.fluxStore,pending=CommunicationStatus.pending,success=CommunicationStatus.success,failure=CommunicationStatus.failure,missing=CommunicationStatus.missing,defineModule(module,ApplicationState=function(superClass){function ApplicationState(){ApplicationState.__super__.constructor.apply(this,arguments),this.state=this._getInitialState()}return extend(ApplicationState,superClass),ApplicationState.abstractClass(),ApplicationState.persistant=function(){return this._persistant=!0},ApplicationState.postCreateConcreteClass=function(arg){var classModuleState,currentState,hotReloaded,hotUpdatedFromClass,k,liveClass,liveInstance,newDefaultState,ret,tempInstance,v;if(hotReloaded=arg.hotReloaded,classModuleState=arg.classModuleState,ret=ApplicationState.__super__.constructor.postCreateConcreteClass.apply(this,arguments),hotReloaded){liveClass=classModuleState.liveClass,hotUpdatedFromClass=classModuleState.hotUpdatedFromClass,tempInstance=new hotUpdatedFromClass,liveInstance=liveClass.getSingleton(),newDefaultState=tempInstance.state,currentState=liveInstance.state,log({"Flux.ApplicationState: model hot-reloaded":{model:liveInstance.name}});for(k in newDefaultState)v=newDefaultState[k],currentState.hasOwnProperty(k)||(liveInstance.setState(k,v),log({"new state field added":{field:k,value:v}}))}return ret},ApplicationState.stateFields=function(fields){var field,initialValue,results;this._stateFields=mergeInto(this._stateFields,fields),results=[];for(field in fields)initialValue=fields[field],results.push(function(_this){return function(field){return _this._addSetter(_this.prototype,field,function(v){return this.setState(field,v)}),_this._addGetter(_this.prototype,field,function(){return this.state[field]})}}(this)(field));return results},ApplicationState.prototype.getInitialState=function(){return{}},ApplicationState.prototype.setState=function(key,value){var k,map,v;if(isPlainObject(map=key))for(k in map)v=map[k],propsEq(this.state[k],v)||(this.state[k]=v,this.load(k));else isString(key)&&!propsEq(this.state[key],value)&&(this.state[key]=value,this.load(key));return this._updateAllState(),this._saveToLocalStorage(),key},ApplicationState.prototype.removeState=function(key){var ret;return this._removeFromFluxStore(key),ret=this.state[key],delete this.state[key],ret},ApplicationState.prototype.clearState=function(){var k,ref,v;ref=this.state;for(k in ref)v=ref[k],this._removeFromFluxStore(k);return this.state={}},ApplicationState.prototype.resetState=function(){return this.replaceState(this._getInitialState())},ApplicationState.prototype.replaceState=function(newState){var k,ref,v;ref=this.state;for(k in ref)v=ref[k],newState.hasOwnProperty(k)||(this._removeFromFluxStore(k),delete this.state[k]);return this.setState(newState)},ApplicationState.prototype.load=function(key,callback){var fluxRecord;return fluxRecord=this.state.hasOwnProperty(key)?{status:success,data:this.state[key]}:{status:missing},this.updateFluxStore(key,fluxRecord),callback&&fluxStore.onNextReady(function(){return callback(fluxRecord)}),fluxRecord},ApplicationState.prototype._removeFromFluxStore=function(key){return this.updateFluxStore(key,{status:missing})},ApplicationState.prototype._loadFromLocalStorage=function(){var data,v;if(this["class"]._persistant)return data=localStorage.getItem(this.name),data&&(v=JSON.parse(data)),log({_loadFromLocalStorage:v}),v},ApplicationState.prototype._updateAllState=function(state){var newState,obj,oldState;return oldState=state||this.state,newState=merge(oldState,(obj={},obj[""+this.name]=objectWithout(oldState,this.name),obj)),state||(this.state=newState,this.load(this.name)),newState},ApplicationState.getter({savableState:function(){return objectWithout(this.state,this.name)}}),ApplicationState.prototype._saveToLocalStorage=function(state){var v;if(null==state&&(state=this.state),this["class"]._persistant)return localStorage.setItem(this.name,v=JSON.stringify(this.savableState))},ApplicationState.prototype._getInitialState=function(){return this._updateAllState(merge(this.getInitialState(),this["class"]._stateFields,function(){try{return this._loadFromLocalStorage()}catch(error){}}.call(this)))},ApplicationState}(FluxModel))}).call(exports,__webpack_require__(93)(module))},function(module,exports){module.exports={author:"Shane Brinkman-Davis Delamore, Imikimi LLC",dependencies:{"art-foundation":"git://github.com/imikimi/art-foundation.git","art-react":"git://github.com/imikimi/art-react.git",chai:"^3.5.0","coffee-loader":"^0.7.2","coffee-script":"^1.11.1","css-loader":"^0.23.1","json-loader":"^0.5.4",mocha:"^2.5.3","neptune-namespaces":"^1.4.0","script-loader":"^0.7.0","sourcemapped-stacktrace":"^1.1.3","style-loader":"^0.13.1",webpack:"^1.13.2","webpack-dev-server":"^1.16.2"},license:"ISC",name:"art-flux",scripts:{dev:"neptune-namespaces --std; webpack-dev-server -d --progress",hot:"neptune-namespaces --std; webpack-dev-server --hot --inline --progress",nn:"neptune-namespaces --std",nodeTest:"neptune-namespaces --std;mocha -u tdd --compilers coffee:coffee-script/register",test:"neptune-namespaces --std; webpack-dev-server -d --progress"},version:"1.2.2"}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(320).addModules({FluxDbModelBase:__webpack_require__(321),FluxDbModel:__webpack_require__(322),FluxDbQueryModel:__webpack_require__(323)})},function(module,exports,__webpack_require__){var Db,Flux,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Flux=__webpack_require__(304),module.exports=Flux.Db||Flux.addNamespace("Db",Db=function(superClass){function Db(){return Db.__super__.constructor.apply(this,arguments)}return extend(Db,superClass),Db}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,FluxCore,FluxDbModelBase,FluxModel,FluxStore,Foundation,ModelRegistry,capitalize,decapitalize,defineModule,emailRegexp,failure,fluxStore,globalCount,idRegExpStr,inspect,isFunction,isHexColor,isId,isNumber,isString,log,merge,missing,nextTick,objectWithout,pending,pluralize,pureMerge,shallowClone,success,time,urlRegexp,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxCore=__webpack_require__(307),log=Foundation.log,BaseObject=Foundation.BaseObject,decapitalize=Foundation.decapitalize,pluralize=Foundation.pluralize,pureMerge=Foundation.pureMerge,shallowClone=Foundation.shallowClone,isString=Foundation.isString,emailRegexp=Foundation.emailRegexp,urlRegexp=Foundation.urlRegexp,isNumber=Foundation.isNumber,nextTick=Foundation.nextTick,capitalize=Foundation.capitalize,inspect=Foundation.inspect,isFunction=Foundation.isFunction,merge=Foundation.merge,objectWithout=Foundation.objectWithout,shallowClone=Foundation.shallowClone,time=Foundation.time,globalCount=Foundation.globalCount,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,FluxStore=FluxCore.FluxStore,ModelRegistry=FluxCore.ModelRegistry,FluxModel=FluxCore.FluxModel,fluxStore=FluxStore.fluxStore,pending=CommunicationStatus.pending,success=CommunicationStatus.success,failure=CommunicationStatus.failure,missing=CommunicationStatus.missing,idRegExpStr="[a-z0-9]+",isId=function(v){return isString(v)&&v.match(RegExp("^"+idRegExpStr+"$","i"))},isHexColor=function(v){return isString(v)&&v.match(/^#([a-f0-9]{3})|([a-f0-9]{6})/i)},defineModule(module,FluxDbModelBase=function(superClass){function FluxDbModelBase(){return FluxDbModelBase.__super__.constructor.apply(this,arguments)}return extend(FluxDbModelBase,superClass),FluxDbModelBase.abstractClass(),FluxDbModelBase.localStoreCacheEnabled=!1,FluxDbModelBase.prototype.get=function(key){return fluxStore.get(this._name,key)},FluxDbModelBase.prototype.getOrLoad=function(key,callback){var fluxRecord;return(fluxRecord=this.get(key))?callback&&fluxStore.onNextReady(function(){return callback(fluxRecord)}):this.load(key,callback),fluxRecord},FluxDbModelBase.prototype.load=function(key,callback){var data;if(this._storeGet(key,function(_this){return function(fluxRecord){return data&&(fluxRecord.data||(fluxRecord.data=data)),fluxStore.update(_this._name,key,fluxRecord),fluxRecord.data&&FluxDbModelBase.localStoreCacheEnabled&&_this._localStoreSet(key,fluxRecord.data),callback&&fluxStore.onNextReady(function(){return callback(fluxRecord)})}}(this)),FluxDbModelBase.localStoreCacheEnabled&&(data=this._localStoreGet(key)))return{data:data,status:success}},FluxDbModelBase.prototype.put=function(id,fields,callback){var ourOldData,ourRetry;if(ourOldData=null,ourRetry=null,null===id||void 0===id||id===!1)throw new Error("invalid id: "+inspect(id));return fluxStore.update(this.name,id,function(_this){return function(oldFields){var res;return res=merge(oldFields,{putPendingCount:(oldFields.putPendingCount||0)+1,data:merge((null!=oldFields?oldFields.pendingData:void 0)||(null!=oldFields?oldFields.data:void 0),fields),oldData:ourOldData=shallowClone((null!=oldFields?oldFields.oldData:void 0)||(null!=oldFields?oldFields.data:void 0))})}}(this)),this._storePut(id,fields,function(_this){return function(putStatus){if(callback&&fluxStore.onNextReady(function(){return callback(putStatus)}),putStatus.status!==pending)return putStatus.status===success?fluxStore.update(_this.name,id,function(oldFields){var putPendingCount,res,updatedData;return oldFields.status!==pending&&oldFields.status!==success&&_this.load(id),updatedData=merge(oldFields.data,fields),fluxStore.onNextReady(function(){return _this._updateQueries(updatedData)}),putPendingCount=(oldFields.putPendingCount||0)-1,res=merge(oldFields,{data:merge(oldFields.data,fields)}),putPendingCount<=0&&delete res.putPendingCount,res.retry===oldFields.retry&&delete res.retry,ourOldData===res.oldData&&delete res.oldData,res}):fluxStore.update(_this.name,id,function(oldFields){return merge(oldFields,{data:ourOldData===oldFields.oldData?ourOldData:oldFields.data,putPendingCount:(oldFields.putPendingCount||0)-1,retry:ourRetry=function(newCallback){var otherRetry;return ourRetry=function(_this){return function(){return _this.put(id,fields,function(fluxRecord){return"function"==typeof newCallback&&newCallback(fluxRecord),"function"==typeof callback?callback(fluxRecord):void 0})}}(this),(otherRetry=oldFields.retry)?otherRetry(function(_this){return function(fluxRecord){if(fluxRecord.status===success)return ourRetry()}}(this)):ourRetry()}})})}}(this)),null},FluxDbModelBase.prototype.post=function(fields,callback){return this._storePost(fields,function(_this){return function(fluxRecord){return fluxRecord.status===success&&(_this._updateQueries(fluxRecord.data),fluxStore.update(_this.name,fluxRecord.data.id,fluxRecord)),callback&&fluxStore.onNextReady(function(){return callback(fluxRecord)})}}(this)),null},FluxDbModelBase.prototype.keyFromData=function(data){return data.id},FluxDbModelBase.prototype._updateQueries=function(updatedRecordData){},FluxDbModelBase.prototype._storeGet=function(id,callback){throw new Error("must override. Class: "+this.className)},FluxDbModelBase.prototype._storePut=function(id,fields,callback){throw new Error("must override. Class: "+this.className)},FluxDbModelBase.prototype._storePost=function(fields,callback){throw new Error("must override. Class: "+this.className)},FluxDbModelBase}(FluxModel))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,FluxCore,FluxDbModel,FluxDbModelBase,FluxModel,FluxStore,Foundation,ModelRegistry,capitalize,compact,decapitalize,defineModule,emailRegexp,failure,fluxStore,idRegExpStr,inspect,isFunction,isHexColor,isId,isNumber,isPlainArray,isPlainObject,isString,log,merge,missing,nextTick,objectWithout,pending,pluralize,pureMerge,shallowClone,success,urlRegexp,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxCore=__webpack_require__(307),FluxDbModelBase=__webpack_require__(321),log=Foundation.log,BaseObject=Foundation.BaseObject,decapitalize=Foundation.decapitalize,pluralize=Foundation.pluralize,pureMerge=Foundation.pureMerge,shallowClone=Foundation.shallowClone,isString=Foundation.isString,emailRegexp=Foundation.emailRegexp,urlRegexp=Foundation.urlRegexp,isNumber=Foundation.isNumber,nextTick=Foundation.nextTick,capitalize=Foundation.capitalize,inspect=Foundation.inspect,isFunction=Foundation.isFunction,merge=Foundation.merge,objectWithout=Foundation.objectWithout,isPlainObject=Foundation.isPlainObject,isPlainArray=Foundation.isPlainArray,compact=Foundation.compact,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,FluxStore=FluxCore.FluxStore,ModelRegistry=FluxCore.ModelRegistry,FluxModel=FluxCore.FluxModel,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,success=CommunicationStatus.success,pending=CommunicationStatus.pending,fluxStore=FluxStore.fluxStore,idRegExpStr="[a-z0-9]+",isId=function(v){return isString(v)&&v.match(RegExp("^"+idRegExpStr+"$","i"))},isHexColor=function(v){return isString(v)&&v.match(/^#([a-f0-9]{3})|([a-f0-9]{6})/i)},defineModule(module,FluxDbModel=function(superClass){function FluxDbModel(){FluxDbModel.__super__.constructor.apply(this,arguments),this.queryModels=[]}var fieldTypes,i,key,len,normalizeUrl,ref,requiredKey;for(extend(FluxDbModel,superClass),FluxDbModel.abstractClass(),FluxDbModel.normalizeUrl=normalizeUrl=function(url){var match;return match=url.match(urlRegexp),""+match[1].toLowerCase()+match[2]+match[3].toLowerCase()+match.slice(4).join("")},FluxDbModel.fieldTypes=fieldTypes={id:{validate:function(v){return isId(v)}},color:{validate:function(v){return isHexColor(v)}},number:{validate:function(v){return isNumber(v)}},date:{validate:function(v){return isString(v)||v instanceof Date},preprocess:function(v){return isString(v)?new Date(v):v}},email:{validate:function(v){return isString(v)&&v.trim().match(emailRegexp)},preprocess:function(v){return v.trim().toLowerCase()}},url:{validate:function(v){return isString(v)&&v.match(urlRegexp)},preprocess:function(v){return normalizeUrl(v)}},"boolean":{validate:function(v){return v===!0||v===!1}},count:{validate:function(v){return isNumber(v)}},object:{validate:function(v){return isPlainObject(v)}},string:{validate:function(v){return isString(v)}},array:{validate:function(v){return isPlainArray(v)}},trimmedString:{validate:function(v){return isString(v)},preprocess:function(v){return v.trim()}}},ref=Object.keys(FluxDbModel.fieldTypes),i=0,len=ref.length;i<len;i++)key=ref[i],requiredKey="required"+capitalize(key),FluxDbModel.fieldTypes[requiredKey]=merge(FluxDbModel.fieldTypes[key],{required:!0});return FluxDbModel.fields=function(fieldDeclarationMap){var field,idFieldOptions,linkTo,results,subOptions;this.register(),results=[];for(field in fieldDeclarationMap){if(subOptions=fieldDeclarationMap[field],subOptions.type)throw new Error(this.namespacePath+": @fields declarations using 'type' no longer supported");(linkTo=subOptions.linkTo)&&(field.match(/.*Id$/)&&console.warn("FluxDbModel "+this.name+": linkTo field '"+field+"' should not end in 'Id'"),this._addField(field+"Id",idFieldOptions=merge(this.fieldTypes.id,objectWithout(subOptions,"linkTo"))),subOptions=merge(this.fieldTypes.plainObject,subOptions),subOptions.required&&(delete subOptions.required,idFieldOptions.required=field)),results.push(this._addField(field,subOptions))}return results},FluxDbModel.getter({relations:function(){var field,linkTo,ref1;if(!this._relations){this._relations={},ref1=this.fieldProperties;for(field in ref1)linkTo=ref1[field].linkTo,linkTo&&(this._relations[field]={model:this.models[linkTo],idField:field+"Id"})}return this._relations}}),FluxDbModel.query=function(parameterizedField,options){var ref1,rm,rqm;return null==options&&(options={}),ModelRegistry.register(rqm=new this.queryModel(rm=this.register(),parameterizedField,options)),rm.queryModels.push(rqm),null!=(ref1=rm._queriesToUpdate)?ref1.push(function(fields){return rm._updateQuery(rqm,fields[parameterizedField])}):void 0},FluxDbModel.prototype.put=function(id,fields,callback){return this._presentFieldsValid(fields)?FluxDbModel.__super__.put.call(this,id,this._preprocessFields(fields),callback):callback&&fluxStore.onNextReady(function(_this){return function(){return callback({status:failure,model:_this.name,id:id,pendingData:fields,invalidFields:_this._invalidFields(fields)})}}(this)),null},FluxDbModel.prototype.post=function(fields,callback){return this._requiredFieldsPresent(fields)&&this._presentFieldsValid(fields)?FluxDbModel.__super__.post.call(this,this._preprocessFields(fields),callback):callback&&fluxStore.onNextReady(function(_this){return function(){return callback({status:failure,pendingData:fields,missingFields:_this._missingFields(fields),invalidFields:_this._invalidFields(fields)})}}(this)),null},FluxDbModel.prototype.validatePostFields=function(fields){return this._requiredFieldsPresent(fields)&&this._presentFieldsValid(fields)?null:{invalidFields:this._invalidFields(fields),missingFields:this._missingFields(fields)}},FluxDbModel.extendableProperty({fieldProperties:{}}),FluxDbModel._addField=function(field,options){return this.extendFieldProperties(field,options)},FluxDbModel.prototype._missingFields=function(fields){var fieldName,ref1,required,results;ref1=this.fieldProperties,results=[];for(fieldName in ref1)required=ref1[fieldName].required,required&&null==fields[fieldName]&&null==fields[required]&&results.push(fieldName);return results},FluxDbModel.prototype._requiredFieldsPresent=function(fields){var fieldName,ref1,required;ref1=this.fieldProperties;for(fieldName in ref1)if(required=ref1[fieldName].required,required&&null==fields[fieldName]&&null==fields[required])return!1;return!0},FluxDbModel.prototype._preprocessFields=function(fields){var fieldName,oldV,preprocess,processedFields,ref1,v,value;processedFields=null,ref1=this.fieldProperties;for(fieldName in ref1)preprocess=ref1[fieldName].preprocess,preprocess&&null!=(value=fields[fieldName])&&(v=preprocess(oldV=fields[fieldName]))!==oldV&&(processedFields||(processedFields=shallowClone(fields)),processedFields[fieldName]=v);return processedFields||fields},FluxDbModel.prototype._presentFieldsValid=function(fields){var fieldName,ref1,validate,value;ref1=this.fieldProperties;for(fieldName in ref1)if(validate=ref1[fieldName].validate,validate&&null!=(value=fields[fieldName])&&!validate(value))return!1;return!0},FluxDbModel.prototype._invalidFields=function(fields){var fieldName,ref1,results,validate,value;ref1=this.fieldProperties,results=[];for(fieldName in ref1)validate=ref1[fieldName].validate,validate&&null!=(value=fields[fieldName])&&!validate(value)&&results.push(fieldName);return results},FluxDbModel}(FluxDbModelBase))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,FluxDbModelBase,FluxDbQueryModel,Foundation,capitalize,decapitalize,defineModule,emailRegexp,inspect,isFunction,isNumber,isString,log,nextTick,objectWithout,pluralize,pureMerge,shallowClone,urlRegexp,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxDbModelBase=__webpack_require__(321),defineModule=Foundation.defineModule,log=Foundation.log,BaseObject=Foundation.BaseObject,decapitalize=Foundation.decapitalize,pluralize=Foundation.pluralize,pureMerge=Foundation.pureMerge,shallowClone=Foundation.shallowClone,isString=Foundation.isString,emailRegexp=Foundation.emailRegexp,urlRegexp=Foundation.urlRegexp,isNumber=Foundation.isNumber,nextTick=Foundation.nextTick,capitalize=Foundation.capitalize,inspect=Foundation.inspect,isFunction=Foundation.isFunction,objectWithout=Foundation.objectWithout,defineModule(module,FluxDbQueryModel=function(superClass){function FluxDbQueryModel(singlesModel,parameterizedField,options){FluxDbQueryModel.__super__.constructor.call(this,(null!=options?options.modelName:void 0)?decapitalize(null!=options?options.modelName:void 0):pluralize(singlesModel.name)+"By"+capitalize(parameterizedField)),this._singlesModel=singlesModel,this._parameterizedField=parameterizedField,this.keyFromData=options.keyFromData||options.toFluxKey||eval("(function(data) {return data['"+parameterizedField+"'];})"),this._options=options,options.toFluxKey&&(this.toFluxKey=options.toFluxKey)}return extend(FluxDbQueryModel,superClass),FluxDbQueryModel.abstractClass(),FluxDbQueryModel}(FluxDbModelBase))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(325).addModules({ApplicationState:__webpack_require__(317),VolatileModel:__webpack_require__(326),VolatileQueryModel:__webpack_require__(328),VolatileStore:__webpack_require__(327)})},function(module,exports,__webpack_require__){var Flux,Models,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Flux=__webpack_require__(304),module.exports=Flux.Models||Flux.addNamespace("Models",Models=function(superClass){
function Models(){return Models.__super__.constructor.apply(this,arguments)}return extend(Models,superClass),Models}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var BaseObject,FluxCore,FluxDb,FluxDbModel,FluxModel,FluxStore,Foundation,ModelRegistry,VolatileModel,VolatileQueryModel,VolatileStore,decapitalize,defineModule,fluxStore,log,pluralize,volatileStore,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxCore=__webpack_require__(307),VolatileStore=__webpack_require__(327),VolatileQueryModel=__webpack_require__(328),FluxDb=__webpack_require__(319),defineModule=Foundation.defineModule,log=Foundation.log,BaseObject=Foundation.BaseObject,decapitalize=Foundation.decapitalize,pluralize=Foundation.pluralize,defineModule=Foundation.defineModule,FluxStore=FluxCore.FluxStore,FluxModel=FluxCore.FluxModel,ModelRegistry=FluxCore.ModelRegistry,volatileStore=VolatileStore.volatileStore,fluxStore=FluxStore.fluxStore,FluxDbModel=FluxDb.FluxDbModel,defineModule(module,VolatileModel=function(superClass){function VolatileModel(){VolatileModel.__super__.constructor.apply(this,arguments),this._queriesToUpdate=[function(_this){return function(fields){return _this._updateQuery(_this,"")}}(this)],volatileStore.init(this.name)}return extend(VolatileModel,superClass),VolatileModel.queryModel=VolatileQueryModel,VolatileModel.prototype._storeGet=function(id,callback){return volatileStore.get(this.name,id,callback)},VolatileModel.prototype._storePut=function(id,fields,callback){return volatileStore.put(this.name,id,fields,callback)},VolatileModel.prototype._storePost=function(fields,callback){return volatileStore.post(this.name,fields,callback)},VolatileModel.prototype._updateQueries=function(fields){return fluxStore.onNextReady(function(_this){return function(){var f,i,len,ref,results;for(ref=_this._queriesToUpdate,results=[],i=0,len=ref.length;i<len;i++)f=ref[i],results.push(f(fields));return results}}(this))},VolatileModel.prototype._updateQuery=function(model,id){if(fluxStore.get(model.name,id))return model.load(id)},VolatileModel}(FluxDbModel))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,FluxCore,FluxStore,Foundation,VolatileStore,arrayWithOne,clone,defineModule,fluxStore,log,merge,mergeInfo,missing,simulateAsyncRequest,slice,success,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxCore=__webpack_require__(307),FluxStore=FluxCore.FluxStore,BaseObject=Foundation.BaseObject,mergeInfo=Foundation.mergeInfo,log=Foundation.log,clone=Foundation.clone,slice=Foundation.slice,merge=Foundation.merge,arrayWithOne=Foundation.arrayWithOne,defineModule=Foundation.defineModule,CommunicationStatus=Foundation.CommunicationStatus,success=CommunicationStatus.success,missing=CommunicationStatus.missing,fluxStore=FluxStore.fluxStore,simulateAsyncRequest=function(asyncCallback){return fluxStore.onNextReady(asyncCallback),null},defineModule(module,VolatileStore=function(superClass){function VolatileStore(){VolatileStore.__super__.constructor.apply(this,arguments),this._reset()}var getDbKey;return extend(VolatileStore,superClass),VolatileStore.singletonClass(),VolatileStore.prototype._reset=function(){return this._nextId=0,this._db={}},VolatileStore.prototype.init=function(listUri){return this._list(listUri)},VolatileStore.prototype.get=function(modelPrefix,id,requestStatusCallback){return simulateAsyncRequest(function(_this){return function(){var dbKey,res;return dbKey=getDbKey(modelPrefix,id),requestStatusCallback((res=clone(_this._db[dbKey]))?{status:success,data:res}:{status:missing})}}(this))},VolatileStore.prototype.put=function(modelPrefix,id,fields,requestStatusCallback){return simulateAsyncRequest(function(_this){return function(){var dbKey;return dbKey=getDbKey(modelPrefix,id),requestStatusCallback({status:success,data:clone(_this._setSingle(modelPrefix,id,dbKey,merge(_this._db[dbKey],fields)))})}}(this))},VolatileStore.prototype.post=function(modelPrefix,fields,requestStatusCallback){return simulateAsyncRequest(function(_this){return function(){var dbKey,id;return id=(_this._nextId++).toString(),dbKey=getDbKey(modelPrefix,id),requestStatusCallback({status:success,data:clone(_this._setSingle(modelPrefix,id,dbKey,fields))})}}(this))},VolatileStore._getDbKey=getDbKey=function(modelPrefix,id){return id&&id.length>0?modelPrefix+"/"+id:modelPrefix},VolatileStore.prototype._setSingle=function(modelPrefix,id,dbKey,fields){return this._list(modelPrefix)[id]=this._db[dbKey]=merge(fields,{id:id})},VolatileStore.prototype._list=function(modelPrefix){var base;return(base=this._db)[modelPrefix]||(base[modelPrefix]={})},VolatileStore}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var FluxDbQueryModel,Foundation,VolatileQueryModel,defineModule,failure,log,missing,objectWithout,pending,ref,success,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),FluxDbQueryModel=__webpack_require__(323),ref=Foundation.CommunicationStatus,success=ref.success,failure=ref.failure,pending=ref.pending,missing=ref.missing,defineModule=ref.defineModule,log=Foundation.log,objectWithout=Foundation.objectWithout,defineModule=Foundation.defineModule,defineModule(module,VolatileQueryModel=function(superClass){function VolatileQueryModel(){return this._storeGet=bind(this._storeGet,this),VolatileQueryModel.__super__.constructor.apply(this,arguments)}return extend(VolatileQueryModel,superClass),VolatileQueryModel.abstractClass(),VolatileQueryModel.prototype._storeGet=function(queryParam,callback){return this._singlesModel._storeGet("",function(_this){return function(allRequestStatus){var fields,k;return callback(allRequestStatus.status!==success?objectWithout(allRequestStatus,"fluxKey"):{status:allRequestStatus.status,data:function(){var ref1,results;ref1=allRequestStatus.data,results=[];for(k in ref1)fields=ref1[k],fields[this._parameterizedField]===queryParam&&results.push(fields);return results}.call(_this)})}}(this),!0)},VolatileQueryModel}(FluxDbQueryModel))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(330)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(331).includeInNamespace(__webpack_require__(333)).addModules({ArtEryBaseObject:__webpack_require__(336),Config:__webpack_require__(337),Filter:__webpack_require__(338),Pipeline:__webpack_require__(342),PipelineRegistry:__webpack_require__(334),Request:__webpack_require__(339),RequestResponseBase:__webpack_require__(340),Response:__webpack_require__(341),Session:__webpack_require__(335)})},function(module,exports,__webpack_require__){var Art,Ery,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Art=__webpack_require__(332),module.exports=Art.Ery||Art.addNamespace("Ery",Ery=function(superClass){function Ery(){return Ery.__super__.constructor.apply(this,arguments)}return extend(Ery,superClass),Ery}(Neptune.Base))},function(module,exports,__webpack_require__){var Art,Neptune,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Neptune=__webpack_require__(4),module.exports=Neptune.Art||Neptune.addNamespace("Art",Art=function(superClass){function Art(){return Art.__super__.constructor.apply(this,arguments)}return extend(Art,superClass),Art}(Neptune.Base))},function(module,exports,__webpack_require__){module.exports=[{pipelines:__webpack_require__(334).pipelines,session:__webpack_require__(335).singleton},__webpack_require__(337)]},function(module,exports,__webpack_require__){(function(module){var BaseObject,PipelineRegistry,decapitalize,defineModule,inspect,isClass,log,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),defineModule=ref.defineModule,log=ref.log,BaseObject=ref.BaseObject,decapitalize=ref.decapitalize,isClass=ref.isClass,inspect=ref.inspect,defineModule(module,PipelineRegistry=function(superClass){function PipelineRegistry(){return PipelineRegistry.__super__.constructor.apply(this,arguments)}var pipelines;return extend(PipelineRegistry,superClass),PipelineRegistry.pipelines=pipelines={},PipelineRegistry.register=function(PipelineClass){var _aliases,alias,singleton;return singleton=PipelineClass.singleton,_aliases=PipelineClass._aliases,_aliases&&function(){var i,len,results;for(results=[],i=0,len=_aliases.length;i<len;i++)alias=_aliases[i],results.push(pipelines[alias]=singleton);return results}(),pipelines[singleton.name]=singleton},PipelineRegistry._reset=function(){var i,k,len,ref1,results;for(ref1=Object.keys(pipelines),results=[],i=0,len=ref1.length;i<len;i++)k=ref1[i],results.push(delete pipelines[k]);return results},PipelineRegistry}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var BaseObject,EventedMixin,Foundation,JsonStore,Session,Validator,inspect,isObject,isString,log,merge,plainObjectsDeepEq,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),EventedMixin=__webpack_require__(168).EventedMixin,BaseObject=Foundation.BaseObject,merge=Foundation.merge,inspect=Foundation.inspect,isString=Foundation.isString,isObject=Foundation.isObject,log=Foundation.log,Validator=Foundation.Validator,plainObjectsDeepEq=Foundation.plainObjectsDeepEq,JsonStore=Foundation.JsonStore,module.exports=Session=function(superClass){function Session(_data){this._data=null!=_data?_data:{},Session.__super__.constructor.apply(this,arguments),this._signature=""}var jsonStore,jsonStoreKey;return extend(Session,superClass),jsonStore=new JsonStore,jsonStoreKey="Art.Ery.Session.data",Session.singletonClass(),Session.property("data signature"),Session.prototype.loadSession=function(){return this._sessionLoadPromise=jsonStore.getItem(jsonStoreKey).then(function(_this){return function(data){if(log({jsonStoreItem:{key:jsonStoreKey,data:data}}),data)return _this.data=data}}(this))},Session.getter("sessionLoadPromise",{inspectedObjects:function(){return this._data}}),Session.setter({data:function(v){return plainObjectsDeepEq(v,this._data)||this.queueEvent("change",{data:v}),jsonStore.setItem(jsonStoreKey,this._data=v)}}),Session.prototype.reset=function(){return this.data={}},Session}(EventedMixin(__webpack_require__(336)))},function(module,exports,__webpack_require__){(function(module){var ArtEry,ArtEryBaseObject,BaseObject,defineModule,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),BaseObject=ref.BaseObject,defineModule=ref.defineModule,ArtEry=__webpack_require__(331),defineModule(module,ArtEryBaseObject=function(superClass){function ArtEryBaseObject(){return ArtEryBaseObject.__super__.constructor.apply(this,arguments)}return extend(ArtEryBaseObject,superClass),ArtEryBaseObject.abstractClass(),ArtEryBaseObject.getter({productionEnvironment:function(){return!1},pipelines:function(){return ArtEry.pipelines}}),ArtEryBaseObject}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,Config,defineModule,mergeInto,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),defineModule=ref.defineModule,mergeInto=ref.mergeInto,BaseObject=ref.BaseObject,defineModule(module,Config=function(superClass){function Config(){return Config.__super__.constructor.apply(this,arguments)}return extend(Config,superClass),Config.classProperty({tableNamePrefix:""}),Config.getPrefixedTableName=function(tableName){return""+this.getTableNamePrefix()+tableName},Config.configure=function(config){return null==config&&(config={}),Config.tableNamePrefix=config.tableNamePrefix||Config.getTableNamePrefix()},Config}(BaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,Filter,Foundation,Promise,Request,Response,defineModule,failure,getInspectedObjects,isPlainObject,log,merge,mergeInto,shallowClone,success,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Request=__webpack_require__(339),Response=__webpack_require__(341),getInspectedObjects=Foundation.getInspectedObjects,defineModule=Foundation.defineModule,BaseObject=Foundation.BaseObject,Promise=Foundation.Promise,log=Foundation.log,isPlainObject=Foundation.isPlainObject,mergeInto=Foundation.mergeInto,merge=Foundation.merge,shallowClone=Foundation.shallowClone,CommunicationStatus=Foundation.CommunicationStatus,success=CommunicationStatus.success,failure=CommunicationStatus.failure,defineModule(module,Filter=function(superClass){function Filter(options){null==options&&(options={}),Filter.__super__.constructor.apply(this,arguments),this.serverSideOnly=options.serverSideOnly,this.clientSideOnly=options.clientSideOnly,this.name=options.name,this.name||(this.name=this["class"].getName()),this.after(options.after),this.before(options.before)}return extend(Filter,superClass),Filter.filterLocation="server",Filter.extendableProperty({beforeFilters:{},afterFilters:{},fields:{}}),Filter.fields=Filter.extendFields,Filter.before=function(a,b){if(a)return this.extendBeforeFilters(a,b)},Filter.prototype.before=function(a,b){if(a)return this.extendBeforeFilters(a,b)},Filter.after=function(a,b){if(a)return this.extendAfterFilters(a,b)},Filter.prototype.after=function(a,b){if(a)return this.extendAfterFilters(a,b)},Filter.property("name",{serverSideOnly:!1,clientSideOnly:!1}),Filter.prototype.toString=function(){return this.getName()},Filter.prototype.getBeforeFilter=function(requestType){return this.beforeFilters[requestType]||this.beforeFilters.all},Filter.prototype.getAfterFilter=function(requestType){return this.afterFilters[requestType]||this.afterFilters.all},Filter.prototype.processBefore=function(request){return this._processFilter(request,this.getBeforeFilter(request.type))},Filter.prototype.processAfter=function(response){return this._processFilter(response,this.getAfterFilter(response.type))},Filter.prototype._processFilter=function(responseOrRequest,filterFunction){return Promise.then(function(_this){return function(){return filterFunction?(responseOrRequest.addFilterLog(_this),filterFunction.call(_this,responseOrRequest)):responseOrRequest}}(this)).then(function(_this){return function(result){return responseOrRequest.next(result)}}(this))["catch"](function(_this){return function(error){var ref;return log.error("Error Applying Filter",{filter:_this,pipeline:null!=(ref=responseOrRequest.pipeline)?ref.name:void 0,responseOrRequest:responseOrRequest,error:error}),responseOrRequest.next(error,failure)}}(this))},Filter}(__webpack_require__(336)))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var ArtEry,BaseObject,CommunicationStatus,Foundation,Request,RestClient,Validator,arrayWith,failure,inspect,isObject,isString,log,merge,missing,present,success,validStatus,validator,w,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),present=Foundation.present,BaseObject=Foundation.BaseObject,RestClient=Foundation.RestClient,merge=Foundation.merge,inspect=Foundation.inspect,isString=Foundation.isString,isObject=Foundation.isObject,log=Foundation.log,Validator=Foundation.Validator,CommunicationStatus=Foundation.CommunicationStatus,arrayWith=Foundation.arrayWith,w=Foundation.w,ArtEry=__webpack_require__(331),success=CommunicationStatus.success,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,validStatus=CommunicationStatus.validStatus,validator=new Validator({type:w("required string"),pipeline:{required:{"instanceof":Neptune.Art.Ery.Pipeline}},session:w("required object"),data:"object",key:"string",originatedOnServer:"boolean"}),module.exports=Request=function(superClass){function Request(options){Request.__super__.constructor.apply(this,arguments),validator.preCreateSync(options,{context:"Request options"}),this.type=options.type,this.key=options.key,this.pipeline=options.pipeline,this.session=options.session,this.data=options.data,this.originatedOnServer=options.originatedOnServer,this.originatedOnClient=options.originatedOnClient,this.sessionSignature=options.sessionSignature}var getRestClientParamsForArtEryRequest,restMap;return extend(Request,superClass),Request.property("type key pipeline session data originatedOnServer sessionSignature"),Request.prototype.toString=function(){return"ArtEry.Request("+this.type+" key: "+this.key+", hasData: "+!!this.data+")"},Request.prototype.requireServerOrigin=function(message){if(null==message&&(message="(no further explanation)"),!this.originatedOnServer)throw this.failure({data:{message:this.type+"-request: originatedOnServer required "+(message||"")}});return this},Request.getter({request:function(){return this},props:function(){return{pipeline:this.pipeline,type:this.type,key:this.key,session:this.session,data:this.data,filterLog:this.filterLog,originatedOnServer:this.originatedOnServer}},urlKeyClause:function(){return present(this.key)?"/"+this.key:""}}),Request.prototype.getRestRequestUrl=function(server){return server+"/"+this.pipeline.name+this.urlKeyClause},Request.prototype.getNonRestRequestUrl=function(server){return server+"/"+this.pipeline.name+"-"+this.type+this.urlKeyClause},restMap={get:"get",create:"post",update:"put","delete":"delete"},Request.getRestClientParamsForArtEryRequest=getRestClientParamsForArtEryRequest=function(arg){var data,key,method,restPath,server,type,url,urlKeyClause;return server=arg.server,restPath=arg.restPath,type=arg.type,key=arg.key,data=arg.data,urlKeyClause=present(key)?"/"+key:"",server||(server=""),url=(method=restMap[type])?""+server+restPath+urlKeyClause:(method="post",""+server+restPath+"-"+type+urlKeyClause),{method:method,url:url,data:data}},Request.prototype.sendRemoteRequest=function(){var remoteRequestOptions;return remoteRequestOptions=getRestClientParamsForArtEryRequest({restPath:this.pipeline.restPath,server:this.pipeline.remoteServer,type:this.type,key:this.key,data:{data:this.data,session:this.session,sessionSignature:this.sessionSignature}}),RestClient.restJsonRequest(remoteRequestOptions)["catch"](function(_this){return function(error){return _this.failure({error:error})}}(this)).then(function(_this){return function(remoteResponseOptions){var data,filterLog,session,sessionSignature,status;return data=remoteResponseOptions.data,status=remoteResponseOptions.status,filterLog=remoteResponseOptions.filterLog,session=remoteResponseOptions.session,sessionSignature=remoteResponseOptions.sessionSignature,_this._toResponse(status,{data:data,filterLog:filterLog,session:session,sessionSignature:sessionSignature,remoteRequest:remoteRequestOptions,remoteResponse:remoteResponseOptions})}}(this))},Request}(__webpack_require__(340))},function(module,exports,__webpack_require__){(function(module){var ArtEry,ArtEryBaseObject,BaseObject,CommunicationStatus,RequestResponseBase,arrayWith,defineModule,failure,inspect,inspectedObjectLiteral,isJsonType,isPlainObject,isString,log,merge,missing,ref,success,toInspectedObjects,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(19),BaseObject=ref.BaseObject,CommunicationStatus=ref.CommunicationStatus,log=ref.log,arrayWith=ref.arrayWith,defineModule=ref.defineModule,merge=ref.merge,isJsonType=ref.isJsonType,isString=ref.isString,isPlainObject=ref.isPlainObject,inspect=ref.inspect,inspectedObjectLiteral=ref.inspectedObjectLiteral,toInspectedObjects=ref.toInspectedObjects,ArtEry=__webpack_require__(331),ArtEryBaseObject=__webpack_require__(336),success=CommunicationStatus.success,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,defineModule(module,RequestResponseBase=function(superClass){function RequestResponseBase(options){RequestResponseBase.__super__.constructor.apply(this,arguments),this.filterLog=options.filterLog}return extend(RequestResponseBase,superClass),RequestResponseBase.property("filterLog"),RequestResponseBase.prototype.addFilterLog=function(filter){return this._filterLog=arrayWith(this._filterLog,filter)},RequestResponseBase.getter({inspectedObjects:function(){var obj;return obj={},obj[""+this["class"].namespacePath]=toInspectedObjects(this.props),obj}}),RequestResponseBase.prototype.withData=function(data){return Promise.resolve(data).then(function(_this){return function(resolvedData){return new _this["class"](merge(_this.props,{data:resolvedData}))}}(this))},RequestResponseBase.prototype.withMergedData=function(data){return Promise.resolve(data).then(function(_this){return function(resolvedData){return new _this["class"](merge(_this.props,{data:merge(_this.data,resolvedData)}))}}(this))},RequestResponseBase.prototype.next=function(data,status){return null==status&&(status=success),Promise.resolve(data).then(function(_this){return function(data){var responseProps;return responseProps=data?isJsonType(data)?{data:data}:data:(status=missing,{data:{message:"missing response"}}),_this._toResponse(status,responseProps)}}(this))},RequestResponseBase.prototype.success=function(responseProps){return this._toResponse(success,responseProps)},RequestResponseBase.prototype.missing=function(responseProps){return this._toResponse(missing,responseProps)},RequestResponseBase.prototype.failure=function(responseProps){return this._toResponse(failure,responseProps)},RequestResponseBase.prototype._toResponse=function(status,responseProps){return Promise.resolve(responseProps)["catch"](function(_this){return function(e){return status=failure,e}}(this)).then(function(_this){return function(responseProps){var message,response;return null==responseProps&&(responseProps={}),responseProps instanceof RequestResponseBase?responseProps:(isString(responseProps)&&(responseProps={message:responseProps}),isPlainObject(responseProps)||(status=failure,message=null,responseProps={data:{message:responseProps instanceof Error?(log.error(message="Internal Error: ArtEry.RequestResponseBase#_toResponse received Error instance",_this,responseProps),message):log.error("Internal Error: ArtEry.RequestResponseBase#_toResponse expecting responseProps or error",responseProps)}}),response=new ArtEry.Response(merge({request:_this.request,status:status},responseProps)),status===success?Promise.resolve(response):Promise.reject(response))}}(this))},RequestResponseBase}(ArtEryBaseObject))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){var BaseObject,CommunicationStatus,Foundation,Request,Response,Validator,arrayWith,failure,formattedInspect,inspect,isJsonType,isPlainObject,log,merge,missing,responseValidator,success,w,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Request=__webpack_require__(339),BaseObject=Foundation.BaseObject,arrayWith=Foundation.arrayWith,inspect=Foundation.inspect,isPlainObject=Foundation.isPlainObject,log=Foundation.log,CommunicationStatus=Foundation.CommunicationStatus,Validator=Foundation.Validator,merge=Foundation.merge,isJsonType=Foundation.isJsonType,formattedInspect=Foundation.formattedInspect,w=Foundation.w,success=CommunicationStatus.success,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,responseValidator=new Validator({request:w("required",{"instanceof":Request}),status:w("required communicationStatus"),data:{validate:function(a){return void 0===a||isJsonType(a)}},session:"object"}),module.exports=Response=function(superClass){function Response(options){var ref;Response.__super__.constructor.apply(this,arguments),responseValidator.preCreateSync(options,{context:"Response options"}),this.request=options.request,this.status=options.status,this.data=null!=(ref=options.data)?ref:{},this.session=options.session,this.sessionSignature=options.sessionSignature,this.error=options.error,this.remoteRequest=options.remoteRequest,this.remoteResponse=options.remoteResponse,this.session||(this.session=this.request.session)}return extend(Response,superClass),Response.prototype.isResponse=!0,Response.prototype.toString=function(){return"ArtEry.Response("+this.type+": "+this.status+"): "+this.message},Response.property("request status data session sessionSignature error remoteResponse remoteRequest"),Response.getter({type:function(){return this.request.type},originatedOnServer:function(){return this.request.originatedOnServer},beforeFilterLog:function(){return this.request.filterLog},afterFilterLog:function(){return this.filterLog},message:function(){var ref;return null!=(ref=this.data)?ref.message:void 0},isSuccessful:function(){return this._status===success},notSuccessful:function(){return this._status!==success},props:function(){return{request:this.request,status:this.status,data:this.data,session:this.session,filterLog:this.filterLog,remoteRequest:this.remoteRequest,remoteResponse:this.remoteResponse}},plainObjectsResponse:function(){var out,ref;return out={status:this.status,data:this.data,session:this.session},(null!=(ref=this.filterLog)?ref.length:void 0)>0&&(out.filterLog=this.filterLog),out}}),Response}(__webpack_require__(340))},function(module,exports,__webpack_require__){(function(module){var BaseObject,CommunicationStatus,Config,Filter,Foundation,Pipeline,PipelineRegistry,Promise,Request,Response,Session,Validator,arrayToTruthMap,compactFlatten,decapitalize,defineModule,escapeRegExp,failure,inspect,inspectedObjectLiteral,isClass,isFunction,isPlainArray,isPlainObject,isString,log,lowerCamelCase,merge,mergeInto,missing,newObjectFromEach,normalizeFieldProps,peek,reverseForEach,success,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Foundation=__webpack_require__(19),Response=__webpack_require__(341),Request=__webpack_require__(339),Filter=__webpack_require__(338),Session=__webpack_require__(335),Config=__webpack_require__(337),PipelineRegistry=__webpack_require__(334),newObjectFromEach=Foundation.newObjectFromEach,compactFlatten=Foundation.compactFlatten,BaseObject=Foundation.BaseObject,reverseForEach=Foundation.reverseForEach,Promise=Foundation.Promise,log=Foundation.log,isPlainObject=Foundation.isPlainObject,inspect=Foundation.inspect,isString=Foundation.isString,isClass=Foundation.isClass,isFunction=Foundation.isFunction,inspect=Foundation.inspect,CommunicationStatus=Foundation.CommunicationStatus,merge=Foundation.merge,isPlainArray=Foundation.isPlainArray,decapitalize=Foundation.decapitalize,defineModule=Foundation.defineModule,Validator=Foundation.Validator,mergeInto=Foundation.mergeInto,arrayToTruthMap=Foundation.arrayToTruthMap,lowerCamelCase=Foundation.lowerCamelCase,peek=Foundation.peek,inspectedObjectLiteral=Foundation.inspectedObjectLiteral,escapeRegExp=Foundation.escapeRegExp,normalizeFieldProps=Validator.normalizeFieldProps,success=CommunicationStatus.success,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,defineModule(module,Pipeline=function(superClass){function Pipeline(_options){this._options=null!=_options?_options:{},Pipeline.__super__.constructor.apply(this,arguments)}var instantiateFilter,noOptions,preprocessFilter;return extend(Pipeline,superClass),Pipeline.register=function(){return this.singletonClass(),PipelineRegistry.register(this)},Pipeline.abstractClass(),Pipeline.postCreateConcreteClass=function(arg){var hotReloaded;return hotReloaded=arg.hotReloaded,hotReloaded||this.register(),this._defineQueryHandlers(),this._initClientApiRequest(),this._initFields(),Pipeline.__super__.constructor.postCreateConcreteClass.apply(this,arguments)},Pipeline.instantiateFilter=instantiateFilter=function(filter){if(isClass(filter))return new filter;if(isFunction(filter))return filter(this);if(filter instanceof Filter)return filter;if(isPlainObject(filter))return new Filter(filter);throw"invalid filter: "+inspect(filter)+" "+(filter instanceof Filter)},Pipeline.extendableProperty({queries:{},filters:[],handlers:{},clientApiMethodList:[],fields:{}}),Pipeline.getAliases=function(){return this._aliases||{}},Pipeline.aliases=function(){return this._aliases=newObjectFromEach(arguments,function(map,k,v){return map[lowerCamelCase(v)]=!0}),this},preprocessFilter=function(filter){var f,i,len,results;if(isPlainArray(filter)){for(results=[],i=0,len=filter.length;i<len;i++)f=filter[i],f&&results.push(instantiateFilter(f));return results}return instantiateFilter(filter)},Pipeline.query=function(queries){return this.extendQueries(queries)},Pipeline.handler=function(handlers){return this.extendHandlers(handlers)},Pipeline.filter=function(filter){return this.extendFilters(preprocessFilter(filter));
},Pipeline.getter({aliases:function(){return Object.keys(this["class"].getAliases())},inspectedObjects:function(){return inspectedObjectLiteral(this.name)},isRemoteClient:function(){return this.remoteServer},remoteServer:function(){var apiRoot,domain,port,protocol,ref,ret;if(this.remoteServerInfo)return ref=this.remoteServerInfo,domain=ref.domain,port=ref.port,apiRoot=ref.apiRoot,protocol=ref.protocol,protocol||(protocol="http"),ret=protocol+"://"+domain,port&&(ret+=":"+port),ret},apiRoot:function(){var r,ref;return(r=null!=(ref=this.remoteServerInfo)?ref.apiRoot:void 0)?"/"+r:""},restPath:function(){return this._restPath||(this._restPath=this.apiRoot+"/"+this.name)},restPathRegex:function(){return this._restPathRegex||(this._restPathRegex=RegExp("^"+escapeRegExp(this.restPath)+"(?:-([a-z0-9_]+))?(?:\\/([-_.a-z0-9]+))?","i"))}}),Pipeline.getter("options",{tableName:function(){return Config.getPrefixedTableName(this.name)},normalizedFields:function(){var k,nf,ref,v;nf={},ref=this.fields;for(k in ref)v=ref[k],nf[k]=normalizeFieldProps(v);return nf}}),Pipeline.getter({name:function(){return this._name||(this._name=this._options.name||decapitalize(this["class"].getName()))},session:function(){return this._session||(this._session=this._options.session||Session.singleton)},handlerRequestTypesMap:function(into){return null==into&&(into={}),mergeInto(into,this.handlers),into},filterRequestTypesMap:function(into){var filter,i,len,ref;for(null==into&&(into={}),ref=this.filters,i=0,len=ref.length;i<len;i++)filter=ref[i],mergeInto(into,filter.beforeFilters);return into},requestTypesMap:function(into){return null==into&&(into={}),this.getHandlerRequestTypesMap(this.getFilterRequestTypesMap(into))},requestTypes:function(){return Object.keys(this.requestTypesMap)},beforeFilters:function(){return this._beforeFilters||(this._beforeFilters=this.filters.slice().reverse())},afterFilters:function(){return this.filters}}),Pipeline.prototype.getBeforeFiltersFor=function(type){var filter,i,len,ref,results;for(ref=this.beforeFilters,results=[],i=0,len=ref.length;i<len;i++)filter=ref[i],filter.getBeforeFilter(type)&&results.push(filter);return results},Pipeline.prototype.getAfterFiltersFor=function(type){var filter,i,len,ref,results;for(ref=this.afterFilters,results=[],i=0,len=ref.length;i<len;i++)filter=ref[i],filter.getAfterFilter(type)&&results.push(filter);return results},Pipeline.prototype.getAutoDefinedQueries=function(){return{}},Pipeline.prototype.getPipelineReport=function(){return{tableName:this.tableName,fields:newObjectFromEach(this.fields,function(fieldProps){return newObjectFromEach(Object.keys(fieldProps).sort(),function(out,index,k){var v;if(v=fieldProps[k],"preprocess"!==k&&"validate"!==k&&"fieldType"!==k)return out[k]=v})}),requests:newObjectFromEach(this.requestTypes,function(_this){return function(type){var filter;return inspectedObjectLiteral(compactFlatten([function(){var i,len,ref,results;for(ref=this.getBeforeFiltersFor(type),results=[],i=0,len=ref.length;i<len;i++)filter=ref[i],results.push(filter.getName());return results}.call(_this),_this.handlers[type]?"["+type+"-handler]":void 0,function(){var i,len,ref,results;for(ref=this.getAfterFiltersFor(type),results=[],i=0,len=ref.length;i<len;i++)filter=ref[i],results.push(filter.getName());return results}.call(_this)]).join(" > "))}}(this))}},Pipeline.prototype.getApiReport=function(options){var server;return null==options&&(options={}),server=options.server,newObjectFromEach(this.requestTypes,function(_this){return function(type){var method,obj,ref,url;return ref=Request.getRestClientParamsForArtEryRequest({server:_this.remoteServer||server,type:type,restPath:_this.restPath}),method=ref.method,url=ref.url,obj={},obj[""+method.toLocaleUpperCase()]=url,obj}}(this))},Pipeline.handlers=Pipeline.extendHandlers,Pipeline._defineQueryHandlers=function(){var k,ref,results,v;ref=this.getQueries(),results=[];for(k in ref)v=ref[k],results.push(this.extendHandlers(k,function(){if(isFunction(v))return v;if(v=v.query,!isFunction(v))throw new Error("query delaration must be a function or have a 'query' property that is a function");return v}()));return results},Pipeline.prototype._applyBeforeFilters=function(request){var applyNextFilter,filterIndex,filters;return filters=this.getBeforeFiltersFor(request.type),filterIndex=0,(applyNextFilter=function(partiallyBeforeFilteredRequest){return partiallyBeforeFilteredRequest.isResponse||filterIndex>=filters.length?Promise.resolve(partiallyBeforeFilteredRequest):filters[filterIndex++].processBefore(partiallyBeforeFilteredRequest).then(function(result){return applyNextFilter(result)})})(request)},Pipeline.prototype._applyHandler=function(request){var handler,message;return request.isResponse?request:this.isRemoteClient&&!request.originatedOnClient?request.sendRemoteRequest(this.remoteServer):(handler=this.handlers[request.type])?(request.addFilterLog(request.type+"-handler"),request.next(handler.call(this,request))):(message="no Handler for request type: "+request.type,log.error(message,{request:request}),request.missing({data:{message:message}}))},Pipeline.prototype._applyAfterFilters=function(response){var applyNextFilter,filterIndex,filters;return filters=this.getAfterFiltersFor(response.type),filterIndex=0,(applyNextFilter=function(partiallyAfterFilteredReponse){return partiallyAfterFilteredReponse.notSuccessful||filterIndex>=filters.length?Promise.resolve(partiallyAfterFilteredReponse):filters[filterIndex++].processAfter(partiallyAfterFilteredReponse).then(function(result){return applyNextFilter(result)})})(response)},Pipeline.prototype._processRequest=function(request){return isPlainObject(request)&&(request=new Request(merge(request,{pipeline:this}))),this._applyBeforeFilters(request).then(function(_this){return function(request){return _this._applyHandler(request)}}(this)).then(function(_this){return function(response){return _this._applyAfterFilters(response)}}(this))["catch"](function(_this){return function(error){return log.error({Pipeline_processRequest:{error:error}}),request.next(error)}}(this))},noOptions={},Pipeline.prototype._processClientRequest=function(type,options){var returnResponseObject;return null==options&&(options=noOptions),returnResponseObject=options.returnResponseObject,isString(options)&&(options={key:options}),this._processRequest(new Request(merge(options,{type:type,pipeline:this,session:this.session.data,sessionSignature:this.session.signature}))).then(function(_this){return function(response){var data,session,sessionSignature,status;if(status=response.status,data=response.data,session=response.session,sessionSignature=response.sessionSignature,status===success)return session&&(_this.session.data=session,_this.session.signature=sessionSignature),returnResponseObject?response:data;throw response}}(this))},Pipeline._clientApiRequest=function(requestType){var base;return indexOf.call(this.getClientApiMethodList(),requestType)<0&&this.extendClientApiMethodList(requestType),(base=this.prototype)[requestType]||(base[requestType]=function(options){return this._processClientRequest(requestType,options)})},Pipeline._initClientApiRequest=function(){var handler,name,ref,results;ref=this.getHandlers(),results=[];for(name in ref)handler=ref[name],results.push(this._clientApiRequest(name));return results},Pipeline._initFields=function(){var filter,i,len,ref,results;for(ref=this.getFilters(),results=[],i=0,len=ref.length;i<len;i++)filter=ref[i],results.push(this.extendFields(filter.fields));return results},Pipeline}(__webpack_require__(336)))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(344)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(345).addModules({ArtEryFluxModel:__webpack_require__(346),ArtEryQueryFluxModel:__webpack_require__(347)})},function(module,exports,__webpack_require__){var Ery,Flux,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Ery=__webpack_require__(331),module.exports=Ery.Flux||Ery.addNamespace("Flux",Flux=function(superClass){function Flux(){return Flux.__super__.constructor.apply(this,arguments)}return extend(Flux,superClass),Flux}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var ArtEry,ArtEryFluxModel,ArtEryQueryFluxModel,CommunicationStatus,Flux,FluxModel,Foundation,Promise,arrayWith,arrayWithElementReplaced,createWithPostCreate,decapitalize,defineModule,eq,failure,fastBind,formattedInspect,inspect,isFunction,isString,log,merge,missing,models,pending,select,success,upperCamelCase,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;if(Foundation=__webpack_require__(19),Flux=Neptune.Art.Flux,!Flux)throw new Error("Neptune.Art.Flux not loaded. Please pre-require Flux or Flux/web_worker.");ArtEry=__webpack_require__(329),ArtEryQueryFluxModel=__webpack_require__(347),log=Foundation.log,CommunicationStatus=Foundation.CommunicationStatus,select=Foundation.select,isString=Foundation.isString,isFunction=Foundation.isFunction,fastBind=Foundation.fastBind,decapitalize=Foundation.decapitalize,merge=Foundation.merge,Promise=Foundation.Promise,eq=Foundation.eq,upperCamelCase=Foundation.upperCamelCase,arrayWith=Foundation.arrayWith,arrayWithElementReplaced=Foundation.arrayWithElementReplaced,formattedInspect=Foundation.formattedInspect,defineModule=Foundation.defineModule,createWithPostCreate=Foundation.createWithPostCreate,inspect=Foundation.inspect,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,success=CommunicationStatus.success,pending=CommunicationStatus.pending,FluxModel=Flux.FluxModel,models=Flux.models,defineModule(module,ArtEryFluxModel=function(superClass){function ArtEryFluxModel(){ArtEryFluxModel.__super__.constructor.apply(this,arguments),this._updateSerializers={},this._pipeline=this["class"]._pipeline,this._queryModels={},this.queries(this._pipeline.queries),this._bindPipelineMethods()}var createModel;return extend(ArtEryFluxModel,superClass),ArtEryFluxModel.abstractClass(),createModel=function(name,pipeline,aliases){var AnonymouseArtErtFluxModel,klass;return klass=createWithPostCreate(AnonymouseArtErtFluxModel=function(superClass1){function AnonymouseArtErtFluxModel(){return AnonymouseArtErtFluxModel.__super__.constructor.apply(this,arguments)}return extend(AnonymouseArtErtFluxModel,superClass1),AnonymouseArtErtFluxModel._name=upperCamelCase(name),AnonymouseArtErtFluxModel.pipeline(pipeline),aliases&&AnonymouseArtErtFluxModel.aliases(aliases),AnonymouseArtErtFluxModel}(ArtEryFluxModel)),klass.singleton},ArtEryFluxModel.defineModelsForAllPipelines=function(){var aliases,name,pipeline,ref,results;ref=ArtEry.pipelines,results=[];for(name in ref)pipeline=ref[name],(aliases=pipeline.aliases)?(name=pipeline.getName(),models[name]?results.push(void 0):results.push(createModel(name,pipeline,aliases))):results.push(createModel(name,pipeline));return results},ArtEryFluxModel.pipeline=function(_pipeline1){return this._pipeline=_pipeline1,this._pipeline},ArtEryFluxModel.prototype._bindPipelineMethods=function(){var abstractPrototype,k,ref,results,v;abstractPrototype=this._pipeline["class"].getAbstractPrototype(),ref=this._pipeline,results=[];for(k in ref)v=ref[k],this[k]||abstractPrototype[k]||!isFunction(v)||results.push(this[k]=fastBind(v,this));return results},ArtEryFluxModel.prototype.keyFromData=function(data){var base,ret;if(ret=("function"==typeof(base=this._pipeline).keyFromData?base.keyFromData(data):void 0)||data.id,!ret)throw new Error("keyFromData: failed to generate a key from: @_pipeline.keyFromData?(data) || data.id)");return ret},ArtEryFluxModel.prototype.keysEqual=function(a,b){return eq(this.keyFromData(a),this.keyFromData(b))},ArtEryFluxModel.prototype.queries=function(map,ignoreAlreadyDefinedWarning){var modelName,options,results;results=[];for(modelName in map)options=map[modelName],results.push(this.defineQuery(modelName,options,ignoreAlreadyDefinedWarning));return results},ArtEryFluxModel.prototype.defineQuery=function(modelName,options,ignoreAlreadyDefinedWarning){var ArtEryQueryFluxModelChild,_pipeline,recordsModel;if(this._queryModels[modelName])return void(ignoreAlreadyDefinedWarning||console.warn("query already defined! "+this.getName()+": "+modelName));if(_pipeline=this._pipeline,recordsModel=this,isFunction(options)&&(options={query:options}),!isFunction(options.query))throw new Error("query required");return this._queryModels[modelName]=new(ArtEryQueryFluxModelChild=function(superClass1){function ArtEryQueryFluxModelChild(){return ArtEryQueryFluxModelChild.__super__.constructor.apply(this,arguments)}var k,v;extend(ArtEryQueryFluxModelChild,superClass1),ArtEryQueryFluxModelChild._name=upperCamelCase(modelName);for(k in options)v=options[k],ArtEryQueryFluxModelChild.prototype[k]=v;return ArtEryQueryFluxModelChild.prototype._pipeline=_pipeline,ArtEryQueryFluxModelChild.prototype._recordsModel=recordsModel,ArtEryQueryFluxModelChild.prototype.query=function(key){return this._pipeline[modelName]({key:key})},ArtEryQueryFluxModelChild}(ArtEryQueryFluxModel))},ArtEryFluxModel.prototype.load=function(key){if(!isString(key))throw new Error("invalid key: "+inspect(key));return this._getUpdateSerializer(key).updateFluxStore(function(_this){return function(){return _this._pipeline.get({key:key})}}(this)),!1},ArtEryFluxModel.prototype.create=function(data){return this._pipeline.create({data:data}).then(function(_this){return function(data){return _this.updateFluxStore(_this.keyFromData(data),{status:success,data:data}),data}}(this))},ArtEryFluxModel.prototype._getUpdateSerializer=function(key){var updateSerializer;return(updateSerializer=this._updateSerializers[key])||(updateSerializer=new Promise.Serializer,updateSerializer.then(function(_this){return function(){var ref;return null!=(ref=_this.fluxStoreGet(key))?ref.data:void 0}}(this)),updateSerializer.updateFluxStore=function(_this){return function(updateFunction){return updateSerializer.then(function(data){return Promise.then(function(){return updateFunction(data)}).then(function(data){return{status:success,data:data}})["catch"](function(e){return data?{status:success,data:data}:{status:e.status}}).then(function(fluxRecord){return _this.updateFluxStore(key,fluxRecord),data})}),updateSerializer}}(this)),updateSerializer.allDonePromise().then(function(_this){return function(accumulatedSuccessfulUpdatesToData){return delete _this._updateSerializers[key]}}(this)),updateSerializer},ArtEryFluxModel.prototype._updateQueries=function(updatedRecord){var modelName,queryModel,ref;ref=this._queryModels;for(modelName in ref)queryModel=ref[modelName],queryModel.localUpdate(updatedRecord);return null},ArtEryFluxModel.prototype.fluxStoreEntryUpdated=function(arg){var dataChanged,fluxRecord,key,previousFluxRecord;if(key=arg.key,fluxRecord=arg.fluxRecord,previousFluxRecord=arg.previousFluxRecord,dataChanged=arg.dataChanged,dataChanged&&fluxRecord.status===success)return this._updateQueries(fluxRecord.data)},ArtEryFluxModel.prototype._optimisticallyUpdateFluxStore=function(key,fieldsToUpdate){return this.updateFluxStore(key,function(_this){return function(oldFluxRecord){return merge(oldFluxRecord,{data:merge(null!=oldFluxRecord?oldFluxRecord.data:void 0,fieldsToUpdate)})}}(this))},ArtEryFluxModel.prototype.update=function(key,updatedFields){if(!isString(key))throw new Error("invalid key: "+inspect(key));return new Promise(function(_this){return function(resolve,reject){return _this._getUpdateSerializer(key).updateFluxStore(function(accumulatedSuccessfulUpdatesToData){var ret;return ret=_this._pipeline.update({key:key,data:updatedFields}).then(function(){return merge(accumulatedSuccessfulUpdatesToData,updatedFields)}),ret.then(resolve,reject),ret})}}(this))},ArtEryFluxModel}(FluxModel))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var ArtEry,ArtEryQueryFluxModel,CommunicationStatus,Flux,FluxModel,Foundation,Promise,arrayWith,arrayWithElementReplaced,decapitalize,defineModule,eq,failure,formattedInspect,isFunction,isString,log,merge,missing,pending,propsEq,select,success,upperCamelCase,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),Flux=Neptune.Art.Flux,ArtEry=__webpack_require__(329),log=Foundation.log,CommunicationStatus=Foundation.CommunicationStatus,select=Foundation.select,isString=Foundation.isString,isFunction=Foundation.isFunction,decapitalize=Foundation.decapitalize,merge=Foundation.merge,Promise=Foundation.Promise,eq=Foundation.eq,upperCamelCase=Foundation.upperCamelCase,arrayWith=Foundation.arrayWith,arrayWithElementReplaced=Foundation.arrayWithElementReplaced,formattedInspect=Foundation.formattedInspect,propsEq=Foundation.propsEq,defineModule=Foundation.defineModule,missing=CommunicationStatus.missing,failure=CommunicationStatus.failure,success=CommunicationStatus.success,pending=CommunicationStatus.pending,FluxModel=Flux.FluxModel,defineModule(module,ArtEryQueryFluxModel=function(superClass){function ArtEryQueryFluxModel(){ArtEryQueryFluxModel.__super__.constructor.call(this,null),this.register()}return extend(ArtEryQueryFluxModel,superClass),ArtEryQueryFluxModel.abstractClass(),ArtEryQueryFluxModel.prototype.loadData=function(key){return Promise.resolve(this.query(key,this.pipeline)).then(function(_this){return function(data){return _this.localSort(data)}}(this))},ArtEryQueryFluxModel.setter("recordsModel pipeline"),ArtEryQueryFluxModel.getter("recordsModel pipeline"),ArtEryQueryFluxModel.prototype.query=function(key){return[]},ArtEryQueryFluxModel.prototype.queryKeyFromRecord=function(record){return""},ArtEryQueryFluxModel.prototype.localSort=function(queryData){return queryData},ArtEryQueryFluxModel.prototype.localMerge=function(previousQueryData,updatedRecordData){var currentRecordData,i,j,len;if(!updatedRecordData)return previousQueryData;if(!((null!=previousQueryData?previousQueryData.length:void 0)>0))return[updatedRecordData];for(i=j=0,len=previousQueryData.length;j<len;i=++j)if(currentRecordData=previousQueryData[i],this.recordsModel.keysEqual(currentRecordData,updatedRecordData))return propsEq(currentRecordData,updatedRecordData)?null:arrayWithElementReplaced(previousQueryData,updatedRecordData,i);return arrayWith(previousQueryData,updatedRecordData)},ArtEryQueryFluxModel.prototype.localUpdate=function(updatedRecordData){var fluxRecord,mergeResult,queryKey;if(updatedRecordData){if(queryKey="function"==typeof this.queryKeyFromRecord?this.queryKeyFromRecord(updatedRecordData):void 0,!isString(queryKey))throw new Error("invalid queryKey from "+formattedInspect(updatedRecordData));if(fluxRecord=this.fluxStoreGet(queryKey))return(mergeResult=this.localMerge(fluxRecord.data,updatedRecordData))?this.updateFluxStore(queryKey,{data:this.localSort(mergeResult)}):void 0}},ArtEryQueryFluxModel}(FluxModel))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(349).addModules({Selected:__webpack_require__(350)})},function(module,exports,__webpack_require__){var App,Models,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;App=__webpack_require__(115),module.exports=App.Models||App.addNamespace("Models",Models=function(superClass){function Models(){return Models.__super__.constructor.apply(this,arguments)}return extend(Models,superClass),Models}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var A,ApplicationState,Selected,arrayWith,compactFlatten,defineModule,log,merge,newObjectFromEach,ref,sendEmail,timeout,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(120),log=ref.log,defineModule=ref.defineModule,arrayWith=ref.arrayWith,ApplicationState=ref.ApplicationState,compactFlatten=ref.compactFlatten,newObjectFromEach=ref.newObjectFromEach,merge=ref.merge,timeout=ref.timeout,A=__webpack_require__(19).Browser.DomElementFactories.A,sendEmail=function(arg){var address,body,link,params,subject;return address=arg.address,subject=arg.subject,body=arg.body,link="mailto:"+(address||""),params=compactFlatten([subject&&"subject="+encodeURIComponent(subject),body&&"body="+encodeURIComponent(body)]),params.length>0&&(link+="?"+params.join("&")),A({href:link,target:"black"}).click()},defineModule(module,Selected=function(superClass){function Selected(){return Selected.__super__.constructor.apply(this,arguments)}return extend(Selected,superClass),Selected.persistant(),Selected.prototype.toggle=function(key){var obj;return this.replaceState(log(this.state[key]?newObjectFromEach(this.state,function(out,k,v){if(v&&k!==key)return out[k]=!0}):merge((obj={},obj[""+key]=!0,obj),this.state)))},Selected.prototype.email=function(){return sendEmail({subject:"Needs and Emotions",body:Object.keys(this.savableState).sort().join("\n")})},Selected}(ApplicationState))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(352).addModules({App:__webpack_require__(353),Button:__webpack_require__(363),CategoryButton:__webpack_require__(358),LeafButton:__webpack_require__(364),ShowMap:__webpack_require__(354)})},function(module,exports,__webpack_require__){var App,Components,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;App=__webpack_require__(115),module.exports=App.Components||App.addNamespace("Components",Components=function(superClass){function Components(){return Components.__super__.constructor.apply(this,arguments)}return extend(Components,superClass),Components}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var App,CanvasElement,Component,Element,FluxComponent,Foundation,Namespace,Nvc,PagingScrollElement,React,RectangleElement,ShowMap,TextElement,defineModule,inspect,log,merge,ref,textStyle,version,w,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),React=__webpack_require__(281),Namespace=__webpack_require__(352),ShowMap=__webpack_require__(354),Nvc=__webpack_require__(355).Nvc,version=__webpack_require__(113).version,ref=__webpack_require__(120),w=ref.w,log=ref.log,inspect=ref.inspect,defineModule=ref.defineModule,merge=ref.merge,CanvasElement=ref.CanvasElement,RectangleElement=ref.RectangleElement,PagingScrollElement=ref.PagingScrollElement,TextElement=ref.TextElement,Element=ref.Element,Component=ref.Component,FluxComponent=ref.FluxComponent,textStyle=Neptune.Nvc.App.Styles.StyleProps.textStyle,defineModule(module,App=function(superClass){function App(){return App.__super__.constructor.apply(this,arguments)}return extend(App,superClass),App.subscriptions("selected.selected"),App.stateFields({canvasSize:null,initialContentSize:null}),App.prototype.ready=function(arg){var target;return target=arg.target,this.canvasSize=target.currentSize},App.prototype.initialContentReady=function(arg){var target;return target=arg.target,this.initialContentSize||(this.initialContentSize=target.currentSize)},App.prototype.render=function(){var canvasSize,initialContentSize,name,ref1,selected,selectedNames;return ref1=this.state,canvasSize=ref1.canvasSize,initialContentSize=ref1.initialContentSize,selectedNames=function(){var ref2,results;ref2=this.selected||{},results=[];for(name in ref2)selected=ref2[name],selected&&results.push(name);return results}.call(this),CanvasElement({canvasId:"artCanvas",childrenLayout:"column"},RectangleElement({inFlow:!1,color:"#f9f9f9"}),PagingScrollElement({startAtEnd:!0},Element({size:{ww:1,hch:1},padding:5,childrenLayout:"column"},TextElement({size:{ww:1,hch:1},align:"center",fontFamily:"arial",color:"#0004",padding:10,text:"Needs and Emotions v"+version+" by Shane Brinkman-Davis Delamore"}),ShowMap({path:[],map:merge(Nvc.core,selectedNames.length>0&&{selected:selectedNames})}))))},App}(FluxComponent))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Atomic,Button,CanvasElement,CategoryButton,Component,Element,FillElement,FluxComponent,Foundation,LeafButton,Nvc,OutlineElement,React,RectangleElement,StyleProps,TextElement,arrayWith,capitalize,createComponentFactory,createFluxComponentFactory,createWithPostCreate,defineModule,eq,inspect,isPlainObject,log,peek,point,ref,textStyle,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),React=__webpack_require__(281),Atomic=__webpack_require__(125),Nvc=__webpack_require__(355).Nvc,ref=__webpack_require__(302),createFluxComponentFactory=ref.createFluxComponentFactory,FluxComponent=ref.FluxComponent,point=Atomic.point,arrayWith=Foundation.arrayWith,defineModule=Foundation.defineModule,log=Foundation.log,inspect=Foundation.inspect,isPlainObject=Foundation.isPlainObject,capitalize=Foundation.capitalize,peek=Foundation.peek,arrayWith=Foundation.arrayWith,eq=Foundation.eq,createWithPostCreate=Foundation.createWithPostCreate,createComponentFactory=React.createComponentFactory,Component=React.Component,Element=React.Element,CanvasElement=React.CanvasElement,RectangleElement=React.RectangleElement,TextElement=React.TextElement,OutlineElement=React.OutlineElement,FillElement=React.FillElement,CategoryButton=__webpack_require__(358),LeafButton=__webpack_require__(364),Button=__webpack_require__(363),StyleProps=Neptune.Nvc.App.Styles.StyleProps,textStyle=StyleProps.textStyle,Nvc=__webpack_require__(355).Nvc,defineModule(module,function(){var SubMap,SubMapFactory;return SubMapFactory=createWithPostCreate(SubMap=function(superClass){function SubMap(){return SubMap.__super__.constructor.apply(this,arguments)}return extend(SubMap,superClass),SubMap.stateFields({subKey:null}),SubMap.prototype.drillIn=function(subKey1){this.subKey=subKey1},SubMap.prototype.render=function(){var axisTypes,k,key,map,name,path,ref1,subKey,subMap,v;return ref1=this.props,map=ref1.map,key=ref1.key,path=ref1.path,subKey=this.subKey,subMap=map[subKey],axisTypes={left:point(1,0),right:point(-1,0)},Element({size:{ww:1,hch:1},clip:!0,childrenLayout:"column",animators:{size:{voidValue:{ww:1,h:0}}}},Element({size:{ww:1,hch:1},cacheDraw:!0,childrenLayout:"column",margin:10},path.length>=1&&RectangleElement({color:"#0001",margin:10,size:{ww:1,h:2}}),Element({size:{ww:1,hch:1},childrenAlignment:"bottomCenter",childrenLayout:"flow"},function(){var i,len,ref2,results;if(isPlainObject(map)){for(ref2=Object.keys(map).sort(),results=[],i=0,len=ref2.length;i<len;i++)k=ref2[i],v=map[k],results.push(CategoryButton({key:k,category:k,subMap:v,selected:k===subKey,drillIn:this.drillIn}));return results}return log({key:key}),[key.match(/selected/)?Element({size:{ww:1,hch:1},childrenLayout:"row",childrenAlignment:"center"},Button({text:"email list",action:this.models.selected.email,size:{ww:1,hch:1}})):void 0,function(){var j,len1,ref3,results1;for(ref3=map.sort(),results1=[],j=0,len1=ref3.length;j<len1;j++)name=ref3[j],results1.push(LeafButton({key:name,name:name,parentName:key,path:path}));return results1}()]}.call(this))),subMap&&SubMapFactory({key:"subMap:"+subKey,map:subMap,path:arrayWith(path,subKey)}))},SubMap}(FluxComponent))})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(356).addModules({Nvc:__webpack_require__(357)})},function(module,exports,__webpack_require__){var App,Data,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;App=__webpack_require__(115),module.exports=App.Data||App.addNamespace("Data",Data=function(superClass){function Data(){return Data.__super__.constructor.apply(this,arguments)}return extend(Data,superClass),Data}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var Foundation,HotStyleProps,Nvc,arrayToFalseMap,deepMap,defineModule,log,sbdNeedsList,splitOnLines,wordsArray,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Foundation=__webpack_require__(19),HotStyleProps=__webpack_require__(281).HotStyleProps,defineModule=Foundation.defineModule,log=Foundation.log,arrayToFalseMap=Foundation.arrayToFalseMap,wordsArray=Foundation.wordsArray,deepMap=Foundation.deepMap,splitOnLines=function(str){return str.split("\n")},sbdNeedsList={surviving:{body:{sustanence:"air, food, water",health:"wellbeing, wellness, healing, regeneration, rejuvenation",energy:"rest, restoration, sleep, vitality"},environment:"temperature, humidity, atmosphere, clothing, shelter","physical-safety":"violence, accidents, illness, disasters",security:"stability predictability sustainability",procreation:"sexual-release children"},thriving:{pleasure:{senses:"sight-beauty smell-fragrance touch-texture sound-music taste-food-drink",body:"eroticisim, exercise, fitness, movement, dance, sex",variety:"newness, novelty",comfort:"quiet, space, sanctuary, ergonomics, leisure, time"},play:"adventure, excitement, fantasy, fun, humor, joy, laughter",social:{bonding:{sharing:"experiences, interests, values",physical:"embracing touch hug sexual-connection",closeness:"openness communication, communion, companionship, friendship, intimacy, free-to-be-oneself",mutuality:"partnership, balance"},community:{belonging:"accepted, acknowledged, included, equal",participation:"collaboration, cooperation, service, sharing",appriciation:"valued, recognized, wanted"},reciprocity:{nurturing:"care, feedback, help, kindness, support, affection",understanding:"listening, empathy, knowing, seeing, respect",compassion:"attention, consideration, forgiveness, presence, respect, tenderness, vulnerability, love"},"social-safety":"consistency, honesty, justice, reassurance, trust privacy"}},transcending:{"self-acceptance":"allowing, approval, empathy, love, compassion, caring honesty, trust","self-awareness":"consciousness, discovery, knowledge","self-growth":"evolution, integration, development, improvement",
"self-expression":"creativity, creation, imagination, invention, innovation, actualization, realization","self-respect":"responsiblity, authenticity, courageousness, dignity, honorablity, honesty, integrity, worthiness",autonomy:"challenge, choice, empowerment, enablement, flexibility, freedom, intention, liberty, limitless, possibility, potential, responsibility",engagement:"flow, gratitude, practice, mindfulness",mastery:"competent, effective, efficient, skillfull, masterful, improving",meaning:"perspective, learning, awareness, celebration, depth, discovery, exploration, legacy, spirituality",peace:"ease, balance, clarity, faith, grace, harmony, hope, order, structure, tranquility, beauty, unity, oneness",purpose:"contribution, dedication, dreams, enrichment, impact, importance, inspiration, to-matter, passion, significance, vision"}},defineModule(module,Nvc=function(superClass){function Nvc(){return Nvc.__super__.constructor.apply(this,arguments)}return extend(Nvc,superClass),Nvc.categories=["needs","posEmotions","negEmotions"],Nvc.needs=deepMap(sbdNeedsList,function(el){return el.match(/[-_0-9a-z]+/gi)}),Nvc.nvcNeeds={"connection a-h":wordsArray("acceptance\naffection\nappreciation\nbelonging\ncooperation\ncommunication\ncloseness\ncommunity\ncompanionship\ncompassion\nconsideration\nconsistency\nempathy"),"connection i-z":wordsArray("inclusion\nintimacy\nlove\nmutuality\nnurturing\nrespect\nself-respect\nsafety\nsecurity\nstability\nsupport\nto know\nto be known\nto see\nto be seen\nto understand\nto be understood\ntrust\nwarmth"),"physical well being":wordsArray("air\nfood\nmovement/exercise\nrest/sleep\nsexual expression\nsafety\nshelter\ntouch\nwater"),honesty:wordsArray("authenticity\nintegrity\npresence"),play:wordsArray("joy\nhumor"),peace:wordsArray("beauty\ncommunion\nease\nequality\nharmony\ninspiration\norder"),autonomy:wordsArray("choice\nfreedom\nindependence\nspace\nspontaneity"),meaning:wordsArray("awareness\ncelebration of life\nchallenge\nclarity\ncompetence\nconsciousness\ncontribution\ncreativity\ndiscovery\nefficacy\neffectiveness\ngrowth\nhope\nlearning\nmourning\nparticipation\npurpose\nself-expression\nstimulation\nto matter\nunderstanding")},Nvc.posEmotions={affectionate:wordsArray("compassionate\nfriendly\nloving\nopen-hearted\nsympathetic\ntender\nwarm"),engaged:wordsArray("absorbed\nalert\ncurious\nengrossed\nenchanted\nentranced\nfascinated\ninterested\nintrigued\ninvolved\nspellbound\nstimulated"),hopeful:wordsArray("expectant\nencouraged\noptimistic"),confident:wordsArray("empowered\nopen\nproud\nsafe\nsecure"),excited:wordsArray("amazed\nanimated\nardent\naroused\nastonished\ndazzled\neager\nenergetic\nenthusiastic\ngiddy\ninvigorated\nlively\npassionate\nsurprised\nvibrant"),grateful:wordsArray("appreciative\nmoved\nthankful\ntouched"),inspired:wordsArray("amazed\nawed\nwonder"),joyful:wordsArray("amused\ndelighted\nglad\nhappy\njubilant\npleased\ntickled"),exhilarated:wordsArray("blissful\necstatic\nelated\nenthralled\nexuberant\nradiant\nrapturous\nthrilled"),peaceful:wordsArray("calm\nclear-headed\ncomfortable\ncentered\ncontent\nequanimous\nfulfilled\nmellow\nquiet\nrelaxed\nrelieved\nsatisfied\nserene\nstill\ntranquil\ntrusting")},Nvc.negEmotions={afraid:wordsArray("apprehensive\ndread\nforeboding\nfrightened\nmistrustful\npanicked\npetrified\nscared\nsuspicious\nterrified\nwary\nworried"),annoyed:wordsArray("aggravated\ndismayed\ndisgruntled\ndispleased\nexasperated\nfrustrated\nimpatient\nirritated\nirked"),angry:wordsArray("enraged\nfurious\nincensed\nindignant\nirate\nlivid\noutraged\nresentful"),aversion:wordsArray("animosity\nappalled\ncontempt\ndisgusted\ndislike\nhate\nhorrified\nhostile\nrepulsed"),confused:wordsArray("ambivalent\nbaffled\nbewildered\ndazed\nhesitant\nlost\nmystified\nperplexed\npuzzled\ntorn"),disconnected:wordsArray("alienated\naloof\napathetic\nbored\ncold\ndetached\ndistant\ndistracted\nindifferent\nnumb\nremoved\nuninterested\nwithdrawn"),disquiet:wordsArray("agitated\nalarmed\ndiscombobulated\ndisconcerted\ndisturbed\nperturbed\nrattled\nrestless\nshocked\nstartled\nsurprised\ntroubled\nturbulent\nturmoil\nuncomfortable\nuneasy\nunnerved\nunsettled\nupset"),embarrassed:wordsArray("ashamed\nchagrined\nflustered\nguilty\nmortified\nself-conscious"),fatigue:wordsArray("beat\nburnt-out\ndepleted\nexhausted\nlethargic\nlistless\nsleepy\ntired\nweary\nworn-out"),pain:wordsArray("agony\nanguished\nbereaved\ndevastated\ngrief\nheartbroken\nhurt\nlonely\nmiserable\nregretful\nremorseful"),sad:wordsArray("depressed\ndejected\ndespair\ndespondent\ndisappointed\ndiscouraged\ndisheartened\nforlorn\ngloomy\nheavy-hearted\nhopeless\nmelancholy\nunhappy\nwretched"),tense:wordsArray("anxious\ncranky\ndistressed\ndistraught\nedgy\nfidgety\nfrazzled\nirritable\njittery\nnervous\noverwhelmed\nrestless\nstressed out"),vulnerable:wordsArray("fragile\nguarded\nhelpless\ninsecure\nleery\nreserved\nsensitive\nshaky"),yearning:wordsArray("envious\njealous\nlonging\nnostalgic\npining\nwistful")},Nvc.core={needs:Nvc.needs,posEmotions:Nvc.posEmotions,negEmotions:Nvc.negEmotions},Nvc}(HotStyleProps))}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Button,Component,Element,FillElement,PointerActionsMixin,RectangleElement,StyleProps,TextElement,defineModule,log,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(120),defineModule=ref.defineModule,Component=ref.Component,Element=ref.Element,TextElement=ref.TextElement,FillElement=ref.FillElement,RectangleElement=ref.RectangleElement,log=ref.log,StyleProps=Neptune.Nvc.App.Styles.StyleProps,PointerActionsMixin=__webpack_require__(359).PointerActionsMixin,Button=__webpack_require__(363),defineModule(module,function(){var CategoryButton,emojiMap,subtextMap;return emojiMap={needs:"",negEmotions:"",posEmotions:"",selected:""},subtextMap={needs:"needs",negEmotions:"emotions",posEmotions:"emotions",surviving:"animal",thriving:"mamal",transcending:"human",selected:"my selection"},CategoryButton=function(superClass){function CategoryButton(){return CategoryButton.__super__.constructor.apply(this,arguments)}return extend(CategoryButton,superClass),CategoryButton.prototype.doAction=function(){var category,drillIn,ref1,subMap;if(ref1=this.props,category=ref1.category,subMap=ref1.subMap,drillIn=ref1.drillIn,subMap)return drillIn(category,subMap)},CategoryButton.prototype.render=function(){var category,ref1,selected;return ref1=this.props,category=ref1.category,selected=ref1.selected,Button({selected:selected,color:StyleProps.primaryColor,emoji:emojiMap[category],text:category,subtext:subtextMap[category],action:this.doAction})},CategoryButton}(Component)})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(360)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(361).addModules({PointerActionsMixin:__webpack_require__(362)})},function(module,exports,__webpack_require__){var Mixins,React,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;React=__webpack_require__(284),module.exports=React.Mixins||React.addNamespace("Mixins",Mixins=function(superClass){function Mixins(){return Mixins.__super__.constructor.apply(this,arguments)}return extend(Mixins,superClass),Mixins}(Neptune.Base))},function(module,exports,__webpack_require__){(function(module){var defineModule,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;(defineModule=__webpack_require__(19).defineModule)(module,function(){return function(superClass){var PointerActionsMixin;return PointerActionsMixin=function(superClass1){function PointerActionsMixin(){return PointerActionsMixin.__super__.constructor.apply(this,arguments)}return extend(PointerActionsMixin,superClass1),PointerActionsMixin.stateFields({hover:!1,pointerIsDown:!1}),PointerActionsMixin.prototype.mouseIn=function(){return this.setState({hover:!0})},PointerActionsMixin.prototype.mouseOut=function(){return this.setState({hover:!1})},PointerActionsMixin.prototype.pointerDown=function(){return this.setState({pointerIsDown:!0})},PointerActionsMixin.prototype.pointerUp=function(){return this.setState({pointerIsDown:!1})},PointerActionsMixin.getter({buttonHandlers:function(){return{mouseIn:this.mouseIn,mouseOut:this.mouseOut,pointerDown:this.pointerDown,pointerIn:this.pointerDown,pointerUp:this.pointerUp,pointerCancel:this.pointerUp,pointerOut:this.pointerUp,pointerUpInside:this.doAction}},hoverHandlers:function(){return{mouseIn:this.mouseIn,mouseOut:this.mouseOut}}}),PointerActionsMixin}(superClass)}})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Component,Element,FillElement,PointerActionsMixin,RectangleElement,StyleProps,TextElement,defineModule,log,ref,rgbColor,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;ref=__webpack_require__(120),defineModule=ref.defineModule,Component=ref.Component,Element=ref.Element,TextElement=ref.TextElement,FillElement=ref.FillElement,RectangleElement=ref.RectangleElement,log=ref.log,rgbColor=ref.rgbColor,PointerActionsMixin=__webpack_require__(359).PointerActionsMixin,StyleProps=Neptune.Nvc.App.Styles.StyleProps,defineModule(module,function(){var Button;return Button=function(superClass){function Button(){return Button.__super__.constructor.apply(this,arguments)}return extend(Button,superClass),Button.prototype.doAction=function(){var ref1;return null!=(ref1=this.props)?ref1.action():void 0},Button.prototype.render=function(){var color,emoji,ref1,selected,small,subtext,text;return ref1=this.props,text=ref1.text,subtext=ref1.subtext,emoji=ref1.emoji,selected=ref1.selected,color=ref1.color,small=ref1.small,color=rgbColor(color),color=function(){switch(!1){case!selected:return color;case!this.pointerIsDown:return color.blend("white",.5);default:return"white"}}.call(this),Element({size:{wcw:1,hch:1},cursor:"pointer",on:this.buttonHandlers,animators:{size:{toFrom:{hch:1,w:0}}},clip:!0},RectangleElement({inFlow:!1,color:color,animators:{color:{},shadow:{duration:.3}},padding:3,radius:small?100:2,shadow:this.pointerIsDown||selected&&!this.hover?{blur:4,color:"#0002",offset:{y:1}}:this.hover?{blur:12,color:"#0004",offset:{y:2}}:{blur:8,color:"#0002",offset:{y:2}}}),emoji?Element({size:100,padding:18},TextElement({text:emoji,location:{ps:.5},axis:"centerCenter",scale:function(ps,cs){return ps.div(cs).min()},layoutMode:"tight",fontSize:64})):TextElement(StyleProps.textStyle,{size:{cs:1},align:"centerCenter",text:text,padding:small?15:20}),subtext&&TextElement(StyleProps.textStyle,{fontSize:10,location:{ww:.5,yh:1,y:-8},size:{cs:1},axis:"bottomCenter",text:subtext}))},Button}(PointerActionsMixin(Component))})}).call(exports,__webpack_require__(93)(module))},function(module,exports,__webpack_require__){(function(module){var Button,Element,FillElement,FluxComponent,PointerActionsMixin,RectangleElement,StyleProps,TextElement,defineModule,log,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;ref=__webpack_require__(120),defineModule=ref.defineModule,FluxComponent=ref.FluxComponent,Element=ref.Element,TextElement=ref.TextElement,FillElement=ref.FillElement,RectangleElement=ref.RectangleElement,log=ref.log,StyleProps=Neptune.Nvc.App.Styles.StyleProps,PointerActionsMixin=__webpack_require__(359).PointerActionsMixin,Button=__webpack_require__(363),defineModule(module,function(){var LeafButton;return LeafButton=function(superClass){function LeafButton(){return LeafButton.__super__.constructor.apply(this,arguments)}var getSelectedKey;return extend(LeafButton,superClass),LeafButton.subscriptions({selected:getSelectedKey=function(arg){var name,path;return name=arg.name,path=arg.path,"selected"!==path[0]?path.join(" > ")+" > "+name:name}}),LeafButton.prototype.action=function(){return this.models.selected.toggle(getSelectedKey(this.props))},LeafButton.prototype.render=function(){var first,i,last,middle,name,parentName,ref1,ref2,secondToLast;return ref1=this.props,name=ref1.name,parentName=ref1.parentName,name.match(/\ >\ /)&&(ref2=name.split(" > "),first=ref2[0],middle=4<=ref2.length?slice.call(ref2,1,i=ref2.length-2):(i=1,[]),secondToLast=ref2[i++],last=ref2[i++],first=function(){switch(first){case"needs":return"";case"negEmotions":return"";case"posEmotions":return"";default:return first}}(),name=first+" "+secondToLast+" > "+last),Button({color:StyleProps.leafColor,text:name,small:!0,selected:this.selected,action:this.action})},LeafButton}(PointerActionsMixin(FluxComponent))})}).call(exports,__webpack_require__(93)(module))}]);
